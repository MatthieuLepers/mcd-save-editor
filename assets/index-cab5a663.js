var M_=Object.defineProperty;var P_=(n,e,t)=>e in n?M_(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var qt=(n,e,t)=>(P_(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();/**
* @vue/shared v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Am(n,e){const t=new Set(n.split(","));return e?i=>t.has(i.toLowerCase()):i=>t.has(i)}const bt={},ya=[],ur=()=>{},T_=()=>!1,Gu=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),km=n=>n.startsWith("onUpdate:"),Cn=Object.assign,Dm=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},I_=Object.prototype.hasOwnProperty,lt=(n,e)=>I_.call(n,e),$e=Array.isArray,ba=n=>Ku(n)==="[object Map]",ub=n=>Ku(n)==="[object Set]",Ge=n=>typeof n=="function",rn=n=>typeof n=="string",ds=n=>typeof n=="symbol",$t=n=>n!==null&&typeof n=="object",db=n=>($t(n)||Ge(n))&&Ge(n.then)&&Ge(n.catch),hb=Object.prototype.toString,Ku=n=>hb.call(n),O_=n=>Ku(n).slice(8,-1),fb=n=>Ku(n)==="[object Object]",Mm=n=>rn(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,ko=Am(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Yu=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},N_=/-(\w)/g,_r=Yu(n=>n.replace(N_,(e,t)=>t?t.toUpperCase():"")),F_=/\B([A-Z])/g,hs=Yu(n=>n.replace(F_,"-$1").toLowerCase()),Qu=Yu(n=>n.charAt(0).toUpperCase()+n.slice(1)),Nd=Yu(n=>n?`on${Qu(n)}`:""),Yn=(n,e)=>!Object.is(n,e),Ac=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},mb=(n,e,t,i=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:i,value:t})},Vh=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let cg;const pb=()=>cg||(cg=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Xu(n){if($e(n)){const e={};for(let t=0;t<n.length;t++){const i=n[t],r=rn(i)?q_(i):Xu(i);if(r)for(const s in r)e[s]=r[s]}return e}else if(rn(n)||$t(n))return n}const L_=/;(?![^(]*\))/g,B_=/:([^]+)/,$_=/\/\*[^]*?\*\//g;function q_(n){const e={};return n.replace($_,"").split(L_).forEach(t=>{if(t){const i=t.split(B_);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function _e(n){let e="";if(rn(n))e=n;else if($e(n))for(let t=0;t<n.length;t++){const i=_e(n[t]);i&&(e+=i+" ")}else if($t(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const U_="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",H_=Am(U_);function gb(n){return!!n||n===""}const vb=n=>!!(n&&n.__v_isRef===!0),pe=n=>rn(n)?n:n==null?"":$e(n)||$t(n)&&(n.toString===hb||!Ge(n.toString))?vb(n)?pe(n.value):JSON.stringify(n,yb,2):String(n),yb=(n,e)=>vb(e)?yb(n,e.value):ba(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,r],s)=>(t[Fd(i,s)+" =>"]=r,t),{})}:ub(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Fd(t))}:ds(e)?Fd(e):$t(e)&&!$e(e)&&!fb(e)?String(e):e,Fd=(n,e="")=>{var t;return ds(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Dr;class bb{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Dr,!e&&Dr&&(this.index=(Dr.scopes||(Dr.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=Dr;try{return Dr=this,e()}finally{Dr=t}}}on(){Dr=this}off(){Dr=this.parent}stop(e){if(this._active){let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function V_(n){return new bb(n)}function j_(n,e=Dr){e&&e.active&&e.effects.push(n)}function W_(){return Dr}let Ls;class Pm{constructor(e,t,i,r){this.fn=e,this.trigger=t,this.scheduler=i,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,j_(this,r)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,fs();for(let e=0;e<this._depsLength;e++){const t=this.deps[e];if(t.computed&&(z_(t.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),ms()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=Zi,t=Ls;try{return Zi=!0,Ls=this,this._runnings++,ug(this),this.fn()}finally{dg(this),this._runnings--,Ls=t,Zi=e}}stop(){this.active&&(ug(this),dg(this),this.onStop&&this.onStop(),this.active=!1)}}function z_(n){return n.value}function ug(n){n._trackId++,n._depsLength=0}function dg(n){if(n.deps.length>n._depsLength){for(let e=n._depsLength;e<n.deps.length;e++)Eb(n.deps[e],n);n.deps.length=n._depsLength}}function Eb(n,e){const t=n.get(e);t!==void 0&&e._trackId!==t&&(n.delete(e),n.size===0&&n.cleanup())}let Zi=!0,jh=0;const wb=[];function fs(){wb.push(Zi),Zi=!1}function ms(){const n=wb.pop();Zi=n===void 0?!0:n}function Tm(){jh++}function Im(){for(jh--;!jh&&Wh.length;)Wh.shift()()}function Cb(n,e,t){if(e.get(n)!==n._trackId){e.set(n,n._trackId);const i=n.deps[n._depsLength];i!==e?(i&&Eb(i,n),n.deps[n._depsLength++]=e):n._depsLength++}}const Wh=[];function Sb(n,e,t){Tm();for(const i of n.keys()){let r;i._dirtyLevel<e&&(r??(r=n.get(i)===i._trackId))&&(i._shouldSchedule||(i._shouldSchedule=i._dirtyLevel===0),i._dirtyLevel=e),i._shouldSchedule&&(r??(r=n.get(i)===i._trackId))&&(i.trigger(),(!i._runnings||i.allowRecurse)&&i._dirtyLevel!==2&&(i._shouldSchedule=!1,i.scheduler&&Wh.push(i.scheduler)))}Im()}const _b=(n,e)=>{const t=new Map;return t.cleanup=n,t.computed=e,t},zh=new WeakMap,Bs=Symbol(""),Gh=Symbol("");function tr(n,e,t){if(Zi&&Ls){let i=zh.get(n);i||zh.set(n,i=new Map);let r=i.get(t);r||i.set(t,r=_b(()=>i.delete(t))),Cb(Ls,r)}}function wi(n,e,t,i,r,s){const a=zh.get(n);if(!a)return;let o=[];if(e==="clear")o=[...a.values()];else if(t==="length"&&$e(n)){const l=Number(i);a.forEach((c,u)=>{(u==="length"||!ds(u)&&u>=l)&&o.push(c)})}else switch(t!==void 0&&o.push(a.get(t)),e){case"add":$e(n)?Mm(t)&&o.push(a.get("length")):(o.push(a.get(Bs)),ba(n)&&o.push(a.get(Gh)));break;case"delete":$e(n)||(o.push(a.get(Bs)),ba(n)&&o.push(a.get(Gh)));break;case"set":ba(n)&&o.push(a.get(Bs));break}Tm();for(const l of o)l&&Sb(l,4);Im()}const G_=Am("__proto__,__v_isRef,__isVue"),xb=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(ds)),hg=K_();function K_(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...t){const i=gt(this);for(let s=0,a=this.length;s<a;s++)tr(i,"get",s+"");const r=i[e](...t);return r===-1||r===!1?i[e](...t.map(gt)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...t){fs(),Tm();const i=gt(this)[e].apply(this,t);return Im(),ms(),i}}),n}function Y_(n){ds(n)||(n=String(n));const e=gt(this);return tr(e,"has",n),e.hasOwnProperty(n)}class Rb{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,i){const r=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!r;if(t==="__v_isReadonly")return r;if(t==="__v_isShallow")return s;if(t==="__v_raw")return i===(r?s?lx:Mb:s?Db:kb).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const a=$e(e);if(!r){if(a&&lt(hg,t))return Reflect.get(hg,t,i);if(t==="hasOwnProperty")return Y_}const o=Reflect.get(e,t,i);return(ds(t)?xb.has(t):G_(t))||(r||tr(e,"get",t),s)?o:jn(o)?a&&Mm(t)?o:o.value:$t(o)?r?Tb(o):it(o):o}}class Ab extends Rb{constructor(e=!1){super(!1,e)}set(e,t,i,r){let s=e[t];if(!this._isShallow){const l=Vs(s);if(!Pa(i)&&!Vs(i)&&(s=gt(s),i=gt(i)),!$e(e)&&jn(s)&&!jn(i))return l?!1:(s.value=i,!0)}const a=$e(e)&&Mm(t)?Number(t)<e.length:lt(e,t),o=Reflect.set(e,t,i,r);return e===gt(r)&&(a?Yn(i,s)&&wi(e,"set",t,i):wi(e,"add",t,i)),o}deleteProperty(e,t){const i=lt(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&i&&wi(e,"delete",t,void 0),r}has(e,t){const i=Reflect.has(e,t);return(!ds(t)||!xb.has(t))&&tr(e,"has",t),i}ownKeys(e){return tr(e,"iterate",$e(e)?"length":Bs),Reflect.ownKeys(e)}}class Q_ extends Rb{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const X_=new Ab,J_=new Q_,Z_=new Ab(!0);const Om=n=>n,Ju=n=>Reflect.getPrototypeOf(n);function Ul(n,e,t=!1,i=!1){n=n.__v_raw;const r=gt(n),s=gt(e);t||(Yn(e,s)&&tr(r,"get",e),tr(r,"get",s));const{has:a}=Ju(r),o=i?Om:t?Lm:Go;if(a.call(r,e))return o(n.get(e));if(a.call(r,s))return o(n.get(s));n!==r&&n.get(e)}function Hl(n,e=!1){const t=this.__v_raw,i=gt(t),r=gt(n);return e||(Yn(n,r)&&tr(i,"has",n),tr(i,"has",r)),n===r?t.has(n):t.has(n)||t.has(r)}function Vl(n,e=!1){return n=n.__v_raw,!e&&tr(gt(n),"iterate",Bs),Reflect.get(n,"size",n)}function fg(n,e=!1){!e&&!Pa(n)&&!Vs(n)&&(n=gt(n));const t=gt(this);return Ju(t).has.call(t,n)||(t.add(n),wi(t,"add",n,n)),this}function mg(n,e,t=!1){!t&&!Pa(e)&&!Vs(e)&&(e=gt(e));const i=gt(this),{has:r,get:s}=Ju(i);let a=r.call(i,n);a||(n=gt(n),a=r.call(i,n));const o=s.call(i,n);return i.set(n,e),a?Yn(e,o)&&wi(i,"set",n,e):wi(i,"add",n,e),this}function pg(n){const e=gt(this),{has:t,get:i}=Ju(e);let r=t.call(e,n);r||(n=gt(n),r=t.call(e,n)),i&&i.call(e,n);const s=e.delete(n);return r&&wi(e,"delete",n,void 0),s}function gg(){const n=gt(this),e=n.size!==0,t=n.clear();return e&&wi(n,"clear",void 0,void 0),t}function jl(n,e){return function(i,r){const s=this,a=s.__v_raw,o=gt(a),l=e?Om:n?Lm:Go;return!n&&tr(o,"iterate",Bs),a.forEach((c,u)=>i.call(r,l(c),l(u),s))}}function Wl(n,e,t){return function(...i){const r=this.__v_raw,s=gt(r),a=ba(s),o=n==="entries"||n===Symbol.iterator&&a,l=n==="keys"&&a,c=r[n](...i),u=t?Om:e?Lm:Go;return!e&&tr(s,"iterate",l?Gh:Bs),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:o?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function Ni(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function ex(){const n={get(s){return Ul(this,s)},get size(){return Vl(this)},has:Hl,add:fg,set:mg,delete:pg,clear:gg,forEach:jl(!1,!1)},e={get(s){return Ul(this,s,!1,!0)},get size(){return Vl(this)},has:Hl,add(s){return fg.call(this,s,!0)},set(s,a){return mg.call(this,s,a,!0)},delete:pg,clear:gg,forEach:jl(!1,!0)},t={get(s){return Ul(this,s,!0)},get size(){return Vl(this,!0)},has(s){return Hl.call(this,s,!0)},add:Ni("add"),set:Ni("set"),delete:Ni("delete"),clear:Ni("clear"),forEach:jl(!0,!1)},i={get(s){return Ul(this,s,!0,!0)},get size(){return Vl(this,!0)},has(s){return Hl.call(this,s,!0)},add:Ni("add"),set:Ni("set"),delete:Ni("delete"),clear:Ni("clear"),forEach:jl(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Wl(s,!1,!1),t[s]=Wl(s,!0,!1),e[s]=Wl(s,!1,!0),i[s]=Wl(s,!0,!0)}),[n,t,e,i]}const[tx,nx,rx,ix]=ex();function Nm(n,e){const t=e?n?ix:rx:n?nx:tx;return(i,r,s)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?i:Reflect.get(lt(t,r)&&r in i?t:i,r,s)}const sx={get:Nm(!1,!1)},ax={get:Nm(!1,!0)},ox={get:Nm(!0,!1)};const kb=new WeakMap,Db=new WeakMap,Mb=new WeakMap,lx=new WeakMap;function cx(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ux(n){return n.__v_skip||!Object.isExtensible(n)?0:cx(O_(n))}function it(n){return Vs(n)?n:Fm(n,!1,X_,sx,kb)}function Pb(n){return Fm(n,!1,Z_,ax,Db)}function Tb(n){return Fm(n,!0,J_,ox,Mb)}function Fm(n,e,t,i,r){if(!$t(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=r.get(n);if(s)return s;const a=ux(n);if(a===0)return n;const o=new Proxy(n,a===2?i:t);return r.set(n,o),o}function Do(n){return Vs(n)?Do(n.__v_raw):!!(n&&n.__v_isReactive)}function Vs(n){return!!(n&&n.__v_isReadonly)}function Pa(n){return!!(n&&n.__v_isShallow)}function Ib(n){return n?!!n.__v_raw:!1}function gt(n){const e=n&&n.__v_raw;return e?gt(e):n}function dx(n){return Object.isExtensible(n)&&mb(n,"__v_skip",!0),n}const Go=n=>$t(n)?it(n):n,Lm=n=>$t(n)?Tb(n):n;class Ob{constructor(e,t,i,r){this.getter=e,this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Pm(()=>e(this._value),()=>Mo(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const e=gt(this);return(!e._cacheable||e.effect.dirty)&&Yn(e._value,e._value=e.effect.run())&&Mo(e,4),Bm(e),e.effect._dirtyLevel>=2&&Mo(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function hx(n,e,t=!1){let i,r;const s=Ge(n);return s?(i=n,r=ur):(i=n.get,r=n.set),new Ob(i,r,s||!r,t)}function Bm(n){var e;Zi&&Ls&&(n=gt(n),Cb(Ls,(e=n.dep)!=null?e:n.dep=_b(()=>n.dep=void 0,n instanceof Ob?n:void 0)))}function Mo(n,e=4,t,i){n=gt(n);const r=n.dep;r&&Sb(r,e)}function jn(n){return!!(n&&n.__v_isRef===!0)}function Dn(n){return Nb(n,!1)}function Ea(n){return Nb(n,!0)}function Nb(n,e){return jn(n)?n:new fx(n,e)}class fx{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:gt(e),this._value=t?e:Go(e)}get value(){return Bm(this),this._value}set value(e){const t=this.__v_isShallow||Pa(e)||Vs(e);e=t?e:gt(e),Yn(e,this._rawValue)&&(this._rawValue,this._rawValue=e,this._value=t?e:Go(e),Mo(this,4))}}function F(n){return jn(n)?n.value:n}const mx={get:(n,e,t)=>F(Reflect.get(n,e,t)),set:(n,e,t,i)=>{const r=n[e];return jn(r)&&!jn(t)?(r.value=t,!0):Reflect.set(n,e,t,i)}};function Fb(n){return Do(n)?n:new Proxy(n,mx)}class px{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:t,set:i}=e(()=>Bm(this),()=>Mo(this));this._get=t,this._set=i}get value(){return this._get()}set value(e){this._set(e)}}function gx(n){return new px(n)}/**
* @vue/runtime-core v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function es(n,e,t,i){try{return i?n(...i):n()}catch(r){Zu(r,e,t)}}function Or(n,e,t,i){if(Ge(n)){const r=es(n,e,t,i);return r&&db(r)&&r.catch(s=>{Zu(s,e,t)}),r}if($e(n)){const r=[];for(let s=0;s<n.length;s++)r.push(Or(n[s],e,t,i));return r}}function Zu(n,e,t,i=!0){const r=e?e.vnode:null;if(e){let s=e.parent;const a=e.proxy,o=`https://vuejs.org/error-reference/#runtime-${t}`;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](n,a,o)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){fs(),es(l,null,10,[n,a,o]),ms();return}}vx(n,t,r,i)}function vx(n,e,t,i=!0){console.error(n)}let Ko=!1,Kh=!1;const Mn=[];let Jr=0;const wa=[];let Bi=null,Ps=0;const Lb=Promise.resolve();let $m=null;function Ta(n){const e=$m||Lb;return n?e.then(this?n.bind(this):n):e}function yx(n){let e=Jr+1,t=Mn.length;for(;e<t;){const i=e+t>>>1,r=Mn[i],s=Yo(r);s<n||s===n&&r.pre?e=i+1:t=i}return e}function qm(n){(!Mn.length||!Mn.includes(n,Ko&&n.allowRecurse?Jr+1:Jr))&&(n.id==null?Mn.push(n):Mn.splice(yx(n.id),0,n),Bb())}function Bb(){!Ko&&!Kh&&(Kh=!0,$m=Lb.then(qb))}function bx(n){const e=Mn.indexOf(n);e>Jr&&Mn.splice(e,1)}function Ex(n){$e(n)?wa.push(...n):(!Bi||!Bi.includes(n,n.allowRecurse?Ps+1:Ps))&&wa.push(n),Bb()}function vg(n,e,t=Ko?Jr+1:0){for(;t<Mn.length;t++){const i=Mn[t];if(i&&i.pre){if(n&&i.id!==n.uid)continue;Mn.splice(t,1),t--,i()}}}function $b(n){if(wa.length){const e=[...new Set(wa)].sort((t,i)=>Yo(t)-Yo(i));if(wa.length=0,Bi){Bi.push(...e);return}for(Bi=e,Ps=0;Ps<Bi.length;Ps++){const t=Bi[Ps];t.active!==!1&&t()}Bi=null,Ps=0}}const Yo=n=>n.id==null?1/0:n.id,wx=(n,e)=>{const t=Yo(n)-Yo(e);if(t===0){if(n.pre&&!e.pre)return-1;if(e.pre&&!n.pre)return 1}return t};function qb(n){Kh=!1,Ko=!0,Mn.sort(wx);const e=ur;try{for(Jr=0;Jr<Mn.length;Jr++){const t=Mn[Jr];t&&t.active!==!1&&es(t,t.i,t.i?15:14)}}finally{Jr=0,Mn.length=0,$b(),Ko=!1,$m=null,(Mn.length||wa.length)&&qb()}}let fn=null,Ub=null;function Xc(n){const e=fn;return fn=n,Ub=n&&n.type.__scopeId||null,e}function Ve(n,e=fn,t){if(!e||n._n)return n;const i=(...r)=>{i._d&&xg(-1);const s=Xc(e);let a;try{a=n(...r)}finally{Xc(s),i._d&&xg(1)}return a};return i._n=!0,i._c=!0,i._d=!0,i}function tn(n,e){if(fn===null)return n;const t=sd(fn),i=n.dirs||(n.dirs=[]);for(let r=0;r<e.length;r++){let[s,a,o,l=bt]=e[r];s&&(Ge(s)&&(s={mounted:s,updated:s}),s.deep&&ji(a),i.push({dir:s,instance:t,value:a,oldValue:void 0,arg:o,modifiers:l}))}return n}function Ss(n,e,t,i){const r=n.dirs,s=e&&e.dirs;for(let a=0;a<r.length;a++){const o=r[a];s&&(o.oldValue=s[a].value);let l=o.dir[i];l&&(fs(),Or(l,t,8,[n.el,o,n,e]),ms())}}function Hb(n,e){n.shapeFlag&6&&n.component?Hb(n.component.subTree,e):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}/*! #__NO_SIDE_EFFECTS__ */function pn(n,e){return Ge(n)?(()=>Cn({name:n.name},e,{setup:n}))():n}const Po=n=>!!n.type.__asyncLoader,Vb=n=>n.type.__isKeepAlive;function Cx(n,e){jb(n,"a",e)}function Sx(n,e){jb(n,"da",e)}function jb(n,e,t=bn){const i=n.__wdc||(n.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(ed(e,i,t),t){let r=t.parent;for(;r&&r.parent;)Vb(r.parent.vnode)&&_x(i,e,t,r),r=r.parent}}function _x(n,e,t,i){const r=ed(e,n,i,!0);td(()=>{Dm(i[e],r)},t)}function ed(n,e,t=bn,i=!1){if(t){const r=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...a)=>{fs();const o=Sl(t),l=Or(e,t,n,a);return o(),ms(),l});return i?r.unshift(s):r.push(s),s}}const Mi=n=>(e,t=bn)=>{(!id||n==="sp")&&ed(n,(...i)=>e(...i),t)},wl=Mi("bm"),$r=Mi("m"),xx=Mi("bu"),Rx=Mi("u"),Wb=Mi("bum"),td=Mi("um"),Ax=Mi("sp"),kx=Mi("rtg"),Dx=Mi("rtc");function Mx(n,e=bn){ed("ec",n,e)}const Um="components",Px="directives";function nd(n,e){return Hm(Um,n,!0,e)||n}const zb=Symbol.for("v-ndc");function Yh(n){return rn(n)?Hm(Um,n,!1)||n:n||zb}function Tx(n){return Hm(Px,n)}function Hm(n,e,t=!0,i=!1){const r=fn||bn;if(r){const s=r.type;if(n===Um){const o=SR(s,!1);if(o&&(o===e||o===_r(e)||o===Qu(_r(e))))return s}const a=yg(r[n]||s[n],e)||yg(r.appContext[n],e);return!a&&i?s:a}}function yg(n,e){return n&&(n[e]||n[_r(e)]||n[Qu(_r(e))])}function ht(n,e,t,i){let r;const s=t&&t[i];if($e(n)||rn(n)){r=new Array(n.length);for(let a=0,o=n.length;a<o;a++)r[a]=e(n[a],a,void 0,s&&s[a])}else if(typeof n=="number"){r=new Array(n);for(let a=0;a<n;a++)r[a]=e(a+1,a,void 0,s&&s[a])}else if($t(n))if(n[Symbol.iterator])r=Array.from(n,(a,o)=>e(a,o,void 0,s&&s[o]));else{const a=Object.keys(n);r=new Array(a.length);for(let o=0,l=a.length;o<l;o++){const c=a[o];r[o]=e(n[c],c,o,s&&s[o])}}else r=[];return t&&(t[i]=r),r}function Ix(n,e){for(let t=0;t<e.length;t++){const i=e[t];if($e(i))for(let r=0;r<i.length;r++)n[i[r].name]=i[r].fn;else i&&(n[i.name]=i.key?(...r)=>{const s=i.fn(...r);return s&&(s.key=i.key),s}:i.fn)}return n}function Yt(n,e,t={},i,r){if(fn.isCE||fn.parent&&Po(fn.parent)&&fn.parent.isCE)return e!=="default"&&(t.name=e),be("slot",t,i&&i());let s=n[e];s&&s._c&&(s._d=!1),O();const a=s&&Gb(s(t)),o=ze(He,{key:(t.key||a&&a.key||`_${e}`)+(!a&&i?"_fb":"")},a||(i?i():[]),a&&n._===1?64:-2);return!r&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),s&&s._c&&(s._d=!0),o}function Gb(n){return n.some(e=>tu(e)?!(e.type===is||e.type===He&&!Gb(e.children)):!0)?n:null}const Qh=n=>n?f1(n)?sd(n):Qh(n.parent):null,To=Cn(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Qh(n.parent),$root:n=>Qh(n.root),$emit:n=>n.emit,$options:n=>Vm(n),$forceUpdate:n=>n.f||(n.f=()=>{n.effect.dirty=!0,qm(n.update)}),$nextTick:n=>n.n||(n.n=Ta.bind(n.proxy)),$watch:n=>iR.bind(n)}),Ld=(n,e)=>n!==bt&&!n.__isScriptSetup&&lt(n,e),Ox={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:i,data:r,props:s,accessCache:a,type:o,appContext:l}=n;let c;if(e[0]!=="$"){const f=a[e];if(f!==void 0)switch(f){case 1:return i[e];case 2:return r[e];case 4:return t[e];case 3:return s[e]}else{if(Ld(i,e))return a[e]=1,i[e];if(r!==bt&&lt(r,e))return a[e]=2,r[e];if((c=n.propsOptions[0])&&lt(c,e))return a[e]=3,s[e];if(t!==bt&&lt(t,e))return a[e]=4,t[e];Xh&&(a[e]=0)}}const u=To[e];let d,h;if(u)return e==="$attrs"&&tr(n.attrs,"get",""),u(n);if((d=o.__cssModules)&&(d=d[e]))return d;if(t!==bt&&lt(t,e))return a[e]=4,t[e];if(h=l.config.globalProperties,lt(h,e))return h[e]},set({_:n},e,t){const{data:i,setupState:r,ctx:s}=n;return Ld(r,e)?(r[e]=t,!0):i!==bt&&lt(i,e)?(i[e]=t,!0):lt(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:i,appContext:r,propsOptions:s}},a){let o;return!!t[a]||n!==bt&&lt(n,a)||Ld(e,a)||(o=s[0])&&lt(o,a)||lt(i,a)||lt(To,a)||lt(r.config.globalProperties,a)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:lt(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function Kb(){return Nx().slots}function Nx(){const n=xi();return n.setupContext||(n.setupContext=p1(n))}function Jc(n){return $e(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}function Zc(n,e){return!n||!e?n||e:$e(n)&&$e(e)?n.concat(e):Cn({},Jc(n),Jc(e))}let Xh=!0;function Fx(n){const e=Vm(n),t=n.proxy,i=n.ctx;Xh=!1,e.beforeCreate&&bg(e.beforeCreate,n,"bc");const{data:r,computed:s,methods:a,watch:o,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:f,updated:m,activated:p,deactivated:g,beforeDestroy:v,beforeUnmount:C,destroyed:y,unmounted:E,render:_,renderTracked:w,renderTriggered:k,errorCaptured:I,serverPrefetch:P,expose:Z,inheritAttrs:X,components:B,directives:$,filters:U}=e;if(c&&Lx(c,i,null),a)for(const ae in a){const ue=a[ae];Ge(ue)&&(i[ae]=ue.bind(t))}if(r){const ae=r.call(t,t);$t(ae)&&(n.data=it(ae))}if(Xh=!0,s)for(const ae in s){const ue=s[ae],ve=Ge(ue)?ue.bind(t,t):Ge(ue.get)?ue.get.bind(t,t):ur,me=!Ge(ue)&&Ge(ue.set)?ue.set.bind(t):ur,ke=Qe({get:ve,set:me});Object.defineProperty(i,ae,{enumerable:!0,configurable:!0,get:()=>ke.value,set:Me=>ke.value=Me})}if(o)for(const ae in o)Yb(o[ae],i,t,ae);if(l){const ae=Ge(l)?l.call(t):l;Reflect.ownKeys(ae).forEach(ue=>{kc(ue,ae[ue])})}u&&bg(u,n,"c");function le(ae,ue){$e(ue)?ue.forEach(ve=>ae(ve.bind(t))):ue&&ae(ue.bind(t))}if(le(wl,d),le($r,h),le(xx,f),le(Rx,m),le(Cx,p),le(Sx,g),le(Mx,I),le(Dx,w),le(kx,k),le(Wb,C),le(td,E),le(Ax,P),$e(Z))if(Z.length){const ae=n.exposed||(n.exposed={});Z.forEach(ue=>{Object.defineProperty(ae,ue,{get:()=>t[ue],set:ve=>t[ue]=ve})})}else n.exposed||(n.exposed={});_&&n.render===ur&&(n.render=_),X!=null&&(n.inheritAttrs=X),B&&(n.components=B),$&&(n.directives=$)}function Lx(n,e,t=ur){$e(n)&&(n=Jh(n));for(const i in n){const r=n[i];let s;$t(r)?"default"in r?s=fr(r.from||i,r.default,!0):s=fr(r.from||i):s=fr(r),jn(s)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):e[i]=s}}function bg(n,e,t){Or($e(n)?n.map(i=>i.bind(e.proxy)):n.bind(e.proxy),e,t)}function Yb(n,e,t,i){const r=i.includes(".")?l1(t,i):()=>t[i];if(rn(n)){const s=e[n];Ge(s)&&At(r,s)}else if(Ge(n))At(r,n.bind(t));else if($t(n))if($e(n))n.forEach(s=>Yb(s,e,t,i));else{const s=Ge(n.handler)?n.handler.bind(t):e[n.handler];Ge(s)&&At(r,s,n)}}function Vm(n){const e=n.type,{mixins:t,extends:i}=e,{mixins:r,optionsCache:s,config:{optionMergeStrategies:a}}=n.appContext,o=s.get(e);let l;return o?l=o:!r.length&&!t&&!i?l=e:(l={},r.length&&r.forEach(c=>eu(l,c,a,!0)),eu(l,e,a)),$t(e)&&s.set(e,l),l}function eu(n,e,t,i=!1){const{mixins:r,extends:s}=e;s&&eu(n,s,t,!0),r&&r.forEach(a=>eu(n,a,t,!0));for(const a in e)if(!(i&&a==="expose")){const o=Bx[a]||t&&t[a];n[a]=o?o(n[a],e[a]):e[a]}return n}const Bx={data:Eg,props:wg,emits:wg,methods:yo,computed:yo,beforeCreate:On,created:On,beforeMount:On,mounted:On,beforeUpdate:On,updated:On,beforeDestroy:On,beforeUnmount:On,destroyed:On,unmounted:On,activated:On,deactivated:On,errorCaptured:On,serverPrefetch:On,components:yo,directives:yo,watch:qx,provide:Eg,inject:$x};function Eg(n,e){return e?n?function(){return Cn(Ge(n)?n.call(this,this):n,Ge(e)?e.call(this,this):e)}:e:n}function $x(n,e){return yo(Jh(n),Jh(e))}function Jh(n){if($e(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function On(n,e){return n?[...new Set([].concat(n,e))]:e}function yo(n,e){return n?Cn(Object.create(null),n,e):e}function wg(n,e){return n?$e(n)&&$e(e)?[...new Set([...n,...e])]:Cn(Object.create(null),Jc(n),Jc(e??{})):e}function qx(n,e){if(!n)return e;if(!e)return n;const t=Cn(Object.create(null),n);for(const i in e)t[i]=On(n[i],e[i]);return t}function Qb(){return{app:null,config:{isNativeTag:T_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ux=0;function Hx(n,e){return function(i,r=null){Ge(i)||(i=Cn({},i)),r!=null&&!$t(r)&&(r=null);const s=Qb(),a=new WeakSet;let o=!1;const l=s.app={_uid:Ux++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:xR,get config(){return s.config},set config(c){},use(c,...u){return a.has(c)||(c&&Ge(c.install)?(a.add(c),c.install(l,...u)):Ge(c)&&(a.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,d){if(!o){const h=be(i,r);return h.appContext=s,d===!0?d="svg":d===!1&&(d=void 0),u&&e?e(h,c):n(h,c,d),o=!0,l._container=c,c.__vue_app__=l,sd(h.component)}},unmount(){o&&(n(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l},runWithContext(c){const u=Ca;Ca=l;try{return c()}finally{Ca=u}}};return l}}let Ca=null;function kc(n,e){if(bn){let t=bn.provides;const i=bn.parent&&bn.parent.provides;i===t&&(t=bn.provides=Object.create(i)),t[n]=e}}function fr(n,e,t=!1){const i=bn||fn;if(i||Ca){const r=Ca?Ca._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(r&&n in r)return r[n];if(arguments.length>1)return t&&Ge(e)?e.call(i&&i.proxy):e}}const Xb={},Jb=()=>Object.create(Xb),Zb=n=>Object.getPrototypeOf(n)===Xb;function Vx(n,e,t,i=!1){const r={},s=Jb();n.propsDefaults=Object.create(null),e1(n,e,r,s);for(const a in n.propsOptions[0])a in r||(r[a]=void 0);t?n.props=i?r:Pb(r):n.type.props?n.props=r:n.props=s,n.attrs=s}function jx(n,e,t,i){const{props:r,attrs:s,vnode:{patchFlag:a}}=n,o=gt(r),[l]=n.propsOptions;let c=!1;if((i||a>0)&&!(a&16)){if(a&8){const u=n.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(rd(n.emitsOptions,h))continue;const f=e[h];if(l)if(lt(s,h))f!==s[h]&&(s[h]=f,c=!0);else{const m=_r(h);r[m]=Zh(l,o,m,f,n,!1)}else f!==s[h]&&(s[h]=f,c=!0)}}}else{e1(n,e,r,s)&&(c=!0);let u;for(const d in o)(!e||!lt(e,d)&&((u=hs(d))===d||!lt(e,u)))&&(l?t&&(t[d]!==void 0||t[u]!==void 0)&&(r[d]=Zh(l,o,d,void 0,n,!0)):delete r[d]);if(s!==o)for(const d in s)(!e||!lt(e,d))&&(delete s[d],c=!0)}c&&wi(n.attrs,"set","")}function e1(n,e,t,i){const[r,s]=n.propsOptions;let a=!1,o;if(e)for(let l in e){if(ko(l))continue;const c=e[l];let u;r&&lt(r,u=_r(l))?!s||!s.includes(u)?t[u]=c:(o||(o={}))[u]=c:rd(n.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,a=!0)}if(s){const l=gt(t),c=o||bt;for(let u=0;u<s.length;u++){const d=s[u];t[d]=Zh(r,l,d,c[d],n,!lt(c,d))}}return a}function Zh(n,e,t,i,r,s){const a=n[t];if(a!=null){const o=lt(a,"default");if(o&&i===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&Ge(l)){const{propsDefaults:c}=r;if(t in c)i=c[t];else{const u=Sl(r);i=c[t]=l.call(null,e),u()}}else i=l}a[0]&&(s&&!o?i=!1:a[1]&&(i===""||i===hs(t))&&(i=!0))}return i}const Wx=new WeakMap;function t1(n,e,t=!1){const i=t?Wx:e.propsCache,r=i.get(n);if(r)return r;const s=n.props,a={},o=[];let l=!1;if(!Ge(n)){const u=d=>{l=!0;const[h,f]=t1(d,e,!0);Cn(a,h),f&&o.push(...f)};!t&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!s&&!l)return $t(n)&&i.set(n,ya),ya;if($e(s))for(let u=0;u<s.length;u++){const d=_r(s[u]);Cg(d)&&(a[d]=bt)}else if(s)for(const u in s){const d=_r(u);if(Cg(d)){const h=s[u],f=a[d]=$e(h)||Ge(h)?{type:h}:Cn({},h),m=f.type;let p=!1,g=!0;if($e(m))for(let v=0;v<m.length;++v){const C=m[v],y=Ge(C)&&C.name;if(y==="Boolean"){p=!0;break}else y==="String"&&(g=!1)}else p=Ge(m)&&m.name==="Boolean";f[0]=p,f[1]=g,(p||lt(f,"default"))&&o.push(d)}}const c=[a,o];return $t(n)&&i.set(n,c),c}function Cg(n){return n[0]!=="$"&&!ko(n)}const n1=n=>n[0]==="_"||n==="$stable",jm=n=>$e(n)?n.map(Xr):[Xr(n)],zx=(n,e,t)=>{if(e._n)return e;const i=Ve((...r)=>jm(e(...r)),t);return i._c=!1,i},r1=(n,e,t)=>{const i=n._ctx;for(const r in n){if(n1(r))continue;const s=n[r];if(Ge(s))e[r]=zx(r,s,i);else if(s!=null){const a=jm(s);e[r]=()=>a}}},i1=(n,e)=>{const t=jm(e);n.slots.default=()=>t},s1=(n,e,t)=>{for(const i in e)(t||i!=="_")&&(n[i]=e[i])},Gx=(n,e,t)=>{const i=n.slots=Jb();if(n.vnode.shapeFlag&32){const r=e._;r?(s1(i,e,t),t&&mb(i,"_",r,!0)):r1(e,i)}else e&&i1(n,e)},Kx=(n,e,t)=>{const{vnode:i,slots:r}=n;let s=!0,a=bt;if(i.shapeFlag&32){const o=e._;o?t&&o===1?s=!1:s1(r,e,t):(s=!e.$stable,r1(e,r)),a=e}else e&&(i1(n,e),a={default:1});if(s)for(const o in r)!n1(o)&&a[o]==null&&delete r[o]};function ef(n,e,t,i,r=!1){if($e(n)){n.forEach((h,f)=>ef(h,e&&($e(e)?e[f]:e),t,i,r));return}if(Po(i)&&!r)return;const s=i.shapeFlag&4?sd(i.component):i.el,a=r?null:s,{i:o,r:l}=n,c=e&&e.r,u=o.refs===bt?o.refs={}:o.refs,d=o.setupState;if(c!=null&&c!==l&&(rn(c)?(u[c]=null,lt(d,c)&&(d[c]=null)):jn(c)&&(c.value=null)),Ge(l))es(l,o,12,[a,u]);else{const h=rn(l),f=jn(l);if(h||f){const m=()=>{if(n.f){const p=h?lt(d,l)?d[l]:u[l]:l.value;r?$e(p)&&Dm(p,s):$e(p)?p.includes(s)||p.push(s):h?(u[l]=[s],lt(d,l)&&(d[l]=u[l])):(l.value=[s],n.k&&(u[n.k]=l.value))}else h?(u[l]=a,lt(d,l)&&(d[l]=a)):f&&(l.value=a,n.k&&(u[n.k]=a))};a?(m.id=-1,Gn(m,t)):m()}}}const Yx=Symbol("_vte"),Qx=n=>n.__isTeleport,Gn=dR;function Xx(n){return Jx(n)}function Jx(n,e){const t=pb();t.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:a,createText:o,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:f=ur,insertStaticContent:m}=n,p=(R,b,N,J=null,Q=null,ne=null,ie=void 0,S=null,x=!!b.dynamicChildren)=>{if(R===b)return;R&&!oo(R,b)&&(J=W(R),Me(R,Q,ne,!0),R=null),b.patchFlag===-2&&(x=!1,b.dynamicChildren=null);const{type:D,ref:V,shapeFlag:se}=b;switch(D){case Cl:g(R,b,N,J);break;case is:v(R,b,N,J);break;case Dc:R==null&&C(b,N,J,ie);break;case He:B(R,b,N,J,Q,ne,ie,S,x);break;default:se&1?_(R,b,N,J,Q,ne,ie,S,x):se&6?$(R,b,N,J,Q,ne,ie,S,x):(se&64||se&128)&&D.process(R,b,N,J,Q,ne,ie,S,x,de)}V!=null&&Q&&ef(V,R&&R.ref,ne,b||R,!b)},g=(R,b,N,J)=>{if(R==null)i(b.el=o(b.children),N,J);else{const Q=b.el=R.el;b.children!==R.children&&c(Q,b.children)}},v=(R,b,N,J)=>{R==null?i(b.el=l(b.children||""),N,J):b.el=R.el},C=(R,b,N,J)=>{[R.el,R.anchor]=m(R.children,b,N,J,R.el,R.anchor)},y=({el:R,anchor:b},N,J)=>{let Q;for(;R&&R!==b;)Q=h(R),i(R,N,J),R=Q;i(b,N,J)},E=({el:R,anchor:b})=>{let N;for(;R&&R!==b;)N=h(R),r(R),R=N;r(b)},_=(R,b,N,J,Q,ne,ie,S,x)=>{b.type==="svg"?ie="svg":b.type==="math"&&(ie="mathml"),R==null?w(b,N,J,Q,ne,ie,S,x):P(R,b,Q,ne,ie,S,x)},w=(R,b,N,J,Q,ne,ie,S)=>{let x,D;const{props:V,shapeFlag:se,transition:te,dirs:L}=R;if(x=R.el=a(R.type,ne,V&&V.is,V),se&8?u(x,R.children):se&16&&I(R.children,x,null,J,Q,Bd(R,ne),ie,S),L&&Ss(R,null,J,"created"),k(x,R,R.scopeId,ie,J),V){for(const Pe in V)Pe!=="value"&&!ko(Pe)&&s(x,Pe,null,V[Pe],ne,J);"value"in V&&s(x,"value",null,V.value,ne),(D=V.onVnodeBeforeMount)&&Wr(D,J,R)}L&&Ss(R,null,J,"beforeMount");const K=Zx(Q,te);K&&te.beforeEnter(x),i(x,b,N),((D=V&&V.onVnodeMounted)||K||L)&&Gn(()=>{D&&Wr(D,J,R),K&&te.enter(x),L&&Ss(R,null,J,"mounted")},Q)},k=(R,b,N,J,Q)=>{if(N&&f(R,N),J)for(let ne=0;ne<J.length;ne++)f(R,J[ne]);if(Q){let ne=Q.subTree;if(b===ne){const ie=Q.vnode;k(R,ie,ie.scopeId,ie.slotScopeIds,Q.parent)}}},I=(R,b,N,J,Q,ne,ie,S,x=0)=>{for(let D=x;D<R.length;D++){const V=R[D]=S?$i(R[D]):Xr(R[D]);p(null,V,b,N,J,Q,ne,ie,S)}},P=(R,b,N,J,Q,ne,ie)=>{const S=b.el=R.el;let{patchFlag:x,dynamicChildren:D,dirs:V}=b;x|=R.patchFlag&16;const se=R.props||bt,te=b.props||bt;let L;if(N&&_s(N,!1),(L=te.onVnodeBeforeUpdate)&&Wr(L,N,b,R),V&&Ss(b,R,N,"beforeUpdate"),N&&_s(N,!0),(se.innerHTML&&te.innerHTML==null||se.textContent&&te.textContent==null)&&u(S,""),D?Z(R.dynamicChildren,D,S,N,J,Bd(b,Q),ne):ie||ue(R,b,S,null,N,J,Bd(b,Q),ne,!1),x>0){if(x&16)X(S,se,te,N,Q);else if(x&2&&se.class!==te.class&&s(S,"class",null,te.class,Q),x&4&&s(S,"style",se.style,te.style,Q),x&8){const K=b.dynamicProps;for(let Pe=0;Pe<K.length;Pe++){const xe=K[Pe],at=se[xe],sn=te[xe];(sn!==at||xe==="value")&&s(S,xe,at,sn,Q,N)}}x&1&&R.children!==b.children&&u(S,b.children)}else!ie&&D==null&&X(S,se,te,N,Q);((L=te.onVnodeUpdated)||V)&&Gn(()=>{L&&Wr(L,N,b,R),V&&Ss(b,R,N,"updated")},J)},Z=(R,b,N,J,Q,ne,ie)=>{for(let S=0;S<b.length;S++){const x=R[S],D=b[S],V=x.el&&(x.type===He||!oo(x,D)||x.shapeFlag&70)?d(x.el):N;p(x,D,V,null,J,Q,ne,ie,!0)}},X=(R,b,N,J,Q)=>{if(b!==N){if(b!==bt)for(const ne in b)!ko(ne)&&!(ne in N)&&s(R,ne,b[ne],null,Q,J);for(const ne in N){if(ko(ne))continue;const ie=N[ne],S=b[ne];ie!==S&&ne!=="value"&&s(R,ne,S,ie,Q,J)}"value"in N&&s(R,"value",b.value,N.value,Q)}},B=(R,b,N,J,Q,ne,ie,S,x)=>{const D=b.el=R?R.el:o(""),V=b.anchor=R?R.anchor:o("");let{patchFlag:se,dynamicChildren:te,slotScopeIds:L}=b;L&&(S=S?S.concat(L):L),R==null?(i(D,N,J),i(V,N,J),I(b.children||[],N,V,Q,ne,ie,S,x)):se>0&&se&64&&te&&R.dynamicChildren?(Z(R.dynamicChildren,te,N,Q,ne,ie,S),(b.key!=null||Q&&b===Q.subTree)&&a1(R,b,!0)):ue(R,b,N,V,Q,ne,ie,S,x)},$=(R,b,N,J,Q,ne,ie,S,x)=>{b.slotScopeIds=S,R==null?b.shapeFlag&512?Q.ctx.activate(b,N,J,ie,x):U(b,N,J,Q,ne,ie,x):re(R,b,x)},U=(R,b,N,J,Q,ne,ie)=>{const S=R.component=bR(R,J,Q);if(Vb(R)&&(S.ctx.renderer=de),ER(S,!1,ie),S.asyncDep){if(Q&&Q.registerDep(S,le,ie),!R.el){const x=S.subTree=be(is);v(null,x,b,N)}}else le(S,R,b,N,Q,ne,ie)},re=(R,b,N)=>{const J=b.component=R.component;if(lR(R,b,N))if(J.asyncDep&&!J.asyncResolved){ae(J,b,N);return}else J.next=b,bx(J.update),J.effect.dirty=!0,J.update();else b.el=R.el,J.vnode=b},le=(R,b,N,J,Q,ne,ie)=>{const S=()=>{if(R.isMounted){let{next:V,bu:se,u:te,parent:L,vnode:K}=R;{const _n=o1(R);if(_n){V&&(V.el=K.el,ae(R,V,ie)),_n.asyncDep.then(()=>{R.isUnmounted||S()});return}}let Pe=V,xe;_s(R,!1),V?(V.el=K.el,ae(R,V,ie)):V=K,se&&Ac(se),(xe=V.props&&V.props.onVnodeBeforeUpdate)&&Wr(xe,L,V,K),_s(R,!0);const at=$d(R),sn=R.subTree;R.subTree=at,p(sn,at,d(sn.el),W(sn),R,Q,ne),V.el=at.el,Pe===null&&cR(R,at.el),te&&Gn(te,Q),(xe=V.props&&V.props.onVnodeUpdated)&&Gn(()=>Wr(xe,L,V,K),Q)}else{let V;const{el:se,props:te}=b,{bm:L,m:K,parent:Pe}=R,xe=Po(b);if(_s(R,!1),L&&Ac(L),!xe&&(V=te&&te.onVnodeBeforeMount)&&Wr(V,Pe,b),_s(R,!0),se&&Je){const at=()=>{R.subTree=$d(R),Je(se,R.subTree,R,Q,null)};xe?b.type.__asyncLoader().then(()=>!R.isUnmounted&&at()):at()}else{const at=R.subTree=$d(R);p(null,at,N,J,R,Q,ne),b.el=at.el}if(K&&Gn(K,Q),!xe&&(V=te&&te.onVnodeMounted)){const at=b;Gn(()=>Wr(V,Pe,at),Q)}(b.shapeFlag&256||Pe&&Po(Pe.vnode)&&Pe.vnode.shapeFlag&256)&&R.a&&Gn(R.a,Q),R.isMounted=!0,b=N=J=null}},x=R.effect=new Pm(S,ur,()=>qm(D),R.scope),D=R.update=()=>{x.dirty&&x.run()};D.i=R,D.id=R.uid,_s(R,!0),D()},ae=(R,b,N)=>{b.component=R;const J=R.vnode.props;R.vnode=b,R.next=null,jx(R,b.props,J,N),Kx(R,b.children,N),fs(),vg(R),ms()},ue=(R,b,N,J,Q,ne,ie,S,x=!1)=>{const D=R&&R.children,V=R?R.shapeFlag:0,se=b.children,{patchFlag:te,shapeFlag:L}=b;if(te>0){if(te&128){me(D,se,N,J,Q,ne,ie,S,x);return}else if(te&256){ve(D,se,N,J,Q,ne,ie,S,x);return}}L&8?(V&16&&Ze(D,Q,ne),se!==D&&u(N,se)):V&16?L&16?me(D,se,N,J,Q,ne,ie,S,x):Ze(D,Q,ne,!0):(V&8&&u(N,""),L&16&&I(se,N,J,Q,ne,ie,S,x))},ve=(R,b,N,J,Q,ne,ie,S,x)=>{R=R||ya,b=b||ya;const D=R.length,V=b.length,se=Math.min(D,V);let te;for(te=0;te<se;te++){const L=b[te]=x?$i(b[te]):Xr(b[te]);p(R[te],L,N,null,Q,ne,ie,S,x)}D>V?Ze(R,Q,ne,!0,!1,se):I(b,N,J,Q,ne,ie,S,x,se)},me=(R,b,N,J,Q,ne,ie,S,x)=>{let D=0;const V=b.length;let se=R.length-1,te=V-1;for(;D<=se&&D<=te;){const L=R[D],K=b[D]=x?$i(b[D]):Xr(b[D]);if(oo(L,K))p(L,K,N,null,Q,ne,ie,S,x);else break;D++}for(;D<=se&&D<=te;){const L=R[se],K=b[te]=x?$i(b[te]):Xr(b[te]);if(oo(L,K))p(L,K,N,null,Q,ne,ie,S,x);else break;se--,te--}if(D>se){if(D<=te){const L=te+1,K=L<V?b[L].el:J;for(;D<=te;)p(null,b[D]=x?$i(b[D]):Xr(b[D]),N,K,Q,ne,ie,S,x),D++}}else if(D>te)for(;D<=se;)Me(R[D],Q,ne,!0),D++;else{const L=D,K=D,Pe=new Map;for(D=K;D<=te;D++){const xn=b[D]=x?$i(b[D]):Xr(b[D]);xn.key!=null&&Pe.set(xn.key,D)}let xe,at=0;const sn=te-K+1;let _n=!1,Ur=0;const hi=new Array(sn);for(D=0;D<sn;D++)hi[D]=0;for(D=L;D<=se;D++){const xn=R[D];if(at>=sn){Me(xn,Q,ne,!0);continue}let Wt;if(xn.key!=null)Wt=Pe.get(xn.key);else for(xe=K;xe<=te;xe++)if(hi[xe-K]===0&&oo(xn,b[xe])){Wt=xe;break}Wt===void 0?Me(xn,Q,ne,!0):(hi[Wt-K]=D+1,Wt>=Ur?Ur=Wt:_n=!0,p(xn,b[Wt],N,null,Q,ne,ie,S,x),at++)}const Fl=_n?eR(hi):ya;for(xe=Fl.length-1,D=sn-1;D>=0;D--){const xn=K+D,Wt=b[xn],Ll=xn+1<V?b[xn+1].el:J;hi[D]===0?p(null,Wt,N,Ll,Q,ne,ie,S,x):_n&&(xe<0||D!==Fl[xe]?ke(Wt,N,Ll,2):xe--)}}},ke=(R,b,N,J,Q=null)=>{const{el:ne,type:ie,transition:S,children:x,shapeFlag:D}=R;if(D&6){ke(R.component.subTree,b,N,J);return}if(D&128){R.suspense.move(b,N,J);return}if(D&64){ie.move(R,b,N,de);return}if(ie===He){i(ne,b,N);for(let se=0;se<x.length;se++)ke(x[se],b,N,J);i(R.anchor,b,N);return}if(ie===Dc){y(R,b,N);return}if(J!==2&&D&1&&S)if(J===0)S.beforeEnter(ne),i(ne,b,N),Gn(()=>S.enter(ne),Q);else{const{leave:se,delayLeave:te,afterLeave:L}=S,K=()=>i(ne,b,N),Pe=()=>{se(ne,()=>{K(),L&&L()})};te?te(ne,K,Pe):Pe()}else i(ne,b,N)},Me=(R,b,N,J=!1,Q=!1)=>{const{type:ne,props:ie,ref:S,children:x,dynamicChildren:D,shapeFlag:V,patchFlag:se,dirs:te,cacheIndex:L}=R;if(se===-2&&(Q=!1),S!=null&&ef(S,null,N,R,!0),L!=null&&(b.renderCache[L]=void 0),V&256){b.ctx.deactivate(R);return}const K=V&1&&te,Pe=!Po(R);let xe;if(Pe&&(xe=ie&&ie.onVnodeBeforeUnmount)&&Wr(xe,b,R),V&6)wt(R.component,N,J);else{if(V&128){R.suspense.unmount(N,J);return}K&&Ss(R,null,b,"beforeUnmount"),V&64?R.type.remove(R,b,N,de,J):D&&!D.hasOnce&&(ne!==He||se>0&&se&64)?Ze(D,b,N,!1,!0):(ne===He&&se&384||!Q&&V&16)&&Ze(x,b,N),J&&Xe(R)}(Pe&&(xe=ie&&ie.onVnodeUnmounted)||K)&&Gn(()=>{xe&&Wr(xe,b,R),K&&Ss(R,null,b,"unmounted")},N)},Xe=R=>{const{type:b,el:N,anchor:J,transition:Q}=R;if(b===He){Fe(N,J);return}if(b===Dc){E(R);return}const ne=()=>{r(N),Q&&!Q.persisted&&Q.afterLeave&&Q.afterLeave()};if(R.shapeFlag&1&&Q&&!Q.persisted){const{leave:ie,delayLeave:S}=Q,x=()=>ie(N,ne);S?S(R.el,ne,x):x()}else ne()},Fe=(R,b)=>{let N;for(;R!==b;)N=h(R),r(R),R=N;r(b)},wt=(R,b,N)=>{const{bum:J,scope:Q,update:ne,subTree:ie,um:S,m:x,a:D}=R;Sg(x),Sg(D),J&&Ac(J),Q.stop(),ne&&(ne.active=!1,Me(ie,R,b,N)),S&&Gn(S,b),Gn(()=>{R.isUnmounted=!0},b),b&&b.pendingBranch&&!b.isUnmounted&&R.asyncDep&&!R.asyncResolved&&R.suspenseId===b.pendingId&&(b.deps--,b.deps===0&&b.resolve())},Ze=(R,b,N,J=!1,Q=!1,ne=0)=>{for(let ie=ne;ie<R.length;ie++)Me(R[ie],b,N,J,Q)},W=R=>{if(R.shapeFlag&6)return W(R.component.subTree);if(R.shapeFlag&128)return R.suspense.next();const b=h(R.anchor||R.el),N=b&&b[Yx];return N?h(N):b};let ce=!1;const oe=(R,b,N)=>{R==null?b._vnode&&Me(b._vnode,null,null,!0):p(b._vnode||null,R,b,null,null,null,N),b._vnode=R,ce||(ce=!0,vg(),$b(),ce=!1)},de={p,um:Me,m:ke,r:Xe,mt:U,mc:I,pc:ue,pbc:Z,n:W,o:n};let Ae,Je;return e&&([Ae,Je]=e(de)),{render:oe,hydrate:Ae,createApp:Hx(oe,Ae)}}function Bd({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function _s({effect:n,update:e},t){n.allowRecurse=e.allowRecurse=t}function Zx(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function a1(n,e,t=!1){const i=n.children,r=e.children;if($e(i)&&$e(r))for(let s=0;s<i.length;s++){const a=i[s];let o=r[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=r[s]=$i(r[s]),o.el=a.el),!t&&o.patchFlag!==-2&&a1(a,o)),o.type===Cl&&(o.el=a.el)}}function eR(n){const e=n.slice(),t=[0];let i,r,s,a,o;const l=n.length;for(i=0;i<l;i++){const c=n[i];if(c!==0){if(r=t[t.length-1],n[r]<c){e[i]=r,t.push(i);continue}for(s=0,a=t.length-1;s<a;)o=s+a>>1,n[t[o]]<c?s=o+1:a=o;c<n[t[s]]&&(s>0&&(e[i]=t[s-1]),t[s]=i)}}for(s=t.length,a=t[s-1];s-- >0;)t[s]=a,a=e[a];return t}function o1(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:o1(e)}function Sg(n){if(n)for(let e=0;e<n.length;e++)n[e].active=!1}const tR=Symbol.for("v-scx"),nR=()=>fr(tR);function rR(n,e){return Wm(n,null,{flush:"sync"})}const zl={};function At(n,e,t){return Wm(n,e,t)}function Wm(n,e,{immediate:t,deep:i,flush:r,once:s,onTrack:a,onTrigger:o}=bt){if(e&&s){const w=e;e=(...k)=>{w(...k),_()}}const l=bn,c=w=>i===!0?w:ji(w,i===!1?1:void 0);let u,d=!1,h=!1;if(jn(n)?(u=()=>n.value,d=Pa(n)):Do(n)?(u=()=>c(n),d=!0):$e(n)?(h=!0,d=n.some(w=>Do(w)||Pa(w)),u=()=>n.map(w=>{if(jn(w))return w.value;if(Do(w))return c(w);if(Ge(w))return es(w,l,2)})):Ge(n)?e?u=()=>es(n,l,2):u=()=>(f&&f(),Or(n,l,3,[m])):u=ur,e&&i){const w=u;u=()=>ji(w())}let f,m=w=>{f=y.onStop=()=>{es(w,l,4),f=y.onStop=void 0}},p;if(id)if(m=ur,e?t&&Or(e,l,3,[u(),h?[]:void 0,m]):u(),r==="sync"){const w=nR();p=w.__watcherHandles||(w.__watcherHandles=[])}else return ur;let g=h?new Array(n.length).fill(zl):zl;const v=()=>{if(!(!y.active||!y.dirty))if(e){const w=y.run();(i||d||(h?w.some((k,I)=>Yn(k,g[I])):Yn(w,g)))&&(f&&f(),Or(e,l,3,[w,g===zl?void 0:h&&g[0]===zl?[]:g,m]),g=w)}else y.run()};v.allowRecurse=!!e;let C;r==="sync"?C=v:r==="post"?C=()=>Gn(v,l&&l.suspense):(v.pre=!0,l&&(v.id=l.uid),C=()=>qm(v));const y=new Pm(u,ur,C),E=W_(),_=()=>{y.stop(),E&&Dm(E.effects,y)};return e?t?v():g=y.run():r==="post"?Gn(y.run.bind(y),l&&l.suspense):y.run(),p&&p.push(_),_}function iR(n,e,t){const i=this.proxy,r=rn(n)?n.includes(".")?l1(i,n):()=>i[n]:n.bind(i,i);let s;Ge(e)?s=e:(s=e.handler,t=e);const a=Sl(this),o=Wm(r,s.bind(i),t);return a(),o}function l1(n,e){const t=e.split(".");return()=>{let i=n;for(let r=0;r<t.length&&i;r++)i=i[t[r]];return i}}function ji(n,e=1/0,t){if(e<=0||!$t(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,jn(n))ji(n.value,e,t);else if($e(n))for(let i=0;i<n.length;i++)ji(n[i],e,t);else if(ub(n)||ba(n))n.forEach(i=>{ji(i,e,t)});else if(fb(n)){for(const i in n)ji(n[i],e,t);for(const i of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,i)&&ji(n[i],e,t)}return n}function Ia(n,e,t=bt){const i=xi(),r=_r(e),s=hs(e),a=c1(n,e),o=gx((l,c)=>{let u,d=bt,h;return rR(()=>{const f=n[e];Yn(u,f)&&(u=f,c())}),{get(){return l(),t.get?t.get(u):u},set(f){const m=t.set?t.set(f):f;if(!Yn(m,u)&&!(d!==bt&&Yn(f,d)))return;const p=i.vnode.props;p&&(e in p||r in p||s in p)&&(`onUpdate:${e}`in p||`onUpdate:${r}`in p||`onUpdate:${s}`in p)||(u=f,c()),i.emit(`update:${e}`,m),Yn(f,m)&&Yn(f,d)&&!Yn(m,h)&&c(),d=f,h=m}}});return o[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?a||bt:o,done:!1}:{done:!0}}}},o}const c1=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${_r(e)}Modifiers`]||n[`${hs(e)}Modifiers`];function sR(n,e,...t){if(n.isUnmounted)return;const i=n.vnode.props||bt;let r=t;const s=e.startsWith("update:"),a=s&&c1(i,e.slice(7));a&&(a.trim&&(r=t.map(u=>rn(u)?u.trim():u)),a.number&&(r=t.map(Vh)));let o,l=i[o=Nd(e)]||i[o=Nd(_r(e))];!l&&s&&(l=i[o=Nd(hs(e))]),l&&Or(l,n,6,r);const c=i[o+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[o])return;n.emitted[o]=!0,Or(c,n,6,r)}}function u1(n,e,t=!1){const i=e.emitsCache,r=i.get(n);if(r!==void 0)return r;const s=n.emits;let a={},o=!1;if(!Ge(n)){const l=c=>{const u=u1(c,e,!0);u&&(o=!0,Cn(a,u))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!s&&!o?($t(n)&&i.set(n,null),null):($e(s)?s.forEach(l=>a[l]=null):Cn(a,s),$t(n)&&i.set(n,a),a)}function rd(n,e){return!n||!Gu(e)?!1:(e=e.slice(2).replace(/Once$/,""),lt(n,e[0].toLowerCase()+e.slice(1))||lt(n,hs(e))||lt(n,e))}function $d(n){const{type:e,vnode:t,proxy:i,withProxy:r,propsOptions:[s],slots:a,attrs:o,emit:l,render:c,renderCache:u,props:d,data:h,setupState:f,ctx:m,inheritAttrs:p}=n,g=Xc(n);let v,C;try{if(t.shapeFlag&4){const E=r||i,_=E;v=Xr(c.call(_,E,u,d,f,h,m)),C=o}else{const E=e;v=Xr(E.length>1?E(d,{attrs:o,slots:a,emit:l}):E(d,null)),C=e.props?o:aR(o)}}catch(E){Io.length=0,Zu(E,n,1),v=be(is)}let y=v;if(C&&p!==!1){const E=Object.keys(C),{shapeFlag:_}=y;E.length&&_&7&&(s&&E.some(km)&&(C=oR(C,s)),y=Oa(y,C,!1,!0))}return t.dirs&&(y=Oa(y,null,!1,!0),y.dirs=y.dirs?y.dirs.concat(t.dirs):t.dirs),t.transition&&(y.transition=t.transition),v=y,Xc(g),v}const aR=n=>{let e;for(const t in n)(t==="class"||t==="style"||Gu(t))&&((e||(e={}))[t]=n[t]);return e},oR=(n,e)=>{const t={};for(const i in n)(!km(i)||!(i.slice(9)in e))&&(t[i]=n[i]);return t};function lR(n,e,t){const{props:i,children:r,component:s}=n,{props:a,children:o,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return i?_g(i,a,c):!!a;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(a[h]!==i[h]&&!rd(c,h))return!0}}}else return(r||o)&&(!o||!o.$stable)?!0:i===a?!1:i?a?_g(i,a,c):!0:!!a;return!1}function _g(n,e,t){const i=Object.keys(e);if(i.length!==Object.keys(n).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(e[s]!==n[s]&&!rd(t,s))return!0}return!1}function cR({vnode:n,parent:e},t){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===n&&(i.el=n.el),i===n)(n=e.vnode).el=t,e=e.parent;else break}}const uR=n=>n.__isSuspense;function dR(n,e){e&&e.pendingBranch?$e(n)?e.effects.push(...n):e.effects.push(n):Ex(n)}const He=Symbol.for("v-fgt"),Cl=Symbol.for("v-txt"),is=Symbol.for("v-cmt"),Dc=Symbol.for("v-stc"),Io=[];let dr=null;function O(n=!1){Io.push(dr=n?null:[])}function hR(){Io.pop(),dr=Io[Io.length-1]||null}let Qo=1;function xg(n){Qo+=n,n<0&&dr&&(dr.hasOnce=!0)}function d1(n){return n.dynamicChildren=Qo>0?dr||ya:null,hR(),Qo>0&&dr&&dr.push(n),n}function H(n,e,t,i,r,s){return d1(q(n,e,t,i,r,s,!0))}function ze(n,e,t,i,r){return d1(be(n,e,t,i,r,!0))}function tu(n){return n?n.__v_isVNode===!0:!1}function oo(n,e){return n.type===e.type&&n.key===e.key}const h1=({key:n})=>n??null,Mc=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?rn(n)||jn(n)||Ge(n)?{i:fn,r:n,k:e,f:!!t}:n:null);function q(n,e=null,t=null,i=0,r=null,s=n===He?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&h1(e),ref:e&&Mc(e),scopeId:Ub,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:fn};return o?(zm(l,t),s&128&&n.normalize(l)):t&&(l.shapeFlag|=rn(t)?8:16),Qo>0&&!a&&dr&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&dr.push(l),l}const be=fR;function fR(n,e=null,t=null,i=0,r=null,s=!1){if((!n||n===zb)&&(n=is),tu(n)){const o=Oa(n,e,!0);return t&&zm(o,t),Qo>0&&!s&&dr&&(o.shapeFlag&6?dr[dr.indexOf(n)]=o:dr.push(o)),o.patchFlag=-2,o}if(_R(n)&&(n=n.__vccOpts),e){e=mR(e);let{class:o,style:l}=e;o&&!rn(o)&&(e.class=_e(o)),$t(l)&&(Ib(l)&&!$e(l)&&(l=Cn({},l)),e.style=Xu(l))}const a=rn(n)?1:uR(n)?128:Qx(n)?64:$t(n)?4:Ge(n)?2:0;return q(n,e,t,i,r,a,s,!0)}function mR(n){return n?Ib(n)||Zb(n)?Cn({},n):n:null}function Oa(n,e,t=!1,i=!1){const{props:r,ref:s,patchFlag:a,children:o,transition:l}=n,c=e?gR(r||{},e):r,u={__v_isVNode:!0,__v_skip:!0,type:n.type,props:c,key:c&&h1(c),ref:e&&e.ref?t&&s?$e(s)?s.concat(Mc(e)):[s,Mc(e)]:Mc(e):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:o,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==He?a===-1?16:a|16:a,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Oa(n.ssContent),ssFallback:n.ssFallback&&Oa(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&i&&Hb(u,l.clone(u)),u}function Lt(n=" ",e=0){return be(Cl,null,n,e)}function pR(n,e){const t=be(Dc,null,n);return t.staticCount=e,t}function Re(n="",e=!1){return e?(O(),ze(is,null,n)):be(is,null,n)}function Xr(n){return n==null||typeof n=="boolean"?be(is):$e(n)?be(He,null,n.slice()):typeof n=="object"?$i(n):be(Cl,null,String(n))}function $i(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Oa(n)}function zm(n,e){let t=0;const{shapeFlag:i}=n;if(e==null)e=null;else if($e(e))t=16;else if(typeof e=="object")if(i&65){const r=e.default;r&&(r._c&&(r._d=!1),zm(n,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!Zb(e)?e._ctx=fn:r===3&&fn&&(fn.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Ge(e)?(e={default:e,_ctx:fn},t=32):(e=String(e),i&64?(t=16,e=[Lt(e)]):t=8);n.children=e,n.shapeFlag|=t}function gR(...n){const e={};for(let t=0;t<n.length;t++){const i=n[t];for(const r in i)if(r==="class")e.class!==i.class&&(e.class=_e([e.class,i.class]));else if(r==="style")e.style=Xu([e.style,i.style]);else if(Gu(r)){const s=e[r],a=i[r];a&&s!==a&&!($e(s)&&s.includes(a))&&(e[r]=s?[].concat(s,a):a)}else r!==""&&(e[r]=i[r])}return e}function Wr(n,e,t,i=null){Or(n,e,7,[t,i])}const vR=Qb();let yR=0;function bR(n,e,t){const i=n.type,r=(e?e.appContext:n.appContext)||vR,s={uid:yR++,vnode:n,type:i,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new bb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:t1(i,r),emitsOptions:u1(i,r),emit:null,emitted:null,propsDefaults:bt,inheritAttrs:i.inheritAttrs,ctx:bt,data:bt,props:bt,attrs:bt,slots:bt,refs:bt,setupState:bt,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=sR.bind(null,s),n.ce&&n.ce(s),s}let bn=null;const xi=()=>bn||fn;let nu,tf;{const n=pb(),e=(t,i)=>{let r;return(r=n[t])||(r=n[t]=[]),r.push(i),s=>{r.length>1?r.forEach(a=>a(s)):r[0](s)}};nu=e("__VUE_INSTANCE_SETTERS__",t=>bn=t),tf=e("__VUE_SSR_SETTERS__",t=>id=t)}const Sl=n=>{const e=bn;return nu(n),n.scope.on(),()=>{n.scope.off(),nu(e)}},Rg=()=>{bn&&bn.scope.off(),nu(null)};function f1(n){return n.vnode.shapeFlag&4}let id=!1;function ER(n,e=!1,t=!1){e&&tf(e);const{props:i,children:r}=n.vnode,s=f1(n);Vx(n,i,s,e),Gx(n,r,t);const a=s?wR(n,e):void 0;return e&&tf(!1),a}function wR(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,Ox);const{setup:i}=t;if(i){const r=n.setupContext=i.length>1?p1(n):null,s=Sl(n);fs();const a=es(i,n,0,[n.props,r]);if(ms(),s(),db(a)){if(a.then(Rg,Rg),e)return a.then(o=>{Ag(n,o,e)}).catch(o=>{Zu(o,n,0)});n.asyncDep=a}else Ag(n,a,e)}else m1(n,e)}function Ag(n,e,t){Ge(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:$t(e)&&(n.setupState=Fb(e)),m1(n,t)}let kg;function m1(n,e,t){const i=n.type;if(!n.render){if(!e&&kg&&!i.render){const r=i.template||Vm(n).template;if(r){const{isCustomElement:s,compilerOptions:a}=n.appContext.config,{delimiters:o,compilerOptions:l}=i,c=Cn(Cn({isCustomElement:s,delimiters:o},a),l);i.render=kg(r,c)}}n.render=i.render||ur}{const r=Sl(n);fs();try{Fx(n)}finally{ms(),r()}}}const CR={get(n,e){return tr(n,"get",""),n[e]}};function p1(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,CR),slots:n.slots,emit:n.emit,expose:e}}function sd(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(Fb(dx(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in To)return To[t](n)},has(e,t){return t in e||t in To}})):n.proxy}function SR(n,e=!0){return Ge(n)?n.displayName||n.name:n.name||e&&n.__name}function _R(n){return Ge(n)&&"__vccOpts"in n}const Qe=(n,e)=>hx(n,e,id);function js(n,e,t){const i=arguments.length;return i===2?$t(e)&&!$e(e)?tu(e)?be(n,null,[e]):be(n,e):be(n,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&tu(t)&&(t=[t]),be(n,e,t))}const xR="3.4.38";/**
* @vue/runtime-dom v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const RR="http://www.w3.org/2000/svg",AR="http://www.w3.org/1998/Math/MathML",vi=typeof document<"u"?document:null,Dg=vi&&vi.createElement("template"),kR={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,i)=>{const r=e==="svg"?vi.createElementNS(RR,n):e==="mathml"?vi.createElementNS(AR,n):t?vi.createElement(n,{is:t}):vi.createElement(n);return n==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:n=>vi.createTextNode(n),createComment:n=>vi.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>vi.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,i,r,s){const a=t?t.previousSibling:e.lastChild;if(r&&(r===s||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===s||!(r=r.nextSibling)););else{Dg.innerHTML=i==="svg"?`<svg>${n}</svg>`:i==="mathml"?`<math>${n}</math>`:n;const o=Dg.content;if(i==="svg"||i==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,t)}return[a?a.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},DR=Symbol("_vtc");function MR(n,e,t){const i=n[DR];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const ru=Symbol("_vod"),g1=Symbol("_vsh"),yr={beforeMount(n,{value:e},{transition:t}){n[ru]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):lo(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:i}){!e!=!t&&(i?e?(i.beforeEnter(n),lo(n,!0),i.enter(n)):i.leave(n,()=>{lo(n,!1)}):lo(n,e))},beforeUnmount(n,{value:e}){lo(n,e)}};function lo(n,e){n.style.display=e?n[ru]:"none",n[g1]=!e}const PR=Symbol(""),TR=/(^|;)\s*display\s*:/;function IR(n,e,t){const i=n.style,r=rn(t);let s=!1;if(t&&!r){if(e)if(rn(e))for(const a of e.split(";")){const o=a.slice(0,a.indexOf(":")).trim();t[o]==null&&Pc(i,o,"")}else for(const a in e)t[a]==null&&Pc(i,a,"");for(const a in t)a==="display"&&(s=!0),Pc(i,a,t[a])}else if(r){if(e!==t){const a=i[PR];a&&(t+=";"+a),i.cssText=t,s=TR.test(t)}}else e&&n.removeAttribute("style");ru in n&&(n[ru]=s?i.display:"",n[g1]&&(i.display="none"))}const Mg=/\s*!important$/;function Pc(n,e,t){if($e(t))t.forEach(i=>Pc(n,e,i));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const i=OR(n,e);Mg.test(t)?n.setProperty(hs(i),t.replace(Mg,""),"important"):n[i]=t}}const Pg=["Webkit","Moz","ms"],qd={};function OR(n,e){const t=qd[e];if(t)return t;let i=_r(e);if(i!=="filter"&&i in n)return qd[e]=i;i=Qu(i);for(let r=0;r<Pg.length;r++){const s=Pg[r]+i;if(s in n)return qd[e]=s}return e}const Tg="http://www.w3.org/1999/xlink";function Ig(n,e,t,i,r,s=H_(e)){i&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(Tg,e.slice(6,e.length)):n.setAttributeNS(Tg,e,t):t==null||s&&!gb(t)?n.removeAttribute(e):n.setAttribute(e,s?"":ds(t)?String(t):t)}function NR(n,e,t,i){if(e==="innerHTML"||e==="textContent"){if(t==null)return;n[e]=t;return}const r=n.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?n.getAttribute("value")||"":n.value,o=t==null?"":String(t);(a!==o||!("_value"in n))&&(n.value=o),t==null&&n.removeAttribute(e),n._value=t;return}let s=!1;if(t===""||t==null){const a=typeof n[e];a==="boolean"?t=gb(t):t==null&&a==="string"?(t="",s=!0):a==="number"&&(t=0,s=!0)}try{n[e]=t}catch{}s&&n.removeAttribute(e)}function sa(n,e,t,i){n.addEventListener(e,t,i)}function FR(n,e,t,i){n.removeEventListener(e,t,i)}const Og=Symbol("_vei");function LR(n,e,t,i,r=null){const s=n[Og]||(n[Og]={}),a=s[e];if(i&&a)a.value=i;else{const[o,l]=BR(e);if(i){const c=s[e]=UR(i,r);sa(n,o,c,l)}else a&&(FR(n,o,a,l),s[e]=void 0)}}const Ng=/(?:Once|Passive|Capture)$/;function BR(n){let e;if(Ng.test(n)){e={};let i;for(;i=n.match(Ng);)n=n.slice(0,n.length-i[0].length),e[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):hs(n.slice(2)),e]}let Ud=0;const $R=Promise.resolve(),qR=()=>Ud||($R.then(()=>Ud=0),Ud=Date.now());function UR(n,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;Or(HR(i,t.value),e,5,[i])};return t.value=n,t.attached=qR(),t}function HR(n,e){if($e(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(i=>r=>!r._stopped&&i&&i(r))}else return e}const Fg=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,VR=(n,e,t,i,r,s)=>{const a=r==="svg";e==="class"?MR(n,i,a):e==="style"?IR(n,t,i):Gu(e)?km(e)||LR(n,e,t,i,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):jR(n,e,i,a))?(NR(n,e,i),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Ig(n,e,i,a,s,e!=="value")):(e==="true-value"?n._trueValue=i:e==="false-value"&&(n._falseValue=i),Ig(n,e,i,a))};function jR(n,e,t,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in n&&Fg(e)&&Ge(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=n.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Fg(e)&&rn(t)?!1:e in n}const Lg=n=>{const e=n.props["onUpdate:modelValue"]||!1;return $e(e)?t=>Ac(e,t):e};function WR(n){n.target.composing=!0}function Bg(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Hd=Symbol("_assign"),ad={created(n,{modifiers:{lazy:e,trim:t,number:i}},r){n[Hd]=Lg(r);const s=i||r.props&&r.props.type==="number";sa(n,e?"change":"input",a=>{if(a.target.composing)return;let o=n.value;t&&(o=o.trim()),s&&(o=Vh(o)),n[Hd](o)}),t&&sa(n,"change",()=>{n.value=n.value.trim()}),e||(sa(n,"compositionstart",WR),sa(n,"compositionend",Bg),sa(n,"change",Bg))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:i,trim:r,number:s}},a){if(n[Hd]=Lg(a),n.composing)return;const o=(s||n.type==="number")&&!/^0\d/.test(n.value)?Vh(n.value):n.value,l=e??"";o!==l&&(document.activeElement===n&&n.type!=="range"&&(i&&e===t||r&&n.value.trim()===l)||(n.value=l))}},zR=["ctrl","shift","alt","meta"],GR={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>zR.some(t=>n[`${t}Key`]&&!e.includes(t))},qn=(n,e)=>{const t=n._withMods||(n._withMods={}),i=e.join(".");return t[i]||(t[i]=(r,...s)=>{for(let a=0;a<e.length;a++){const o=GR[e[a]];if(o&&o(r,e))return}return n(r,...s)})},KR=Cn({patchProp:VR},kR);let $g;function YR(){return $g||($g=Xx(KR))}const QR=(...n)=>{const e=YR().createApp(...n),{mount:t}=e;return e.mount=i=>{const r=JR(i);if(!r)return;const s=e._component;!Ge(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const a=t(r,!1,XR(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),a},e};function XR(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function JR(n){return rn(n)?document.querySelector(n):n}/*!
  * shared v9.14.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const iu=typeof window<"u",ps=(n,e=!1)=>e?Symbol.for(n):Symbol(n),ZR=(n,e,t)=>eA({l:n,k:e,s:t}),eA=n=>JSON.stringify(n).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Qt=n=>typeof n=="number"&&isFinite(n),tA=n=>y1(n)==="[object Date]",ss=n=>y1(n)==="[object RegExp]",od=n=>je(n)&&Object.keys(n).length===0,wn=Object.assign,nA=Object.create,Et=(n=null)=>nA(n);let qg;const bi=()=>qg||(qg=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:Et());function Ug(n){return n.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const rA=Object.prototype.hasOwnProperty;function Pr(n,e){return rA.call(n,e)}const Tt=Array.isArray,kt=n=>typeof n=="function",ye=n=>typeof n=="string",et=n=>typeof n=="boolean",mt=n=>n!==null&&typeof n=="object",iA=n=>mt(n)&&kt(n.then)&&kt(n.catch),v1=Object.prototype.toString,y1=n=>v1.call(n),je=n=>{if(!mt(n))return!1;const e=Object.getPrototypeOf(n);return e===null||e.constructor===Object},sA=n=>n==null?"":Tt(n)||je(n)&&n.toString===v1?JSON.stringify(n,null,2):String(n);function aA(n,e=""){return n.reduce((t,i,r)=>r===0?t+i:t+e+i,"")}function ld(n){let e=n;return()=>++e}function oA(n,e){typeof console<"u"&&(console.warn("[intlify] "+n),e&&console.warn(e.stack))}const Gl=n=>!mt(n)||Tt(n);function Tc(n,e){if(Gl(n)||Gl(e))throw new Error("Invalid value");const t=[{src:n,des:e}];for(;t.length;){const{src:i,des:r}=t.pop();Object.keys(i).forEach(s=>{s!=="__proto__"&&(mt(i[s])&&!mt(r[s])&&(r[s]=Array.isArray(i[s])?[]:Et()),Gl(r[s])||Gl(i[s])?r[s]=i[s]:t.push({src:i[s],des:r[s]}))})}}/*!
  * message-compiler v9.14.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function lA(n,e,t){return{line:n,column:e,offset:t}}function su(n,e,t){const i={start:n,end:e};return t!=null&&(i.source=t),i}const cA=/\{([0-9a-zA-Z]+)\}/g;function b1(n,...e){return e.length===1&&uA(e[0])&&(e=e[0]),(!e||!e.hasOwnProperty)&&(e={}),n.replace(cA,(t,i)=>e.hasOwnProperty(i)?e[i]:"")}const E1=Object.assign,Hg=n=>typeof n=="string",uA=n=>n!==null&&typeof n=="object";function w1(n,e=""){return n.reduce((t,i,r)=>r===0?t+i:t+e+i,"")}const Gm={USE_MODULO_SYNTAX:1,__EXTEND_POINT__:2},dA={[Gm.USE_MODULO_SYNTAX]:"Use modulo before '{{0}}'."};function hA(n,e,...t){const i=b1(dA[n]||"",...t||[]),r={message:String(i),code:n};return e&&(r.location=e),r}const Be={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},fA={[Be.EXPECTED_TOKEN]:"Expected token: '{0}'",[Be.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[Be.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[Be.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[Be.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[Be.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[Be.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[Be.EMPTY_PLACEHOLDER]:"Empty placeholder",[Be.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[Be.INVALID_LINKED_FORMAT]:"Invalid linked format",[Be.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[Be.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[Be.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[Be.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[Be.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[Be.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function Qa(n,e,t={}){const{domain:i,messages:r,args:s}=t,a=b1((r||fA)[n]||"",...s||[]),o=new SyntaxError(String(a));return o.code=n,e&&(o.location=e),o.domain=i,o}function mA(n){throw n}const mi=" ",pA="\r",Fn=`
`,gA=String.fromCharCode(8232),vA=String.fromCharCode(8233);function yA(n){const e=n;let t=0,i=1,r=1,s=0;const a=k=>e[k]===pA&&e[k+1]===Fn,o=k=>e[k]===Fn,l=k=>e[k]===vA,c=k=>e[k]===gA,u=k=>a(k)||o(k)||l(k)||c(k),d=()=>t,h=()=>i,f=()=>r,m=()=>s,p=k=>a(k)||l(k)||c(k)?Fn:e[k],g=()=>p(t),v=()=>p(t+s);function C(){return s=0,u(t)&&(i++,r=0),a(t)&&t++,t++,r++,e[t]}function y(){return a(t+s)&&s++,s++,e[t+s]}function E(){t=0,i=1,r=1,s=0}function _(k=0){s=k}function w(){const k=t+s;for(;k!==t;)C();s=0}return{index:d,line:h,column:f,peekOffset:m,charAt:p,currentChar:g,currentPeek:v,next:C,peek:y,reset:E,resetPeek:_,skipToPeek:w}}const Fi=void 0,bA=".",Vg="'",EA="tokenizer";function wA(n,e={}){const t=e.location!==!1,i=yA(n),r=()=>i.index(),s=()=>lA(i.line(),i.column(),i.index()),a=s(),o=r(),l={currentType:14,offset:o,startLoc:a,endLoc:a,lastType:14,lastOffset:o,lastStartLoc:a,lastEndLoc:a,braceNest:0,inLinked:!1,text:""},c=()=>l,{onError:u}=e;function d(S,x,D,...V){const se=c();if(x.column+=D,x.offset+=D,u){const te=t?su(se.startLoc,x):null,L=Qa(S,te,{domain:EA,args:V});u(L)}}function h(S,x,D){S.endLoc=s(),S.currentType=x;const V={type:x};return t&&(V.loc=su(S.startLoc,S.endLoc)),D!=null&&(V.value=D),V}const f=S=>h(S,14);function m(S,x){return S.currentChar()===x?(S.next(),x):(d(Be.EXPECTED_TOKEN,s(),0,x),"")}function p(S){let x="";for(;S.currentPeek()===mi||S.currentPeek()===Fn;)x+=S.currentPeek(),S.peek();return x}function g(S){const x=p(S);return S.skipToPeek(),x}function v(S){if(S===Fi)return!1;const x=S.charCodeAt(0);return x>=97&&x<=122||x>=65&&x<=90||x===95}function C(S){if(S===Fi)return!1;const x=S.charCodeAt(0);return x>=48&&x<=57}function y(S,x){const{currentType:D}=x;if(D!==2)return!1;p(S);const V=v(S.currentPeek());return S.resetPeek(),V}function E(S,x){const{currentType:D}=x;if(D!==2)return!1;p(S);const V=S.currentPeek()==="-"?S.peek():S.currentPeek(),se=C(V);return S.resetPeek(),se}function _(S,x){const{currentType:D}=x;if(D!==2)return!1;p(S);const V=S.currentPeek()===Vg;return S.resetPeek(),V}function w(S,x){const{currentType:D}=x;if(D!==8)return!1;p(S);const V=S.currentPeek()===".";return S.resetPeek(),V}function k(S,x){const{currentType:D}=x;if(D!==9)return!1;p(S);const V=v(S.currentPeek());return S.resetPeek(),V}function I(S,x){const{currentType:D}=x;if(!(D===8||D===12))return!1;p(S);const V=S.currentPeek()===":";return S.resetPeek(),V}function P(S,x){const{currentType:D}=x;if(D!==10)return!1;const V=()=>{const te=S.currentPeek();return te==="{"?v(S.peek()):te==="@"||te==="%"||te==="|"||te===":"||te==="."||te===mi||!te?!1:te===Fn?(S.peek(),V()):B(S,!1)},se=V();return S.resetPeek(),se}function Z(S){p(S);const x=S.currentPeek()==="|";return S.resetPeek(),x}function X(S){const x=p(S),D=S.currentPeek()==="%"&&S.peek()==="{";return S.resetPeek(),{isModulo:D,hasSpace:x.length>0}}function B(S,x=!0){const D=(se=!1,te="",L=!1)=>{const K=S.currentPeek();return K==="{"?te==="%"?!1:se:K==="@"||!K?te==="%"?!0:se:K==="%"?(S.peek(),D(se,"%",!0)):K==="|"?te==="%"||L?!0:!(te===mi||te===Fn):K===mi?(S.peek(),D(!0,mi,L)):K===Fn?(S.peek(),D(!0,Fn,L)):!0},V=D();return x&&S.resetPeek(),V}function $(S,x){const D=S.currentChar();return D===Fi?Fi:x(D)?(S.next(),D):null}function U(S){const x=S.charCodeAt(0);return x>=97&&x<=122||x>=65&&x<=90||x>=48&&x<=57||x===95||x===36}function re(S){return $(S,U)}function le(S){const x=S.charCodeAt(0);return x>=97&&x<=122||x>=65&&x<=90||x>=48&&x<=57||x===95||x===36||x===45}function ae(S){return $(S,le)}function ue(S){const x=S.charCodeAt(0);return x>=48&&x<=57}function ve(S){return $(S,ue)}function me(S){const x=S.charCodeAt(0);return x>=48&&x<=57||x>=65&&x<=70||x>=97&&x<=102}function ke(S){return $(S,me)}function Me(S){let x="",D="";for(;x=ve(S);)D+=x;return D}function Xe(S){g(S);const x=S.currentChar();return x!=="%"&&d(Be.EXPECTED_TOKEN,s(),0,x),S.next(),"%"}function Fe(S){let x="";for(;;){const D=S.currentChar();if(D==="{"||D==="}"||D==="@"||D==="|"||!D)break;if(D==="%")if(B(S))x+=D,S.next();else break;else if(D===mi||D===Fn)if(B(S))x+=D,S.next();else{if(Z(S))break;x+=D,S.next()}else x+=D,S.next()}return x}function wt(S){g(S);let x="",D="";for(;x=ae(S);)D+=x;return S.currentChar()===Fi&&d(Be.UNTERMINATED_CLOSING_BRACE,s(),0),D}function Ze(S){g(S);let x="";return S.currentChar()==="-"?(S.next(),x+=`-${Me(S)}`):x+=Me(S),S.currentChar()===Fi&&d(Be.UNTERMINATED_CLOSING_BRACE,s(),0),x}function W(S){return S!==Vg&&S!==Fn}function ce(S){g(S),m(S,"'");let x="",D="";for(;x=$(S,W);)x==="\\"?D+=oe(S):D+=x;const V=S.currentChar();return V===Fn||V===Fi?(d(Be.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,s(),0),V===Fn&&(S.next(),m(S,"'")),D):(m(S,"'"),D)}function oe(S){const x=S.currentChar();switch(x){case"\\":case"'":return S.next(),`\\${x}`;case"u":return de(S,x,4);case"U":return de(S,x,6);default:return d(Be.UNKNOWN_ESCAPE_SEQUENCE,s(),0,x),""}}function de(S,x,D){m(S,x);let V="";for(let se=0;se<D;se++){const te=ke(S);if(!te){d(Be.INVALID_UNICODE_ESCAPE_SEQUENCE,s(),0,`\\${x}${V}${S.currentChar()}`);break}V+=te}return`\\${x}${V}`}function Ae(S){return S!=="{"&&S!=="}"&&S!==mi&&S!==Fn}function Je(S){g(S);let x="",D="";for(;x=$(S,Ae);)D+=x;return D}function R(S){let x="",D="";for(;x=re(S);)D+=x;return D}function b(S){const x=D=>{const V=S.currentChar();return V==="{"||V==="%"||V==="@"||V==="|"||V==="("||V===")"||!V||V===mi?D:(D+=V,S.next(),x(D))};return x("")}function N(S){g(S);const x=m(S,"|");return g(S),x}function J(S,x){let D=null;switch(S.currentChar()){case"{":return x.braceNest>=1&&d(Be.NOT_ALLOW_NEST_PLACEHOLDER,s(),0),S.next(),D=h(x,2,"{"),g(S),x.braceNest++,D;case"}":return x.braceNest>0&&x.currentType===2&&d(Be.EMPTY_PLACEHOLDER,s(),0),S.next(),D=h(x,3,"}"),x.braceNest--,x.braceNest>0&&g(S),x.inLinked&&x.braceNest===0&&(x.inLinked=!1),D;case"@":return x.braceNest>0&&d(Be.UNTERMINATED_CLOSING_BRACE,s(),0),D=Q(S,x)||f(x),x.braceNest=0,D;default:{let se=!0,te=!0,L=!0;if(Z(S))return x.braceNest>0&&d(Be.UNTERMINATED_CLOSING_BRACE,s(),0),D=h(x,1,N(S)),x.braceNest=0,x.inLinked=!1,D;if(x.braceNest>0&&(x.currentType===5||x.currentType===6||x.currentType===7))return d(Be.UNTERMINATED_CLOSING_BRACE,s(),0),x.braceNest=0,ne(S,x);if(se=y(S,x))return D=h(x,5,wt(S)),g(S),D;if(te=E(S,x))return D=h(x,6,Ze(S)),g(S),D;if(L=_(S,x))return D=h(x,7,ce(S)),g(S),D;if(!se&&!te&&!L)return D=h(x,13,Je(S)),d(Be.INVALID_TOKEN_IN_PLACEHOLDER,s(),0,D.value),g(S),D;break}}return D}function Q(S,x){const{currentType:D}=x;let V=null;const se=S.currentChar();switch((D===8||D===9||D===12||D===10)&&(se===Fn||se===mi)&&d(Be.INVALID_LINKED_FORMAT,s(),0),se){case"@":return S.next(),V=h(x,8,"@"),x.inLinked=!0,V;case".":return g(S),S.next(),h(x,9,".");case":":return g(S),S.next(),h(x,10,":");default:return Z(S)?(V=h(x,1,N(S)),x.braceNest=0,x.inLinked=!1,V):w(S,x)||I(S,x)?(g(S),Q(S,x)):k(S,x)?(g(S),h(x,12,R(S))):P(S,x)?(g(S),se==="{"?J(S,x)||V:h(x,11,b(S))):(D===8&&d(Be.INVALID_LINKED_FORMAT,s(),0),x.braceNest=0,x.inLinked=!1,ne(S,x))}}function ne(S,x){let D={type:14};if(x.braceNest>0)return J(S,x)||f(x);if(x.inLinked)return Q(S,x)||f(x);switch(S.currentChar()){case"{":return J(S,x)||f(x);case"}":return d(Be.UNBALANCED_CLOSING_BRACE,s(),0),S.next(),h(x,3,"}");case"@":return Q(S,x)||f(x);default:{if(Z(S))return D=h(x,1,N(S)),x.braceNest=0,x.inLinked=!1,D;const{isModulo:se,hasSpace:te}=X(S);if(se)return te?h(x,0,Fe(S)):h(x,4,Xe(S));if(B(S))return h(x,0,Fe(S));break}}return D}function ie(){const{currentType:S,offset:x,startLoc:D,endLoc:V}=l;return l.lastType=S,l.lastOffset=x,l.lastStartLoc=D,l.lastEndLoc=V,l.offset=r(),l.startLoc=s(),i.currentChar()===Fi?h(l,14):ne(i,l)}return{nextToken:ie,currentOffset:r,currentPosition:s,context:c}}const CA="parser",SA=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function _A(n,e,t){switch(n){case"\\\\":return"\\";case"\\'":return"'";default:{const i=parseInt(e||t,16);return i<=55295||i>=57344?String.fromCodePoint(i):"�"}}}function xA(n={}){const e=n.location!==!1,{onError:t,onWarn:i}=n;function r(y,E,_,w,...k){const I=y.currentPosition();if(I.offset+=w,I.column+=w,t){const P=e?su(_,I):null,Z=Qa(E,P,{domain:CA,args:k});t(Z)}}function s(y,E,_,w,...k){const I=y.currentPosition();if(I.offset+=w,I.column+=w,i){const P=e?su(_,I):null;i(hA(E,P,k))}}function a(y,E,_){const w={type:y};return e&&(w.start=E,w.end=E,w.loc={start:_,end:_}),w}function o(y,E,_,w){w&&(y.type=w),e&&(y.end=E,y.loc&&(y.loc.end=_))}function l(y,E){const _=y.context(),w=a(3,_.offset,_.startLoc);return w.value=E,o(w,y.currentOffset(),y.currentPosition()),w}function c(y,E){const _=y.context(),{lastOffset:w,lastStartLoc:k}=_,I=a(5,w,k);return I.index=parseInt(E,10),y.nextToken(),o(I,y.currentOffset(),y.currentPosition()),I}function u(y,E,_){const w=y.context(),{lastOffset:k,lastStartLoc:I}=w,P=a(4,k,I);return P.key=E,_===!0&&(P.modulo=!0),y.nextToken(),o(P,y.currentOffset(),y.currentPosition()),P}function d(y,E){const _=y.context(),{lastOffset:w,lastStartLoc:k}=_,I=a(9,w,k);return I.value=E.replace(SA,_A),y.nextToken(),o(I,y.currentOffset(),y.currentPosition()),I}function h(y){const E=y.nextToken(),_=y.context(),{lastOffset:w,lastStartLoc:k}=_,I=a(8,w,k);return E.type!==12?(r(y,Be.UNEXPECTED_EMPTY_LINKED_MODIFIER,_.lastStartLoc,0),I.value="",o(I,w,k),{nextConsumeToken:E,node:I}):(E.value==null&&r(y,Be.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,Ar(E)),I.value=E.value||"",o(I,y.currentOffset(),y.currentPosition()),{node:I})}function f(y,E){const _=y.context(),w=a(7,_.offset,_.startLoc);return w.value=E,o(w,y.currentOffset(),y.currentPosition()),w}function m(y){const E=y.context(),_=a(6,E.offset,E.startLoc);let w=y.nextToken();if(w.type===9){const k=h(y);_.modifier=k.node,w=k.nextConsumeToken||y.nextToken()}switch(w.type!==10&&r(y,Be.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Ar(w)),w=y.nextToken(),w.type===2&&(w=y.nextToken()),w.type){case 11:w.value==null&&r(y,Be.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Ar(w)),_.key=f(y,w.value||"");break;case 5:w.value==null&&r(y,Be.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Ar(w)),_.key=u(y,w.value||"");break;case 6:w.value==null&&r(y,Be.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Ar(w)),_.key=c(y,w.value||"");break;case 7:w.value==null&&r(y,Be.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Ar(w)),_.key=d(y,w.value||"");break;default:{r(y,Be.UNEXPECTED_EMPTY_LINKED_KEY,E.lastStartLoc,0);const k=y.context(),I=a(7,k.offset,k.startLoc);return I.value="",o(I,k.offset,k.startLoc),_.key=I,o(_,k.offset,k.startLoc),{nextConsumeToken:w,node:_}}}return o(_,y.currentOffset(),y.currentPosition()),{node:_}}function p(y){const E=y.context(),_=E.currentType===1?y.currentOffset():E.offset,w=E.currentType===1?E.endLoc:E.startLoc,k=a(2,_,w);k.items=[];let I=null,P=null;do{const B=I||y.nextToken();switch(I=null,B.type){case 0:B.value==null&&r(y,Be.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Ar(B)),k.items.push(l(y,B.value||""));break;case 6:B.value==null&&r(y,Be.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Ar(B)),k.items.push(c(y,B.value||""));break;case 4:P=!0;break;case 5:B.value==null&&r(y,Be.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Ar(B)),k.items.push(u(y,B.value||"",!!P)),P&&(s(y,Gm.USE_MODULO_SYNTAX,E.lastStartLoc,0,Ar(B)),P=null);break;case 7:B.value==null&&r(y,Be.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Ar(B)),k.items.push(d(y,B.value||""));break;case 8:{const $=m(y);k.items.push($.node),I=$.nextConsumeToken||null;break}}}while(E.currentType!==14&&E.currentType!==1);const Z=E.currentType===1?E.lastOffset:y.currentOffset(),X=E.currentType===1?E.lastEndLoc:y.currentPosition();return o(k,Z,X),k}function g(y,E,_,w){const k=y.context();let I=w.items.length===0;const P=a(1,E,_);P.cases=[],P.cases.push(w);do{const Z=p(y);I||(I=Z.items.length===0),P.cases.push(Z)}while(k.currentType!==14);return I&&r(y,Be.MUST_HAVE_MESSAGES_IN_PLURAL,_,0),o(P,y.currentOffset(),y.currentPosition()),P}function v(y){const E=y.context(),{offset:_,startLoc:w}=E,k=p(y);return E.currentType===14?k:g(y,_,w,k)}function C(y){const E=wA(y,E1({},n)),_=E.context(),w=a(0,_.offset,_.startLoc);return e&&w.loc&&(w.loc.source=y),w.body=v(E),n.onCacheKey&&(w.cacheKey=n.onCacheKey(y)),_.currentType!==14&&r(E,Be.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,y[_.offset]||""),o(w,E.currentOffset(),E.currentPosition()),w}return{parse:C}}function Ar(n){if(n.type===14)return"EOF";const e=(n.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"…":e}function RA(n,e={}){const t={ast:n,helpers:new Set};return{context:()=>t,helper:s=>(t.helpers.add(s),s)}}function jg(n,e){for(let t=0;t<n.length;t++)Km(n[t],e)}function Km(n,e){switch(n.type){case 1:jg(n.cases,e),e.helper("plural");break;case 2:jg(n.items,e);break;case 6:{Km(n.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function AA(n,e={}){const t=RA(n);t.helper("normalize"),n.body&&Km(n.body,t);const i=t.context();n.helpers=Array.from(i.helpers)}function kA(n){const e=n.body;return e.type===2?Wg(e):e.cases.forEach(t=>Wg(t)),n}function Wg(n){if(n.items.length===1){const e=n.items[0];(e.type===3||e.type===9)&&(n.static=e.value,delete e.value)}else{const e=[];for(let t=0;t<n.items.length;t++){const i=n.items[t];if(!(i.type===3||i.type===9)||i.value==null)break;e.push(i.value)}if(e.length===n.items.length){n.static=w1(e);for(let t=0;t<n.items.length;t++){const i=n.items[t];(i.type===3||i.type===9)&&delete i.value}}}}const DA="minifier";function aa(n){switch(n.t=n.type,n.type){case 0:{const e=n;aa(e.body),e.b=e.body,delete e.body;break}case 1:{const e=n,t=e.cases;for(let i=0;i<t.length;i++)aa(t[i]);e.c=t,delete e.cases;break}case 2:{const e=n,t=e.items;for(let i=0;i<t.length;i++)aa(t[i]);e.i=t,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=n;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=n;aa(e.key),e.k=e.key,delete e.key,e.modifier&&(aa(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=n;e.i=e.index,delete e.index;break}case 4:{const e=n;e.k=e.key,delete e.key;break}default:throw Qa(Be.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:DA,args:[n.type]})}delete n.type}const MA="parser";function PA(n,e){const{sourceMap:t,filename:i,breakLineCode:r,needIndent:s}=e,a=e.location!==!1,o={filename:i,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:r,needIndent:s,indentLevel:0};a&&n.loc&&(o.source=n.loc.source);const l=()=>o;function c(g,v){o.code+=g}function u(g,v=!0){const C=v?r:"";c(s?C+"  ".repeat(g):C)}function d(g=!0){const v=++o.indentLevel;g&&u(v)}function h(g=!0){const v=--o.indentLevel;g&&u(v)}function f(){u(o.indentLevel)}return{context:l,push:c,indent:d,deindent:h,newline:f,helper:g=>`_${g}`,needIndent:()=>o.needIndent}}function TA(n,e){const{helper:t}=n;n.push(`${t("linked")}(`),Na(n,e.key),e.modifier?(n.push(", "),Na(n,e.modifier),n.push(", _type")):n.push(", undefined, _type"),n.push(")")}function IA(n,e){const{helper:t,needIndent:i}=n;n.push(`${t("normalize")}([`),n.indent(i());const r=e.items.length;for(let s=0;s<r&&(Na(n,e.items[s]),s!==r-1);s++)n.push(", ");n.deindent(i()),n.push("])")}function OA(n,e){const{helper:t,needIndent:i}=n;if(e.cases.length>1){n.push(`${t("plural")}([`),n.indent(i());const r=e.cases.length;for(let s=0;s<r&&(Na(n,e.cases[s]),s!==r-1);s++)n.push(", ");n.deindent(i()),n.push("])")}}function NA(n,e){e.body?Na(n,e.body):n.push("null")}function Na(n,e){const{helper:t}=n;switch(e.type){case 0:NA(n,e);break;case 1:OA(n,e);break;case 2:IA(n,e);break;case 6:TA(n,e);break;case 8:n.push(JSON.stringify(e.value),e);break;case 7:n.push(JSON.stringify(e.value),e);break;case 5:n.push(`${t("interpolate")}(${t("list")}(${e.index}))`,e);break;case 4:n.push(`${t("interpolate")}(${t("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:n.push(JSON.stringify(e.value),e);break;case 3:n.push(JSON.stringify(e.value),e);break;default:throw Qa(Be.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:MA,args:[e.type]})}}const FA=(n,e={})=>{const t=Hg(e.mode)?e.mode:"normal",i=Hg(e.filename)?e.filename:"message.intl",r=!!e.sourceMap,s=e.breakLineCode!=null?e.breakLineCode:t==="arrow"?";":`
`,a=e.needIndent?e.needIndent:t!=="arrow",o=n.helpers||[],l=PA(n,{mode:t,filename:i,sourceMap:r,breakLineCode:s,needIndent:a});l.push(t==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(a),o.length>0&&(l.push(`const { ${w1(o.map(d=>`${d}: _${d}`),", ")} } = ctx`),l.newline()),l.push("return "),Na(l,n),l.deindent(a),l.push("}"),delete n.helpers;const{code:c,map:u}=l.context();return{ast:n,code:c,map:u?u.toJSON():void 0}};function LA(n,e={}){const t=E1({},e),i=!!t.jit,r=!!t.minify,s=t.optimize==null?!0:t.optimize,o=xA(t).parse(n);return i?(s&&kA(o),r&&aa(o),{ast:o,code:""}):(AA(o,t),FA(o,t))}/*!
  * core-base v9.14.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function BA(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(bi().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(bi().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(bi().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}const gs=[];gs[0]={w:[0],i:[3,0],"[":[4],o:[7]};gs[1]={w:[1],".":[2],"[":[4],o:[7]};gs[2]={w:[2],i:[3,0],0:[3,0]};gs[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};gs[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};gs[5]={"'":[4,0],o:8,l:[5,0]};gs[6]={'"':[4,0],o:8,l:[6,0]};const $A=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function qA(n){return $A.test(n)}function UA(n){const e=n.charCodeAt(0),t=n.charCodeAt(n.length-1);return e===t&&(e===34||e===39)?n.slice(1,-1):n}function HA(n){if(n==null)return"o";switch(n.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return n;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function VA(n){const e=n.trim();return n.charAt(0)==="0"&&isNaN(parseInt(n))?!1:qA(e)?UA(e):"*"+e}function jA(n){const e=[];let t=-1,i=0,r=0,s,a,o,l,c,u,d;const h=[];h[0]=()=>{a===void 0?a=o:a+=o},h[1]=()=>{a!==void 0&&(e.push(a),a=void 0)},h[2]=()=>{h[0](),r++},h[3]=()=>{if(r>0)r--,i=4,h[0]();else{if(r=0,a===void 0||(a=VA(a),a===!1))return!1;h[1]()}};function f(){const m=n[t+1];if(i===5&&m==="'"||i===6&&m==='"')return t++,o="\\"+m,h[0](),!0}for(;i!==null;)if(t++,s=n[t],!(s==="\\"&&f())){if(l=HA(s),d=gs[i],c=d[l]||d.l||8,c===8||(i=c[0],c[1]!==void 0&&(u=h[c[1]],u&&(o=s,u()===!1))))return;if(i===7)return e}}const zg=new Map;function WA(n,e){return mt(n)?n[e]:null}function zA(n,e){if(!mt(n))return null;let t=zg.get(e);if(t||(t=jA(e),t&&zg.set(e,t)),!t)return null;const i=t.length;let r=n,s=0;for(;s<i;){const a=r[t[s]];if(a===void 0||kt(r))return null;r=a,s++}return r}const GA=n=>n,KA=n=>"",YA="text",QA=n=>n.length===0?"":aA(n),XA=sA;function Gg(n,e){return n=Math.abs(n),e===2?n?n>1?1:0:1:n?Math.min(n,2):0}function JA(n){const e=Qt(n.pluralIndex)?n.pluralIndex:-1;return n.named&&(Qt(n.named.count)||Qt(n.named.n))?Qt(n.named.count)?n.named.count:Qt(n.named.n)?n.named.n:e:e}function ZA(n,e){e.count||(e.count=n),e.n||(e.n=n)}function ek(n={}){const e=n.locale,t=JA(n),i=mt(n.pluralRules)&&ye(e)&&kt(n.pluralRules[e])?n.pluralRules[e]:Gg,r=mt(n.pluralRules)&&ye(e)&&kt(n.pluralRules[e])?Gg:void 0,s=v=>v[i(t,v.length,r)],a=n.list||[],o=v=>a[v],l=n.named||Et();Qt(n.pluralIndex)&&ZA(t,l);const c=v=>l[v];function u(v){const C=kt(n.messages)?n.messages(v):mt(n.messages)?n.messages[v]:!1;return C||(n.parent?n.parent.message(v):KA)}const d=v=>n.modifiers?n.modifiers[v]:GA,h=je(n.processor)&&kt(n.processor.normalize)?n.processor.normalize:QA,f=je(n.processor)&&kt(n.processor.interpolate)?n.processor.interpolate:XA,m=je(n.processor)&&ye(n.processor.type)?n.processor.type:YA,g={list:o,named:c,plural:s,linked:(v,...C)=>{const[y,E]=C;let _="text",w="";C.length===1?mt(y)?(w=y.modifier||w,_=y.type||_):ye(y)&&(w=y||w):C.length===2&&(ye(y)&&(w=y||w),ye(E)&&(_=E||_));const k=u(v)(g),I=_==="vnode"&&Tt(k)&&w?k[0]:k;return w?d(w)(I,_):I},message:u,type:m,interpolate:f,normalize:h,values:wn(Et(),a,l)};return g}let Xo=null;function tk(n){Xo=n}function nk(n,e,t){Xo&&Xo.emit("i18n:init",{timestamp:Date.now(),i18n:n,version:e,meta:t})}const rk=ik("function:translate");function ik(n){return e=>Xo&&Xo.emit(n,e)}const C1=Gm.__EXTEND_POINT__,xs=ld(C1),sk={NOT_FOUND_KEY:C1,FALLBACK_TO_TRANSLATE:xs(),CANNOT_FORMAT_NUMBER:xs(),FALLBACK_TO_NUMBER_FORMAT:xs(),CANNOT_FORMAT_DATE:xs(),FALLBACK_TO_DATE_FORMAT:xs(),EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:xs(),__EXTEND_POINT__:xs()},S1=Be.__EXTEND_POINT__,Rs=ld(S1),Tr={INVALID_ARGUMENT:S1,INVALID_DATE_ARGUMENT:Rs(),INVALID_ISO_DATE_ARGUMENT:Rs(),NOT_SUPPORT_NON_STRING_MESSAGE:Rs(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:Rs(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:Rs(),NOT_SUPPORT_LOCALE_TYPE:Rs(),__EXTEND_POINT__:Rs()};function ni(n){return Qa(n,null,void 0)}function Ym(n,e){return e.locale!=null?Kg(e.locale):Kg(n.locale)}let Vd;function Kg(n){if(ye(n))return n;if(kt(n)){if(n.resolvedOnce&&Vd!=null)return Vd;if(n.constructor.name==="Function"){const e=n();if(iA(e))throw ni(Tr.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return Vd=e}else throw ni(Tr.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw ni(Tr.NOT_SUPPORT_LOCALE_TYPE)}function ak(n,e,t){return[...new Set([t,...Tt(e)?e:mt(e)?Object.keys(e):ye(e)?[e]:[t]])]}function _1(n,e,t){const i=ye(t)?t:Fa,r=n;r.__localeChainCache||(r.__localeChainCache=new Map);let s=r.__localeChainCache.get(i);if(!s){s=[];let a=[t];for(;Tt(a);)a=Yg(s,a,e);const o=Tt(e)||!je(e)?e:e.default?e.default:null;a=ye(o)?[o]:o,Tt(a)&&Yg(s,a,!1),r.__localeChainCache.set(i,s)}return s}function Yg(n,e,t){let i=!0;for(let r=0;r<e.length&&et(i);r++){const s=e[r];ye(s)&&(i=ok(n,e[r],t))}return i}function ok(n,e,t){let i;const r=e.split("-");do{const s=r.join("-");i=lk(n,s,t),r.splice(-1,1)}while(r.length&&i===!0);return i}function lk(n,e,t){let i=!1;if(!n.includes(e)&&(i=!0,e)){i=e[e.length-1]!=="!";const r=e.replace(/!/g,"");n.push(r),(Tt(t)||je(t))&&t[r]&&(i=t[r])}return i}const ck="9.14.2",cd=-1,Fa="en-US",Qg="",Xg=n=>`${n.charAt(0).toLocaleUpperCase()}${n.substr(1)}`;function uk(){return{upper:(n,e)=>e==="text"&&ye(n)?n.toUpperCase():e==="vnode"&&mt(n)&&"__v_isVNode"in n?n.children.toUpperCase():n,lower:(n,e)=>e==="text"&&ye(n)?n.toLowerCase():e==="vnode"&&mt(n)&&"__v_isVNode"in n?n.children.toLowerCase():n,capitalize:(n,e)=>e==="text"&&ye(n)?Xg(n):e==="vnode"&&mt(n)&&"__v_isVNode"in n?Xg(n.children):n}}let x1;function Jg(n){x1=n}let R1;function dk(n){R1=n}let A1;function hk(n){A1=n}let k1=null;const fk=n=>{k1=n},mk=()=>k1;let D1=null;const Zg=n=>{D1=n},pk=()=>D1;let ev=0;function gk(n={}){const e=kt(n.onWarn)?n.onWarn:oA,t=ye(n.version)?n.version:ck,i=ye(n.locale)||kt(n.locale)?n.locale:Fa,r=kt(i)?Fa:i,s=Tt(n.fallbackLocale)||je(n.fallbackLocale)||ye(n.fallbackLocale)||n.fallbackLocale===!1?n.fallbackLocale:r,a=je(n.messages)?n.messages:jd(r),o=je(n.datetimeFormats)?n.datetimeFormats:jd(r),l=je(n.numberFormats)?n.numberFormats:jd(r),c=wn(Et(),n.modifiers,uk()),u=n.pluralRules||Et(),d=kt(n.missing)?n.missing:null,h=et(n.missingWarn)||ss(n.missingWarn)?n.missingWarn:!0,f=et(n.fallbackWarn)||ss(n.fallbackWarn)?n.fallbackWarn:!0,m=!!n.fallbackFormat,p=!!n.unresolving,g=kt(n.postTranslation)?n.postTranslation:null,v=je(n.processor)?n.processor:null,C=et(n.warnHtmlMessage)?n.warnHtmlMessage:!0,y=!!n.escapeParameter,E=kt(n.messageCompiler)?n.messageCompiler:x1,_=kt(n.messageResolver)?n.messageResolver:R1||WA,w=kt(n.localeFallbacker)?n.localeFallbacker:A1||ak,k=mt(n.fallbackContext)?n.fallbackContext:void 0,I=n,P=mt(I.__datetimeFormatters)?I.__datetimeFormatters:new Map,Z=mt(I.__numberFormatters)?I.__numberFormatters:new Map,X=mt(I.__meta)?I.__meta:{};ev++;const B={version:t,cid:ev,locale:i,fallbackLocale:s,messages:a,modifiers:c,pluralRules:u,missing:d,missingWarn:h,fallbackWarn:f,fallbackFormat:m,unresolving:p,postTranslation:g,processor:v,warnHtmlMessage:C,escapeParameter:y,messageCompiler:E,messageResolver:_,localeFallbacker:w,fallbackContext:k,onWarn:e,__meta:X};return B.datetimeFormats=o,B.numberFormats=l,B.__datetimeFormatters=P,B.__numberFormatters=Z,__INTLIFY_PROD_DEVTOOLS__&&nk(B,t,X),B}const jd=n=>({[n]:Et()});function Qm(n,e,t,i,r){const{missing:s,onWarn:a}=n;if(s!==null){const o=s(n,t,e,r);return ye(o)?o:e}else return e}function co(n,e,t){const i=n;i.__localeChainCache=new Map,n.localeFallbacker(n,t,e)}function vk(n,e){return n===e?!1:n.split("-")[0]===e.split("-")[0]}function yk(n,e){const t=e.indexOf(n);if(t===-1)return!1;for(let i=t+1;i<e.length;i++)if(vk(n,e[i]))return!0;return!1}function Wd(n){return t=>bk(t,n)}function bk(n,e){const t=wk(e);if(t==null)throw Jo(0);if(Xm(t)===1){const s=Sk(t);return n.plural(s.reduce((a,o)=>[...a,tv(n,o)],[]))}else return tv(n,t)}const Ek=["b","body"];function wk(n){return vs(n,Ek)}const Ck=["c","cases"];function Sk(n){return vs(n,Ck,[])}function tv(n,e){const t=xk(e);if(t!=null)return n.type==="text"?t:n.normalize([t]);{const i=Ak(e).reduce((r,s)=>[...r,nf(n,s)],[]);return n.normalize(i)}}const _k=["s","static"];function xk(n){return vs(n,_k)}const Rk=["i","items"];function Ak(n){return vs(n,Rk,[])}function nf(n,e){const t=Xm(e);switch(t){case 3:return Kl(e,t);case 9:return Kl(e,t);case 4:{const i=e;if(Pr(i,"k")&&i.k)return n.interpolate(n.named(i.k));if(Pr(i,"key")&&i.key)return n.interpolate(n.named(i.key));throw Jo(t)}case 5:{const i=e;if(Pr(i,"i")&&Qt(i.i))return n.interpolate(n.list(i.i));if(Pr(i,"index")&&Qt(i.index))return n.interpolate(n.list(i.index));throw Jo(t)}case 6:{const i=e,r=Pk(i),s=Ik(i);return n.linked(nf(n,s),r?nf(n,r):void 0,n.type)}case 7:return Kl(e,t);case 8:return Kl(e,t);default:throw new Error(`unhandled node on format message part: ${t}`)}}const kk=["t","type"];function Xm(n){return vs(n,kk)}const Dk=["v","value"];function Kl(n,e){const t=vs(n,Dk);if(t)return t;throw Jo(e)}const Mk=["m","modifier"];function Pk(n){return vs(n,Mk)}const Tk=["k","key"];function Ik(n){const e=vs(n,Tk);if(e)return e;throw Jo(6)}function vs(n,e,t){for(let i=0;i<e.length;i++){const r=e[i];if(Pr(n,r)&&n[r]!=null)return n[r]}return t}function Jo(n){return new Error(`unhandled node type: ${n}`)}const M1=n=>n;let ha=Et();function La(n){return mt(n)&&Xm(n)===0&&(Pr(n,"b")||Pr(n,"body"))}function P1(n,e={}){let t=!1;const i=e.onError||mA;return e.onError=r=>{t=!0,i(r)},{...LA(n,e),detectError:t}}const Ok=(n,e)=>{if(!ye(n))throw ni(Tr.NOT_SUPPORT_NON_STRING_MESSAGE);{et(e.warnHtmlMessage)&&e.warnHtmlMessage;const i=(e.onCacheKey||M1)(n),r=ha[i];if(r)return r;const{code:s,detectError:a}=P1(n,e),o=new Function(`return ${s}`)();return a?o:ha[i]=o}};function Nk(n,e){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&ye(n)){et(e.warnHtmlMessage)&&e.warnHtmlMessage;const i=(e.onCacheKey||M1)(n),r=ha[i];if(r)return r;const{ast:s,detectError:a}=P1(n,{...e,location:!1,jit:!0}),o=Wd(s);return a?o:ha[i]=o}else{const t=n.cacheKey;if(t){const i=ha[t];return i||(ha[t]=Wd(n))}else return Wd(n)}}const nv=()=>"",gr=n=>kt(n);function rv(n,...e){const{fallbackFormat:t,postTranslation:i,unresolving:r,messageCompiler:s,fallbackLocale:a,messages:o}=n,[l,c]=rf(...e),u=et(c.missingWarn)?c.missingWarn:n.missingWarn,d=et(c.fallbackWarn)?c.fallbackWarn:n.fallbackWarn,h=et(c.escapeParameter)?c.escapeParameter:n.escapeParameter,f=!!c.resolvedMessage,m=ye(c.default)||et(c.default)?et(c.default)?s?l:()=>l:c.default:t?s?l:()=>l:"",p=t||m!=="",g=Ym(n,c);h&&Fk(c);let[v,C,y]=f?[l,g,o[g]||Et()]:T1(n,l,g,a,d,u),E=v,_=l;if(!f&&!(ye(E)||La(E)||gr(E))&&p&&(E=m,_=E),!f&&(!(ye(E)||La(E)||gr(E))||!ye(C)))return r?cd:l;let w=!1;const k=()=>{w=!0},I=gr(E)?E:I1(n,l,C,E,_,k);if(w)return E;const P=$k(n,C,y,c),Z=ek(P),X=Lk(n,I,Z),B=i?i(X,l):X;if(__INTLIFY_PROD_DEVTOOLS__){const $={timestamp:Date.now(),key:ye(l)?l:gr(E)?E.key:"",locale:C||(gr(E)?E.locale:""),format:ye(E)?E:gr(E)?E.source:"",message:B};$.meta=wn({},n.__meta,mk()||{}),rk($)}return B}function Fk(n){Tt(n.list)?n.list=n.list.map(e=>ye(e)?Ug(e):e):mt(n.named)&&Object.keys(n.named).forEach(e=>{ye(n.named[e])&&(n.named[e]=Ug(n.named[e]))})}function T1(n,e,t,i,r,s){const{messages:a,onWarn:o,messageResolver:l,localeFallbacker:c}=n,u=c(n,i,t);let d=Et(),h,f=null;const m="translate";for(let p=0;p<u.length&&(h=u[p],d=a[h]||Et(),(f=l(d,e))===null&&(f=d[e]),!(ye(f)||La(f)||gr(f)));p++)if(!yk(h,u)){const g=Qm(n,e,h,s,m);g!==e&&(f=g)}return[f,h,d]}function I1(n,e,t,i,r,s){const{messageCompiler:a,warnHtmlMessage:o}=n;if(gr(i)){const c=i;return c.locale=c.locale||t,c.key=c.key||e,c}if(a==null){const c=()=>i;return c.locale=t,c.key=e,c}const l=a(i,Bk(n,t,r,i,o,s));return l.locale=t,l.key=e,l.source=i,l}function Lk(n,e,t){return e(t)}function rf(...n){const[e,t,i]=n,r=Et();if(!ye(e)&&!Qt(e)&&!gr(e)&&!La(e))throw ni(Tr.INVALID_ARGUMENT);const s=Qt(e)?String(e):(gr(e),e);return Qt(t)?r.plural=t:ye(t)?r.default=t:je(t)&&!od(t)?r.named=t:Tt(t)&&(r.list=t),Qt(i)?r.plural=i:ye(i)?r.default=i:je(i)&&wn(r,i),[s,r]}function Bk(n,e,t,i,r,s){return{locale:e,key:t,warnHtmlMessage:r,onError:a=>{throw s&&s(a),a},onCacheKey:a=>ZR(e,t,a)}}function $k(n,e,t,i){const{modifiers:r,pluralRules:s,messageResolver:a,fallbackLocale:o,fallbackWarn:l,missingWarn:c,fallbackContext:u}=n,h={locale:e,modifiers:r,pluralRules:s,messages:f=>{let m=a(t,f);if(m==null&&u){const[,,p]=T1(u,f,e,o,l,c);m=a(p,f)}if(ye(m)||La(m)){let p=!1;const v=I1(n,f,e,m,f,()=>{p=!0});return p?nv:v}else return gr(m)?m:nv}};return n.processor&&(h.processor=n.processor),i.list&&(h.list=i.list),i.named&&(h.named=i.named),Qt(i.plural)&&(h.pluralIndex=i.plural),h}function iv(n,...e){const{datetimeFormats:t,unresolving:i,fallbackLocale:r,onWarn:s,localeFallbacker:a}=n,{__datetimeFormatters:o}=n,[l,c,u,d]=sf(...e),h=et(u.missingWarn)?u.missingWarn:n.missingWarn;et(u.fallbackWarn)?u.fallbackWarn:n.fallbackWarn;const f=!!u.part,m=Ym(n,u),p=a(n,r,m);if(!ye(l)||l==="")return new Intl.DateTimeFormat(m,d).format(c);let g={},v,C=null;const y="datetime format";for(let w=0;w<p.length&&(v=p[w],g=t[v]||{},C=g[l],!je(C));w++)Qm(n,l,v,h,y);if(!je(C)||!ye(v))return i?cd:l;let E=`${v}__${l}`;od(d)||(E=`${E}__${JSON.stringify(d)}`);let _=o.get(E);return _||(_=new Intl.DateTimeFormat(v,wn({},C,d)),o.set(E,_)),f?_.formatToParts(c):_.format(c)}const O1=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function sf(...n){const[e,t,i,r]=n,s=Et();let a=Et(),o;if(ye(e)){const l=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw ni(Tr.INVALID_ISO_DATE_ARGUMENT);const c=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();o=new Date(c);try{o.toISOString()}catch{throw ni(Tr.INVALID_ISO_DATE_ARGUMENT)}}else if(tA(e)){if(isNaN(e.getTime()))throw ni(Tr.INVALID_DATE_ARGUMENT);o=e}else if(Qt(e))o=e;else throw ni(Tr.INVALID_ARGUMENT);return ye(t)?s.key=t:je(t)&&Object.keys(t).forEach(l=>{O1.includes(l)?a[l]=t[l]:s[l]=t[l]}),ye(i)?s.locale=i:je(i)&&(a=i),je(r)&&(a=r),[s.key||"",o,s,a]}function sv(n,e,t){const i=n;for(const r in t){const s=`${e}__${r}`;i.__datetimeFormatters.has(s)&&i.__datetimeFormatters.delete(s)}}function av(n,...e){const{numberFormats:t,unresolving:i,fallbackLocale:r,onWarn:s,localeFallbacker:a}=n,{__numberFormatters:o}=n,[l,c,u,d]=af(...e),h=et(u.missingWarn)?u.missingWarn:n.missingWarn;et(u.fallbackWarn)?u.fallbackWarn:n.fallbackWarn;const f=!!u.part,m=Ym(n,u),p=a(n,r,m);if(!ye(l)||l==="")return new Intl.NumberFormat(m,d).format(c);let g={},v,C=null;const y="number format";for(let w=0;w<p.length&&(v=p[w],g=t[v]||{},C=g[l],!je(C));w++)Qm(n,l,v,h,y);if(!je(C)||!ye(v))return i?cd:l;let E=`${v}__${l}`;od(d)||(E=`${E}__${JSON.stringify(d)}`);let _=o.get(E);return _||(_=new Intl.NumberFormat(v,wn({},C,d)),o.set(E,_)),f?_.formatToParts(c):_.format(c)}const N1=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function af(...n){const[e,t,i,r]=n,s=Et();let a=Et();if(!Qt(e))throw ni(Tr.INVALID_ARGUMENT);const o=e;return ye(t)?s.key=t:je(t)&&Object.keys(t).forEach(l=>{N1.includes(l)?a[l]=t[l]:s[l]=t[l]}),ye(i)?s.locale=i:je(i)&&(a=i),je(r)&&(a=r),[s.key||"",o,s,a]}function ov(n,e,t){const i=n;for(const r in t){const s=`${e}__${r}`;i.__numberFormatters.has(s)&&i.__numberFormatters.delete(s)}}BA();/*!
  * vue-i18n v9.14.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const qk="9.14.2";function Uk(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(bi().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(bi().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(bi().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(bi().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(bi().__INTLIFY_PROD_DEVTOOLS__=!1)}const F1=sk.__EXTEND_POINT__,pi=ld(F1);pi(),pi(),pi(),pi(),pi(),pi(),pi(),pi(),pi();const L1=Tr.__EXTEND_POINT__,Wn=ld(L1),un={UNEXPECTED_RETURN_TYPE:L1,INVALID_ARGUMENT:Wn(),MUST_BE_CALL_SETUP_TOP:Wn(),NOT_INSTALLED:Wn(),NOT_AVAILABLE_IN_LEGACY_MODE:Wn(),REQUIRED_VALUE:Wn(),INVALID_VALUE:Wn(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:Wn(),NOT_INSTALLED_WITH_PROVIDE:Wn(),UNEXPECTED_ERROR:Wn(),NOT_COMPATIBLE_LEGACY_VUE_I18N:Wn(),BRIDGE_SUPPORT_VUE_2_ONLY:Wn(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:Wn(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:Wn(),__EXTEND_POINT__:Wn()};function mn(n,...e){return Qa(n,null,void 0)}const of=ps("__translateVNode"),lf=ps("__datetimeParts"),cf=ps("__numberParts"),B1=ps("__setPluralRules"),$1=ps("__injectWithOption"),uf=ps("__dispose");function Zo(n){if(!mt(n))return n;for(const e in n)if(Pr(n,e))if(!e.includes("."))mt(n[e])&&Zo(n[e]);else{const t=e.split("."),i=t.length-1;let r=n,s=!1;for(let a=0;a<i;a++){if(t[a]in r||(r[t[a]]=Et()),!mt(r[t[a]])){s=!0;break}r=r[t[a]]}s||(r[t[i]]=n[e],delete n[e]),mt(r[t[i]])&&Zo(r[t[i]])}return n}function ud(n,e){const{messages:t,__i18n:i,messageResolver:r,flatJson:s}=e,a=je(t)?t:Tt(i)?Et():{[n]:Et()};if(Tt(i)&&i.forEach(o=>{if("locale"in o&&"resource"in o){const{locale:l,resource:c}=o;l?(a[l]=a[l]||Et(),Tc(c,a[l])):Tc(c,a)}else ye(o)&&Tc(JSON.parse(o),a)}),r==null&&s)for(const o in a)Pr(a,o)&&Zo(a[o]);return a}function q1(n){return n.type}function U1(n,e,t){let i=mt(e.messages)?e.messages:Et();"__i18nGlobal"in t&&(i=ud(n.locale.value,{messages:i,__i18n:t.__i18nGlobal}));const r=Object.keys(i);r.length&&r.forEach(s=>{n.mergeLocaleMessage(s,i[s])});{if(mt(e.datetimeFormats)){const s=Object.keys(e.datetimeFormats);s.length&&s.forEach(a=>{n.mergeDateTimeFormat(a,e.datetimeFormats[a])})}if(mt(e.numberFormats)){const s=Object.keys(e.numberFormats);s.length&&s.forEach(a=>{n.mergeNumberFormat(a,e.numberFormats[a])})}}}function lv(n){return be(Cl,null,n,0)}const cv="__INTLIFY_META__",uv=()=>[],Hk=()=>!1;let dv=0;function hv(n){return(e,t,i,r)=>n(t,i,xi()||void 0,r)}const Vk=()=>{const n=xi();let e=null;return n&&(e=q1(n)[cv])?{[cv]:e}:null};function Jm(n={},e){const{__root:t,__injectWithOption:i}=n,r=t===void 0,s=n.flatJson,a=iu?Dn:Ea,o=!!n.translateExistCompatible;let l=et(n.inheritLocale)?n.inheritLocale:!0;const c=a(t&&l?t.locale.value:ye(n.locale)?n.locale:Fa),u=a(t&&l?t.fallbackLocale.value:ye(n.fallbackLocale)||Tt(n.fallbackLocale)||je(n.fallbackLocale)||n.fallbackLocale===!1?n.fallbackLocale:c.value),d=a(ud(c.value,n)),h=a(je(n.datetimeFormats)?n.datetimeFormats:{[c.value]:{}}),f=a(je(n.numberFormats)?n.numberFormats:{[c.value]:{}});let m=t?t.missingWarn:et(n.missingWarn)||ss(n.missingWarn)?n.missingWarn:!0,p=t?t.fallbackWarn:et(n.fallbackWarn)||ss(n.fallbackWarn)?n.fallbackWarn:!0,g=t?t.fallbackRoot:et(n.fallbackRoot)?n.fallbackRoot:!0,v=!!n.fallbackFormat,C=kt(n.missing)?n.missing:null,y=kt(n.missing)?hv(n.missing):null,E=kt(n.postTranslation)?n.postTranslation:null,_=t?t.warnHtmlMessage:et(n.warnHtmlMessage)?n.warnHtmlMessage:!0,w=!!n.escapeParameter;const k=t?t.modifiers:je(n.modifiers)?n.modifiers:{};let I=n.pluralRules||t&&t.pluralRules,P;P=(()=>{r&&Zg(null);const L={version:qk,locale:c.value,fallbackLocale:u.value,messages:d.value,modifiers:k,pluralRules:I,missing:y===null?void 0:y,missingWarn:m,fallbackWarn:p,fallbackFormat:v,unresolving:!0,postTranslation:E===null?void 0:E,warnHtmlMessage:_,escapeParameter:w,messageResolver:n.messageResolver,messageCompiler:n.messageCompiler,__meta:{framework:"vue"}};L.datetimeFormats=h.value,L.numberFormats=f.value,L.__datetimeFormatters=je(P)?P.__datetimeFormatters:void 0,L.__numberFormatters=je(P)?P.__numberFormatters:void 0;const K=gk(L);return r&&Zg(K),K})(),co(P,c.value,u.value);function X(){return[c.value,u.value,d.value,h.value,f.value]}const B=Qe({get:()=>c.value,set:L=>{c.value=L,P.locale=c.value}}),$=Qe({get:()=>u.value,set:L=>{u.value=L,P.fallbackLocale=u.value,co(P,c.value,L)}}),U=Qe(()=>d.value),re=Qe(()=>h.value),le=Qe(()=>f.value);function ae(){return kt(E)?E:null}function ue(L){E=L,P.postTranslation=L}function ve(){return C}function me(L){L!==null&&(y=hv(L)),C=L,P.missing=y}const ke=(L,K,Pe,xe,at,sn)=>{X();let _n;try{__INTLIFY_PROD_DEVTOOLS__,r||(P.fallbackContext=t?pk():void 0),_n=L(P)}finally{__INTLIFY_PROD_DEVTOOLS__,r||(P.fallbackContext=void 0)}if(Pe!=="translate exists"&&Qt(_n)&&_n===cd||Pe==="translate exists"&&!_n){const[Ur,hi]=K();return t&&g?xe(t):at(Ur)}else{if(sn(_n))return _n;throw mn(un.UNEXPECTED_RETURN_TYPE)}};function Me(...L){return ke(K=>Reflect.apply(rv,null,[K,...L]),()=>rf(...L),"translate",K=>Reflect.apply(K.t,K,[...L]),K=>K,K=>ye(K))}function Xe(...L){const[K,Pe,xe]=L;if(xe&&!mt(xe))throw mn(un.INVALID_ARGUMENT);return Me(K,Pe,wn({resolvedMessage:!0},xe||{}))}function Fe(...L){return ke(K=>Reflect.apply(iv,null,[K,...L]),()=>sf(...L),"datetime format",K=>Reflect.apply(K.d,K,[...L]),()=>Qg,K=>ye(K))}function wt(...L){return ke(K=>Reflect.apply(av,null,[K,...L]),()=>af(...L),"number format",K=>Reflect.apply(K.n,K,[...L]),()=>Qg,K=>ye(K))}function Ze(L){return L.map(K=>ye(K)||Qt(K)||et(K)?lv(String(K)):K)}const ce={normalize:Ze,interpolate:L=>L,type:"vnode"};function oe(...L){return ke(K=>{let Pe;const xe=K;try{xe.processor=ce,Pe=Reflect.apply(rv,null,[xe,...L])}finally{xe.processor=null}return Pe},()=>rf(...L),"translate",K=>K[of](...L),K=>[lv(K)],K=>Tt(K))}function de(...L){return ke(K=>Reflect.apply(av,null,[K,...L]),()=>af(...L),"number format",K=>K[cf](...L),uv,K=>ye(K)||Tt(K))}function Ae(...L){return ke(K=>Reflect.apply(iv,null,[K,...L]),()=>sf(...L),"datetime format",K=>K[lf](...L),uv,K=>ye(K)||Tt(K))}function Je(L){I=L,P.pluralRules=I}function R(L,K){return ke(()=>{if(!L)return!1;const Pe=ye(K)?K:c.value,xe=J(Pe),at=P.messageResolver(xe,L);return o?at!=null:La(at)||gr(at)||ye(at)},()=>[L],"translate exists",Pe=>Reflect.apply(Pe.te,Pe,[L,K]),Hk,Pe=>et(Pe))}function b(L){let K=null;const Pe=_1(P,u.value,c.value);for(let xe=0;xe<Pe.length;xe++){const at=d.value[Pe[xe]]||{},sn=P.messageResolver(at,L);if(sn!=null){K=sn;break}}return K}function N(L){const K=b(L);return K??(t?t.tm(L)||{}:{})}function J(L){return d.value[L]||{}}function Q(L,K){if(s){const Pe={[L]:K};for(const xe in Pe)Pr(Pe,xe)&&Zo(Pe[xe]);K=Pe[L]}d.value[L]=K,P.messages=d.value}function ne(L,K){d.value[L]=d.value[L]||{};const Pe={[L]:K};if(s)for(const xe in Pe)Pr(Pe,xe)&&Zo(Pe[xe]);K=Pe[L],Tc(K,d.value[L]),P.messages=d.value}function ie(L){return h.value[L]||{}}function S(L,K){h.value[L]=K,P.datetimeFormats=h.value,sv(P,L,K)}function x(L,K){h.value[L]=wn(h.value[L]||{},K),P.datetimeFormats=h.value,sv(P,L,K)}function D(L){return f.value[L]||{}}function V(L,K){f.value[L]=K,P.numberFormats=f.value,ov(P,L,K)}function se(L,K){f.value[L]=wn(f.value[L]||{},K),P.numberFormats=f.value,ov(P,L,K)}dv++,t&&iu&&(At(t.locale,L=>{l&&(c.value=L,P.locale=L,co(P,c.value,u.value))}),At(t.fallbackLocale,L=>{l&&(u.value=L,P.fallbackLocale=L,co(P,c.value,u.value))}));const te={id:dv,locale:B,fallbackLocale:$,get inheritLocale(){return l},set inheritLocale(L){l=L,L&&t&&(c.value=t.locale.value,u.value=t.fallbackLocale.value,co(P,c.value,u.value))},get availableLocales(){return Object.keys(d.value).sort()},messages:U,get modifiers(){return k},get pluralRules(){return I||{}},get isGlobal(){return r},get missingWarn(){return m},set missingWarn(L){m=L,P.missingWarn=m},get fallbackWarn(){return p},set fallbackWarn(L){p=L,P.fallbackWarn=p},get fallbackRoot(){return g},set fallbackRoot(L){g=L},get fallbackFormat(){return v},set fallbackFormat(L){v=L,P.fallbackFormat=v},get warnHtmlMessage(){return _},set warnHtmlMessage(L){_=L,P.warnHtmlMessage=L},get escapeParameter(){return w},set escapeParameter(L){w=L,P.escapeParameter=L},t:Me,getLocaleMessage:J,setLocaleMessage:Q,mergeLocaleMessage:ne,getPostTranslationHandler:ae,setPostTranslationHandler:ue,getMissingHandler:ve,setMissingHandler:me,[B1]:Je};return te.datetimeFormats=re,te.numberFormats=le,te.rt=Xe,te.te=R,te.tm=N,te.d=Fe,te.n=wt,te.getDateTimeFormat=ie,te.setDateTimeFormat=S,te.mergeDateTimeFormat=x,te.getNumberFormat=D,te.setNumberFormat=V,te.mergeNumberFormat=se,te[$1]=i,te[of]=oe,te[lf]=Ae,te[cf]=de,te}function jk(n){const e=ye(n.locale)?n.locale:Fa,t=ye(n.fallbackLocale)||Tt(n.fallbackLocale)||je(n.fallbackLocale)||n.fallbackLocale===!1?n.fallbackLocale:e,i=kt(n.missing)?n.missing:void 0,r=et(n.silentTranslationWarn)||ss(n.silentTranslationWarn)?!n.silentTranslationWarn:!0,s=et(n.silentFallbackWarn)||ss(n.silentFallbackWarn)?!n.silentFallbackWarn:!0,a=et(n.fallbackRoot)?n.fallbackRoot:!0,o=!!n.formatFallbackMessages,l=je(n.modifiers)?n.modifiers:{},c=n.pluralizationRules,u=kt(n.postTranslation)?n.postTranslation:void 0,d=ye(n.warnHtmlInMessage)?n.warnHtmlInMessage!=="off":!0,h=!!n.escapeParameterHtml,f=et(n.sync)?n.sync:!0;let m=n.messages;if(je(n.sharedMessages)){const w=n.sharedMessages;m=Object.keys(w).reduce((I,P)=>{const Z=I[P]||(I[P]={});return wn(Z,w[P]),I},m||{})}const{__i18n:p,__root:g,__injectWithOption:v}=n,C=n.datetimeFormats,y=n.numberFormats,E=n.flatJson,_=n.translateExistCompatible;return{locale:e,fallbackLocale:t,messages:m,flatJson:E,datetimeFormats:C,numberFormats:y,missing:i,missingWarn:r,fallbackWarn:s,fallbackRoot:a,fallbackFormat:o,modifiers:l,pluralRules:c,postTranslation:u,warnHtmlMessage:d,escapeParameter:h,messageResolver:n.messageResolver,inheritLocale:f,translateExistCompatible:_,__i18n:p,__root:g,__injectWithOption:v}}function df(n={},e){{const t=Jm(jk(n)),{__extender:i}=n,r={id:t.id,get locale(){return t.locale.value},set locale(s){t.locale.value=s},get fallbackLocale(){return t.fallbackLocale.value},set fallbackLocale(s){t.fallbackLocale.value=s},get messages(){return t.messages.value},get datetimeFormats(){return t.datetimeFormats.value},get numberFormats(){return t.numberFormats.value},get availableLocales(){return t.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(s){},get missing(){return t.getMissingHandler()},set missing(s){t.setMissingHandler(s)},get silentTranslationWarn(){return et(t.missingWarn)?!t.missingWarn:t.missingWarn},set silentTranslationWarn(s){t.missingWarn=et(s)?!s:s},get silentFallbackWarn(){return et(t.fallbackWarn)?!t.fallbackWarn:t.fallbackWarn},set silentFallbackWarn(s){t.fallbackWarn=et(s)?!s:s},get modifiers(){return t.modifiers},get formatFallbackMessages(){return t.fallbackFormat},set formatFallbackMessages(s){t.fallbackFormat=s},get postTranslation(){return t.getPostTranslationHandler()},set postTranslation(s){t.setPostTranslationHandler(s)},get sync(){return t.inheritLocale},set sync(s){t.inheritLocale=s},get warnHtmlInMessage(){return t.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(s){t.warnHtmlMessage=s!=="off"},get escapeParameterHtml(){return t.escapeParameter},set escapeParameterHtml(s){t.escapeParameter=s},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(s){},get pluralizationRules(){return t.pluralRules||{}},__composer:t,t(...s){const[a,o,l]=s,c={};let u=null,d=null;if(!ye(a))throw mn(un.INVALID_ARGUMENT);const h=a;return ye(o)?c.locale=o:Tt(o)?u=o:je(o)&&(d=o),Tt(l)?u=l:je(l)&&(d=l),Reflect.apply(t.t,t,[h,u||d||{},c])},rt(...s){return Reflect.apply(t.rt,t,[...s])},tc(...s){const[a,o,l]=s,c={plural:1};let u=null,d=null;if(!ye(a))throw mn(un.INVALID_ARGUMENT);const h=a;return ye(o)?c.locale=o:Qt(o)?c.plural=o:Tt(o)?u=o:je(o)&&(d=o),ye(l)?c.locale=l:Tt(l)?u=l:je(l)&&(d=l),Reflect.apply(t.t,t,[h,u||d||{},c])},te(s,a){return t.te(s,a)},tm(s){return t.tm(s)},getLocaleMessage(s){return t.getLocaleMessage(s)},setLocaleMessage(s,a){t.setLocaleMessage(s,a)},mergeLocaleMessage(s,a){t.mergeLocaleMessage(s,a)},d(...s){return Reflect.apply(t.d,t,[...s])},getDateTimeFormat(s){return t.getDateTimeFormat(s)},setDateTimeFormat(s,a){t.setDateTimeFormat(s,a)},mergeDateTimeFormat(s,a){t.mergeDateTimeFormat(s,a)},n(...s){return Reflect.apply(t.n,t,[...s])},getNumberFormat(s){return t.getNumberFormat(s)},setNumberFormat(s,a){t.setNumberFormat(s,a)},mergeNumberFormat(s,a){t.mergeNumberFormat(s,a)},getChoiceIndex(s,a){return-1}};return r.__extender=i,r}}const Zm={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:n=>n==="parent"||n==="global",default:"parent"},i18n:{type:Object}};function Wk({slots:n},e){return e.length===1&&e[0]==="default"?(n.default?n.default():[]).reduce((i,r)=>[...i,...r.type===He?r.children:[r]],[]):e.reduce((t,i)=>{const r=n[i];return r&&(t[i]=r()),t},Et())}function H1(n){return He}const zk=pn({name:"i18n-t",props:wn({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:n=>Qt(n)||!isNaN(n)}},Zm),setup(n,e){const{slots:t,attrs:i}=e,r=n.i18n||_t({useScope:n.scope,__useComponent:!0});return()=>{const s=Object.keys(t).filter(d=>d!=="_"),a=Et();n.locale&&(a.locale=n.locale),n.plural!==void 0&&(a.plural=ye(n.plural)?+n.plural:n.plural);const o=Wk(e,s),l=r[of](n.keypath,o,a),c=wn(Et(),i),u=ye(n.tag)||mt(n.tag)?n.tag:H1();return js(u,c,l)}}}),fv=zk;function Gk(n){return Tt(n)&&!ye(n[0])}function V1(n,e,t,i){const{slots:r,attrs:s}=e;return()=>{const a={part:!0};let o=Et();n.locale&&(a.locale=n.locale),ye(n.format)?a.key=n.format:mt(n.format)&&(ye(n.format.key)&&(a.key=n.format.key),o=Object.keys(n.format).reduce((h,f)=>t.includes(f)?wn(Et(),h,{[f]:n.format[f]}):h,Et()));const l=i(n.value,a,o);let c=[a.key];Tt(l)?c=l.map((h,f)=>{const m=r[h.type],p=m?m({[h.type]:h.value,index:f,parts:l}):[h.value];return Gk(p)&&(p[0].key=`${h.type}-${f}`),p}):ye(l)&&(c=[l]);const u=wn(Et(),s),d=ye(n.tag)||mt(n.tag)?n.tag:H1();return js(d,u,c)}}const Kk=pn({name:"i18n-n",props:wn({value:{type:Number,required:!0},format:{type:[String,Object]}},Zm),setup(n,e){const t=n.i18n||_t({useScope:n.scope,__useComponent:!0});return V1(n,e,N1,(...i)=>t[cf](...i))}}),mv=Kk,Yk=pn({name:"i18n-d",props:wn({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},Zm),setup(n,e){const t=n.i18n||_t({useScope:n.scope,__useComponent:!0});return V1(n,e,O1,(...i)=>t[lf](...i))}}),pv=Yk;function Qk(n,e){const t=n;if(n.mode==="composition")return t.__getInstance(e)||n.global;{const i=t.__getInstance(e);return i!=null?i.__composer:n.global.__composer}}function Xk(n){const e=a=>{const{instance:o,modifiers:l,value:c}=a;if(!o||!o.$)throw mn(un.UNEXPECTED_ERROR);const u=Qk(n,o.$),d=gv(c);return[Reflect.apply(u.t,u,[...vv(d)]),u]};return{created:(a,o)=>{const[l,c]=e(o);iu&&n.global===c&&(a.__i18nWatcher=At(c.locale,()=>{o.instance&&o.instance.$forceUpdate()})),a.__composer=c,a.textContent=l},unmounted:a=>{iu&&a.__i18nWatcher&&(a.__i18nWatcher(),a.__i18nWatcher=void 0,delete a.__i18nWatcher),a.__composer&&(a.__composer=void 0,delete a.__composer)},beforeUpdate:(a,{value:o})=>{if(a.__composer){const l=a.__composer,c=gv(o);a.textContent=Reflect.apply(l.t,l,[...vv(c)])}},getSSRProps:a=>{const[o]=e(a);return{textContent:o}}}}function gv(n){if(ye(n))return{path:n};if(je(n)){if(!("path"in n))throw mn(un.REQUIRED_VALUE,"path");return n}else throw mn(un.INVALID_VALUE)}function vv(n){const{path:e,locale:t,args:i,choice:r,plural:s}=n,a={},o=i||{};return ye(t)&&(a.locale=t),Qt(r)&&(a.plural=r),Qt(s)&&(a.plural=s),[e,o,a]}function Jk(n,e,...t){const i=je(t[0])?t[0]:{},r=!!i.useI18nComponentName;(et(i.globalInstall)?i.globalInstall:!0)&&([r?"i18n":fv.name,"I18nT"].forEach(a=>n.component(a,fv)),[mv.name,"I18nN"].forEach(a=>n.component(a,mv)),[pv.name,"I18nD"].forEach(a=>n.component(a,pv))),n.directive("t",Xk(e))}function Zk(n,e,t){return{beforeCreate(){const i=xi();if(!i)throw mn(un.UNEXPECTED_ERROR);const r=this.$options;if(r.i18n){const s=r.i18n;if(r.__i18n&&(s.__i18n=r.__i18n),s.__root=e,this===this.$root)this.$i18n=yv(n,s);else{s.__injectWithOption=!0,s.__extender=t.__vueI18nExtend,this.$i18n=df(s);const a=this.$i18n;a.__extender&&(a.__disposer=a.__extender(this.$i18n))}}else if(r.__i18n)if(this===this.$root)this.$i18n=yv(n,r);else{this.$i18n=df({__i18n:r.__i18n,__injectWithOption:!0,__extender:t.__vueI18nExtend,__root:e});const s=this.$i18n;s.__extender&&(s.__disposer=s.__extender(this.$i18n))}else this.$i18n=n;r.__i18nGlobal&&U1(e,r,r),this.$t=(...s)=>this.$i18n.t(...s),this.$rt=(...s)=>this.$i18n.rt(...s),this.$tc=(...s)=>this.$i18n.tc(...s),this.$te=(s,a)=>this.$i18n.te(s,a),this.$d=(...s)=>this.$i18n.d(...s),this.$n=(...s)=>this.$i18n.n(...s),this.$tm=s=>this.$i18n.tm(s),t.__setInstance(i,this.$i18n)},mounted(){},unmounted(){const i=xi();if(!i)throw mn(un.UNEXPECTED_ERROR);const r=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,r.__disposer&&(r.__disposer(),delete r.__disposer,delete r.__extender),t.__deleteInstance(i),delete this.$i18n}}}function yv(n,e){n.locale=e.locale||n.locale,n.fallbackLocale=e.fallbackLocale||n.fallbackLocale,n.missing=e.missing||n.missing,n.silentTranslationWarn=e.silentTranslationWarn||n.silentFallbackWarn,n.silentFallbackWarn=e.silentFallbackWarn||n.silentFallbackWarn,n.formatFallbackMessages=e.formatFallbackMessages||n.formatFallbackMessages,n.postTranslation=e.postTranslation||n.postTranslation,n.warnHtmlInMessage=e.warnHtmlInMessage||n.warnHtmlInMessage,n.escapeParameterHtml=e.escapeParameterHtml||n.escapeParameterHtml,n.sync=e.sync||n.sync,n.__composer[B1](e.pluralizationRules||n.pluralizationRules);const t=ud(n.locale,{messages:e.messages,__i18n:e.__i18n});return Object.keys(t).forEach(i=>n.mergeLocaleMessage(i,t[i])),e.datetimeFormats&&Object.keys(e.datetimeFormats).forEach(i=>n.mergeDateTimeFormat(i,e.datetimeFormats[i])),e.numberFormats&&Object.keys(e.numberFormats).forEach(i=>n.mergeNumberFormat(i,e.numberFormats[i])),n}const eD=ps("global-vue-i18n");function tD(n={},e){const t=__VUE_I18N_LEGACY_API__&&et(n.legacy)?n.legacy:__VUE_I18N_LEGACY_API__,i=et(n.globalInjection)?n.globalInjection:!0,r=__VUE_I18N_LEGACY_API__&&t?!!n.allowComposition:!0,s=new Map,[a,o]=nD(n,t),l=ps("");function c(h){return s.get(h)||null}function u(h,f){s.set(h,f)}function d(h){s.delete(h)}{const h={get mode(){return __VUE_I18N_LEGACY_API__&&t?"legacy":"composition"},get allowComposition(){return r},async install(f,...m){if(f.__VUE_I18N_SYMBOL__=l,f.provide(f.__VUE_I18N_SYMBOL__,h),je(m[0])){const v=m[0];h.__composerExtend=v.__composerExtend,h.__vueI18nExtend=v.__vueI18nExtend}let p=null;!t&&i&&(p=dD(f,h.global)),__VUE_I18N_FULL_INSTALL__&&Jk(f,h,...m),__VUE_I18N_LEGACY_API__&&t&&f.mixin(Zk(o,o.__composer,h));const g=f.unmount;f.unmount=()=>{p&&p(),h.dispose(),g()}},get global(){return o},dispose(){a.stop()},__instances:s,__getInstance:c,__setInstance:u,__deleteInstance:d};return h}}function _t(n={}){const e=xi();if(e==null)throw mn(un.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw mn(un.NOT_INSTALLED);const t=rD(e),i=sD(t),r=q1(e),s=iD(n,r);if(__VUE_I18N_LEGACY_API__&&t.mode==="legacy"&&!n.__useComponent){if(!t.allowComposition)throw mn(un.NOT_AVAILABLE_IN_LEGACY_MODE);return cD(e,s,i,n)}if(s==="global")return U1(i,n,r),i;if(s==="parent"){let l=aD(t,e,n.__useComponent);return l==null&&(l=i),l}const a=t;let o=a.__getInstance(e);if(o==null){const l=wn({},n);"__i18n"in r&&(l.__i18n=r.__i18n),i&&(l.__root=i),o=Jm(l),a.__composerExtend&&(o[uf]=a.__composerExtend(o)),lD(a,e,o),a.__setInstance(e,o)}return o}function nD(n,e,t){const i=V_();{const r=__VUE_I18N_LEGACY_API__&&e?i.run(()=>df(n)):i.run(()=>Jm(n));if(r==null)throw mn(un.UNEXPECTED_ERROR);return[i,r]}}function rD(n){{const e=fr(n.isCE?eD:n.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw mn(n.isCE?un.NOT_INSTALLED_WITH_PROVIDE:un.UNEXPECTED_ERROR);return e}}function iD(n,e){return od(n)?"__i18n"in e?"local":"global":n.useScope?n.useScope:"local"}function sD(n){return n.mode==="composition"?n.global:n.global.__composer}function aD(n,e,t=!1){let i=null;const r=e.root;let s=oD(e,t);for(;s!=null;){const a=n;if(n.mode==="composition")i=a.__getInstance(s);else if(__VUE_I18N_LEGACY_API__){const o=a.__getInstance(s);o!=null&&(i=o.__composer,t&&i&&!i[$1]&&(i=null))}if(i!=null||r===s)break;s=s.parent}return i}function oD(n,e=!1){return n==null?null:e&&n.vnode.ctx||n.parent}function lD(n,e,t){$r(()=>{},e),td(()=>{const i=t;n.__deleteInstance(e);const r=i[uf];r&&(r(),delete i[uf])},e)}function cD(n,e,t,i={}){const r=e==="local",s=Ea(null);if(r&&n.proxy&&!(n.proxy.$options.i18n||n.proxy.$options.__i18n))throw mn(un.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const a=et(i.inheritLocale)?i.inheritLocale:!ye(i.locale),o=Dn(!r||a?t.locale.value:ye(i.locale)?i.locale:Fa),l=Dn(!r||a?t.fallbackLocale.value:ye(i.fallbackLocale)||Tt(i.fallbackLocale)||je(i.fallbackLocale)||i.fallbackLocale===!1?i.fallbackLocale:o.value),c=Dn(ud(o.value,i)),u=Dn(je(i.datetimeFormats)?i.datetimeFormats:{[o.value]:{}}),d=Dn(je(i.numberFormats)?i.numberFormats:{[o.value]:{}}),h=r?t.missingWarn:et(i.missingWarn)||ss(i.missingWarn)?i.missingWarn:!0,f=r?t.fallbackWarn:et(i.fallbackWarn)||ss(i.fallbackWarn)?i.fallbackWarn:!0,m=r?t.fallbackRoot:et(i.fallbackRoot)?i.fallbackRoot:!0,p=!!i.fallbackFormat,g=kt(i.missing)?i.missing:null,v=kt(i.postTranslation)?i.postTranslation:null,C=r?t.warnHtmlMessage:et(i.warnHtmlMessage)?i.warnHtmlMessage:!0,y=!!i.escapeParameter,E=r?t.modifiers:je(i.modifiers)?i.modifiers:{},_=i.pluralRules||r&&t.pluralRules;function w(){return[o.value,l.value,c.value,u.value,d.value]}const k=Qe({get:()=>s.value?s.value.locale.value:o.value,set:b=>{s.value&&(s.value.locale.value=b),o.value=b}}),I=Qe({get:()=>s.value?s.value.fallbackLocale.value:l.value,set:b=>{s.value&&(s.value.fallbackLocale.value=b),l.value=b}}),P=Qe(()=>s.value?s.value.messages.value:c.value),Z=Qe(()=>u.value),X=Qe(()=>d.value);function B(){return s.value?s.value.getPostTranslationHandler():v}function $(b){s.value&&s.value.setPostTranslationHandler(b)}function U(){return s.value?s.value.getMissingHandler():g}function re(b){s.value&&s.value.setMissingHandler(b)}function le(b){return w(),b()}function ae(...b){return s.value?le(()=>Reflect.apply(s.value.t,null,[...b])):le(()=>"")}function ue(...b){return s.value?Reflect.apply(s.value.rt,null,[...b]):""}function ve(...b){return s.value?le(()=>Reflect.apply(s.value.d,null,[...b])):le(()=>"")}function me(...b){return s.value?le(()=>Reflect.apply(s.value.n,null,[...b])):le(()=>"")}function ke(b){return s.value?s.value.tm(b):{}}function Me(b,N){return s.value?s.value.te(b,N):!1}function Xe(b){return s.value?s.value.getLocaleMessage(b):{}}function Fe(b,N){s.value&&(s.value.setLocaleMessage(b,N),c.value[b]=N)}function wt(b,N){s.value&&s.value.mergeLocaleMessage(b,N)}function Ze(b){return s.value?s.value.getDateTimeFormat(b):{}}function W(b,N){s.value&&(s.value.setDateTimeFormat(b,N),u.value[b]=N)}function ce(b,N){s.value&&s.value.mergeDateTimeFormat(b,N)}function oe(b){return s.value?s.value.getNumberFormat(b):{}}function de(b,N){s.value&&(s.value.setNumberFormat(b,N),d.value[b]=N)}function Ae(b,N){s.value&&s.value.mergeNumberFormat(b,N)}const Je={get id(){return s.value?s.value.id:-1},locale:k,fallbackLocale:I,messages:P,datetimeFormats:Z,numberFormats:X,get inheritLocale(){return s.value?s.value.inheritLocale:a},set inheritLocale(b){s.value&&(s.value.inheritLocale=b)},get availableLocales(){return s.value?s.value.availableLocales:Object.keys(c.value)},get modifiers(){return s.value?s.value.modifiers:E},get pluralRules(){return s.value?s.value.pluralRules:_},get isGlobal(){return s.value?s.value.isGlobal:!1},get missingWarn(){return s.value?s.value.missingWarn:h},set missingWarn(b){s.value&&(s.value.missingWarn=b)},get fallbackWarn(){return s.value?s.value.fallbackWarn:f},set fallbackWarn(b){s.value&&(s.value.missingWarn=b)},get fallbackRoot(){return s.value?s.value.fallbackRoot:m},set fallbackRoot(b){s.value&&(s.value.fallbackRoot=b)},get fallbackFormat(){return s.value?s.value.fallbackFormat:p},set fallbackFormat(b){s.value&&(s.value.fallbackFormat=b)},get warnHtmlMessage(){return s.value?s.value.warnHtmlMessage:C},set warnHtmlMessage(b){s.value&&(s.value.warnHtmlMessage=b)},get escapeParameter(){return s.value?s.value.escapeParameter:y},set escapeParameter(b){s.value&&(s.value.escapeParameter=b)},t:ae,getPostTranslationHandler:B,setPostTranslationHandler:$,getMissingHandler:U,setMissingHandler:re,rt:ue,d:ve,n:me,tm:ke,te:Me,getLocaleMessage:Xe,setLocaleMessage:Fe,mergeLocaleMessage:wt,getDateTimeFormat:Ze,setDateTimeFormat:W,mergeDateTimeFormat:ce,getNumberFormat:oe,setNumberFormat:de,mergeNumberFormat:Ae};function R(b){b.locale.value=o.value,b.fallbackLocale.value=l.value,Object.keys(c.value).forEach(N=>{b.mergeLocaleMessage(N,c.value[N])}),Object.keys(u.value).forEach(N=>{b.mergeDateTimeFormat(N,u.value[N])}),Object.keys(d.value).forEach(N=>{b.mergeNumberFormat(N,d.value[N])}),b.escapeParameter=y,b.fallbackFormat=p,b.fallbackRoot=m,b.fallbackWarn=f,b.missingWarn=h,b.warnHtmlMessage=C}return wl(()=>{if(n.proxy==null||n.proxy.$i18n==null)throw mn(un.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const b=s.value=n.proxy.$i18n.__composer;e==="global"?(o.value=b.locale.value,l.value=b.fallbackLocale.value,c.value=b.messages.value,u.value=b.datetimeFormats.value,d.value=b.numberFormats.value):r&&R(b)}),Je}const uD=["locale","fallbackLocale","availableLocales"],bv=["t","rt","d","n","tm","te"];function dD(n,e){const t=Object.create(null);return uD.forEach(r=>{const s=Object.getOwnPropertyDescriptor(e,r);if(!s)throw mn(un.UNEXPECTED_ERROR);const a=jn(s.value)?{get(){return s.value.value},set(o){s.value.value=o}}:{get(){return s.get&&s.get()}};Object.defineProperty(t,r,a)}),n.config.globalProperties.$i18n=t,bv.forEach(r=>{const s=Object.getOwnPropertyDescriptor(e,r);if(!s||!s.value)throw mn(un.UNEXPECTED_ERROR);Object.defineProperty(n.config.globalProperties,`$${r}`,s)}),()=>{delete n.config.globalProperties.$i18n,bv.forEach(r=>{delete n.config.globalProperties[`$${r}`]})}}Uk();__INTLIFY_JIT_COMPILATION__?Jg(Nk):Jg(Ok);dk(zA);hk(_1);if(__INTLIFY_PROD_DEVTOOLS__){const n=bi();n.__INTLIFY__=!0,tk(n.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}/*!
  * vue-router v4.3.2
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const oa=typeof document<"u";function hD(n){return n.__esModule||n[Symbol.toStringTag]==="Module"}const vt=Object.assign;function zd(n,e){const t={};for(const i in e){const r=e[i];t[i]=Fr(r)?r.map(n):n(r)}return t}const Oo=()=>{},Fr=Array.isArray,j1=/#/g,fD=/&/g,mD=/\//g,pD=/=/g,gD=/\?/g,W1=/\+/g,vD=/%5B/g,yD=/%5D/g,z1=/%5E/g,bD=/%60/g,G1=/%7B/g,ED=/%7C/g,K1=/%7D/g,wD=/%20/g;function ep(n){return encodeURI(""+n).replace(ED,"|").replace(vD,"[").replace(yD,"]")}function CD(n){return ep(n).replace(G1,"{").replace(K1,"}").replace(z1,"^")}function hf(n){return ep(n).replace(W1,"%2B").replace(wD,"+").replace(j1,"%23").replace(fD,"%26").replace(bD,"`").replace(G1,"{").replace(K1,"}").replace(z1,"^")}function SD(n){return hf(n).replace(pD,"%3D")}function _D(n){return ep(n).replace(j1,"%23").replace(gD,"%3F")}function xD(n){return n==null?"":_D(n).replace(mD,"%2F")}function el(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const RD=/\/$/,AD=n=>n.replace(RD,"");function Gd(n,e,t="/"){let i,r={},s="",a="";const o=e.indexOf("#");let l=e.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(i=e.slice(0,l),s=e.slice(l+1,o>-1?o:e.length),r=n(s)),o>-1&&(i=i||e.slice(0,o),a=e.slice(o,e.length)),i=PD(i??e,t),{fullPath:i+(s&&"?")+s+a,path:i,query:r,hash:el(a)}}function kD(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function Ev(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function DD(n,e,t){const i=e.matched.length-1,r=t.matched.length-1;return i>-1&&i===r&&Ba(e.matched[i],t.matched[r])&&Y1(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function Ba(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function Y1(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!MD(n[t],e[t]))return!1;return!0}function MD(n,e){return Fr(n)?wv(n,e):Fr(e)?wv(e,n):n===e}function wv(n,e){return Fr(e)?n.length===e.length&&n.every((t,i)=>t===e[i]):n.length===1&&n[0]===e}function PD(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),i=n.split("/"),r=i[i.length-1];(r===".."||r===".")&&i.push("");let s=t.length-1,a,o;for(a=0;a<i.length;a++)if(o=i[a],o!==".")if(o==="..")s>1&&s--;else break;return t.slice(0,s).join("/")+"/"+i.slice(a).join("/")}var tl;(function(n){n.pop="pop",n.push="push"})(tl||(tl={}));var No;(function(n){n.back="back",n.forward="forward",n.unknown=""})(No||(No={}));function TD(n){if(!n)if(oa){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),AD(n)}const ID=/^[^#]+#/;function OD(n,e){return n.replace(ID,"#")+e}function ND(n,e){const t=document.documentElement.getBoundingClientRect(),i=n.getBoundingClientRect();return{behavior:e.behavior,left:i.left-t.left-(e.left||0),top:i.top-t.top-(e.top||0)}}const dd=()=>({left:window.scrollX,top:window.scrollY});function FD(n){let e;if("el"in n){const t=n.el,i=typeof t=="string"&&t.startsWith("#"),r=typeof t=="string"?i?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!r)return;e=ND(r,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Cv(n,e){return(history.state?history.state.position-e:-1)+n}const ff=new Map;function LD(n,e){ff.set(n,e)}function BD(n){const e=ff.get(n);return ff.delete(n),e}let $D=()=>location.protocol+"//"+location.host;function Q1(n,e){const{pathname:t,search:i,hash:r}=e,s=n.indexOf("#");if(s>-1){let o=r.includes(n.slice(s))?n.slice(s).length:1,l=r.slice(o);return l[0]!=="/"&&(l="/"+l),Ev(l,"")}return Ev(t,n)+i+r}function qD(n,e,t,i){let r=[],s=[],a=null;const o=({state:h})=>{const f=Q1(n,location),m=t.value,p=e.value;let g=0;if(h){if(t.value=f,e.value=h,a&&a===m){a=null;return}g=p?h.position-p.position:0}else i(f);r.forEach(v=>{v(t.value,m,{delta:g,type:tl.pop,direction:g?g>0?No.forward:No.back:No.unknown})})};function l(){a=t.value}function c(h){r.push(h);const f=()=>{const m=r.indexOf(h);m>-1&&r.splice(m,1)};return s.push(f),f}function u(){const{history:h}=window;h.state&&h.replaceState(vt({},h.state,{scroll:dd()}),"")}function d(){for(const h of s)h();s=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function Sv(n,e,t,i=!1,r=!1){return{back:n,current:e,forward:t,replaced:i,position:window.history.length,scroll:r?dd():null}}function UD(n){const{history:e,location:t}=window,i={value:Q1(n,t)},r={value:e.state};r.value||s(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const d=n.indexOf("#"),h=d>-1?(t.host&&document.querySelector("base")?n:n.slice(d))+l:$D()+n+l;try{e[u?"replaceState":"pushState"](c,"",h),r.value=c}catch(f){console.error(f),t[u?"replace":"assign"](h)}}function a(l,c){const u=vt({},e.state,Sv(r.value.back,l,r.value.forward,!0),c,{position:r.value.position});s(l,u,!0),i.value=l}function o(l,c){const u=vt({},r.value,e.state,{forward:l,scroll:dd()});s(u.current,u,!0);const d=vt({},Sv(i.value,l,null),{position:u.position+1},c);s(l,d,!1),i.value=l}return{location:i,state:r,push:o,replace:a}}function HD(n){n=TD(n);const e=UD(n),t=qD(n,e.state,e.location,e.replace);function i(s,a=!0){a||t.pauseListeners(),history.go(s)}const r=vt({location:"",base:n,go:i,createHref:OD.bind(null,n)},e,t);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function VD(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),HD(n)}function jD(n){return typeof n=="string"||n&&typeof n=="object"}function X1(n){return typeof n=="string"||typeof n=="symbol"}const Li={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},J1=Symbol("");var _v;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(_v||(_v={}));function $a(n,e){return vt(new Error,{type:n,[J1]:!0},e)}function gi(n,e){return n instanceof Error&&J1 in n&&(e==null||!!(n.type&e))}const xv="[^/]+?",WD={sensitive:!1,strict:!1,start:!0,end:!0},zD=/[.+*?^${}()[\]/\\]/g;function GD(n,e){const t=vt({},WD,e),i=[];let r=t.start?"^":"";const s=[];for(const c of n){const u=c.length?[]:[90];t.strict&&!c.length&&(r+="/");for(let d=0;d<c.length;d++){const h=c[d];let f=40+(t.sensitive?.25:0);if(h.type===0)d||(r+="/"),r+=h.value.replace(zD,"\\$&"),f+=40;else if(h.type===1){const{value:m,repeatable:p,optional:g,regexp:v}=h;s.push({name:m,repeatable:p,optional:g});const C=v||xv;if(C!==xv){f+=10;try{new RegExp(`(${C})`)}catch(E){throw new Error(`Invalid custom RegExp for param "${m}" (${C}): `+E.message)}}let y=p?`((?:${C})(?:/(?:${C}))*)`:`(${C})`;d||(y=g&&c.length<2?`(?:/${y})`:"/"+y),g&&(y+="?"),r+=y,f+=20,g&&(f+=-8),p&&(f+=-20),C===".*"&&(f+=-50)}u.push(f)}i.push(u)}if(t.strict&&t.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}t.strict||(r+="/?"),t.end?r+="$":t.strict&&(r+="(?:/|$)");const a=new RegExp(r,t.sensitive?"":"i");function o(c){const u=c.match(a),d={};if(!u)return null;for(let h=1;h<u.length;h++){const f=u[h]||"",m=s[h-1];d[m.name]=f&&m.repeatable?f.split("/"):f}return d}function l(c){let u="",d=!1;for(const h of n){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const f of h)if(f.type===0)u+=f.value;else if(f.type===1){const{value:m,repeatable:p,optional:g}=f,v=m in c?c[m]:"";if(Fr(v)&&!p)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const C=Fr(v)?v.join("/"):v;if(!C)if(g)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${m}"`);u+=C}}return u||"/"}return{re:a,score:i,keys:s,parse:o,stringify:l}}function KD(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=e[t]-n[t];if(i)return i;t++}return n.length<e.length?n.length===1&&n[0]===40+40?-1:1:n.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function YD(n,e){let t=0;const i=n.score,r=e.score;for(;t<i.length&&t<r.length;){const s=KD(i[t],r[t]);if(s)return s;t++}if(Math.abs(r.length-i.length)===1){if(Rv(i))return 1;if(Rv(r))return-1}return r.length-i.length}function Rv(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const QD={type:0,value:""},XD=/[a-zA-Z0-9_]/;function JD(n){if(!n)return[[]];if(n==="/")return[[QD]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(f){throw new Error(`ERR (${t})/"${c}": ${f}`)}let t=0,i=t;const r=[];let s;function a(){s&&r.push(s),s=[]}let o=0,l,c="",u="";function d(){c&&(t===0?s.push({type:0,value:c}):t===1||t===2||t===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;o<n.length;){if(l=n[o++],l==="\\"&&t!==2){i=t,t=4;continue}switch(t){case 0:l==="/"?(c&&d(),a()):l===":"?(d(),t=1):h();break;case 4:h(),t=i;break;case 1:l==="("?t=2:XD.test(l)?h():(d(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:t=3:u+=l;break;case 3:d(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&o--,u="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),a(),r}function ZD(n,e,t){const i=GD(JD(n.path),t),r=vt(i,{record:n,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function eM(n,e){const t=[],i=new Map;e=Dv({strict:!1,end:!0,sensitive:!1},e);function r(u){return i.get(u)}function s(u,d,h){const f=!h,m=tM(u);m.aliasOf=h&&h.record;const p=Dv(e,u),g=[m];if("alias"in u){const y=typeof u.alias=="string"?[u.alias]:u.alias;for(const E of y)g.push(vt({},m,{components:h?h.record.components:m.components,path:E,aliasOf:h?h.record:m}))}let v,C;for(const y of g){const{path:E}=y;if(d&&E[0]!=="/"){const _=d.record.path,w=_[_.length-1]==="/"?"":"/";y.path=d.record.path+(E&&w+E)}if(v=ZD(y,d,p),h?h.alias.push(v):(C=C||v,C!==v&&C.alias.push(v),f&&u.name&&!kv(v)&&a(u.name)),m.children){const _=m.children;for(let w=0;w<_.length;w++)s(_[w],v,h&&h.children[w])}h=h||v,(v.record.components&&Object.keys(v.record.components).length||v.record.name||v.record.redirect)&&l(v)}return C?()=>{a(C)}:Oo}function a(u){if(X1(u)){const d=i.get(u);d&&(i.delete(u),t.splice(t.indexOf(d),1),d.children.forEach(a),d.alias.forEach(a))}else{const d=t.indexOf(u);d>-1&&(t.splice(d,1),u.record.name&&i.delete(u.record.name),u.children.forEach(a),u.alias.forEach(a))}}function o(){return t}function l(u){let d=0;for(;d<t.length&&YD(u,t[d])>=0&&(u.record.path!==t[d].record.path||!Z1(u,t[d]));)d++;t.splice(d,0,u),u.record.name&&!kv(u)&&i.set(u.record.name,u)}function c(u,d){let h,f={},m,p;if("name"in u&&u.name){if(h=i.get(u.name),!h)throw $a(1,{location:u});p=h.record.name,f=vt(Av(d.params,h.keys.filter(C=>!C.optional).concat(h.parent?h.parent.keys.filter(C=>C.optional):[]).map(C=>C.name)),u.params&&Av(u.params,h.keys.map(C=>C.name))),m=h.stringify(f)}else if(u.path!=null)m=u.path,h=t.find(C=>C.re.test(m)),h&&(f=h.parse(m),p=h.record.name);else{if(h=d.name?i.get(d.name):t.find(C=>C.re.test(d.path)),!h)throw $a(1,{location:u,currentLocation:d});p=h.record.name,f=vt({},d.params,u.params),m=h.stringify(f)}const g=[];let v=h;for(;v;)g.unshift(v.record),v=v.parent;return{name:p,path:m,params:f,matched:g,meta:rM(g)}}return n.forEach(u=>s(u)),{addRoute:s,resolve:c,removeRoute:a,getRoutes:o,getRecordMatcher:r}}function Av(n,e){const t={};for(const i of e)i in n&&(t[i]=n[i]);return t}function tM(n){return{path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:void 0,beforeEnter:n.beforeEnter,props:nM(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}}}function nM(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const i in n.components)e[i]=typeof t=="object"?t[i]:t;return e}function kv(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function rM(n){return n.reduce((e,t)=>vt(e,t.meta),{})}function Dv(n,e){const t={};for(const i in n)t[i]=i in e?e[i]:n[i];return t}function Z1(n,e){return e.children.some(t=>t===n||Z1(n,t))}function iM(n){const e={};if(n===""||n==="?")return e;const i=(n[0]==="?"?n.slice(1):n).split("&");for(let r=0;r<i.length;++r){const s=i[r].replace(W1," "),a=s.indexOf("="),o=el(a<0?s:s.slice(0,a)),l=a<0?null:el(s.slice(a+1));if(o in e){let c=e[o];Fr(c)||(c=e[o]=[c]),c.push(l)}else e[o]=l}return e}function Mv(n){let e="";for(let t in n){const i=n[t];if(t=SD(t),i==null){i!==void 0&&(e+=(e.length?"&":"")+t);continue}(Fr(i)?i.map(s=>s&&hf(s)):[i&&hf(i)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+t,s!=null&&(e+="="+s))})}return e}function sM(n){const e={};for(const t in n){const i=n[t];i!==void 0&&(e[t]=Fr(i)?i.map(r=>r==null?null:""+r):i==null?i:""+i)}return e}const aM=Symbol(""),Pv=Symbol(""),hd=Symbol(""),tp=Symbol(""),mf=Symbol("");function uo(){let n=[];function e(i){return n.push(i),()=>{const r=n.indexOf(i);r>-1&&n.splice(r,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function qi(n,e,t,i,r,s=a=>a()){const a=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((o,l)=>{const c=h=>{h===!1?l($a(4,{from:t,to:e})):h instanceof Error?l(h):jD(h)?l($a(2,{from:e,to:h})):(a&&i.enterCallbacks[r]===a&&typeof h=="function"&&a.push(h),o())},u=s(()=>n.call(i&&i.instances[r],e,t,c));let d=Promise.resolve(u);n.length<3&&(d=d.then(c)),d.catch(h=>l(h))})}function Kd(n,e,t,i,r=s=>s()){const s=[];for(const a of n)for(const o in a.components){let l=a.components[o];if(!(e!=="beforeRouteEnter"&&!a.instances[o]))if(oM(l)){const u=(l.__vccOpts||l)[e];u&&s.push(qi(u,t,i,a,o,r))}else{let c=l();s.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${a.path}"`));const d=hD(u)?u.default:u;a.components[o]=d;const f=(d.__vccOpts||d)[e];return f&&qi(f,t,i,a,o,r)()}))}}return s}function oM(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function Tv(n){const e=fr(hd),t=fr(tp),i=Qe(()=>{const l=F(n.to);return e.resolve(l)}),r=Qe(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],d=t.matched;if(!u||!d.length)return-1;const h=d.findIndex(Ba.bind(null,u));if(h>-1)return h;const f=Iv(l[c-2]);return c>1&&Iv(u)===f&&d[d.length-1].path!==f?d.findIndex(Ba.bind(null,l[c-2])):h}),s=Qe(()=>r.value>-1&&dM(t.params,i.value.params)),a=Qe(()=>r.value>-1&&r.value===t.matched.length-1&&Y1(t.params,i.value.params));function o(l={}){return uM(l)?e[F(n.replace)?"replace":"push"](F(n.to)).catch(Oo):Promise.resolve()}return{route:i,href:Qe(()=>i.value.href),isActive:s,isExactActive:a,navigate:o}}const lM=pn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Tv,setup(n,{slots:e}){const t=it(Tv(n)),{options:i}=fr(hd),r=Qe(()=>({[Ov(n.activeClass,i.linkActiveClass,"router-link-active")]:t.isActive,[Ov(n.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const s=e.default&&e.default(t);return n.custom?s:js("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:r.value},s)}}}),cM=lM;function uM(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function dM(n,e){for(const t in e){const i=e[t],r=n[t];if(typeof i=="string"){if(i!==r)return!1}else if(!Fr(r)||r.length!==i.length||i.some((s,a)=>s!==r[a]))return!1}return!0}function Iv(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const Ov=(n,e,t)=>n??e??t,hM=pn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const i=fr(mf),r=Qe(()=>n.route||i.value),s=fr(Pv,0),a=Qe(()=>{let c=F(s);const{matched:u}=r.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),o=Qe(()=>r.value.matched[a.value]);kc(Pv,Qe(()=>a.value+1)),kc(aM,o),kc(mf,r);const l=Dn();return At(()=>[l.value,o.value,n.name],([c,u,d],[h,f,m])=>{u&&(u.instances[d]=c,f&&f!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),c&&u&&(!f||!Ba(u,f)||!h)&&(u.enterCallbacks[d]||[]).forEach(p=>p(c))},{flush:"post"}),()=>{const c=r.value,u=n.name,d=o.value,h=d&&d.components[u];if(!h)return Nv(t.default,{Component:h,route:c});const f=d.props[u],m=f?f===!0?c.params:typeof f=="function"?f(c):f:null,g=js(h,vt({},m,e,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return Nv(t.default,{Component:g,route:c})||g}}});function Nv(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const fM=hM;function mM(n){const e=eM(n.routes,n),t=n.parseQuery||iM,i=n.stringifyQuery||Mv,r=n.history,s=uo(),a=uo(),o=uo(),l=Ea(Li);let c=Li;oa&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=zd.bind(null,W=>""+W),d=zd.bind(null,xD),h=zd.bind(null,el);function f(W,ce){let oe,de;return X1(W)?(oe=e.getRecordMatcher(W),de=ce):de=W,e.addRoute(de,oe)}function m(W){const ce=e.getRecordMatcher(W);ce&&e.removeRoute(ce)}function p(){return e.getRoutes().map(W=>W.record)}function g(W){return!!e.getRecordMatcher(W)}function v(W,ce){if(ce=vt({},ce||l.value),typeof W=="string"){const b=Gd(t,W,ce.path),N=e.resolve({path:b.path},ce),J=r.createHref(b.fullPath);return vt(b,N,{params:h(N.params),hash:el(b.hash),redirectedFrom:void 0,href:J})}let oe;if(W.path!=null)oe=vt({},W,{path:Gd(t,W.path,ce.path).path});else{const b=vt({},W.params);for(const N in b)b[N]==null&&delete b[N];oe=vt({},W,{params:d(b)}),ce.params=d(ce.params)}const de=e.resolve(oe,ce),Ae=W.hash||"";de.params=u(h(de.params));const Je=kD(i,vt({},W,{hash:CD(Ae),path:de.path})),R=r.createHref(Je);return vt({fullPath:Je,hash:Ae,query:i===Mv?sM(W.query):W.query||{}},de,{redirectedFrom:void 0,href:R})}function C(W){return typeof W=="string"?Gd(t,W,l.value.path):vt({},W)}function y(W,ce){if(c!==W)return $a(8,{from:ce,to:W})}function E(W){return k(W)}function _(W){return E(vt(C(W),{replace:!0}))}function w(W){const ce=W.matched[W.matched.length-1];if(ce&&ce.redirect){const{redirect:oe}=ce;let de=typeof oe=="function"?oe(W):oe;return typeof de=="string"&&(de=de.includes("?")||de.includes("#")?de=C(de):{path:de},de.params={}),vt({query:W.query,hash:W.hash,params:de.path!=null?{}:W.params},de)}}function k(W,ce){const oe=c=v(W),de=l.value,Ae=W.state,Je=W.force,R=W.replace===!0,b=w(oe);if(b)return k(vt(C(b),{state:typeof b=="object"?vt({},Ae,b.state):Ae,force:Je,replace:R}),ce||oe);const N=oe;N.redirectedFrom=ce;let J;return!Je&&DD(i,de,oe)&&(J=$a(16,{to:N,from:de}),ke(de,de,!0,!1)),(J?Promise.resolve(J):Z(N,de)).catch(Q=>gi(Q)?gi(Q,2)?Q:me(Q):ue(Q,N,de)).then(Q=>{if(Q){if(gi(Q,2))return k(vt({replace:R},C(Q.to),{state:typeof Q.to=="object"?vt({},Ae,Q.to.state):Ae,force:Je}),ce||N)}else Q=B(N,de,!0,R,Ae);return X(N,de,Q),Q})}function I(W,ce){const oe=y(W,ce);return oe?Promise.reject(oe):Promise.resolve()}function P(W){const ce=Fe.values().next().value;return ce&&typeof ce.runWithContext=="function"?ce.runWithContext(W):W()}function Z(W,ce){let oe;const[de,Ae,Je]=pM(W,ce);oe=Kd(de.reverse(),"beforeRouteLeave",W,ce);for(const b of de)b.leaveGuards.forEach(N=>{oe.push(qi(N,W,ce))});const R=I.bind(null,W,ce);return oe.push(R),Ze(oe).then(()=>{oe=[];for(const b of s.list())oe.push(qi(b,W,ce));return oe.push(R),Ze(oe)}).then(()=>{oe=Kd(Ae,"beforeRouteUpdate",W,ce);for(const b of Ae)b.updateGuards.forEach(N=>{oe.push(qi(N,W,ce))});return oe.push(R),Ze(oe)}).then(()=>{oe=[];for(const b of Je)if(b.beforeEnter)if(Fr(b.beforeEnter))for(const N of b.beforeEnter)oe.push(qi(N,W,ce));else oe.push(qi(b.beforeEnter,W,ce));return oe.push(R),Ze(oe)}).then(()=>(W.matched.forEach(b=>b.enterCallbacks={}),oe=Kd(Je,"beforeRouteEnter",W,ce,P),oe.push(R),Ze(oe))).then(()=>{oe=[];for(const b of a.list())oe.push(qi(b,W,ce));return oe.push(R),Ze(oe)}).catch(b=>gi(b,8)?b:Promise.reject(b))}function X(W,ce,oe){o.list().forEach(de=>P(()=>de(W,ce,oe)))}function B(W,ce,oe,de,Ae){const Je=y(W,ce);if(Je)return Je;const R=ce===Li,b=oa?history.state:{};oe&&(de||R?r.replace(W.fullPath,vt({scroll:R&&b&&b.scroll},Ae)):r.push(W.fullPath,Ae)),l.value=W,ke(W,ce,oe,R),me()}let $;function U(){$||($=r.listen((W,ce,oe)=>{if(!wt.listening)return;const de=v(W),Ae=w(de);if(Ae){k(vt(Ae,{replace:!0}),de).catch(Oo);return}c=de;const Je=l.value;oa&&LD(Cv(Je.fullPath,oe.delta),dd()),Z(de,Je).catch(R=>gi(R,12)?R:gi(R,2)?(k(R.to,de).then(b=>{gi(b,20)&&!oe.delta&&oe.type===tl.pop&&r.go(-1,!1)}).catch(Oo),Promise.reject()):(oe.delta&&r.go(-oe.delta,!1),ue(R,de,Je))).then(R=>{R=R||B(de,Je,!1),R&&(oe.delta&&!gi(R,8)?r.go(-oe.delta,!1):oe.type===tl.pop&&gi(R,20)&&r.go(-1,!1)),X(de,Je,R)}).catch(Oo)}))}let re=uo(),le=uo(),ae;function ue(W,ce,oe){me(W);const de=le.list();return de.length?de.forEach(Ae=>Ae(W,ce,oe)):console.error(W),Promise.reject(W)}function ve(){return ae&&l.value!==Li?Promise.resolve():new Promise((W,ce)=>{re.add([W,ce])})}function me(W){return ae||(ae=!W,U(),re.list().forEach(([ce,oe])=>W?oe(W):ce()),re.reset()),W}function ke(W,ce,oe,de){const{scrollBehavior:Ae}=n;if(!oa||!Ae)return Promise.resolve();const Je=!oe&&BD(Cv(W.fullPath,0))||(de||!oe)&&history.state&&history.state.scroll||null;return Ta().then(()=>Ae(W,ce,Je)).then(R=>R&&FD(R)).catch(R=>ue(R,W,ce))}const Me=W=>r.go(W);let Xe;const Fe=new Set,wt={currentRoute:l,listening:!0,addRoute:f,removeRoute:m,hasRoute:g,getRoutes:p,resolve:v,options:n,push:E,replace:_,go:Me,back:()=>Me(-1),forward:()=>Me(1),beforeEach:s.add,beforeResolve:a.add,afterEach:o.add,onError:le.add,isReady:ve,install(W){const ce=this;W.component("RouterLink",cM),W.component("RouterView",fM),W.config.globalProperties.$router=ce,Object.defineProperty(W.config.globalProperties,"$route",{enumerable:!0,get:()=>F(l)}),oa&&!Xe&&l.value===Li&&(Xe=!0,E(r.location).catch(Ae=>{}));const oe={};for(const Ae in Li)Object.defineProperty(oe,Ae,{get:()=>l.value[Ae],enumerable:!0});W.provide(hd,ce),W.provide(tp,Pb(oe)),W.provide(mf,l);const de=W.unmount;Fe.add(W),W.unmount=function(){Fe.delete(W),Fe.size<1&&(c=Li,$&&$(),$=null,l.value=Li,Xe=!1,ae=!1),de()}}};function Ze(W){return W.reduce((ce,oe)=>ce.then(()=>P(oe)),Promise.resolve())}return wt}function pM(n,e){const t=[],i=[],r=[],s=Math.max(e.matched.length,n.matched.length);for(let a=0;a<s;a++){const o=e.matched[a];o&&(n.matched.find(c=>Ba(c,o))?i.push(o):t.push(o));const l=n.matched[a];l&&(e.matched.find(c=>Ba(c,l))||r.push(l))}return[t,i,r]}function gM(){return fr(hd)}function eE(){return fr(tp)}const{api:vM}=window,yM={i18n:{"fr-FR":{title:"Tutoriel désactivé !",desc:"Pour que le tutoriel puisse s'effectuer dans de bonnes conditions, il est nécessaire que vous ayez équipé une arme de mêlée, que vous ayez au moins 2 objets dans votre inventaire qui ne soit pas équipé et que vous ayez au moins 18 points d'enchantements disponibles."},"en-EN":{title:"Tutorial is disabled!",desc:"For the tutorial to be done out in good conditions, it's necessary that you have equipped a melee weapon, that you have at least 2 items in your inventory that are not equipped and that you have at least 18 enchantments points available."}}},bM={i18n:{"fr-FR":{title:"Tutoriel",desc:"Bienvenue, ce tutoriel va vous guider dans l'utilisation de MCD Save Editor, vous pouvez utiliser les boutons ci-dessous pour changer d'étape."},"en-EN":{title:"Tutorial",desc:"Welcome, this tutorial will guide you to use MCD Save Editor, you can use above buttons to change step."}}},EM={i18n:{"fr-FR":{title:"Glisser-déposer",desc:"Essayez de glisser-déposer un objet d'une case à l'autre.",objectives:{DragNDrop:{title:"Glisser-déposer un objet",reasons:{ValidDrop:"Vous pouvez déposer l'objet.",InvalidDrop:"Cet objet ne peut pas être déposé ici."}}}},"en-EN":{title:"Drag'n'drop",desc:"Try to drag'n'drop an item from a slot to another.",objectives:{DragNDrop:{title:"Drag'n'drop an item",reasons:{ValidDrop:"You can drop the item.",InvalidDrop:"You cannot drop this item here."}}}}}},wM={i18n:{"fr-FR":{title:"Équipement",desc:"Vous pouvez équiper ou déséquiper un objet en utilisant le clic molette.",objectives:{UnequipItem:{title:"Déséquipez l'objet."},EquipItem:{title:"Équipez l'objet."}}},"en-EN":{title:"Equipment",desc:"You can equip or unequip an item using middle click.",objectives:{UnequipItem:{title:"Unequip the item."},EquipItem:{title:"Equip the item."}}}}},CM={i18n:{"fr-FR":{title:"Modifier un objet",desc:"Modifier le type d'un objet.",objectives:{SelectItem:{title:"Séléctionnez l'objet à modifier"},OpenSelector:{title:"Cliquez sur le nom de l'objet"},ChooseNewItem:{title:"Choisissez une arme ou une armure",reasons:{InvalidItem:"Veuillez choisir une arme ou une armure commune ou rare."}},ChangeRarity:{title:"Cliquez pour changer la rareté"},ChangeLevel:{title:"Utilisez la molette pour changer le niveau"}}},"en-EN":{title:"Editing an item",desc:"Changing an item type.",objectives:{SelectItem:{title:"Select an item to edit"},OpenSelector:{title:"Click on item name"},ChooseNewItem:{title:"Choose a weapon or an armor",reasons:{InvalidItem:"Please choose a weapon or an armor common or rare."}},ChangeRarity:{title:"Click to change rarity"},ChangeLevel:{title:"Scroll up or down to change item level"}}}}},SM={i18n:{"fr-FR":{title:"Enchantements (1/2)",desc:"Modification des enchantements d'un objet.",objectives:{ChooseEnchantmentToEdit:{title:"Choisissez l'enchantement à modifier"},OpenSelector:{title:"Cliquez sur le nom de l'enchantement"},ChooseNewEnchantment:{title:"Choisissez un enchantement"},UpgradeEnchantment:{title:"Améliorez l'enchantement au niveau 3"},CloseEditor:{title:"Fermez l'éditeur d'enchantement"}}},"en-EN":{title:"Enchantments (1/2)",desc:"Editing item's enchantments.",objectives:{ChooseEnchantmentToEdit:{title:"Choose the enchantment to edit"},OpenSelector:{title:"Click on enchantment name"},ChooseNewEnchantment:{title:"Choose an enchantment"},UpgradeEnchantment:{title:"Upgrade the enchantment at level 3"},CloseEditor:{title:"Close enchantment editor"}}}}},_M={i18n:{"fr-FR":{title:"Enchantements (2/2)",desc:"Modification des enchantements d'un objet.",objectives:{ClickUpgradedEnchantment:{title:"Cliquez sur l'enchantement à modifier"},DowngradeEnchantment:{title:"Retirez les niveaux d'amélioration"},ChooseEnchantmentToEdit:{title:"Choissiez un autre enchantement"},OpenSelector:{title:"Cliquez sur le nom de l'enchantement"},ChooseNewEnchantment:{title:"Choisissez un enchantement"},UpgradeEnchantment:{title:"Améliorez l'enchantement au niveau 3"},CloseEditor:{title:"Fermez l'éditeur d'enchantement"}}},"en-EN":{title:"Enchantments (2/2)",desc:"Editing item's enchantments.",objectives:{ClickUpgradedEnchantment:{title:"Click on the enchantment to edit"},DowngradeEnchantment:{title:"Remove upgrade levels"},ChooseEnchantmentToEdit:{title:"Choose another enchantment to edit"},OpenSelector:{title:"Click on enchantment name"},ChooseNewEnchantment:{title:"Choose an enchantment"},UpgradeEnchantment:{title:"Upgrade the enchantment at level 3"},CloseEditor:{title:"Close enchantment editor"}}}}},xM={i18n:{"fr-FR":{title:"Objet doré (1/2)",desc:"Pour rendre un objet doré :",objectives:{SelectItem:{title:"Séléctionnez l'objet à modifier"},ClickNetheriteEnchantmentSlot:{title:"Cliquez sur la zone de l'enchantement doré"},OpenSelector:{title:"Cliquez sur le nom de l'enchantement"},ChooseNewEnchantment:{title:"Choisissez un enchantement"},UpgradeEnchantment:{title:"Améliorez l'enchantement au niveau 3"},CloseEditor:{title:"Fermez l'éditeur d'enchantement"}}},"en-EN":{title:"Gilded item (1/2)",desc:"To make a gilded item :",objectives:{SelectItem:{title:"Select an item to edit"},ClickNetheriteEnchantmentSlot:{title:"Click on the gilded enchantment area"},OpenSelector:{title:"Click on enchantment name"},ChooseNewEnchantment:{title:"Choose an enchantment"},UpgradeEnchantment:{title:"Upgrade the enchantment at level 3"},CloseEditor:{title:"Close enchantment editor"}}}}},RM={i18n:{"fr-FR":{title:"Objet doré (2/2)",desc:"Retirer l'état doré :",objectives:{SelectItem:{title:"Séléctionnez l'objet à modifier"},ClickNetheriteEnchantmentSlot:{title:"Cliquez sur la zone de l'enchantement doré"},OpenSelector:{title:"Cliquez sur le nom de l'enchantement"},ChooseUnsetEnchantment:{title:`Choisissez l'enchantement "Non défini"`,reasons:{InvalidSelection:`Vous n'avez pas choisi l'enchantement "Non défini".`}},CloseEditor:{title:"Fermez l'éditeur d'enchantement"}}},"en-EN":{title:"Gilded item (2/2)",desc:"Remove gilded rarity :",objectives:{SelectItem:{title:"Select a gilded item to edit"},ClickNetheriteEnchantmentSlot:{title:"Click on the gilded enchantment area"},OpenSelector:{title:"Click on enchantment name"},ChooseUnsetEnchantment:{title:'Pick the "Unset" enchantment',reasons:{InvalidSelection:`You don't picked the "Unset" enchantment.`}},CloseEditor:{title:"Close enchantment editor"}}}}},AM={i18n:{"fr-FR":{title:"Fin !",desc:`Ce tutoriel est terminé, merci d'y avoir participé ! Vous connaissez désormais les bases de MCD Save Editor. En cliquant sur "terminer", les changements que vous avez apportés via le tutoriel seront annulés.`},"en-EN":{title:"Finished !",desc:'This tutorial is finished, thank you for attending! You now know the basics of MCD Save Editor. By clicking on "finish", the changes you made through the tutorial will be canceled.'}}},kM={TutorialDisabled:yM,Welcome:bM,DragAndDrop:EM,EquipUnequip:wM,EditItemType:CM,EditEnchantment:SM,EditEnchantment2:_M,AddNetheriteEnchantment:xM,RemoveNetheriteEnchantment:RM,TutorialFinish:AM},tE={TutorialsData:n=>Object.entries(kM).reduce((e,[t,i])=>({...e,[t]:i.i18n[n]}),{})},DM={App:{tabs:{unamedCharacter:"Unamed",edit:{label:"Edit",modal:{title:"Set profil name",okLabel:"Confirm",cancelLabel:"Cancel"}},reload:{label:"Reload",success:"Reloaded successfully!",error:"Failed to reload data."},save:{label:"Save",success:"Saved successfully!",error:"Failed to save data.",corruptedError:"Unable to save, data are corrupted, try to reload."}},webMode:"This feature is not available on the web version.",loadingProfils:"Loading profils...",noProfilFound:"No profil found.",Navigation:{inventory:"Inventory",storageChest:"Storage chest",ancientHunts:"Ancient hunts"},TitleBarMenu:{fileMenu:{label:"Files",selectProfil:"Select profil...",open:"Open...",export:"Export...",exit:"Exit"},langMenu:{label:"Language","fr-FR":"French","en-EN":"English"},aboutMenu:{label:"About"}}},Updater:{downloadingUpdate:"Downloading update...",readyToInstall:"Update ready to install!",quitAndInstall:"Install"},Tutorial:{steps:{...tE.TutorialsData("en-EN")},buttons:{next:"Next",prev:"Previous",finished:"Finish"}},MCD:{DataCorruption:{Page:{title:"Data corruption error report",errorCount:"Error {0}/{1}",prevButtonLabel:"Previous error",nextButtonLabel:"Next error"},Fixup:{title:"Pick a solution to apply:",success:"All errors successfully fixed!",giftedType1:'Remove "gifted" property',giftedType2:'Set "gifted" to "true"',inventoryIndexMinimum:'Set "inventoryIndex" to "0"',inventoryIndexMaximum:'Set "inventoryIndex" to "179"',markedNewType1:'Remove "markedNew" property',markedNewType2:'Set "markedNew" to "true"',enchantmentsRequired:"Add 9 missing enchants",enchantmentsMinItems:"Add {0} missing enchants",enchantmentsMaxItems:"Remove the {0} last enchants",enchantmentsIdRequired:'Add "id" and set it to "Unset"',enchantmentsInvestedPointsRequired:'Add "investedPoints" and set it to "0"',enchantmentsLevelRequired:'Add "level" and set it to "0"',enchantmentsIdEnum:'Set "id" to "Unset"',enchantmentsInvestedPointsMinimum:'Set "investedPoints" to "{0}"',enchantmentsLevelMinimum:'Set "level" to "0"',enchantmentsLevelMaximum:'Set "level" to "3"',enchantmentsChunksLevelConsistency:'Set all levels to "0"',enchantmentsChunksUniqueChunkEnchant:'Set duplicate to "Unset"',enchantmentsForbbiden:'Remove "enchantments" property',equipmentSlotType:"Unequip item",netheriteEnchantType:'Remove "netheriteEnchant" property',netheriteEnchantInvestedPointsRequired:'Add "investedPoints" and set it to "{0}"',netheriteEnchantLevelRequired1:'Add "level" and set it to 1',netheriteEnchantLevelRequired2:'Add "level" and set it to 2',netheriteEnchantLevelRequired3:'Add "level" and set it to 3',powerRequired:'Add "power" and set it to "1"',rarityRequired:'Add "rarity" and set it to "{0}"',deleteItem:"Remove item",createIssueOnGithub:"Create an issue on GitHub",upgradedRequired:'Add "upgraded" and set it to "false"',upgradedType:'Set "upgraded" to "false"',armorpropertiesMinItems1:'Remove "armorproperties" property',armorpropertiesMinItems2:'Reset "armorproperties" to this initial value',armorpropertiesRarityEnum:'Set "rarity" to "Common"'},oneOf:'Missing mandatory property : "equimentSlot", "inventoryIndex", "power", "rarity", "type" or "upgraded"',equipmentSlot:{type:'Property "equipmentSlot" must be a string',required:'Missing mandatory property "equipmentSlot"',enum:'Unknown slot "{value}"'},inventoryIndex:{type:'Property "inventoryIndex" must be a number',required:'Missing mandatory property "inventoryIndex"',minimum:'"inventoryIndex" value cannot be lower than 0',maximum:'"inventoryIndex" value cannot be higher than 179'},power:{type:'Property "power" must be a number',required:'Missing mandatory property "power"',minimum:'"power" value cannot be lower than 1'},rarity:{type:'Property "rarity" must be a string',required:'Missing mandatory property "rarity"',enum:'Unknown rarity "{value}"'},type:{type:'Property "type" must be a string',required:'Missing mandatory property "type"',enum:'Unknown item type "{value}"'},upgraded:{type:'Property "upgraded" must be a boolean',required:'Missing mandatory property "upgraded"',const:'"upgraded" value must be "false"'},gifted:{type:'Property "gifted" must be a boolean',const:'"gifted" value must be "true"'},markedNew:{type:'Property "markedNew" must be a boolean',const:'"markedNew" value must be "true"'},armorproperties:{id:{type:'Property "id" must be a string',required:'Missing mandatory property "id"',enum:'Unknown armor property id "{value}"'},rarity:{type:'Property "rarity" must be a string',required:'Missing mandatory property "rarity"',enum:'Unknown rartiy "{value}"'},type:'Property "armorproperties" must be an array',required:'Missing mandatory property "armorproperties" for "{itemType}" typed items',forbbiden:'Property "armorproperties" is forbbiden for "{itemType}" typed items',minItems:'Table "armorproperties" cannot contains lower than 1 armor property',maxItems:'Table "armorproperties" cannot contains higher than 4 armor properties',uniqueItems:'Table "armorproperties" cannot contains duplicate items',uniqueItemsId:'Table "armorproperties" cannot contains duplicate armor property id "{0}"'},netheriteEnchant:{id:{type:'Property "id" must be a string',required:'Missing mandatory property "id"',enum:"Unknown enchantment id {value}",unique:'Enchantment id "{0}" already leveled in "enchantments" table'},investedPoints:{type:'Property "investedPoints" must be a number',required:'Missing mandatory property "investedPoints"',const:'"investedPoints" value must be "0"'},level:{type:'Property "level" must be a number',required:'Missing mandatory property "level"',minimum:'"level" value cannot be lower than 0',maximum:'"level" value cannot be higher than 3'},type:'Property "netheriteEnchant" must be an object',forbbiden:'Property "netheriteEnchant" is forbbiden for "{itemType}" typed items'},enchantments:{id:{type:'Property "id" must be a string',required:'Missing mandatory property "id"',enum:'Unknown enchantment id "{value}"'},investedPoints:{type:'Property "investedPoints" must be a number',required:'Missing mandatory property "investedPoints"',const:'"investedPoints" value must be "0"'},level:{type:'Property "level" must be a number',required:'Missing mandatory property "level"',minimum:'"level" value cannot be lower than 0',maximum:'"level" value cannot be higher than 3'},chunks:{levelConsistency:"Enchantment chunk n°{0} cannot have more than 1 leveled enchantment",uniqueChunkEnchant:'Enchantment chunk n°{0} cannot contains duplicate enchantment id "{1}"'},type:'Property "enchantments" must be an array',required:'Missing mandatory property "enchantments" for "{itemType}" typed items',forbbiden:'Property "enchantments" is forbbiden for "{itemType}" typed items',minItems:'Table "enchantments" cannot contains lower than 9 enchantments',maxItems:'Table "enchantments" cannot contains higher than 9 enchantments',noLeveledUnset:'"Unset" enchant level must be 0'}},AncientHunts:{title:"Ancient Hunts",invocationRunes:"Invocation requires:",residualRunes:"Rune{pluralize} in excess :",button:"Add found offers to my inventory",refresh:"Refresh",reset:"Reset",successMessage:"Successfully added {count} item{pluralize} to your inventory.",errorMessage:"Addition not possible, your inventory does not contain enough free space."},AncientMobSelect:{title:"Pick ancient creatures",search:"Search..."},CharacterCorruptionDetection:{title:"Oops!",contentBackupAvailable:["This character's data is corrupted, the last valid backup dates from {date}.","Do you want to restore it?"],contentNoBackupAvailable:["This character's data is corrupted but there is no valid backup to restore.","You can try to reload the current tab."],okLabel:"Restore",showReport:"View error report",dateFormat:"dS F Y - Hhi",restoreSuccess:"Restore complete!",restoreError:"Restore failed."},LevelBadge:{level:"Level"},Inventory:{filters:{all:"All",melee:"Melee",ranged:"Ranged",armor:"Armors",artefact:"Artefacts",enchanted:"Enchanted",event:"Event",dlc:"DLC"}},RarityLabel:{common:"Common",rare:"Rare",unique:"Unique",clickToToggle:"Click to toggle"},GildedLabel:"Gilded",ItemEnchantmentList:{title:"Enchantments"},ItemEnchantmentChoice:{emptySlot:"Empty slot",tiers:{common:"Common",powerful:"Powerful"}},ItemSelect:{search:"Search..."},ImportButton:{label:"Import",modal:{confirm:{title:"Confirm import",okLabel:"Continue",cancelLabel:"Cancel",content1:"This item will be import to your inventory.",content2:"Currently selected item will not be affected."},error:{title:"Import not possible",cancelLabel:"Close",content:"The structure of the imported file does not match the structure of an inventory item."}}},ExportButton:{label:"Export"},DeleteButton:{label:"Delete"},CloneButton:{label:"Clone"},EnchantmentEditor:{upgradeTiers:"Upgrade tiers",costError:"You need {cost} enchantment point{pluralize} to do that."}},Electron:{dialogs:{filters:{"*":"All files",json:"JSON file",txt:"Text file"},openFile:{title:"Open...",button:"Open"},saveFile:{title:"Save as...",button:"Save"}}},Date:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],daySuffix:["st","nd","rd"],defaultDaySuffix:"th"},Materials:{Tabs:{newTab:"New tab"},Form:{Select:{removeOption:"Remove option",emptyResult:"No result for « {0} »"},ObjectList:{addModel:"Add model",removeModel:"Remove this model"}}}},MM={App:{tabs:{unamedCharacter:"Sans nom",edit:{label:"Modifier",modal:{title:"Définir le nom du profil",okLabel:"Confirmer",cancelLabel:"Annuler"}},reload:{label:"Recharger",success:"Rechargement réussi !",error:"Le rechargement a échoué."},save:{label:"Sauvegarder",success:"Sauvegarde réussi !",error:"La sauvegarde a échouée.",corruptedError:"Sauvegarde impossible, les données sont corrompues, essayez de recharger."}},webMode:"Cette fonctionnalité n'est pas disponible sur la version web.",loadingProfils:"Chargement des profils...",noProfilFound:"Aucun profil trouvé.",Navigation:{inventory:"Inventaire",storageChest:"Coffre de stockage",ancientHunts:"Chasses anciennes"},TitleBarMenu:{fileMenu:{label:"Fichier",selectProfil:"Sélection du profil...",open:"Ouvrir...",export:"Exporter...",exit:"Quitter"},langMenu:{label:"Langage","fr-FR":"Français","en-EN":"Anglais"},aboutMenu:{label:"À propos"}}},Updater:{downloadingUpdate:"Téléchargement de la mise à jour...",readyToInstall:"Mise à jour prête à être installée !",quitAndInstall:"Mettre à jour"},Tutorial:{steps:{...tE.TutorialsData("fr-FR")},buttons:{next:"Suivant",prev:"Précédent",finished:"Terminer"}},MCD:{DataCorruption:{Page:{title:"Rapport d'erreur de données corrompues",errorCount:"Erreur {0}/{1}",prevButtonLabel:"Erreur précédente",nextButtonLabel:"Erreur suivante"},Fixup:{title:"Choisissez la solution à appliquer :",success:"Toutes les erreurs ont été corrigées !",giftedType1:'Supprimer la propriété "gifted"',giftedType2:'Définir "gifted" à "true"',inventoryIndexMinimum:'Définir "inventoryIndex" à "0"',inventoryIndexMaximum:'Définir "inventoryIndex" à "179"',markedNewType1:'Supprimer la propriété "markedNew"',markedNewType2:'Définir "markedNew" à "true"',enchantmentsRequired:"Ajouter 9 enchantements manquants",enchantmentsMinItems:"Ajouter {0} enchantements manquants",enchantmentsMaxItems:"Supprimer les {0} derniers enchantements",enchantmentsIdRequired:'Ajouter "id" et la définir à "Unset"',enchantmentsInvestedPointsRequired:'Ajouter "investedPoints" et la définir à "0"',enchantmentsLevelRequired:'Ajouter "level" et la définir à "0"',enchantmentsIdEnum:'Définir "id" à "Unset"',enchantmentsInvestedPointsMinimum:'Définir "investedPoints" à "{0}"',enchantmentsLevelMinimum:'Définir "level" à "0"',enchantmentsLevelMaximum:'Définir "level" à "3"',enchantmentsChunksLevelConsistency:'Définir tous les niveaux à "0"',enchantmentsChunksUniqueChunkEnchant:'Définir les doublons à "Unset"',enchantmentsForbbiden:'Supprimer la propriété "enchantments"',equipmentSlotType:"Déséquiper l'objet",netheriteEnchantType:'Supprimer la propriété "netheriteEnchant"',netheriteEnchantInvestedPointsRequired:'Ajouter "investedPoints" et la définir à "{0}"',netheriteEnchantLevelRequired1:'Ajouter "level" et la définir à 1',netheriteEnchantLevelRequired2:'Ajouter "level" et la définir à 2',netheriteEnchantLevelRequired3:'Ajouter "level" et la définir à 3',powerRequired:'Ajouter "power" et la définir à "1"',rarityRequired:'Ajouter "rarity" et la définir à "{0}"',deleteItem:"Supprimer l'objet",createIssueOnGithub:"Créer une issue sur GitHub",upgradedRequired:'Ajouter "upgraded" et la définir à "false"',upgradedType:'Définir "upgraded" à "false"',armorpropertiesMinItems1:'Supprimer la propriété "armorproperties"',armorpropertiesMinItems2:'Réinitialiser "armorproperties" vers ça valeur initiale',armorpropertiesRarityEnum:'Définir "rarity" à "Common"'},oneOf:'Une propriété obligatoire est manquante parmis celles-ci : "equimentSlot", "inventoryIndex", "power", "rarity", "type" ou "upgraded"',equipmentSlot:{type:'La propriété "equipmentSlot" doit être du type string',required:'Propriété obligatoire "equipmentSlot" manquante',enum:`L'emplacement d'equipement "{value}" est inconnu`},inventoryIndex:{type:'La propriété "inventoryIndex" doit être du type number',required:'Propriété obligatoire "inventoryIndex" manquante',minimum:'La valeur de "inventoryIndex" ne doit pas être plus petite que 0',maximum:'La valeur de "inventoryIndex" ne doit pas être plus grande que 179'},power:{type:'La propriété "power" doit être du type number',required:'Propriété obligatoire "power" manquante',minimum:'La valeur de "power" ne doit pas être plus petite que 1'},rarity:{type:'La propriété "rarity" doit être du type string',required:'Propriété obligatoire "rarity" manquante',enum:'La rareté "{value}" est inconnue'},type:{type:'La propriété "type" doit être du type string',required:'Propriété obligatoire "type" manquante',enum:`L'id d'objet "{value}" est inconnu`},upgraded:{type:'La propriété "upgraded" doit être du type boolean',required:'Propriété obligatoire "upgraded" manquante',const:'La valeur de "upgraded" doit être "false"'},gifted:{type:'La propriété "gifted" doit être du type boolean',const:'La valeur de "gifted" doit être "true"'},markedNew:{type:'La propriété "markedNew" doit être du type boolean',const:'La valeur de "markedNew" doit être "true"'},armorproperties:{id:{type:'La propriété "id" doit être du type string',required:'Propriété obligatoire "id" manquante',enum:`L'id de la propriété d'armure "{value}" est inconnu`},rarity:{type:'La propriété "rarity" doit être du type string',required:'Propriété obligatoire "rarity" manquante',enum:'La rareté "{value}" est inconnue'},type:'La propriété "armorproperties" doit être du type array',required:'Propriété obligatoire "armorproperties" manquante pour les objets de type "{itemType}"',forbbiden:'La propriété "armorproperties" est interdite pour les objets de type "{itemType}"',minItems:`Le tableau "armorproperties" doit contenir au minimum 1 propriété d'armure`,maxItems:`Le tableau "armorproperties" doit contenir au maximum 4 propriétés d'armure`,uniqueItems:'Le tableau "armorproperties" ne doit pas contenir de doublons',uniqueItemsId:`Le tableau "armorproperties" ne doit pas contenir plusieurs fois la propriété d'armure "{0}"`},netheriteEnchant:{id:{type:'La propriété "id" doit être du type string',required:'Propriété obligatoire "id" manquante',enum:`L'id d'enchantement "{value}" est inconnu`,unique:`L'id d'enchantement "{0}" à déjà été nivelé dans le tableau "enchantements"`},investedPoints:{type:'La propriété "investedPoints" doit être du type number',required:'Propriété obligatoire "investedPoints" manquante',const:'La valeur de "investedPoints" doit être "0"'},level:{type:'La propriété "level" doit être du type number',required:'Propriété obligatoire "level" manquante',minimum:'La valeur de "level" ne doit pas être plus petite que 0',maximum:'La valeur de "level" ne doit pas être plus grande que 3'},type:'La propriété "netheriteEnchant" doit être du type object',forbbiden:'La propriété "netheriteEnchant" est interdite pour les objets de type "{itemType}"'},enchantments:{id:{type:'La propriété "id" doit être du type string',required:'Propriété obligatoire "id" manquante',enum:`L'id d'enchantement "{value}" est inconnu`},investedPoints:{type:'La propriété "investedPoints" doit être du type number',required:'Propriété obligatoire "investedPoints" manquante',const:'La valeur de "investedPoints" doit être "0"'},level:{type:'La propriété "level" doit être du type number',required:'Propriété obligatoire "level" manquante',minimum:'La valeur de "level" ne doit pas être plus petite que 0',maximum:'La valeur de "level" ne doit pas être plus grande que 3'},chunks:{levelConsistency:"Le groupe d'enchantement n°{0} ne doit pas contenir plus d'un enchantement dans le niveau est supérieur à 0",uniqueChunkEnchant:`Le groupe d'enchantement n°{0} ne doit pas contenir plusieurs fois l'enchantement "{1}"`},type:'La propriété "enchantments" doit être du type array',required:'Propriété obligatoire "enchantments" pour les objets de type "{itemType}"',forbbiden:'La propriété "enchantments" est interdite pour les objets de type "{itemType}"',minItems:'Le tableau "enchantments" doit contenir au minimum 9 enchantements',maxItems:'Le tableau "enchantments" doit contenir au maximum 9 enchantements',noLeveledUnset:`L'enchantment "Unset" doit avoir un niveau égal à 0`}},AncientHunts:{title:"Chasses anciennes",invocationRunes:"L'invocation requiert :",residualRunes:"Rune{pluralize} en surplus :",button:"Ajouter les offrandes trouvées dans mon inventaire",refresh:"Rafraîchir",reset:"Réinitialiser",successMessage:"{count} objet{pluralize} ajouté{pluralize} à votre inventaire.",errorMessage:"Ajout impossible, votre inventaire ne contiens pas assès de place libre."},AncientMobSelect:{title:"Choisir des anciennes créatures",search:"Rechercher..."},CharacterCorruptionDetection:{title:"Oups !",contentBackupAvailable:["Les données de ce personnage sont corrompues, la dernière backup valide date du {date}.","Voulez-vous la réstaurer ?"],contentNoBackupAvailable:["Les données de ce personnage sont corrompues mais il n'y a aucune backup disponible.","Vous pouvez essayer de recharger l'onglet."],okLabel:"Restaurer",showReport:"Voir le rapport d'erreur",dateFormat:"dS F Y - Hhi",restoreSuccess:"Restauration terminée !",restoreError:"Échec de la restauration."},LevelBadge:{level:"Niveau"},Inventory:{filters:{all:"Tous",melee:"Corps-à-corps",ranged:"Distances",armor:"Armures",artefact:"Artéfacts",enchanted:"Enchantés",event:"Événement",dlc:"DLC"}},RarityLabel:{common:"Commun",rare:"Rare",unique:"Unique",clickToToggle:"Cliquez pour changer"},GildedLabel:"Doré",ItemEnchantmentList:{title:"Enchantements"},ItemEnchantmentChoice:{emptySlot:"Emplacement vide",tiers:{common:"Commun",powerful:"Puissant"}},ItemSelect:{search:"Rechercher..."},ImportButton:{label:"Importer",modal:{confirm:{title:"Confirmer l'importation",okLabel:"Continuer",cancelLabel:"Annuler",content1:"Cet objet va être importé dans votre inventaire.",content2:"L'objet actuellement séléctionné n'en sera pas affecté."},error:{title:"Import impossible",cancelLabel:"Fermer",content:"La structure du fichier importé ne correspond pas a la structure d'un objet d'inventaire."}}},ExportButton:{label:"Exporter"},DeleteButton:{label:"Supprimer"},CloneButton:{label:"Dupliquer"},EnchantmentEditor:{upgradeTiers:"Niveaux d'amélioration",costError:"Vous avez besoin de {cost} point{pluralize} d'enchantement pour effectuer cette action."}},Electron:{dialogs:{filters:{"*":"Tous les fichiers",json:"Fichier JSON",txt:"Fichier texte"},openFile:{title:"Ouvrir...",button:"Ouvrir"},saveFile:{title:"Enregistrer sous...",button:"Enregistrer"}}},Date:{days:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],daySuffix:["er"],defaultDaySuffix:""},Materials:{Tabs:{newTab:"Nouvel onglet"},Form:{Select:{removeOption:"Retirer l'option {0}",emptyResult:"Aucun résultat pour « {0} »"},ObjectList:{addModel:"Ajouter un model",removeModel:"Retirer ce model"}}}},PM={"en-EN":DM,"fr-FR":MM},Ce=tD({locale:"en-EN",allowComposition:!0,messages:PM,globalInjection:!0,legacy:!1}),TM=[{id:"AbominableWeaver",neededRunes:["s","t","a"],rewards:["DoubleAxe","WolfArmor","BattleRobe","Trickbow"],i18n:[{locale:"fr-FR",name:"Tisserande Abominable"},{locale:"en-EN",name:"Abominable Weaver"}]},{id:"AbyssalEye",neededRunes:["c","t","i"],rewards:["CoralBlade","SquidArmor","HarpoonCrossbow"],i18n:[{locale:"fr-FR",name:"Œil abyssal"},{locale:"en-EN",name:"Abyssal Eye"}]},{id:"AncientTerror",neededRunes:["u","o","s","a"],rewards:["ExplodingCrossbow","MysteryArmor","ChampionsArmor"],i18n:[{locale:"fr-FR",name:"Terreur Antique"},{locale:"en-EN",name:"Ancient Terror"}]},{id:"Barrage",neededRunes:["o","r","r"],rewards:["Bow","SoulBow","ArchersStrappings"],i18n:[{locale:"fr-FR",name:"Barrage"},{locale:"en-EN",name:"Barrage"}]},{id:"CursedPresence",neededRunes:["c","o","i"],rewards:["PhantomArmor","SoulCrossbow","Cutlass"],i18n:[{locale:"fr-FR",name:"Présence Maudite"},{locale:"en-EN",name:"Cursed Presence"}]},{id:"FirstEnchanter",neededRunes:["o","s","s"],rewards:["ScaleMail","Claymore","SoulScythe"],i18n:[{locale:"fr-FR",name:"Premier Enchanteur"},{locale:"en-EN",name:"First Enchanter"}]},{id:"FrostWarden",neededRunes:["u","s","r"],rewards:["SnowArmor","SlowBow"],i18n:[{locale:"fr-FR",name:"Gardien de Givre"},{locale:"en-EN",name:"Frost Warden"}]},{id:"GrimGuardian",neededRunes:["i","i","a"],rewards:["Sword","GrimArmor","DarkArmor"],i18n:[{locale:"fr-FR",name:"Gardien Sinistre"},{locale:"en-EN",name:"Grim Guardian"}]},{id:"HauntedCaller",neededRunes:["r","r","a"],rewards:["Longbow","RapidCrossbow","Sickles","SpelunkersAmor"],i18n:[{locale:"fr-FR",name:"Invocateur Hanté"},{locale:"en-EN",name:"Haunted Caller"}]},{id:"OozingMenace",neededRunes:["u","c","r"],rewards:["Battlestaff","Shortbow","MercenaryArmor"],i18n:[{locale:"fr-FR",name:"Menace Suintante"},{locale:"en-EN",name:"Oozing Menace"}]},{id:"PestilentConjurer",neededRunes:["c","r","i"],rewards:["Spear","Glaive","HeavyCrossbow","ScatterCrossbow"],i18n:[{locale:"fr-FR",name:"Conjurateur Pestilent"},{locale:"en-EN",name:"Pestilant Conjurer"}]},{id:"ScuttlingTorment",neededRunes:["a","a","i","c"],rewards:["ObsidianClaymore","VoidBow","TeleportationRobes"],i18n:[{locale:"fr-FR",name:"Tourment insinuant"},{locale:"en-EN",name:"Scuttling Torment"}]},{id:"SolemnGiant",neededRunes:["s","r","p","t"],rewards:["BurstCrossbow","Rapier","CowardsArmor"],i18n:[{locale:"fr-FR",name:"Géant Solennel"},{locale:"en-EN",name:"Solemn Giant"}]},{id:"TheSeekingFlame",neededRunes:["o","o"],rewards:["Axe","SoulKnife","EvocationRobe"],i18n:[{locale:"fr-FR",name:"La Flamme Chercheuse"},{locale:"en-EN",name:"The Seeking Flame"}]},{id:"TheSwarm",neededRunes:["c","c","r","s"],rewards:["ShulkerArmor","ShadowCrossbow","Backstabber"],i18n:[{locale:"fr-FR",name:"L'essaim"},{locale:"en-EN",name:"The Swarm"}]},{id:"TheTinyScourge",neededRunes:["c","c","o","t"],rewards:["Daggers","SoulRobe","AssassinArmor"],i18n:[{locale:"fr-FR",name:"Le Petit Fléau"},{locale:"en-EN",name:"The Tiny Scourge"}]},{id:"TheTower",neededRunes:["u","u","o","p"],rewards:["HauntingBow","BeenestArmor","Pickaxe"],i18n:[{locale:"fr-FR",name:"La Tour"},{locale:"en-EN",name:"The Tower"}]},{id:"TheUnending",neededRunes:["u","u","t"],rewards:["TwistingVineBow","Boneclub","PiglinArmor"],i18n:[{locale:"fr-FR",name:"L'Éternel"},{locale:"en-EN",name:"The Unending"}]},{id:"ThunderingGrowth",neededRunes:["u","c","c"],rewards:["OcelotArmor","Whip"],i18n:[{locale:"fr-FR",name:"Croissance Foudroyante"},{locale:"en-EN",name:"Thundering Growth"}]},{id:"UnbreakableOne",neededRunes:["i","t","t"],rewards:["Hammer","Claymore","Powerbow","FullPlateArmor"],i18n:[{locale:"fr-FR",name:"L'Incassable"},{locale:"en-EN",name:"Unbreakable One"}]},{id:"Unknown",neededRunes:["c","i","p","a"],rewards:["Katana","GhostArmor","DualCrossbows","Gauntlets"],i18n:[{locale:"fr-FR",name:"?????"},{locale:"en-EN",name:"?????"}]},{id:"UnstoppableTusk",neededRunes:["r","i","a"],rewards:["Chainsword","CogCrossbow","SproutArmor"],i18n:[{locale:"fr-FR",name:"Défense Imparable"},{locale:"en-EN",name:"Unstoppable Tusk"}]},{id:"VengefulMariner",neededRunes:["s","s","t"],rewards:["Anchor","TurtleArmor","BubbleBow"],i18n:[{locale:"fr-FR",name:"Marin vengeur"},{locale:"en-EN",name:"Vengeful Mariner"}]},{id:"VigilantScoundrel",neededRunes:["r","i","i","t"],rewards:["Crossbow","Mace","ReinforcedMail"],i18n:[{locale:"fr-FR",name:"Vaurien Vigilant"},{locale:"en-EN",name:"Vigilant Scoundrel"}]},{id:"WatcherOfTheEnd",neededRunes:["t","a","c"],rewards:["BardsGarb","ShadowCrossbow","VoidTouchedBlades"],i18n:[{locale:"fr-FR",name:"Veilleur de l'Ender"},{locale:"en-EN",name:"Watcher of The End"}]},{id:"Windbeard",neededRunes:["u","a","a"],rewards:["TempestKnife","WindBow","ClimbingGear","EmeraldArmor"],i18n:[{locale:"fr-FR",name:"Barbe-Vent"},{locale:"en-EN",name:"Windbeard"}]}];async function IM(){return TM.map(n=>({dataValues:{...n,i18n:n.i18n.map(e=>({dataValues:e}))}}))}const OM=Object.freeze(Object.defineProperty({__proto__:null,findAll:IM},Symbol.toStringTag,{value:"Module"})),NM=[{id:"ArchersStrappings",type:"Armor",rarity:["Common","Rare"],armorproperties:["IncreasedArrowBundleSize","RangedDamageBoost"],ancientHuntRunes:["r"],i18n:[{locale:"fr-FR",name:"Armure de chasseur"},{locale:"en-EN",name:"Hunter's armor"}]},{id:"ArchersStrappings_Unique1",type:"Armor",rarity:["Unique"],armorproperties:["MoveSpeedAura","IncreasedArrowBundleSize","RangedDamageBoost"],ancientHuntRunes:["c","r"],i18n:[{locale:"fr-FR",name:"Armure d'archer"},{locale:"en-EN",name:"Archer's strappings"}]},{id:"AssassinArmor",type:"Armor",rarity:["Common","Rare"],armorproperties:["MeleeAttackSpeedBoost"],ancientHuntRunes:["i"],i18n:[{locale:"fr-FR",name:"Armure de voleur"},{locale:"en-EN",name:"Thief armor"}]},{id:"AssassinArmor_Unique1",type:"Armor",rarity:["Unique"],armorproperties:["LifeStealAura","MeleeAttackSpeedBoost"],ancientHuntRunes:["i","t"],i18n:[{locale:"fr-FR",name:"Armure d'araignée"},{locale:"en-EN",name:"Spider armor"}]},{id:"BattleRobe",type:"Armor",rarity:["Common","Rare"],armorproperties:["ItemCooldownDecrease","MeleeDamageBoost"],ancientHuntRunes:["i","a"],i18n:[{locale:"fr-FR",name:"Robe de combat"},{locale:"en-EN",name:"Battle robe"}]},{id:"BattleRobe_Unique1",type:"Armor",rarity:["Unique"],armorproperties:["ItemDamageBoost","ItemCooldownDecrease","MeleeDamageBoost"],ancientHuntRunes:["r","i","a"],i18n:[{locale:"fr-FR",name:"Robe splendide"},{locale:"en-EN",name:"Splendid robe"}]},{id:"BeenestArmor",type:"Armor",rarity:["Common","Rare"],armorproperties:["AreaHeal","Beekeeper"],ancientHuntRunes:["u","p","t"],i18n:[{locale:"fr-FR",name:"Armure de nid d'abeille"},{locale:"en-EN",name:"Beenest armor"}]},{id:"BeenestArmor_Unique1",type:"Armor",rarity:["Unique"],armorproperties:["SuperbDamageAbsorption","Beekeeper","AreaHeal"],ancientHuntRunes:["u","p"],i18n:[{locale:"fr-FR",name:"Armure de ruche"},{locale:"en-EN",name:"Beehive armor"}]},{id:"ChampionsArmor",type:"Armor",rarity:["Common","Rare"],armorproperties:["SuperbDamageAbsorption","IncreasedMobTargeting","PotionCooldownDecrease"],ancientHuntRunes:["t"],i18n:[{locale:"fr-FR",name:"Armure du champion"},{locale:"en-EN",name:"Champion's armor"}]},{id:"ChampionsArmor_Unique1",type:"Armor",rarity:["Unique"],armorproperties:["SuperbDamageAbsorption","AreaHeal","IncreasedMobTargeting","PotionCooldownDecrease"],ancientHuntRunes:["s","t"],i18n:[{locale:"fr-FR",name:"Armure du héros"},{locale:"en-EN",name:"Hero's armor"}]},{id:"CowardsArmor",type:"Armor",rarity:["Common","Rare"],armorproperties:["ItemCooldownDecrease","IncreasedArrowBundleSize"],ancientHuntRunes:["r"],i18n:[{locale:"fr-FR",name:"Armure de garde"},{locale:"en-EN",name:"Guard's armor"}]},{id:"CowardsArmor_Unique1",type:"Armor",rarity:["Unique"],armorproperties:["TeleportChance","ItemCooldownDecrease","IncreasedArrowBundleSize"],ancientHuntRunes:[],i18n:[{locale:"fr-FR",name:"Armure curieuse"},{locale:"en-EN",name:"Curious armor"}]},{id:"DarkArmor",type:"Armor",rarity:["Common","Rare"],armorproperties:["SoulGatheringBoost","SuperbDamageAbsorption"],ancientHuntRunes:["o","t"],soulgathering:!0,i18n:[{locale:"fr-FR",name:"Armure noire"},{locale:"en-EN",name:"Dark armor"}]},{id:"DarkArmor_Unique1",type:"Armor",rarity:["Unique"],armorproperties:["SoulGatheringBoost","SuperbDamageAbsorption","AllyDamageBoost"],ancientHuntRunes:["o","s","t"],soulgathering:!0,i18n:[{locale:"fr-FR",name:"Suaire du titan"},{locale:"en-EN",name:"Titan's shroud"}]},{id:"EvocationRobe",type:"Armor",rarity:["Common","Rare"],armorproperties:["ItemCooldownDecrease","MoveSpeedAura"],ancientHuntRunes:["s","a"],i18n:[{locale:"fr-FR",name:"Robe d'évocation"},{locale:"en-EN",name:"Evocation robe"}]},{id:"EvocationRobe_Unique1",type:"Armor",rarity:["Unique"],armorproperties:["ItemCooldownDecrease","MoveSpeedAura"],ancientHuntRunes:["s","i","a"],i18n:[{locale:"fr-FR",name:"Robe d'Ember"},{locale:"en-EN",name:"Enber robe"}]},{id:"EvocationRobe_Unique2",type:"Armor",rarity:["Unique"],armorproperties:["ItemCooldownDecrease","MoveSpeedAura"],ancientHuntRunes:["o","s","a"],i18n:[{locale:"fr-FR",name:"Robe luxuriante"},{locale:"en-EN",name:"Verdant robe"}]},{id:"FullPlateArmor",type:"Armor",rarity:["Common","Rare"],armorproperties:["SuperbDamageAbsorption","MissChance","DodgeCooldownIncrease"],ancientHuntRunes:["i","t"],i18n:[{locale:"fr-FR",name:"Armure blindée"},{locale:"en-EN",name:"Plate armor"}]},{id:"FullPlateArmor_Unique1",type:"Armor",rarity:["Unique"],armorproperties:["SuperbDamageAbsorption","MissChance","MeleeDamageBoost","DodgeCooldownIncrease"],ancientHuntRunes:["i","t"],i18n:[{locale:"fr-FR",name:"Armure tout en métal"},{locale:"en-EN",name:"Full metal armor"}]},{id:"FullPlateArmor_Spooky2",events:["Spookier Fall"],type:"Armor",rarity:["Unique"],armorproperties:["MeleeDamageBoost","MissChance","SuperbDamageAbsorption","DodgeCooldownIncrease"],ancientHuntRunes:["i","t"],i18n:[{locale:"fr-FR",name:"Armure chaudron"},{locale:"en-EN",name:"Cauldron armor"}]},{id:"GhostArmor",type:"Armor",rarity:["Common","Rare"],armorproperties:["DodgeGhostForm","MissChance"],ancientHuntRunes:["c","p"],i18n:[{locale:"fr-FR",name:"Armure fantomatique"},{locale:"en-EN",name:"Ghoslty armor"}]},{id:"GhostArmor_Unique1",type:"Armor",rarity:["Unique"],armorproperties:["DodgeGhostForm","MissChance"],ancientHuntRunes:["c","i","p"],i18n:[{locale:"fr-FR",name:"Fantôme incendiaire"},{locale:"en-EN",name:"Ghost kindler"}]},{id:"GhostArmor_Spooky2",events:["Spooky Fall 22"],type:"Armor",rarity:["Unique"],armorproperties:["DodgeGhostForm","MissChance"],ancientHuntRunes:["c","i","p"],i18n:[{locale:"fr-FR",name:"Crâne masqué"},{locale:"en-EN",name:"Cloaked skull"}]},{id:"GrimArmor",type:"Armor",rarity:["Common","Rare"],armorproperties:["SoulGatheringBoost","LifeStealAura"],ancientHuntRunes:["o","s"],soulgathering:!0,i18n:[{locale:"fr-FR",name:"Armure sinistre"},{locale:"en-EN",name:"Grim armor"}]},{id:"GrimArmor_Unique1",type:"Armor",rarity:["Unique"],armorproperties:["SoulGatheringBoost","SuperbDamageAbsorption","LifeStealAura"],ancientHuntRunes:["o","s","t"],soulgathering:!0,i18n:[{locale:"fr-FR",name:"Armure de wither"},{locale:"en-EN",name:"Wither armor"}]},{id:"GrimArmor_Spooky2",events:["Spookier Fall"],type:"Armor",rarity:["Unique"],armorproperties:["SoulGatheringBoost","SuperbDamageAbsorption","LifeStealAura"],ancientHuntRunes:["t","o","s"],soulgathering:!0,i18n:[{locale:"fr-FR",name:"L'armure de gourdien"},{locale:"en-EN",name:"The gourdian armor"}]},{id:"MercenaryArmor",type:"Armor",rarity:["Common","Rare"],armorproperties:["SuperbDamageAbsorption","AllyDamageBoost"],ancientHuntRunes:["s","t"],i18n:[{locale:"fr-FR",name:"Armure de mercenaire"},{locale:"en-EN",name:"Mercenary armor"}]},{id:"MercenaryArmor_Unique1",type:"Armor",rarity:["Unique"],armorproperties:["MeleeAttackSpeedBoost","SuperbDamageAbsorption","AllyDamageBoost"],ancientHuntRunes:["s","t"],i18n:[{locale:"fr-FR",name:"Armure de rebelle"},{locale:"en-EN",name:"Renegade armor"}]},{id:"MercenaryArmor_Spooky1",events:["Spooky Fall"],type:"Armor",rarity:["Unique"],armorproperties:["MeleeAttackSpeedBoost","SuperbDamageAbsorption","AllyDamageBoost"],ancientHuntRunes:["c","s","t"],i18n:[{locale:"fr-FR",name:"Horreur affamée"},{locale:"en-EN",name:"Hungry horror"}]},{id:"MysteryArmor",type:"Armor",rarity:["Common","Rare"],armorproperties:["SoulGatheringBoost","SuperbDamageAbsorption","MissChance","TeleportChance","ItemDamageBoost","ItemCooldownDecrease","AllyDamageBoost","IncreasedArrowBundleSize","MeleeDamageBoost","RangedDamageBoost","LifeStealAura","MoveSpeedAura","PetBat","AreaHeal","MoveSpeedReduction","IncreasedMobTargeting","PotionCooldownDecrease","DodgeCooldownIncrease","DodgeSpeedIncrease","DodgeInvulnerability","SlowResistance","MeleeAttackSpeedBoost","Beekeeper","EmeraldShield"],ancientHuntRunes:["p","a"],i18n:[{locale:"fr-FR",name:"Armure mystérieuse"},{locale:"en-EN",name:"Mystery armor"}]},{id:"NatureArmor",type:"Armor",rarity:["Common","Rare"],armorproperties:["ItemCooldownReset","AreaHeal"],ancientHuntRunes:["s"],i18n:[{locale:"fr-FR",name:"Armure de racines putréfiées"},{locale:"en-EN",name:"Root rot armor"}]},{id:"NatureArmor_Unique1",type:"Armor",rarity:["Unique"],armorproperties:["ItemCooldownReset","AreaHeal"],ancientHuntRunes:["s"],i18n:[{locale:"fr-FR",name:"Armure de tâche noire"},{locale:"en-EN",name:"Black spot armor"}]},{id:"PhantomArmor",type:"Armor",rarity:["Common","Rare"],armorproperties:["SoulGatheringBoost","RangedDamageBoost"],ancientHuntRunes:["o","r"],soulgathering:!0,i18n:[{locale:"fr-FR",name:"Armure de phantom"},{locale:"en-EN",name:"Phantom armor"}]},{id:"PhantomArmor_Unique1",type:"Armor",rarity:["Unique"],armorproperties:["SoulGatheringBoost","RangedDamageBoost"],ancientHuntRunes:["o","s","r"],soulgathering:!0,i18n:[{locale:"fr-FR",name:"Morsure du froid"},{locale:"en-EN",name:"Frost bite"}]},{id:"ReinforcedMail",type:"Armor",rarity:["Common","Rare"],armorproperties:["SuperbDamageAbsorption","MissChance","DodgeCooldownIncrease"],ancientHuntRunes:["t"],i18n:[{locale:"fr-FR",name:"Cotte de mailles renforcée"},{locale:"en-EN",name:"Reinforced mail"}]},{id:"ReinforcedMail_Unique1",type:"Armor",rarity:["Unique"],armorproperties:["SuperbDamageAbsorption","MissChance","DodgeCooldownIncrease"],ancientHuntRunes:["t","a"],i18n:[{locale:"fr-FR",name:"Armure fidèle"},{locale:"en-EN",name:"Stalwart armor"}]},{id:"ScaleMail",type:"Armor",rarity:["Common","Rare"],armorproperties:["SuperbDamageAbsorption","MeleeDamageBoost"],ancientHuntRunes:["i","t"],i18n:[{locale:"fr-FR",name:"Armure d'écailles"},{locale:"en-EN",name:"Scale mail"}]},{id:"ScaleMail_Unique1",type:"Armor",rarity:["Unique"],armorproperties:["SuperbDamageAbsorption","MeleeDamageBoost"],ancientHuntRunes:["c","i","t"],i18n:[{locale:"fr-FR",name:"Armure highlandaise"},{locale:"en-EN",name:"Highland armor"}]},{id:"SoulRobe",type:"Armor",rarity:["Common","Rare"],armorproperties:["SoulGatheringBoost","ItemDamageBoost"],ancientHuntRunes:["o"],soulgathering:!0,i18n:[{locale:"fr-FR",name:"Robe des âmes"},{locale:"en-EN",name:"Soul robe"}]},{id:"SoulRobe_Unique1",type:"Armor",rarity:["Unique"],armorproperties:["SoulGatheringBoost","MissChance","ItemDamageBoost"],ancientHuntRunes:["o","t"],soulgathering:!0,i18n:[{locale:"fr-FR",name:"Robe de souldancer"},{locale:"en-EN",name:"Souldancer robe"}]},{id:"SpelunkersArmor",type:"Armor",rarity:["Common","Rare"],armorproperties:["AllyDamageBoost","PetBat"],ancientHuntRunes:["u"],i18n:[{locale:"fr-FR",name:"Armure du spéléologue"},{locale:"en-EN",name:"Spelunker armor"}]},{id:"SpelunkersArmor_Unique1",type:"Armor",rarity:["Unique"],armorproperties:["ItemDamageBoost","AllyDamageBoost","PetBat"],ancientHuntRunes:["u","i"],i18n:[{locale:"fr-FR",name:"Armure du rampeur"},{locale:"en-EN",name:"Cave crawler"}]},{id:"SpelunkersArmor_Year1",events:["First Year Anniversary"],type:"Armor",rarity:["Unique"],armorproperties:["ItemDamageBoost","AllyDamageBoost","PetBat"],ancientHuntRunes:["u","i"],i18n:[{locale:"fr-FR",name:"Armure gourmande"},{locale:"en-EN",name:"Sweet tooth"}]},{id:"WolfArmor",type:"Armor",rarity:["Common","Rare"],armorproperties:["AllyDamageBoost","AreaHeal"],ancientHuntRunes:["u","s"],i18n:[{locale:"fr-FR",name:"Armure du loup"},{locale:"en-EN",name:"Wolf armor"}]},{id:"WolfArmor_Unique1",type:"Armor",rarity:["Unique"],armorproperties:["MissChance","AllyDamageBoost","AreaHeal"],ancientHuntRunes:["u","s","t"],i18n:[{locale:"fr-FR",name:"Armure du renard"},{locale:"en-EN",name:"Fox armor"}]},{id:"WolfArmor_Unique2",type:"Armor",rarity:["Unique"],armorproperties:["AllyDamageBoost","AreaHeal"],ancientHuntRunes:["u","c","s"],i18n:[{locale:"fr-FR",name:"Armure de loup noir"},{locale:"en-EN",name:"Black wolf armor"}]},{id:"WolfArmor_Winter1",events:["Chills and Thrills","Festival of Frost"],type:"Armor",rarity:["Unique"],armorproperties:["MissChance","AllyDamageBoost","AreaHeal"],ancientHuntRunes:["u","o","t"],i18n:[{locale:"fr-FR",name:"Armure du renard arctique"},{locale:"en-EN",name:"Arctic fox armor"}]},{id:"OcelotArmor",dlcId:"Jungle Awakens",type:"Armor",rarity:["Common","Rare"],armorproperties:["SuperbDamageAbsorption","DodgeSpeedIncrease"],ancientHuntRunes:["c"],i18n:[{locale:"fr-FR",name:"Armure d'ocelot"},{locale:"en-EN",name:"Ocelot armor"}]},{id:"OcelotArmor_Unique1",dlcId:"Jungle Awakens",type:"Armor",rarity:["Unique"],armorproperties:["SuperbDamageAbsorption","DodgeSpeedIncrease","DodgeInvulnerability"],ancientHuntRunes:["c","t"],i18n:[{locale:"fr-FR",name:"Marcheur de l'ombre"},{locale:"en-EN",name:"Shadow walker"}]},{id:"SnowArmor",dlcId:"Creeping Winter",type:"Armor",rarity:["Common","Rare"],armorproperties:["SuperbDamageAbsorption","SlowResistance"],ancientHuntRunes:["t"],i18n:[{locale:"fr-FR",name:"Armure de neige"},{locale:"en-EN",name:"Snow armor"}]},{id:"SnowArmor_Unique1",dlcId:"Creeping Winter",type:"Armor",rarity:["Unique"],armorproperties:["SuperbDamageAbsorption","SlowResistance"],ancientHuntRunes:["s","t"],i18n:[{locale:"fr-FR",name:"Armure de givre"},{locale:"en-EN",name:"Frost armor"}]},{id:"ClimbingGear",dlcId:"Howling Peaks",type:"Armor",rarity:["Common","Rare"],armorproperties:["ItemCooldownDecrease","Heavyweight"],ancientHuntRunes:["t"],i18n:[{locale:"fr-FR",name:"Équipement d'escalade"},{locale:"en-EN",name:"Climbing gear"}]},{id:"ClimbingGear_Unique1",dlcId:"Howling Peaks",type:"Armor",rarity:["Unique"],armorproperties:["SlowResistance","ItemCooldownDecrease","Heavyweight"],ancientHuntRunes:["t"],i18n:[{locale:"fr-FR",name:"Équipement d'escalade robuste"},{locale:"en-EN",name:"Rugged climbing gear"}]},{id:"ClimbingGear_Unique2",dlcId:"Howling Peaks",type:"Armor",rarity:["Unique"],armorproperties:["ItemCooldownDecrease"],ancientHuntRunes:["c","t"],i18n:[{locale:"fr-FR",name:"Équipement de chèvre"},{locale:"en-EN",name:"Goat gear"}]},{id:"EmeraldArmor",dlcId:"Howling Peaks",type:"Armor",rarity:["Common","Rare"],armorproperties:["MeleeAttackSpeedBoost"],ancientHuntRunes:["a"],i18n:[{locale:"fr-FR",name:"Équipement d'émeraude"},{locale:"en-EN",name:"Emerald gear"}]},{id:"EmeraldArmor_Unique1",dlcId:"Howling Peaks",type:"Armor",rarity:["Unique"],armorproperties:["MeleeAttackSpeedBoost"],ancientHuntRunes:["t","a"],i18n:[{locale:"fr-FR",name:"Armure opulente"},{locale:"en-EN",name:"Opulent armor"}]},{id:"EmeraldArmor_Unique2",dlcId:"Howling Peaks",type:"Armor",rarity:["Unique"],armorproperties:["MeleeAttackSpeedBoost"],ancientHuntRunes:["i","a"],i18n:[{locale:"fr-FR",name:"Gloire dorée"},{locale:"en-EN",name:"Gilded Glory"}]},{id:"PiglinArmor",dlcId:"Flames of the Nether",type:"Armor",rarity:["Common","Rare"],armorproperties:["ItemCooldownReset","ItemDamageBoost"],ancientHuntRunes:["a"],i18n:[{locale:"fr-FR",name:"Armure de piglin"},{locale:"en-EN",name:"Piglin armor"}]},{id:"PiglinArmor_Unique1",dlcId:"Flames of the Nether",type:"Armor",rarity:["Unique"],armorproperties:["ItemCooldownReset","ItemDamageBoost"],ancientHuntRunes:["s","a"],i18n:[{locale:"fr-FR",name:"Armure de piglin en or"},{locale:"en-EN",name:"Golden piglin armor"}]},{id:"SproutArmor",dlcId:"Flames of the Nether",type:"Armor",rarity:["Common","Rare"],armorproperties:["AreaHeal","DodgeRoot"],ancientHuntRunes:["c"],i18n:[{locale:"fr-FR",name:"Armure végétale"},{locale:"en-EN",name:"Sprout armor"}]},{id:"SproutArmor_Unique1",dlcId:"Flames of the Nether",type:"Armor",rarity:["Unique"],armorproperties:["DodgeSpeedIncrease","AreaHeal","DodgeRoot"],ancientHuntRunes:["c"],i18n:[{locale:"fr-FR",name:"Armure de liannes vivantes"},{locale:"en-EN",name:"Living vines armor"}]},{id:"SquidArmor",dlcId:"Hidden Depths",type:"Armor",rarity:["Common","Rare"],armorproperties:["MoveSpeedAura","SquidRollLimited"],ancientHuntRunes:["t"],i18n:[{locale:"fr-FR",name:"Armure de pieuvre"},{locale:"en-EN",name:"Squid armor"}]},{id:"SquidArmor_Unique1",dlcId:"Hidden Depths",type:"Armor",rarity:["Unique"],armorproperties:["DodgeInvulnerability","SquidRollQuick","MoveSpeedAura"],ancientHuntRunes:["t"],i18n:[{locale:"fr-FR",name:"Armure de pieuvre luisante"},{locale:"en-EN",name:"Glow squid armor"}]},{id:"TurtleArmor",dlcId:"Hidden Depths",type:"Armor",rarity:["Common","Rare"],armorproperties:["SuperbDamageAbsorption","HealingAura"],ancientHuntRunes:["t"],i18n:[{locale:"fr-FR",name:"Armure de tortue"},{locale:"en-EN",name:"Turtle armor"}]},{id:"TurtleArmor_Unique1",dlcId:"Hidden Depths",type:"Armor",rarity:["Unique"],armorproperties:["SuperbDamageAbsorption","HealingAura"],ancientHuntRunes:["t"],i18n:[{locale:"fr-FR",name:"Armure de tortue agile"},{locale:"en-EN",name:"Nimble turtle armor"}]},{id:"BardsGarb",dlcId:"Echoing Void",type:"Armor",rarity:["Common","Rare"],armorproperties:["AreaHeal","Resonant"],ancientHuntRunes:["i"],i18n:[{locale:"fr-FR",name:"Costume d'artiste"},{locale:"en-EN",name:"Entertainer's garb"}]},{id:"BardsGarb_Unique1",dlcId:"Echoing Void",type:"Armor",rarity:["Unique"],armorproperties:["AreaHeal","Resonant"],ancientHuntRunes:["s","t"],i18n:[{locale:"fr-FR",name:"Le troubadour"},{locale:"en-EN",name:"The troubadour"}]},{id:"EndRobes",dlcId:"Echoing Void",type:"Armor",rarity:["Common","Rare"],armorproperties:["InstantTransmission","SoulGatheringBoost"],ancientHuntRunes:["a","o"],i18n:[{locale:"fr-FR",name:"Robe de téléportation"},{locale:"en-EN",name:"Teleportation robes"}]},{id:"EndRobes_Unique1",dlcId:"Echoing Void",type:"Armor",rarity:["Unique"],armorproperties:["InstantTransmission","SoulGatheringBoost"],ancientHuntRunes:["a","o","c"],i18n:[{locale:"fr-FR",name:"Robe instable"},{locale:"en-EN",name:"Unstable robes"}]},{id:"ShulkerArmor",dlcId:"Echoing Void",type:"Armor",rarity:["Common","Rare"],armorproperties:["IncreasedMobTargeting"],ancientHuntRunes:["t","i"],i18n:[{locale:"fr-FR",name:"Armure de shulker"},{locale:"en-EN",name:"Shulker armor"}]},{id:"ShulkerArmor_Unique1",dlcId:"Echoing Void",type:"Armor",rarity:["Unique"],armorproperties:["IncreasedMobTargeting"],ancientHuntRunes:["s","t","i"],i18n:[{locale:"fr-FR",name:"Armure de shulker robuste"},{locale:"en-EN",name:"Sturdy shulker armor"}]}];async function FM(){return NM.map(n=>({dataValues:{...n,i18n:n.i18n.map(e=>({dataValues:e}))}}))}const LM=Object.freeze(Object.defineProperty({__proto__:null,findAll:FM},Symbol.toStringTag,{value:"Module"})),BM=[{id:"AllyDamageBoost",i18n:[{locale:"fr-FR",name:"Aura de boost des dégats des armes +20%"},{locale:"en-EN",name:"+20% weapon damage boost aura"}]},{id:"AreaHeal",i18n:[{locale:"fr-FR",name:"Les potions de soin soignent les aliés à proximité"},{locale:"en-EN",name:"Health potions heal nearby allies"}]},{id:"Beekeeper",i18n:[{locale:"fr-FR",name:"30% possibilité d'invoquer une abeille si frappé max. : 3)"},{locale:"en-EN",name:"30% chance to summon a bee when hit (max 3)"}]},{id:"DodgeCooldownIncrease",i18n:[{locale:"fr-FR",name:"Temps de rechargement du rouleau plus long 100%"},{locale:"en-EN",name:"100% longer roll cooldown"}]},{id:"DodgeGhostForm",i18n:[{locale:"fr-FR",name:"Attribue brièvement la forme fantomatique lors de l'esquive"},{locale:"en-EN",name:"Briefly gain Ghost Form when rolling"}]},{id:"DodgeSpeedIncrease",i18n:[{locale:"fr-FR",name:"Esquive plus rapide de 50%"},{locale:"en-EN",name:"50% faster roll"}]},{id:"Heavyweight",i18n:[{locale:"fr-FR",name:"Résistance au renvoi"},{locale:"en-EN",name:"Pushback resistance"}]},{id:"IncreasedArrowBundleSize",i18n:[{locale:"fr-FR",name:"+10 flèches par paquet"},{locale:"en-EN",name:"+10 arrows per bundle"}]},{id:"IncreasedMobTargeting",i18n:[{locale:"fr-FR",name:"Les créatures vous cible mieux"},{locale:"en-EN",name:"Mobs target you more"}]},{id:"ItemCooldownDecrease",i18n:[{locale:"fr-FR",name:"Temps de recharge de l'artéfact -40%"},{locale:"en-EN",name:"-40% artifact cooldown"}]},{id:"ItemCooldownReset",i18n:[{locale:"fr-FR",name:"Réinitialise le temps de recharge des artéfacts lors de l'utilisation d'une potion"},{locale:"en-EN",name:"Reset artifacts cooldown on potion use"}]},{id:"ItemDamageBoost",i18n:[{locale:"fr-FR",name:"Dégats par l'artéfact +50%"},{locale:"en-EN",name:"+50% artifact damage"}]},{id:"LifeStealAura",i18n:[{locale:"fr-FR",name:"Aura de vol de vie de 6%"},{locale:"en-EN",name:"6% life steal aura"}]},{id:"MeleeAttackSpeedBoost",i18n:[{locale:"fr-FR",name:"Vitesse d'attaque au corps-à-corps +25%"},{locale:"en-EN",name:"+25% melee attack speed"}]},{id:"MeleeDamageBoost",i18n:[{locale:"fr-FR",name:"Dégat au corps-à-corps +30%"},{locale:"en-EN",name:"+30% melee damage"}]},{id:"MissChance",i18n:[{locale:"fr-FR",name:"30% chance d'annuler des coups"},{locale:"en-EN",name:"30% chance to negate hits"}]},{id:"MoveSpeedAura",i18n:[{locale:"fr-FR",name:"Aura de vitesse de mouvement +15%"},{locale:"en-EN",name:"+15% movespeed aura"}]},{id:"MoveSpeedReduction",i18n:[{locale:"fr-FR",name:"Vitesse de mouvement -10%"},{locale:"en-EN",name:"-10% movespeed"}]},{id:"PetBat",i18n:[{locale:"fr-FR",name:"Vous donne une chauve-sourie"},{locale:"en-EN",name:"Gives you a pet bat"}]},{id:"PotionCooldownDecrease",i18n:[{locale:"fr-FR",name:"Temps de recharge de la potion -40%"},{locale:"en-EN",name:"-40% potion cooldown"}]},{id:"RangedDamageBoost",i18n:[{locale:"fr-FR",name:"Dégats à distance +30%"},{locale:"en-EN",name:"+30% ranged damage"}]},{id:"SlowResistance",i18n:[{locale:"fr-FR",name:"50% résistance au gel"},{locale:"en-EN",name:"50% freezing resistance"}]},{id:"SoulGatheringBoost",i18n:[{locale:"fr-FR",name:"+50% âmes rassemblées"},{locale:"en-EN",name:"+50% souls gathered"}]},{id:"SuperbDamageAbsorption",i18n:[{locale:"fr-FR",name:"Réduction des dégats de 35%"},{locale:"en-EN",name:"35% damage reduction"}]},{id:"TeleportChance",i18n:[{locale:"fr-FR",name:"5% chance de téléportation lors d'un coup"},{locale:"en-EN",name:"5% chance to teleport away when hit"}]},{id:"DodgeInvulnerability",dlcId:"Jungle Awakens",i18n:[{locale:"fr-FR",name:"Invulnérabilité temporaire lors de l'esquive"},{locale:"en-EN",name:"Brief invunerability when rolling"}]},{id:"EmeraldShield",dlcId:"Howling Peaks",i18n:[{locale:"fr-FR",name:"Invulnérabilité en récupérent des émeraudes"},{locale:"en-EN",name:"Invulnerability when emerald collection"}]},{id:"DodgeRoot",dlcId:"Flames of the Nether",i18n:[{locale:"fr-FR",name:"Piège et empoisonne les créatures à proximité lors d'une roulade"},{locale:"en-EN",name:"Traps en poisons nearby mobs when rolling"}]},{id:"HealingAura",dlcId:"Hidden Depths",i18n:[{locale:"fr-FR",name:"25% de soins"},{locale:"en-EN",name:"25% healing boost"}]},{id:"SquidRollLimited",dlcId:"Hidden Depths",i18n:[{locale:"fr-FR",name:"Libère un nuage d'encre lors d'une roulade"},{locale:"en-EN",name:"Release an ink cloud when rolling"}]},{id:"SquidRollQuick",dlcId:"Hidden Depths",i18n:[{locale:"fr-FR",name:"Libère un nuage d'encre lors d'une roulade"},{locale:"en-EN",name:"Release an ink cloud when rolling"}]},{id:"InstantTransmission",dlcId:"Echoing Void",i18n:[{locale:"fr-FR",name:"Effectuez une roulade pour vous téléporter"},{locale:"en-EN",name:"Roll to teleport"}]},{id:"Resonant",dlcId:"Echoing Void",i18n:[{locale:"fr-FR",name:"+30% de durée d'effet de statut positif"},{locale:"en-EN",name:"+30% positive status effect duration"}]}];async function $M(){return BM.map(n=>({dataValues:{...n,i18n:n.i18n.map(e=>({dataValues:e}))}}))}const qM=Object.freeze(Object.defineProperty({__proto__:null,findAll:$M},Symbol.toStringTag,{value:"Module"})),UM=[{id:"BeeNest",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["u"],i18n:[{locale:"fr-FR",name:"Nid bourdonnant"},{locale:"en-EN",name:"Buzzy nest"}]},{id:"BootsOfSwiftness",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["c"],i18n:[{locale:"fr-FR",name:"Bottes de célérité"},{locale:"en-EN",name:"Boots of swiftness"}]},{id:"CorruptedBeacon",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["o"],soulgathering:!0,i18n:[{locale:"fr-FR",name:"Balise corrompue"},{locale:"en-EN",name:"Corrupted beacon"}]},{id:"CorruptedBeacon_Spooky1",events:["Spooky Fall"],type:"Artefact",rarity:["Unique"],ancientHuntRunes:["o"],soulgathering:!0,i18n:[{locale:"fr-FR",name:"Citrouille corrompue"},{locale:"en-EN",name:"Corrupted pumpkin"}]},{id:"DeathCapMushroom",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["i"],i18n:[{locale:"fr-FR",name:"Calice de la mort"},{locale:"en-EN",name:"Death cap mushroom"}]},{id:"FireworksArrowItem",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["r"],i18n:[{locale:"fr-FR",name:"Flèche pyrotechnique"},{locale:"en-EN",name:"Fireworks arrow"}]},{id:"FishingRod",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["i"],i18n:[{locale:"fr-FR",name:"Canne à pêche"},{locale:"en-EN",name:"Fishing rod"}]},{id:"FlamingQuiver",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["r"],i18n:[{locale:"fr-FR",name:"Carquois enflammé"},{locale:"en-EN",name:"Flaming quiver"}]},{id:"GhostCloak",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["c","t"],i18n:[{locale:"fr-FR",name:"Cape fantomatique"},{locale:"en-EN",name:"Ghost cloak"}]},{id:"GolemKit",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["u"],i18n:[{locale:"fr-FR",name:"Kit de golem"},{locale:"en-EN",name:"Golem kit"}]},{id:"GongOfWeakening",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["s"],i18n:[{locale:"fr-FR",name:"Gong d'affaiblissement"},{locale:"en-EN",name:"Gong of weakening"}]},{id:"Harvester",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["o"],soulgathering:!0,i18n:[{locale:"fr-FR",name:"Moissonneur"},{locale:"en-EN",name:"Harvester"}]},{id:"IronHideAmulet",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["t"],i18n:[{locale:"fr-FR",name:"Amulette en peau de fer"},{locale:"en-EN",name:"Iron hide amulet"}]},{id:"LightFeather",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["c"],i18n:[{locale:"fr-FR",name:"Plume légère"},{locale:"en-EN",name:"Light feather"}]},{id:"LightningRod",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["a"],i18n:[{locale:"fr-FR",name:"Bâton de foudre"},{locale:"en-EN",name:"Lightning rod"}]},{id:"LoveMedallion",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["a"],i18n:[{locale:"fr-FR",name:"Médaillon d'amour"},{locale:"en-EN",name:"Love medallion"}]},{id:"RainbowGrass",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["u","a"],i18n:[{locale:"fr-FR",name:"Herbe enchantée"},{locale:"en-EN",name:"Enchanted grass"}]},{id:"ShockPowder",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["s","t"],i18n:[{locale:"fr-FR",name:"Poudre de choc"},{locale:"en-EN",name:"Shock powder"}]},{id:"SoulHealer",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["o","s"],soulgathering:!0,i18n:[{locale:"fr-FR",name:"Guérisseur d'âmes"},{locale:"en-EN",name:"Soul healers"}]},{id:"SoulLantern",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["u","o"],soulgathering:!0,i18n:[{locale:"fr-FR",name:"Lanterne des âmes"},{locale:"en-EN",name:"Soul lantern"}]},{id:"SoulTotemOfCasting",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["o"],soulgathering:!0,i18n:[{locale:"fr-FR",name:"Totem d'incantation"},{locale:"en-EN",name:"Totem of casting"}]},{id:"TastyBone",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["u"],i18n:[{locale:"fr-FR",name:"Os appétissant"},{locale:"en-EN",name:"Tasty bone"}]},{id:"TormentQuiver",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["o","r"],soulgathering:!0,i18n:[{locale:"fr-FR",name:"Carquois du tourment"},{locale:"en-EN",name:"Torment quiver"}]},{id:"TotemOfRegeneration",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["s"],i18n:[{locale:"fr-FR",name:"Totem de régénération"},{locale:"en-EN",name:"Totem of regeneration"}]},{id:"TotemOfShielding",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["s","t"],i18n:[{locale:"fr-FR",name:"Totem de blindage"},{locale:"en-EN",name:"Totem of shielding"}]},{id:"TotemOfSoulProtection",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:[],i18n:[{locale:"fr-FR",name:"Totem de protection de l'âme"},{locale:"en-EN",name:"Totem of soul protection"}]},{id:"WindHorn",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["u","s"],i18n:[{locale:"fr-FR",name:"Corne de vent"},{locale:"en-EN",name:"Wind horn"}]},{id:"WonderfulWheat",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["u"],i18n:[{locale:"fr-FR",name:"Blé merveilleux"},{locale:"en-EN",name:"Wonderful wheat"}]},{id:"CorruptedSeeds",dlcId:"Jungle Awakens",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["a"],i18n:[{locale:"fr-FR",name:"Graines corrompues"},{locale:"en-EN",name:"Corrupted seeds"}]},{id:"IceWand",dlcId:"Creeping Winter",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["a"],i18n:[{locale:"fr-FR",name:"Baguette de glace"},{locale:"en-EN",name:"Ice wand"}]},{id:"ChargedRedstoneMines",dlcId:"Howling Peaks",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["i"],i18n:[{locale:"fr-FR",name:"Mines éparpillées"},{locale:"en-EN",name:"Scatter mines"}]},{id:"EnchantersTome",dlcId:"Howling Peaks",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["a"],i18n:[{locale:"fr-FR",name:"Tome d'enchanteurs"},{locale:"en-EN",name:"Enchanter's Tome"}]},{id:"SatchelOfTheElements",dlcId:"Howling Peaks",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["a"],i18n:[{locale:"fr-FR",name:"Sacoche des éléments"},{locale:"en-EN",name:"Satchel of Elements"}]},{id:"UpdraftTome",dlcId:"Howling Peaks",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["a"],i18n:[{locale:"fr-FR",name:"Tome des courants ascendants"},{locale:"en-EN",name:"Updraft tome"}]},{id:"MobMasher",dlcId:"Flames of the Nether",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["i"],i18n:[{locale:"fr-FR",name:"Incarnation de puissance"},{locale:"en-EN",name:"Powershaker"}]},{id:"NetherWartSporeGrenade",dlcId:"Flames of the Nether",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["i"],i18n:[{locale:"fr-FR",name:"Champignon explosif"},{locale:"en-EN",name:"Blast fungus"}]},{id:"SpinWheel",dlcId:"Flames of the Nether",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["i"],i18n:[{locale:"fr-FR",name:"Lame rotative"},{locale:"en-EN",name:"Spinblade"}]},{id:"ThunderingQuiver",dlcId:"Flames of the Nether",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["r"],i18n:[{locale:"fr-FR",name:"Carquois foudroyant"},{locale:"en-EN",name:"Thundering quiver"}]},{id:"GuardianEye",dlcId:"Hidden Depths",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["a"],i18n:[{locale:"fr-FR",name:"Œil du guardien"},{locale:"en-EN",name:"Guardian eye"}]},{id:"HeavyHarpoonQuiver",dlcId:"Hidden Depths",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["r"],i18n:[{locale:"fr-FR",name:"Carquois de harpons"},{locale:"en-EN",name:"Harpoon quiver"}]},{id:"SatchelOfNeed",dlcId:"Hidden Depths",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["s"],i18n:[{locale:"fr-FR",name:"Sacoche d'élixirs"},{locale:"en-EN",name:"Satchel of elixirs"}]},{id:"SatchelOfNourishment",dlcId:"Hidden Depths",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["s"],i18n:[{locale:"fr-FR",name:"Sacoche d'en-cas"},{locale:"en-EN",name:"Satchel of snacks"}]},{id:"LostEvocation",dlcId:"Echoing Void",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["u"],soulgathering:!0,i18n:[{locale:"fr-FR",name:"Chant des vexs"},{locale:"en-EN",name:"Vexing chant"}]},{id:"ShadowSplinter",dlcId:"Echoing Void",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["o"],soulgathering:!0,i18n:[{locale:"fr-FR",name:"Changeombre"},{locale:"en-EN",name:"Shadow shifter"}]},{id:"TomeOfDuplication",dlcId:"Echoing Void",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["s"],i18n:[{locale:"fr-FR",name:"Tome de duplication"},{locale:"en-EN",name:"Tome of duplication"}]},{id:"VoidQuiver",dlcId:"Echoing Void",type:"Artefact",rarity:["Common","Rare"],ancientHuntRunes:["r"],i18n:[{locale:"fr-FR",name:"Carquois du vide"},{locale:"en-EN",name:"Void quiver"}]}];async function HM(){return UM.map(n=>({dataValues:{...n,i18n:n.i18n.map(e=>({dataValues:e}))}}))}const VM=Object.freeze(Object.defineProperty({__proto__:null,findAll:HM},Symbol.toStringTag,{value:"Module"})),jM=[{id:"Jungle Awakens",releasedAt:"2020-07-01"},{id:"Creeping Winter",releasedAt:"2020-09-08"},{id:"Howling Peaks",releasedAt:"2020-12-09"},{id:"Flames of the Nether",releasedAt:"2021-02-24"},{id:"Hidden Depths",releasedAt:"2021-05-26"},{id:"Echoing Void",releasedAt:"2021-07-28"}];async function WM(){return jM.map(n=>({dataValues:{...n,releasedAt:new Date(n.releasedAt)}}))}const zM=Object.freeze(Object.defineProperty({__proto__:null,findAll:WM},Symbol.toStringTag,{value:"Module"})),GM=[{id:"Accelerating",type:["Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Accélération",desc:"Augmente la vitesse d'attaque de chaque attaque consécutive. Se réinitialise une seconde après l'attaque.",level:["Augmente de 8% par tir","Augmente de 10% par tir","Augmente de 12% par tir"]},{locale:"en-EN",name:"Accelerate",desc:"Increases attack speed for each consecutive shot. Resets one second after the attack.",level:["8% increase per shot","10% increase per shot","12% increase per shot"]}]},{id:"Acrobat",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Accrobate",desc:"Réduit le temps de recharge entre les utilisations de vos ésquives.",level:["Temps de recharge réduit de 15%","Temps de recharge réduit de 30%","Temps de recharge réduit de 45%"]},{locale:"en-EN",name:"Accrobat",desc:"Reduces the cooldown time between your rolls.",level:["15% reduced cooldown","30% reduced cooldown","45% reduced cooldown"]}]},{id:"AnimaConduitMelee",type:["Melee"],tier:"Common",i18n:[{locale:"fr-FR",name:"Conduit de l'âme",desc:"Chaque âme absorbée vous octroie un peu de santé en plus.",level:["2% de santé gangée","4% de santé gangée","6% de santé gangée"]},{locale:"en-EN",name:"Anima conduit",desc:"Each soul you absorb grants a small amount of health.",level:["2% health gained","4% health gained","6% health gained"]}]},{id:"BagOfSouls",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Sac d'âmes",desc:"Augmente le nombre maximum d'âmes pouvant être portées.",level:["33% d'âmes supplémentaires","67% d'âmes supplémentaires","100% d'âmes supplémentaires"]},{locale:"en-EN",name:"Bag of souls",desc:"Increases the maximum number of souls that can be carried.",level:["33% extra souls","67% extra souls","100% extra souls"]}]},{id:"BonusShot",type:["Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Tir bonus",desc:"Le tir déclanche un second tir vers un ennemi proche. Ce second tir inflige moins de dégâts.",level:["10% de dégats par tir","17% de dégats par tir","24% de dégats par tir"]},{locale:"en-EN",name:"Bonus shot",desc:"Firing a shot also fires a second shot at a nearby enemy. The second shot has reduced damage.",level:["10% damage per shot","17% damage per shot","24% damage per shot"]}]},{id:"Burning",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Combustion",desc:"Inflige des dégâts à tous les ennemies proches toutes les 0.5 secondes.",level:["{AMOUNT} dégâts","{AMOUNT} dégâts","{AMOUNT} dégâts"]},{locale:"en-EN",name:"Burning",desc:"Every 0.5 seconds damages all nearby enemies",level:["{AMOUNT} damages","{AMOUNT} damages","{AMOUNT} damages"]}]},{id:"BurstBowstring",type:["Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Corde d'arc explosive",desc:"Tire sur les créatures à proximité lorsque vous effectuez une roulade, coûtant une flèche par roulade. Les projectiles infligent 40% des dégâts d'un tir chargé.",level:["1 cible","2 cibles","3 cibles"]},{locale:"en-EN",name:"Burst bowstring",desc:"Shoots nearby mobs when you roll, costing one arro per roll. Projectiles deal 40% of a charged shot's damage.",level:["1 target","2 targets","3 targets"]}]},{id:"BusyBee",type:["Melee"],tier:"Common",i18n:[{locale:"fr-FR",name:"Abeille dynamique",desc:"Possibilité d'invoquer une abeille après avoir vaincu une créature : jusqu'à 3 abeilles se rangent à vos côtés.",level:["20% possibilité d'invoquer.","30% possibilité d'invoquer.","40% possibilité d'invoquer."]},{locale:"en-EN",name:"Busy bee",desc:"Chance to summon a bee after defeating a mob, with up to 3 bees joining your side.",level:["20% chance to summon","30% chance to summon","40% chance to summon"]}]},{id:"Celerity",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Recharge",desc:"Réduit le temps de recharge entre les utilisations de vos artéfacts.",level:["Temps de recharge réduit de -10%","Temps de recharge réduit de -19%","Temps de recharge réduit de -27%"]},{locale:"en-EN",name:"Cool down",desc:"Reduces the cooldown time between uses of your artifacts.",level:["-10% reduced cooldown","-19% reduced cooldown","-27% reduced cooldown"]}]},{id:"ChainReaction",type:["Ranged"],tier:"Powerful",i18n:[{locale:"fr-FR",name:"Réaction en chaîne",desc:"A une chance de tirer cinq flèches dans toutes les directions lors de l'impact.",level:["10% chance de se déclencher","20% chance de se déclencher","30% chance de se déclencher"]},{locale:"en-EN",name:"Chain reaction",desc:"Has a chance to fire five arrows in all directions on impact.",level:["10% chance to trigger","20% chance to trigger","30% chance to trigger"]}]},{id:"Chains",type:["Melee"],tier:"Common",i18n:[{locale:"fr-FR",name:"Chaînes",desc:"A 30% de chance d'enchaîner un groupe de créatures et de les garder liées pendant une courte période.",level:["Durée de 1 seconde","Durée de 2 secondes","Durée de 3 secondes"]},{locale:"en-EN",name:"Chains",desc:"Has a 30% chance to chain a cluster of mobs together and keep them bound for a short time.",level:["1 second duration","2 seconds duration","3 seconds duration"]}]},{id:"Chilling",type:["Armor"],tier:"Powerful",i18n:[{locale:"fr-FR",name:"Glacial",desc:"Émet un souffle toutes les deux secondes, qui réduit les vitesses d'attaque et de déplacement des ennemies proches pendant une seconde.",level:["Vitesse réduite de -20%","Vitesse réduite de -40%","Vitesse réduite de -60%"]},{locale:"en-EN",name:"Chilling",desc:"Emits a blast every two seconds that reduces the movement and attack speed of nearby enemies for one second.",level:["-20% reduced speed","-40% reduced speed","-60% reduced speed"]}]},{id:"Committed",type:["Melee","Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Impliqué",desc:"Augmente les dégâts infligés contre les ennemies déjà blessés.",level:["0-50% dégats bonus","0-75% dégats bonus","0-100% dégats bonus"]},{locale:"en-EN",name:"Committed",desc:"Deal increased damage against already wounded enemies.",level:["0-50% bonus damage","0-75% bonus damage","0-100% bonus damage"]}]},{id:"Cowardice",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Couardise",desc:"Quand votre barre de vie est complète, vos dégats à distance et de mêlée sont augmentés.",level:["Dégats augmentés de +20%","Dégats augmentés de +30%","Dégats augmentés de +40%"]},{locale:"en-EN",name:"Cowardice",desc:"While you are at full HP, you deal increased ranged and melee damage.",level:["+20% increased ranged and melee damage","+30% increased ranged and melee damage","+40% increased ranged and melee damage"]}]},{id:"CriticalHit",type:["Melee","Ranged"],tier:"Powerful",i18n:[{locale:"fr-FR",name:"Coup critique",desc:"Vous donne une chance d'infliger des coups critiques infligeant triple dégats.",level:["10% de chance de se déclencher","15% de chance de se déclencher","20% de chance de se déclencher"]},{locale:"en-EN",name:"Critical hit",desc:"Gives you a chance to inflict critical hits dealing triple damage.",level:["10% chance to trigger","15% chance to trigger","20% chance to trigger"]}]},{id:"Deflecting",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Déviation",desc:"Donne une petite chance de dévier des projectiles.",level:["25% de chance de e déclancher","35% de chance de e déclancher","45% de chance de e déclancher"]},{locale:"en-EN",name:"Deflecting",desc:"Grants a small chance to deflect incoming projectiles",level:["25% chance to trigger","35% chance to trigger","45% chance to trigger"]}]},{id:"DynamoMelee",type:["Melee"],tier:"Common",i18n:[{locale:"fr-FR",name:"Dynamo",desc:"Ajoute des dégâts à la prochaine attaque après avoir esquivé.",level:["{AMOUNT} de dégâts","{AMOUNT} de dégâts","{AMOUNT} de dégâts"]},{locale:"en-EN",name:"Dynamo",desc:"Adds damage to the next attack after rolling.",level:["{AMOUNT} damage","{AMOUNT} damage","{AMOUNT} damage"]}]},{id:"DynamoRanged",type:["Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Dynamo",desc:"Ajoute des dégats à la prochaine attaque après avoir esquivé.",level:["{AMOUNT} de dégâts","{AMOUNT} de dégâts","{AMOUNT} de dégâts"]},{locale:"en-EN",name:"Dynamo",desc:"Adds damage to the next attack after rolling.",level:["{AMOUNT} damage","{AMOUNT} damage","{AMOUNT} damage"]}]},{id:"Echo",type:["Melee"],tier:"Common",i18n:[{locale:"fr-FR",name:"Écho",desc:"Certaines de vos attaques sont suivies rapidement par d'autres.",level:["Temps de recharge de 5 secondes","Temps de recharge de 4 secondes","Temps de recharge de 3 secondes"]},{locale:"en-EN",name:"Echo",desc:"Some of your attacks can be followed up by another attack in rapid succession.",level:["5 seconds cooldown","4 seconds cooldown","3 seconds cooldown"]}]},{id:"Electrified",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Électrifié",desc:"Une roulade envoi un carreaux de foudre qui inflige des dégâts à trois ennemis à proximité.",level:["Inflige {AMOUNT} dégats","Inflige {AMOUNT} dégats","Inflige {AMOUNT} dégats"]},{locale:"en-EN",name:"Electrified",desc:"Rolling zaps three nearby enemies with lightning bolts, dealing damage.",level:["Deals {AMOUNT} damage","Deals {AMOUNT} damage","Deals {AMOUNT} damage"]}]},{id:"EnigmaResonatorMelee",type:["Melee"],tier:"Common",i18n:[{locale:"fr-FR",name:"Résonateur d'énigme",desc:"Donne une chance d'infliger triple dégâts sur la base du nombre d'âmes que vous possédez.",level:["0-15% de chance de se délencher","0-20% de chance de se délencher","0-25% de chance de se délencher"]},{locale:"en-EN",name:"Enigma resonator",desc:"Gives a chance to deal triple damage based on the number of souls you have.",level:["0-15% chance to trigger","0-20% chance to trigger","0-25% chance to trigger"]}]},{id:"EnigmaResonatorRanged",type:["Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Résonateur d'énigme",desc:"Donne une chance d'infliger triple dégats sur la base du nombre d'âmes que vous possédez.",level:["0-15% chance de déclancher","0-20% chance de déclancher","0-25% chance de déclancher"]},{locale:"en-EN",name:"Enigma resonator",desc:"Give a chance to deal triple damage based on the number of souls you have.",level:["0-15% chance to trigger","0-20% chance to trigger","0-25% chance to trigger"]}]},{id:"Exploding",type:["Melee","Ranged"],tier:"Powerful",i18n:[{locale:"fr-FR",name:"Explosion",desc:"Les créatures explosent après avoir été vaincues.",level:["Inflige 20% de dégâts équivalent aux points de vie de l'ennemi.","Inflige 40% de dégâts équivalent aux points de vie de l'ennemi.","Inflige 60% de dégâts équivalent aux points de vie de l'ennemi."]},{locale:"en-EN",name:"Exploding",desc:"Mobs explode after they are defeated.",level:["Deals 20% of enemy health as damage","Deals 40% of enemy health as damage","Deals 60% of enemy health as damage"]}]},{id:"Explorer",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Explorateur",desc:"Chaque centaine de blocs explorée sur la carte permet de récupérer un peu de santé.",level:["0.3% de santé récupérée","0.7% de santé récupérée","1.0% de santé récupérée"]},{locale:"en-EN",name:"Explorer",desc:"For every one hundred blocks explored on the map, you ragain a small amount of health.",level:["0.3% health ragained","0.7% health ragained","1.0% health ragained"]}]},{id:"FinalShout",type:["Armor"],tier:"Powerful",i18n:[{locale:"fr-FR",name:"Cri ultime",desc:"Lorsque votre santé descend en dessous de 25%, tous vos artéfacts sont utilisés (sans tenir compte des temps de recharge).",level:["Utilisable toutes les 12 secondes","Utilisable toutes les 10 secondes","Utilisable toutes les 8 secondes"]},{locale:"en-EN",name:"Final shout",desc:"When your health drops below 25%, all your artifacts are used (ignoring cooldown periods).",level:["Up to every 12th second","Up to every 10th second","Up to every 8th second"]}]},{id:"FireAspect",type:["Melee","Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Aura de feu",desc:"Met le feu aux créatures pour trois secondes, ce qui inflige des dégâts au fil du temps.",level:["{AMOUNT} de dégâts par seconde","{AMOUNT} de dégâts par seconde","{AMOUNT} de dégâts par seconde"]},{locale:"en-EN",name:"Fire aspect",desc:"Sets mobs on fire for three seconds, dealing damage over time.",level:["{AMOUNT} damage per second","{AMOUNT} damage per second","{AMOUNT} damage per second"]}]},{id:"FireTrail",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Traînée de feu",desc:"La roulade crée une traînée de feu derrière vous, infligeant des dégâts aux créatures pendant quatre secondes.",level:["{AMOUNT} de dégâts de feu par seconde","{AMOUNT} de dégâts de feu par seconde","{AMOUNT} de dégâts de feu par seconde"]},{locale:"en-EN",name:"Fire trail",desc:"Rolling creates a trail of fire behind you, wich deals damage to mobs for four seconds.",level:["{AMOUNT} fire damage per second","{AMOUNT} fire damage per second","{AMOUNT} fire damage per second"]}]},{id:"FoodReserves",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Réserves de nouriture",desc:"Quad vous utilisez une potion de soin, vous créez également des aliments au hasard.",level:["1 aliment est créé","2 aliments sont créés","3 aliments sont créés"]},{locale:"en-EN",name:"Food reserves",desc:"Whenever you use a healing potion, you also create random food items.",level:["1 item crafted","2 items crafted","3 items crafted"]}]},{id:"Freezing",type:["Melee"],tier:"Common",i18n:[{locale:"fr-FR",name:"Gel",desc:"Ralentit les créatures après un coup pendant trois secondes.",level:["Vitesse réduite de -20%","Vitesse réduite de -30%","Vitesse réduite de -40%"]},{locale:"en-EN",name:"Freezing",desc:"Slows mobs after hit for three seconds.",level:["-20% reduced speed","-30% reduced speed","-40% reduced speed"]}]},{id:"Frenzied",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Frénésie",desc:"Quand votre santé est inférieure à 50%, la vitesse d'ttaque est augmentée.",level:["Vitesse d'attaque au corps-à-corps et à distance augmente de +10%","Vitesse d'attaque au corps-à-corps et à distance augmente de +20%","Vitesse d'attaque au corps-à-corps et à distance augmente de +30%"]},{locale:"en-EN",name:"Frenzied",desc:"While you are at less than half health, your attack speed is increased.",level:["+10% melee and ranged attack speed","+20% melee and ranged attack speed","+30% melee and ranged attack speed"]}]},{id:"FuseShot",type:["Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Tir avec détonateur",desc:"Certains projectiles contiennent une charge explosive avec détonateur, qui explose une seconde après l'impact et inglige 100% de dégâts aux créatures à proximité.",level:["Tous les 5 tirs","Tous les 4 tirs","Tous les 3 tirs"]},{locale:"en-EN",name:"Fuse shot",desc:"Every few shots has a timed charge that explodes one second after impact, dealing 100% damage to nearby mobs.",level:["Every 5th shot","Every 4th shot","Every 3th shot"]}]},{id:"Gravity",type:["Ranged"],tier:"Powerful",i18n:[{locale:"fr-FR",name:"Gravité",desc:"Cette effet attire les créatures proches vers le point d'impact de l'arme.",level:["Durée de 1.0 seconde","Durée de 1.5 secondes","Durée de 2.0 secondes"]},{locale:"en-EN",name:"Gravity",desc:"This effect pulls mobs in range toward's the weapon's impact point.",level:["1.0 second duration","1.5 seconds duration","2.0 seconds duration"]}]},{id:"GravityMelee",type:["Melee"],tier:"Powerful",i18n:[{locale:"fr-FR",name:"Gravité",desc:"Cet effet attire les créatures proches vers le points d'impact de l'arme.",level:["Durée de 1.0 seconde","Durée de 1.5 secondes","Durée de 2.0 secondes"]},{locale:"en-EN",name:"Gravity",desc:"This effect pulls mobs in range toward's the weapon's impact point.",level:["1.0 second duration","1.5 seconds duration","2.0 seconds duration"]}]},{id:"GravityPulse",type:["Armor"],tier:"Powerful",i18n:[{locale:"fr-FR",name:"Pulsion gravitationnelle",desc:"Un souffle surviendra toutes les cinq secondes et attirera vers vous les ennemies proches.",level:["Portée de 100%","Portée de 150%","Portée de 200%"]},{locale:"en-EN",name:"Gravity pulse",desc:"A blast occurs every five seconds that pulls nearby enemies towards you.",level:["100% range","150% range","200% range"]}]},{id:"Growing",type:["Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Agrandissement",desc:"Le projectile grossit dans les airs, infligeant des dégâts supplémentaires aux cibles distantes.",level:["25% de dégâts max","50% de dégâts max","75% de dégâts max"]},{locale:"en-EN",name:"Growing",desc:"The fired shot grows in the air, dealing extra damage to distant targets.",level:["25% max damage","50% max damage","75% max damage"]}]},{id:"HealthSynergy",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Synergie de santé",desc:"Vous récupérez un peu de santé en activant un artéffact.",level:["3% de santé récupérée","4% de santé récupérée","5% de santé récupérée"]},{locale:"en-EN",name:"Health synergy",desc:"When activating any artifact, you regain a small amount of health.",level:["3% health regained","4% health regained","5% health regained"]}]},{id:"Infinity",type:["Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Infinité",desc:"Chance de récupérer immédiatement une flèche après le tir.",level:["16% chance de se déclencher","32% chance de se déclencher","48% chance de se déclencher"]},{locale:"en-EN",name:"Infinity",desc:"Chance to immediately replenish an arrow after shooting.",level:["16% chance to trigger","32% chance to trigger","48% chance to trigger"]}]},{id:"Leeching",type:["Melee"],tier:"Common",i18n:[{locale:"fr-FR",name:"Vampirisme",desc:"Vaincre une créature vous soigne à raison d'une petite partie de la vie max de celle-ci.",level:["5% de la vie maximale de la créature","7% de la vie maximale de la créature","9% de la vie maximale de la créature"]},{locale:"en-EN",name:"Leeching",desc:"Defeating a mob heals you a small portion of the mob's max health.",level:["5% of mob max health","7% of mob max health","9% of mob max health"]}]},{id:"Looting",type:["Melee","Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Butin",desc:"Augmente la chance que les créature laisse tomber des consommables.",level:["+100% d'augmentation de chance","+200% d'augmentation de chance","+300% d'augmentation de chance"]},{locale:"en-EN",name:"Looting",desc:"Increase the chance for mobs to drop consumables.",level:["+100% increased chance","+200% increased chance","+300% increased chance"]}]},{id:"MultiShot",type:["Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Tir multiple",desc:"A une chance de tirer cinq flèches en une fois.",level:["20% chance de se déclencher","30% chance de se déclencher","40% chance de se déclencher"]},{locale:"en-EN",name:"Multishot",desc:"Grants the chance to fire five arrows at once.",level:["20% chance to trigger","30% chance to trigger","40% chance to trigger"]}]},{id:"Piercing",type:["Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Perçant",desc:"Les flèches tirées obtiennent parfois l'effet perçant, ce qui leur permet de traverser plusieurs créatures.",level:["Toutes les 3 flèches","Toutes les 2 flèches","Toutes les flèches"]},{locale:"en-EN",name:"Piercing",desc:"Fired arrows sometines gain the piercing effect, which allows to fly through multiple mobs.",level:["Every 3rd arrow","Every 2nd arrow","Every arrow"]}]},{id:"PoisonedMelee",type:["Melee"],tier:"Common",i18n:[{locale:"fr-FR",name:"Nuage de poison",desc:"A une chance de 30% de déclencher un nuage de poison qui inflige des dégâts aux ennemis dans une zone pendant trois secondes.",level:["{AMOUNT} de dégâts par seconde","{AMOUNT} de dégâts par seconde","{AMOUNT} de dégâts par seconde"]},{locale:"en-EN",name:"Poison cloud",desc:"Has a 30% chance to summon a poison cloud that deals damage to enemies in an area for three seconds.",level:["{AMOUNT} damage per second","{AMOUNT} damage per second","{AMOUNT} damage per second"]}]},{id:"PoisonedRanged",type:["Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Nuage de poison",desc:"A une chance de 30% de déclencher un nuage de poison qui inflige des dégâts aux ennemies dans une zone pendant trois secondes.",level:["{AMOUNT} de dégâts par seconde","{AMOUNT} de dégâts par seconde","{AMOUNT} de dégâts par seconde"]},{locale:"en-EN",name:"Poison cloud",desc:"Has a 30% chance to summon a poison cloud that deals damage to enemies in an area for three seconds.",level:["{AMOUNT} damage per second","{AMOUNT} damage per second","{AMOUNT} damage per second"]}]},{id:"PotionFortification",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Barrière de potion",desc:"Quand vous utilisez une potion de soin, vous subissez -90% de dégâts pendant une courte période.",level:["Durée de 5 secondes","Durée de 7 secondes","Durée de 9 secondes"]},{locale:"en-EN",name:"Potion barrier",desc:"Whenever you use a healing potion, you take -90% damage for a short duration.",level:["5 seconds duration","7 seconds duration","9 seconds duration"]}]},{id:"Power",type:["Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Puissance",desc:"Augmente la puissance de dégâts des flèches.",level:["+10% de dégats","+21% de dégats","+33% de dégats"]},{locale:"en-EN",name:"Power",desc:"Power boosts arrow damage.",level:["+10% damage","+21% damage","+33% damage"]}]},{id:"Prospector",type:["Melee","Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Prospecteur",desc:"Trouvez plus d'émeraudes sur les ennemis tombés.",level:["+100% d'augmentation de chance","+200% d'augmentation de chance","+300% d'augmentation de chance"]},{locale:"en-EN",name:"Prospector",desc:"Find more emeralds on fallen enemies.",level:["+100% increase chance","+200% increase chance","+300% increase chance"]}]},{id:"Protection",type:["Armor"],tier:"Powerful",i18n:[{locale:"fr-FR",name:"Protection",desc:"Réduit les dégâts subis.",level:["-6% de dégâts reçus","-11% de dégâts reçus","-15% de dégâts reçus"]},{locale:"en-EN",name:"Protection",desc:"Reduces damage taken",level:["-6% damage taken","-11% damage taken","-15% damage taken"]}]},{id:"Punch",type:["Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Repoussoir",desc:"Booste le renvoi de flèches.",level:["Renvoi de +200%","Renvoi de +300%","Renvoi de +400%"]},{locale:"en-EN",name:"Punch",desc:"Boosts arrow pushback.",level:["+200% pushback","+300% pushback","+400% pushback"]}]},{id:"RadianceMelee",type:["Melee"],tier:"Powerful",i18n:[{locale:"fr-FR",name:"Flamboyance",desc:"A une chance de 20% de créer une zone circulaire qui soigne les alliés qui s'y trouvent.",level:["{AMOUNT} de régénération de santé","{AMOUNT} de régénération de santé","{AMOUNT} de régénération de santé"]},{locale:"en-EN",name:"Radiance",desc:"Has a 20% chance to spawn a circular area that heals all allies within it.",level:["{AMOUNT} health healed","{AMOUNT} health healed","{AMOUNT} health healed"]}]},{id:"RadianceRanged",type:["Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Tir flamboyant",desc:"A unechance de 50% de créer une zone circulaire qui soigne tous les alliés qui s'y trouvent.",level:["{AMOUNT} de régénération de santé","{AMOUNT} de régénération de santé","{AMOUNT} de régénération de santé"]},{locale:"en-EN",name:"Radiance",desc:"Has a 50% chance to spawn a circular area that heals all allies within it.",level:["{AMOUNT} health healed","{AMOUNT} health healed","{AMOUNT} health healed"]}]},{id:"Rampaging",type:["Melee"],tier:"Common",i18n:[{locale:"fr-FR",name:"Fureur",desc:"Après avoir vaincu une créature, a une chance de 10% d'augmenter votre vitesse d'attaque de +50% pendant une courte durée.",level:["Durée de 5 secondes","Durée de 10 secondes","Durée de 15 secondes"]},{locale:"en-EN",name:"Rampaging",desc:"After defeating a mob, there is a 10% chance to increase your attack speed by +50% for a short time.",level:["5 seconds duration","10 seconds duration","15 seconds duration"]}]},{id:"RapidFire",type:["Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Feu rapide",desc:"Augmente votre vitesse d'attaque.",level:["Vitesse d'attaque augmentée de +10%","Vitesse d'attaque augmentée de +15%","Vitesse d'attaque augmentée de +20%"]},{locale:"en-EN",name:"Rapid fire",desc:"Increases your attack speed.",level:["+10% attack speed","+15% attack speed","+20% attack speed"]}]},{id:"Recycler",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Recycleur",desc:"Être touché par des projectiles infligeant des dégats créera parfois un petit carquois de flèches.",level:["Tous les 30 projectiles","Tous les 20 projectiles","Tous les 10 projectiles"]},{locale:"en-EN",name:"Recycler",desc:"Being hit by damage-inflicting projectiles will occasionally craft a small quiver of arrows.",level:["Every 30th projectile","Every 20th projectile","Every 10th projectile"]}]},{id:"Ricochet",type:["Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Ricochet",desc:"Petite chance pour que les flèches rocochent contre les créatures.",level:["20% chance de se déclencher","40% chance de se déclencher","60% chance de se déclencher"]},{locale:"en-EN",name:"Ricochet",desc:"Small chance for arrows to ricochet off mobs.",level:["20% chance to trigger","40% chance to trigger","60% chance to trigger"]}]},{id:"Sharpness",type:["Melee"],tier:"Common",i18n:[{locale:"fr-FR",name:"Tranchant",desc:"Rend votre arme plus tranchante en lui faisant infliger plus de dégâts.",level:["Augmentation des dégâts de +10%","Augmentation des dégâts de +21%","Augmentation des dégâts de +33%"]},{locale:"en-EN",name:"Sharpness",desc:"Makes your weapon sharper, causing it to deal more damage.",level:["+10% increased damage","+21% increased damage","+33% increased damage"]}]},{id:"Shockwave",type:["Melee"],tier:"Powerful",i18n:[{locale:"fr-FR",name:"Onde de choc",desc:"La dernière attaque d'un combo génère une onde de choc ingligeant des dégats aux ennemis.",level:["Inglige {AMOUNT} de dégâts","Inglige {AMOUNT} de dégâts","Inglige {AMOUNT} de dégâts"]},{locale:"en-EN",name:"Shockwave",desc:"The last attack in acombo launches a shockwave, damaging enemies.",level:["Deals {AMOUNT} damage","Deals {AMOUNT} damage","Deals {AMOUNT} damage"]}]},{id:"Smiting",type:["Melee","Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Frappe",desc:"Augmente les dégats conter les morts-vivants.",level:["Augmente les dégâts de 20%","Augmente les dégâts de 30%","Augmente les dégâts de 40%"]},{locale:"en-EN",name:"Smiting",desc:"Increase damage against the undead.",level:["+20% increased damage","+30% increased damage","+40% increased damage"]}]},{id:"Snowing",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Boule de neige",desc:"Projette une boulle de neige vers un ennemie à proximité, l'étourdissant brièvement.",level:["Se déclenche toutes les 5 secondes","Se déclenche toutes les 3 secondes","Se déclenche toutes les seconde"]},{locale:"en-EN",name:"Snowball",desc:"Fires a snowball at a nearby enemy every few seconds, briefly stunning it.",level:["Triggers every 5 seconds","Triggers every 3 seconds","Triggers every second"]}]},{id:"SoulSiphon",type:["Melee","Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Siphon d'âmes",desc:"Lorsque vous frappez un ennemi, vous donne 5% de chance de recevoir des âmes supplémentaires.",level:["2 âmes","4 âmes","6 âmes"]},{locale:"en-EN",name:"Soul siphon",desc:"When you hit an enemy, gain a 5% chance to grant you a bunch of extra souls.",level:["2 souls","4 souls","6 souls"]}]},{id:"SpeedSynergy",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Synergie de vitesse",desc:"Vous gagnez +20% en vitesse de mouvement pendant une courte période en activant un artéfact.",level:["Durée de 1 seconde","Durée de 2 secondes","Durée de 3 secondes"]},{locale:"en-EN",name:"Speed synergy",desc:"When activating any artifact, you gain +20% movement speed for a short time.",level:["1 second duration","2 seconds duration","3 seconds duration"]}]},{id:"SpiritSpeed",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Agilité des âmes",desc:"Lorsque vous collectez une âme, vous gagnez un boost de 5% vitesse de mouvement d'empilement pendant une courte période.",level:["Durée de 3 secondes","Durée de 5 secondes","Durée de 7 secondes"]},{locale:"en-EN",name:"Soul speed",desc:"When you gather a soul, you gain a 5% stacking movement speed boost for a short time.",level:["3 seconds duration","5 seconds duration","7 seconds duration"]}]},{id:"Stunning",type:["Melee"],tier:"Common",i18n:[{locale:"fr-FR",name:"Étourdi",desc:"Chance d'étourdir temporairement les ennemis.",level:["5% de chance de se déclencher","10% de chance de se déclencher","15% de chance de se déclencher"]},{locale:"en-EN",name:"Stunning",desc:"Chance to temporarily stun enemies.",level:["5% chance to trigger","10% chance to trigger","15% chance to trigger"]}]},{id:"Supercharge",type:["Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Supercharge",desc:"Les tirs chargés font plus de dégâts et entraînent plus de recul.",level:["Augmentation des dégâts de +20%","Augmentation des dégâts de +30%","Augmentation des dégâts de +40%"]},{locale:"en-EN",name:"Supercharge",desc:"Charged shots deal more damage and have more pushback.",level:["+20% increased damage","+30% increased damage","+40% increased damage"]}]},{id:"SurpriseGift",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Cadeau surprise",desc:"Quand vous utilisez une potion de soin, vous créez parfois des consommables au hasard.",level:["50% de chance de se déclencher","100% de chance de se déclencher","150% de chance de se déclencher"]},{locale:"en-EN",name:"Surprise gift",desc:"Whenever you use a healing potion, you sometimes create random consumables.",level:["50% chance to trigger","100% chance to trigger","150% chance to trigger"]}]},{id:"Swiftfooted",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Agile des pieds",desc:"Rouler vous fait bouger plus rapidement pendant trois secondes.",level:["Vitesse de mouvement augmentée de +30%","Vitesse de mouvement augmentée de +40%","Vitesse de mouvement augmentée de +50%"]},{locale:"en-EN",name:"Swiftfooted",desc:"Rolling makes you move faster for three seconds.",level:["+30% movement speed","+40% movement speed","+50% movement speed"]}]},{id:"Swirling",type:["Melee"],tier:"Powerful",i18n:[{locale:"fr-FR",name:"Tourbillonement",desc:"Lorsqu'elle frappe un ennemi, la dernière attaque d'un combo est un tourbillonement qui inflige des dégâts aux ennemis proches.",level:["Inglige {AMOUNT} dégâts","Inglige {AMOUNT} dégâts","Inglige {AMOUNT} dégâts"]},{locale:"en-EN",name:"Swirling",desc:"Hitting an enemy with the last attack in a combo performs a swirling attack, damaging nearby enemies.",level:["Deals {AMOUNT} damage","Deals {AMOUNT} damage","Deals {AMOUNT} damage"]}]},{id:"TempoTheft",type:["Ranged"],tier:"Powerful",i18n:[{locale:"fr-FR",name:"Vol de vitesse",desc:"Vole une petite portion de la vitesse de mouvement d'une créature pour vous l'accorder pendant quatre secondes.",level:["17% de vitesse de déplacement volée","33% de vitesse de déplacement volée","50% de vitesse de déplacement volée"]},{locale:"en-EN",name:"Tempo theft",desc:"Steals a small amount of a mob's movement speed and gives it to you for four seconds.",level:["17% stolen speed","33% stolen speed","50% stolen speed"]}]},{id:"Thorns",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Épines",desc:"Vous infligez des dégats lorsque l'adversaire vous en inflige.",level:["100% de dégâts infligés","150% de dégâts infligés","200% de dégâts infligés"]},{locale:"en-EN",name:"Thorns",desc:"Whenever you take damage, you deal damage back to the attacker.",level:["100% damage returned","150% damage returned","200% damage returned"]}]},{id:"Thundering",type:["Melee"],tier:"Common",i18n:[{locale:"fr-FR",name:"Tonnerre",desc:"A une chance de 30% de déclencher un éclair qui inflige des dgâts aux ennemis à proximité.",level:["Inflige {AMOUNT} dégâts","Inflige {AMOUNT} dégâts","Inflige {AMOUNT} dégâts"]},{locale:"en-EN",name:"Thundering",desc:"Has a 30% chance to summon a lightning strike that damages nearby enemies.",level:["Deals {AMOUNT} damage","Deals {AMOUNT} damage","Deals {AMOUNT} damage"]}]},{id:"TumbleBee",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Essaim d'abeilles",desc:"Possibilité d'invoquer une abeille lorsque vous esquivez : jusqu'à 3 abeilles se rangent à vos côtés.",level:["33% de possibilité d'invoquer","67% de possibilité d'invoquer","100% de possibilité d'invoquer"]},{locale:"en-EN",name:"Tumble bee",desc:"Chance to summon a bee when you roll, with up to 3 bees joining your side.",level:["33% chance to summon","67% chance to summon","100% chance to summon"]}]},{id:"Unchanting",type:["Melee","Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Peu enchantant",desc:"Les projectiles infligent plus de dégats aux ennemies enchantés.",level:["+50 de dégâts","+75 de dégâts","+100 de dégâts"]},{locale:"en-EN",name:"Unchanting",desc:"Projectiles deal more damage to enchanted enemies.",level:["+50% bonus damage","+75% bonus damage","+100% bonus damage"]}]},{id:"Unset",type:["Armor","Melee","Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Non défini",desc:"Vous pouvez changer cet enchantement en cliquant sur son nom ci-dessus.",level:["","",""]},{locale:"en-EN",name:"Unset",desc:"You can change this enchantment by clicking his name just above.",level:["","",""]}]},{id:"Weakening",type:["Melee","Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Affaiblissement",desc:"Vos attaques réduisent les points d'attaque de tous les ennemis à proximité pendant cinq secondes.",level:["Dégâts des ennemis réduits de -20%","Dégâts des ennemis réduits de -30%","Dégâts des ennemis réduits de -40%"]},{locale:"en-EN",name:"Weakening",desc:"Your attacks decrease the attack damage of all nearby enemies for five seconds.",level:["-20% reduced damage","-30% reduced damage","-40% reduced damage"]}]},{id:"WildRage",type:["Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Rage intense",desc:"Frapper un ennemi est susceptible de le rendre enragé, ce qui peut le rendre hostile à tout le monde.",level:["20% chance de se déclencher","30% chance de se déclencher","40% chance de se déclencher"]},{locale:"en-EN",name:"Wild rage",desc:"Hitting an enemy has a chance to send it into a rage, making it hostile towards everyone.",level:["20% chance to trigger","30% chance to trigger","40% chance to trigger"]}]},{id:"BaneOfIllagers",dlcId:"Howling Peaks",type:["Melee"],tier:"Common",i18n:[{locale:"fr-FR",name:"Fléau des illageois",desc:"Les attaques infligent des dégâts supplémetaires aux illageois.",level:["Augmentation des dégâts de +20%","Augmentation des dégâts de +30%","Augmentation des dégâts de +40%"]},{locale:"en-EN",name:"Illager's bane",desc:"Attacks deal extra damage to illagers.",level:["+20% increased damage","+30% increased damage","+40% increased damage"]}]},{id:"DeathBarter",dlcId:"Howling Peaks",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Troc mortel",desc:"La première quantité définie d'émeraudes collectées est stockée, puis dépensée pour sauver le joueur de la mort.",level:["Coûte 150 émeraudes","Coûte 100 émeraudes","Coûte 50 émeraudes"]},{locale:"en-EN",name:"Death barter",desc:"The first amount of emeralds collected are stored and then spent to save the player from death.",level:["Costs 150 emeralds","Costs 100 emeralds","Costs 50 emeralds"]}]},{id:"EmeraldDivination",dlcId:"Howling Peaks",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Explorateur chanceux",desc:"Chance de faire apparaître des émeraudes pour chaque bloc exploré.",level:["1 émeraude émerge","2 émeraudes émergent","3 émeraudes émergent"]},{locale:"en-EN",name:"Lucky explorer",desc:"Chance to spawn emeralds with every block explored.",level:["1 emerald spawned","2 emeralds spawned","3 emeralds spawned"]}]},{id:"MultiDodge",dlcId:"Howling Peaks",type:["Armor"],tier:"Powerful",i18n:[{locale:"fr-FR",name:"Roulade multiple",desc:"Accorde des roulades supplémentaires.",level:["Accorde 2 roulades","Accorde 3 roulades","Accorde 4 roulades"]},{locale:"en-EN",name:"Multi-roll",desc:"Grants extra rolls.",level:["Grants 2 rolls","Grants 3 rolls","Grants 4 rolls"]}]},{id:"ResurrectionSurge",dlcId:"Howling Peaks",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Boost de vie",desc:"Chaque fois que vous erdez une vie, votre santé maximale augmente.",level:["11% de santé supplémentaire","22% de santé supplémentaire","33% de santé supplémentaire"]},{locale:"en-EN",name:"Life boost",desc:"Each time you expend a life, your maximum health increases.",level:["11% extra health","22% extra health","33% extra health"]}]},{id:"RollCharge",dlcId:"Howling Peaks",type:["Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Chargement par roulade",desc:"Lorsque vous effectuez une roulade, votre prochaine attaque à distance dans la fenêtre de temps sera entièrement chargée automatiquement.",level:["Tir chargé pour 1 seconde","Tir chargé pour 2 secondes","Tir chargé pour 3 secondes"]},{locale:"en-EN",name:"Roll charge",desc:"When you perform a roll, your next ranged attack within the timing window will automatically be fully charged.",level:["Charged shot for 1 second","Charged shot for 2 seconds","Charged shot for 3 seconds"]}]},{id:"ArtifactCharge",dlcId:"Flames of the Nether",type:["Ranged"],tier:"Powerful",i18n:[{locale:"fr-FR",name:"Charge d'artéfact",desc:"Chaque fois que vous utilisez un artéfact, vos prochaines attaques sont chargées.",level:["La prochaine attaque chargée","Les 2 prochaines attaques chargées","Les 3 prochaines attaques chargées"]},{locale:"en-EN",name:"Artifact charge",desc:"Whenever you use an artifact, your next few attacks become charged.",level:["Next attack charged","Next 2 attacks charged","Next 3 attacks charged"]}]},{id:"BeastBoss",dlcId:"Flames of the Nether",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Boss bestiale",desc:"Vos familiers infligent plus de dégâts.",level:["Les familiers infligent 20% de dégâts en plus","Les familiers infligent 30% de dégâts en plus","Les familiers infligent 40% de dégâts en plus"]},{locale:"en-EN",name:"Beast boss",desc:"Your pets deal more damages.",level:["Pets deal 20% more damages","Pets deal 30% more damages","Pets deal 40% more damages"]}]},{id:"BeastBurst",dlcId:"Flames of the Nether",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Explosion bestiale",desc:"Utiliser une potion de soin provoque une explosion à l'emplacement de vos familiers, infligeant des dégâts aux créatures autour d'eux.",level:["{AMOUNT} de dégâts d'explosion","{AMOUNT} de dégâts d'explosion","{AMOUNT} de dégâts d'explosion"]},{locale:"en-EN",name:"Beast burst",desc:"Using an healing potion causes an explosion at your pet's location, dealing damage to mobs around them.",level:["{AMOUNT} explosion damage","{AMOUNT} explosion damage","{AMOUNT} explosion damage"]}]},{id:"BeastSurge",dlcId:"Flames of the Nether",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Poussée bestiale",desc:"Utiliser une potion de soin augment l'attaque et la vitesse de mouvement de vos familiers pendant 10 secondes.",level:["Attaque et vitesse des familiers : +50%","Attaque et vitesse des familiers : +100%","Attaque et vitesse des familiers : +150%"]},{locale:"en-EN",name:"Beast surge",desc:"Using your health potion boosts your pet's attack and move speed for 10 seconds.",level:["Pet's attack and speed +50%","Pet's attack and speed +100%","Pet's attack and speed +150%"]}]},{id:"CooldownShot",dlcId:"Flames of the Nether",type:["Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Tir de recharge",desc:"Lorsque vous attaquez avec un tir chargé, les temps de recharge des artéfacts sont diminués.",level:["Réduction du temps de recharge de 0.5 seconde","Réduction du temps de recharge de 1.0 seconde","Réduction du temps de recharge de 1.5 secondes"]},{locale:"en-EN",name:"Cooldown shot",desc:"When you attack with a charged shot, artifact cooldowns are decreased.",level:["0.5 second cooldown reduction","1.0 second cooldown reduction","1.5 seconds cooldown reduction"]}]},{id:"DamageSynergy",dlcId:"Flames of the Nether",type:["Melee"],tier:"Common",i18n:[{locale:"fr-FR",name:"Synergie d'artéfacts",desc:"Chaque fois que vous utilisez un artéfact, votre prochaine attaque inflige des dégâts supplémentaires.",level:["Inflige 40% de dégâts supplémentaires","Inflige 60% de dégâts supplémentaires","Inflige 80% de dégâts supplémentaires"]},{locale:"en-EN",name:"Artifact synergy",desc:"Whenever you use an artifact, your next attack deals bonus damage.",level:["Deals 40% extra damage","Deals 60% extra damage","Deals 80% extra damage"]}]},{id:"FireFocus",dlcId:"Flames of the Nether",type:["Armor"],tier:"Powerful",i18n:[{locale:"fr-FR",name:"Concentration des flammes",desc:"Les dégâts de feu que vous infligez sont augmentés.",level:["Augmentation des dégâts de feu de +25%","Augmentation des dégâts de feu de +50%","Augmentation des dégâts de feu de +75%"]},{locale:"en-EN",name:"FireFocus",desc:"The fire damage you deal is increased.",level:["+25% increased fire damage","+50% increased fire damage","+75% increased fire damage"]}]},{id:"LightningFocus",dlcId:"Flames of the Nether",type:["Armor"],tier:"Powerful",i18n:[{locale:"fr-FR",name:"Concentration d'éclairs",desc:"Les dégâts de foudre que vous infligez sont augmentés.",level:["Augmentation des dégâts de foudre de +25%","Augmentation des dégâts de foudre de +50%","Augmentation des dégâts de foudre de +75%"]},{locale:"en-EN",name:"Lightning focus",desc:"The lightning damage you deal is increased.",level:["+25% increased lightning damage","+50% increased lightning damage","+75% increased lightning damage"]}]},{id:"PainCycle",dlcId:"Flames of the Nether",type:["Melee"],tier:"Common",i18n:[{locale:"fr-FR",name:"Douleur récurrente",desc:"Attaquer draine votre vie pour vous ocroyer une pile de Douleur récurrente. Au bout de 5 piles, votre douleur est canalisée dans votre prochaine attaque.",level:["Les piles max infligent triple dégâts","Les piles max infligent quadruple dégâts","Les piles max infligent quintuple dégâts"]},{locale:"en-EN",name:"Pain Cycle",desc:"Attacking drains your life to grant you one stack of Pain Cycle. At 5 stacks, your pain is channeled into your next attack.",level:["Max stack does triple damage","Max stack does quadruple damage","Max stack does quintuple damage"]}]},{id:"PoisonFocus",dlcId:"Flames of the Nether",type:["Armor"],tier:"Powerful",i18n:[{locale:"fr-FR",name:"Concentration de poison",desc:"Les dégâts de poison que vous infligez sont augmentés.",level:["Augmentation des dégâts de poison +25%","Augmentation des dégâts de poison +50%","Augmentation des dégâts de poison +75%"]},{locale:"en-EN",name:"Poison focus",desc:"The poison daamge you deal is increased.",level:["+25% increased poison damage","+50% increased poison damage","+75% increased poison damage"]}]},{id:"Reckless",dlcId:"Flames of the Nether",type:["Armor"],tier:"Powerful",i18n:[{locale:"fr-FR",name:"Téméraire",desc:"Votre santé est réduite de -60%, mais vos dégâts au corps à corps sont augmentés.",level:["Dégâts au corps à corps +40%","Dégâts au corps à corps +60%","Dégâts au corps à corps +80%"]},{locale:"en-EN",name:"Reckless",desc:"Your health is reduced by -60%, but your melee damage is increased.",level:["Melee damage +40%","Melee damage +60%","Melee damage +80%"]}]},{id:"ShockWeb",dlcId:"Flames of the Nether",type:["Ranged"],tier:"Powerful",i18n:[{locale:"fr-FR",name:"Toile électrique",desc:"Des faisceaux électriques relient les dernières flèches chargées tirées, ce qui inflige des dégâts de foudre aux ennemis qui les touchent.",level:["Jusqu'à 1 faisceau","Jusqu'à 2 faisceaux","Jusqu'à 3 faisceaux"]},{locale:"en-EN",name:"Shock web",desc:"Beams of lightning connect the last few charged arrows fired, which deal lightning damage to ennemies who touch a beam.",level:["Up to 1 beam","Up to 2 beams","Up to 3 beams"]}]},{id:"SoulFocus",dlcId:"Flames of the Nether",type:["Armor"],tier:"Powerful",i18n:[{locale:"fr-FR",name:"Concentration d'âmes",desc:"Augmente le nombre de dégâts d'âmes que vous infligez.",level:["Augmentation des dégâts d'âme de +10%","Augmentation des dégâts d'âme de +20%","Augmentation des dégâts d'âme de +30%"]},{locale:"en-EN",name:"Soul focus",desc:"Increases the amount of soul damage you deal.",level:["+10% increased soul damage","+20% increased soul damage","+30% increased soul damage"]}]},{id:"Flee",dlcId:"Hidden Depths",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Hâte",desc:" Augmente la vitesse de mouvement pendant une seconde après avoir subi des dégâts.",level:["Vitesse de mouvement +30%","Vitesse de mouvement +60%","Vitesse de mouvement +90%"]},{locale:"en-EN",name:"Rush",desc:"Increase movement speed for one second after taking damage.",level:["+30% movement speed","+60% movement speed","+90% movement speed"]}]},{id:"GuardingStrike",dlcId:"Hidden Depths",type:["Melee"],tier:"Common",i18n:[{locale:"fr-FR",name:"Frappe défensive",desc:"Lorsque vous terrassez une créature, vous obtenez un bouclier temporaire qui réduit les dégâts de 50%.",level:["Durée du bouclier de 2 secondes","Durée du bouclier de 3 secondes","Durée du bouclier de 4 secondes"]},{locale:"en-EN",name:"Guarding strike",desc:"When you defeat a mob, you are given a temporary shield that reduces damage by 50%.",level:["2 seconds shield duration","3 seconds shield duration","4 seconds shield duration"]}]},{id:"LuckOfTheSea",dlcId:"Hidden Depths",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Chance de la mer",desc:"Augmente votre chance, ce qui accroît la probabilité que vos butins rares deviennent uniques.",level:["10% d'augmentation de chance","20% d'augmentation de chance","30% d'augmentation de chance"]},{locale:"en-EN",name:"Luck of the sea",desc:"Increase your luck, which boosts the chance that rare drops become unique.",level:["10% luck increase","20% luck increase","30% luck increase"]}]},{id:"MultiCharge",dlcId:"Hidden Depths",type:["Ranged"],tier:"Powerful",i18n:[{locale:"fr-FR",name:"Surcharge",desc:"Maintenez le bouton d'attaque à distance pour doubler, tripler ou quadrupler la charge de votre arc, augmente ainsi ses dégâts à chaque fois.",level:["Peut charger l'arme 2 fois","Peut charger l'arme 3 fois","Peut charger l'arme 4 fois"]},{locale:"en-EN",name:"Overcharge",desc:"Continue to hold ranged attack button to double, triple or quadruple charge your bow, increasing its damage each time.",level:["Can charge weapon 2 times","Can charge weapon 3 times","Can charge weapon 4 times"]}]},{id:"PotionThirstMelee",dlcId:"Hidden Depths",type:["Melee"],tier:"Powerful",i18n:[{locale:"fr-FR",name:"Ravitaillement",desc:"Vaincre une créature réduit le temps de recharge de votre potion de soins, elle sera disponible plus rapidement.",level:["Réduction du temps de recharge de 1 seconde","Réduction du temps de recharge de 2 secondes","Réduction du temps de recharge de 3 secondes"]},{locale:"en-EN",name:"Refreshment",desc:"Defeat a mob reduces your health potion's cooldown, allowing you to heal again more quickly.",level:["1 second cooldown reduction","2 seconds cooldown reduction","3 seconds cooldown reduction"]}]},{id:"PotionThirstRanged",dlcId:"Hidden Depths",type:["Ranged"],tier:"Powerful",i18n:[{locale:"fr-FR",name:"Ravitaillement",desc:"Vaincre une créature réduit le temps de recharge de votre potion de soins, elle sera disponible plus rapidement.",level:["Réduction du temps de recharge de 1 seconde","Réduction du temps de recharge de 2 secondes","Réduction du temps de recharge de 3 secondes"]},{locale:"en-EN",name:"Refreshment",desc:"Defeat a mob reduces your health potion's cooldown, allowing you to heal again more quickly.",level:["1 second cooldown reduction","2 seconds cooldown reduction","3 seconds cooldown reduction"]}]},{id:"Backstabber",dlcId:"Echoing Void",type:["Melee"],tier:"Common",i18n:[{locale:"fr-FR",name:"Embuscade",desc:"Attaquer les créatures qui ne vous ciblent pas activement augmente les dégâts infligés.",level:["Bonus de dégâts de 15%","Bonus de dégâts de 30%","Bonus de dégâts de 45%"]},{locale:"en-EN",name:"Ambush",desc:"Attacks on mobs that are not actively targeting you deal increased damages.",level:["15% damages bonus","30% damages bonus","45% damages bonus"]}]},{id:"DippingPoison",dlcId:"Echoing Void",type:["Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Imprégné de poison",desc:"Lorsque vous utilisez une potion de soins, vous recevez un carquois de flèches empoisonnées.",level:["4 flèches empoisonnées","6 flèches empoisonnées","8 flèches empoisonnées"]},{locale:"en-EN",name:"Dipping poison",desc:"When you use a health potion, you are given a quiver of poison arrows.",level:["4 poison arrows","6 poison arrows","8 poison arrows"]}]},{id:"LevitationShot",dlcId:"Echoing Void",type:["Ranged"],tier:"Common",i18n:[{locale:"fr-FR",name:"Tir de lévitation",desc:"Après une roulade, votre prochaine attaque fera léviter brièvement la cible.",level:["100% dégâts de chute","200% dégâts de chute","300% dégâts de chute"]},{locale:"en-EN",name:"Levitation shot",desc:"After rolling, your next attack will cause the target to levitate briefly.",level:["100% fall damage","200% fall damage","300% fall damage"]}]},{id:"ShadowFeast",dlcId:"Echoing Void",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Afflux d'ombre",desc:"Les créature vaincues sous votre forme d'ombre vous octroient des âmes supplémentaires.",level:["6 âmes par créature","12 âmes par créature","16 âmes par créature"]},{locale:"en-EN",name:"Shadow surge",desc:"Mobs defeated while in shadow form grant extra souls.",level:["6 souls per mob","12 souls per mob","16 souls per mob"]}]},{id:"ShadowFlash",dlcId:"Echoing Void",type:["Armor"],tier:"Common",i18n:[{locale:"fr-FR",name:"Explosion d'ombre",desc:"Quitter votre form d'ombre déclenche une puissante explosion qui inflige des dégâts aux créatures proches.",level:["Rayon d'explosion de 2 blocs","Rayon d'explosion de 3 blocs","Rayon d'explosion de 4 blocs"]},{locale:"en-EN",name:"Shadow blast",desc:"Leaving shadow form triggers a powerful blast that damages nearby mobs.",level:["2 blocks blast radius","3 blocks blast radius","4 blocks blast radius"]}]},{id:"VoidTouchedMelee",dlcId:"Echoing Void",type:["Melee"],tier:"Powerful",i18n:[{locale:"fr-FR",name:"Frappe du vide",desc:"Attaquer une cible applique un multiplicateur de dégâts qui augmente progressivement jusqu'à un niveau max, puis est retiré.",level:["Multiplicateur de dégâts max de +200%","Multiplicateur de dégâts max de +400%","Multiplicateur de dégâts max de +600%"]},{locale:"en-EN",name:"Void strike",desc:"Attacking a target applies a damage multiplier that rises steadily to a max level, then is removed.",level:["+200% max damage multiplier","+400% max damage multiplier","+600% max damage multiplier"]}]},{id:"VoidTouchedRanged",dlcId:"Echoing Void",type:["Ranged"],tier:"Powerful",i18n:[{locale:"fr-FR",name:"Frappe du vide",desc:"Attaquer une cible applique un multiplicateur de dégâts qui augmente progressivement jusqu'à un niveau max, puis est retiré.",level:["Multiplicateur de dégâts max de +100%","Multiplicateur de dégâts max de +200%","Multiplicateur de dégâts max de +300%"]},{locale:"en-EN",name:"Void strike",desc:"Attacking a target applies a damage multiplier that rises steadily to a max level, then is removed.",level:["+100% max damage multiplier","+200% max damage multiplier","+300% max damage multiplier"]}]}];async function KM(){return GM.map(n=>({dataValues:{...n,i18n:n.i18n.map(e=>({dataValues:e}))}}))}const YM=Object.freeze(Object.defineProperty({__proto__:null,findAll:KM},Symbol.toStringTag,{value:"Module"})),QM=[{id:"Spooky Fall",startedAt:"2020-10-26",endedAt:"2020-11-03"},{id:"Chills and Thrills",startedAt:"2020-12-18",endedAt:"2020-12-30"},{id:"First Year Anniversary",startedAt:"2021-05-26",endedAt:"2021-06-13"},{id:"Spookier Fall",startedAt:"2021-10-13",endedAt:"2021-11-02"},{id:"Festival of Frost",startedAt:"2022-02-08",endedAt:"2022-02-22"},{id:"Second Year Anniversary",startedAt:"2022-05-25",endedAt:"2022-06-15"},{id:"Spooky Fall 22",startedAt:"2022-10-26",endedAt:"2022-11-09"}];async function XM(){return QM.map(n=>({dataValues:{...n,startedAt:new Date(n.startedAt),endedAt:new Date(n.endedAt)}}))}const JM=Object.freeze(Object.defineProperty({__proto__:null,findAll:XM},Symbol.toStringTag,{value:"Module"})),ZM=[{id:"Axe",type:"Melee",rarity:["Common","Rare"],ancientHuntRunes:["i"],stats:{power:6.29,speed:1.91,area:3.75},i18n:[{locale:"fr-FR",name:"Hache"},{locale:"en-EN",name:"Axe"}]},{id:"Axe_Unique1",type:"Melee",rarity:["Unique"],ancientHuntRunes:["i","a"],stats:{power:6.29,speed:1.91,area:3.75},i18n:[{locale:"fr-FR",name:"Tison"},{locale:"en-EN",name:"Firebrand"}]},{id:"Axe_Unique2",type:"Melee",rarity:["Unique"],activeEnchants:["Stunning"],ancientHuntRunes:["s","i"],stats:{power:6.29,speed:1.91,area:3.75},i18n:[{locale:"fr-FR",name:"Hache highlandaise"},{locale:"en-EN",name:"Highland axe"}]},{id:"Battlestaff",type:"Melee",rarity:["Common","Rare"],ancientHuntRunes:["i"],stats:{power:6.47,speed:2.95,area:3.7},i18n:[{locale:"fr-FR",name:"Bâton de combat"},{locale:"en-EN",name:"Battlestaff"}]},{id:"Battlestaff_Unique1",type:"Melee",rarity:["Unique"],activeEnchants:["Committed"],ancientHuntRunes:["i"],stats:{power:6.49,speed:2.63,area:4.65},i18n:[{locale:"fr-FR",name:"Bâton de croissance"},{locale:"en-EN",name:"Growing staff"}]},{id:"Battlestaff_Unique2",type:"Melee",rarity:["Unique"],activeEnchants:["Exploding"],ancientHuntRunes:["i","a"],stats:{power:6.49,speed:2.63,area:3.68},i18n:[{locale:"fr-FR",name:"Bâton de combat de la terreur"},{locale:"en-EN",name:"Battlestaff of terror"}]},{id:"Claymore",type:"Melee",rarity:["Common","Rare"],ancientHuntRunes:["t"],stats:{power:9.96,speed:1,area:6},i18n:[{locale:"fr-FR",name:"Claymore"},{locale:"en-EN",name:"Claymore"}]},{id:"Claymore_Unique1",type:"Melee",rarity:["Unique"],ancientHuntRunes:["i","t"],stats:{power:9.96,speed:1,area:6},i18n:[{locale:"fr-FR",name:"Voleur de cœur"},{locale:"en-EN",name:"Heartstealer"}]},{id:"Claymore_Unique2",type:"Melee",rarity:["Unique"],ancientHuntRunes:["i","t"],stats:{power:9.96,speed:1,area:6},i18n:[{locale:"fr-FR",name:"Broadsword"},{locale:"en-EN",name:"Broadsword"}]},{id:"Claymore_Unique3",type:"Melee",rarity:["Unique"],activeEnchants:["DynamoMelee"],ancientHuntRunes:["c","t"],stats:{power:9.96,speed:1,area:6},i18n:[{locale:"fr-FR",name:"Hache majestueuse"},{locale:"en-EN",name:"Great axeblade"}]},{id:"Claymore_Winter1",events:["Chills and Thrills","Festival of Frost"],type:"Melee",rarity:["Unique"],ancientHuntRunes:["i","t"],stats:{power:9.96,speed:1,area:6},i18n:[{locale:"fr-FR",name:"Tranche-givre"},{locale:"en-EN",name:"Frost slayer"}]},{id:"Cutlass",type:"Melee",rarity:["Common","Rare"],ancientHuntRunes:["i"],stats:{power:4.26,speed:3.49,area:4.58},i18n:[{locale:"fr-FR",name:"Coutelas"},{locale:"en-EN",name:"Cutlass"}]},{id:"Cutlass_Unique1",type:"Melee",rarity:["Unique"],ancientHuntRunes:["s","i"],stats:{power:4.26,speed:3.49,area:4.58},i18n:[{locale:"fr-FR",name:"Lame sans nom"},{locale:"en-EN",name:"Nameless blade"}]},{id:"Cutlass_Unique2",type:"Melee",rarity:["Unique"],ancientHuntRunes:["c","i"],stats:{power:4.26,speed:3.49,area:4.58},i18n:[{locale:"fr-FR",name:"Épée de danseur"},{locale:"en-EN",name:"Dancer's sword"}]},{id:"Cutlass_Year1",events:["First Year Anniversary","Second Year Anniversary"],type:"Melee",rarity:["Unique"],activeEnchants:["Rampaging"],ancientHuntRunes:["c","i"],stats:{power:4.26,speed:3.49,area:4.58},i18n:[{locale:"fr-FR",name:"Étinceleur"},{locale:"en-EN",name:"Sparkler"}]},{id:"Daggers",type:"Melee",rarity:["Common","Rare"],ancientHuntRunes:["i"],stats:{power:2.93,speed:7.2,area:1.86},i18n:[{locale:"fr-FR",name:"Dagues"},{locale:"en-EN",name:"Daggers"}]},{id:"Daggers_Unique1",type:"Melee",rarity:["Unique"],activeEnchants:["Freezing"],ancientHuntRunes:["i","t"],stats:{power:2.93,speed:7.2,area:1.86},i18n:[{locale:"fr-FR",name:"Mâchoires du froid"},{locale:"en-EN",name:"Fangs of frost"}]},{id:"Daggers_Unique2",type:"Melee",rarity:["Unique"],activeEnchants:["EnigmaResonatorMelee"],ancientHuntRunes:["s","i"],stats:{power:2.93,speed:7.2,area:1.86},i18n:[{locale:"fr-FR",name:"Dagues lunaires"},{locale:"en-EN",name:"Moon daggers"}]},{id:"Daggers_Unique3",type:"Melee",rarity:["Unique"],activeEnchants:["Swirling"],ancientHuntRunes:["i"],stats:{power:2.93,speed:7.2,area:1.86},i18n:[{locale:"fr-FR",name:"Dagues de cisaillement"},{locale:"en-EN",name:"Sheer daggers"}]},{id:"DoubleAxe",type:"Melee",rarity:["Common","Rare"],ancientHuntRunes:["i","t"],stats:{power:8.69,speed:1.89,area:12.93},i18n:[{locale:"fr-FR",name:"Labrys"},{locale:"en-EN",name:"Double axe"}]},{id:"DoubleAxe_Unique1",type:"Melee",rarity:["Unique"],activeEnchants:["Shockwave"],ancientHuntRunes:["i","t","a"],stats:{power:8.69,speed:1.89,area:12.93},i18n:[{locale:"fr-FR",name:"Tourbillons"},{locale:"en-EN",name:"Whirlwind"}]},{id:"DoubleAxe_Unique2",type:"Melee",rarity:["Unique"],activeEnchants:["Exploding"],ancientHuntRunes:["i","t","a"],stats:{power:8.69,speed:1.89,area:12.93},i18n:[{locale:"fr-FR",name:"Hache maudite"},{locale:"en-EN",name:"Cursed axe"}]},{id:"Gauntlets",type:"Melee",rarity:["Common","Rare"],ancientHuntRunes:["i"],stats:{power:2.19,speed:6.55,area:1.73},i18n:[{locale:"fr-FR",name:"Gantelets"},{locale:"en-EN",name:"Gauntlets"}]},{id:"Gauntlets_Unique1",type:"Melee",rarity:["Unique"],activeEnchants:["EnigmaResonatorMelee"],ancientHuntRunes:["s","i"],soulgathering:!0,stats:{power:2.19,speed:6.55,area:1.73},i18n:[{locale:"fr-FR",name:"Poings de l'âme"},{locale:"en-EN",name:"Soul fists"}]},{id:"Gauntlets_Unique2",type:"Melee",rarity:["Unique"],ancientHuntRunes:["c","i"],stats:{power:2.19,speed:6.55,area:1.73},i18n:[{locale:"fr-FR",name:"Boxeurs"},{locale:"en-EN",name:"Maulers"}]},{id:"Gauntlets_Unique3",type:"Melee",rarity:["Unique"],ancientHuntRunes:["c","i"],stats:{power:2.04,speed:14,area:1.47},i18n:[{locale:"fr-FR",name:"Bandages de combattant"},{locale:"en-EN",name:"Fighter's bindings"}]},{id:"Glaive",type:"Melee",rarity:["Common","Rare"],ancientHuntRunes:["s"],stats:{power:7.1,speed:1.46,area:6.17},i18n:[{locale:"fr-FR",name:"Hallebarde"},{locale:"en-EN",name:"Glaive"}]},{id:"Glaive_Unique1",type:"Melee",rarity:["Unique"],ancientHuntRunes:["s","i"],stats:{power:7.1,speed:1.46,area:6.17},i18n:[{locale:"fr-FR",name:"Fléau funéraire"},{locale:"en-EN",name:"Grave bane"}]},{id:"Glaive_Unique2",type:"Melee",rarity:["Unique"],activeEnchants:["PoisonedMelee"],ancientHuntRunes:["s","a"],stats:{power:7.1,speed:1.46,area:6.17},i18n:[{locale:"fr-FR",name:"Hallebarde venimeuse"},{locale:"en-EN",name:"Venom glaive"}]},{id:"Glaive_Spooky2",events:["Spookier Fall"],type:"Melee",rarity:["Unique"],activeEnchants:["Smiting"],ancientHuntRunes:["s","i"],stats:{power:7.1,speed:1.46,area:6.17},i18n:[{locale:"fr-FR",name:"Balai ricaneur"},{locale:"en-EN",name:"Crackling broom"}]},{id:"Hammer",type:"Melee",rarity:["Common","Rare"],ancientHuntRunes:["t"],stats:{power:8.69,speed:1,area:7.76},i18n:[{locale:"fr-FR",name:"Grand marteau"},{locale:"en-EN",name:"Great hammer"}]},{id:"Hammer_Unique1",type:"Melee",rarity:["Unique"],activeEnchants:["Thundering"],ancientHuntRunes:["t","a"],stats:{power:8.69,speed:1,area:7.76},i18n:[{locale:"fr-FR",name:"Faiseur de tempêtes"},{locale:"en-EN",name:"Stormlander"}]},{id:"Hammer_Unique2",type:"Melee",rarity:["Unique"],activeEnchants:["GravityMelee"],ancientHuntRunes:["t","a"],stats:{power:8.69,speed:1,area:7.76},i18n:[{locale:"fr-FR",name:"Marteau de la gravité"},{locale:"en-EN",name:"Hammer of gravity"}]},{id:"SkeletonHammer",events:["Spooky Fall 22"],type:"Melee",rarity:["Unique"],activeEnchants:["GravityMelee"],ancientHuntRunes:["t","a"],stats:{power:8.69,speed:1,area:7.76},i18n:[{locale:"fr-FR",name:"Marteau à tête d'os"},{locale:"en-EN",name:"Bonehead hammer"}]},{id:"Katana",type:"Melee",rarity:["Common","Rare"],ancientHuntRunes:["i"],stats:{power:8.24,speed:1.52,area:6.51},i18n:[{locale:"fr-FR",name:"Katana"},{locale:"en-EN",name:"Katana"}]},{id:"Katana_Unique1",type:"Melee",rarity:["Unique"],activeEnchants:["CriticalHit"],ancientHuntRunes:["i"],stats:{power:8.24,speed:1.52,area:6.51},i18n:[{locale:"fr-FR",name:"Katana du maître"},{locale:"en-EN",name:"Master's katana"}]},{id:"Katana_Unique2",type:"Melee",rarity:["Unique"],ancientHuntRunes:["i","a"],stats:{power:8.24,speed:1.52,area:6.51},i18n:[{locale:"fr-FR",name:"Katana sombre"},{locale:"en-EN",name:"Dark katana"}]},{id:"Mace",type:"Melee",rarity:["Common","Rare"],ancientHuntRunes:["i"],stats:{power:6.68,speed:2.03,area:3.17},i18n:[{locale:"fr-FR",name:"Masse"},{locale:"en-EN",name:"Mace"}]},{id:"Mace_Unique1",type:"Melee",rarity:["Unique"],ancientHuntRunes:["s","i"],stats:{power:6.68,speed:2.03,area:3.17},i18n:[{locale:"fr-FR",name:"Grâce du soleil"},{locale:"en-EN",name:"Sun's grace"}]},{id:"Mace_Unique2",type:"Melee",rarity:["Unique"],ancientHuntRunes:["i","a"],stats:{power:6.68,speed:2.03,area:3.17},i18n:[{locale:"fr-FR",name:"Fléau"},{locale:"en-EN",name:"Flail"}]},{id:"Pickaxe",type:"Melee",rarity:["Common","Rare"],ancientHuntRunes:["i"],stats:{power:11.34,speed:1.44,area:2.39},i18n:[{locale:"fr-FR",name:"Pioche"},{locale:"en-EN",name:"Pickaxe"}]},{id:"Pickaxe_Unique1",type:"Melee",rarity:["Unique"],ancientHuntRunes:["i","a"],stats:{power:11.34,speed:1.44,area:2.39},i18n:[{locale:"fr-FR",name:"Pioche en diamant"},{locale:"en-EN",name:"Diamond pickaxe"}]},{id:"Rapier",type:"Melee",rarity:["Common","Rare"],ancientHuntRunes:["i","p"],stats:{power:1,speed:11.66,area:5.66},i18n:[{locale:"fr-FR",name:"Rapière"},{locale:"en-EN",name:"Rapier"}]},{id:"Rapier_Unique1",type:"Melee",rarity:["Unique"],activeEnchants:["BusyBee"],ancientHuntRunes:["u","i","p"],stats:{power:1,speed:11.66,area:5.66},i18n:[{locale:"fr-FR",name:"Dard d'abeille"},{locale:"en-EN",name:"Bee stinger"}]},{id:"Rapier_Unique2",type:"Melee",rarity:["Unique"],activeEnchants:["Freezing"],ancientHuntRunes:["s","i","p"],stats:{power:1.07,speed:11.34,area:5.66},i18n:[{locale:"fr-FR",name:"Feuille de congélation"},{locale:"en-EN",name:"Freezing foil"}]},{id:"Sickles",type:"Melee",rarity:["Common","Rare"],ancientHuntRunes:["i"],stats:{power:2.98,speed:5.2,area:1.67},i18n:[{locale:"fr-FR",name:"Faucilles"},{locale:"en-EN",name:"Sickles"}]},{id:"Sickles_Unique1",type:"Melee",rarity:["Unique"],activeEnchants:["PoisonedMelee"],ancientHuntRunes:["i"],stats:{power:2.98,speed:5.2,area:1.67},i18n:[{locale:"fr-FR",name:"Morsure du cauhcemar"},{locale:"en-EN",name:"Nightmare's bite"}]},{id:"Sickles_Unique2",type:"Melee",rarity:["Unique"],ancientHuntRunes:["i","a"],stats:{power:2.98,speed:5.2,area:1.67},i18n:[{locale:"fr-FR",name:"Le dernier rire"},{locale:"en-EN",name:"The last laungh"}]},{id:"SoulKnife",type:"Melee",rarity:["Common","Rare"],activeEnchants:["SoulSiphon"],ancientHuntRunes:["o"],soulgathering:!0,stats:{power:12.23,speed:1,area:3.19},i18n:[{locale:"fr-FR",name:"Couteau des âmes"},{locale:"en-EN",name:"Soul knife"}]},{id:"SoulKnife_Unique1",type:"Melee",rarity:["Unique"],activeEnchants:["Committed"],ancientHuntRunes:["o","i"],soulgathering:!0,stats:{power:12.23,speed:1,area:3.19},i18n:[{locale:"fr-FR",name:"Chercheur de vérité"},{locale:"en-EN",name:"Truthseeker"}]},{id:"SoulKnife_Unique2",type:"Melee",rarity:["Unique"],ancientHuntRunes:["o"],soulgathering:!0,stats:{power:12.23,speed:1,area:3.19},i18n:[{locale:"fr-FR",name:"Couteau éternel"},{locale:"en-EN",name:"Eternal knife"}]},{id:"SoulScythe",type:"Melee",rarity:["Common","Rare"],ancientHuntRunes:["o"],soulgathering:!0,stats:{power:6.92,speed:1.65,area:9.42},i18n:[{locale:"fr-FR",name:"Faux des âmes"},{locale:"en-EN",name:"Soul scythe"}]},{id:"SoulScythe_Unique1",type:"Melee",rarity:["Unique"],ancientHuntRunes:["o","a"],soulgathering:!0,stats:{power:6.92,speed:1.65,area:9.42},i18n:[{locale:"fr-FR",name:"Faux du geôlier"},{locale:"en-EN",name:"Jailor's scythe"}]},{id:"SoulScythe_Unique2",type:"Melee",rarity:["Unique"],activeEnchants:["Freezing"],ancientHuntRunes:["o","s"],soulgathering:!0,stats:{power:6.92,speed:1.65,area:9.42},i18n:[{locale:"fr-FR",name:"Faux du froid"},{locale:"en-EN",name:"Frost scythe"}]},{id:"SoulScythe_Spooky2",events:["Spookier Fall"],type:"Melee",rarity:["Unique"],activeEnchants:["Freezing"],ancientHuntRunes:["s","o"],soulgathering:!0,stats:{power:6.92,speed:1.65,area:9.42},i18n:[{locale:"fr-FR",name:"Faux en os"},{locale:"en-EN",name:"Skull scythe"}]},{id:"Spear",type:"Melee",rarity:["Common","Rare"],ancientHuntRunes:["s"],stats:{power:5.67,speed:2.03,area:8.52},i18n:[{locale:"fr-FR",name:"Lance"},{locale:"en-EN",name:"Spear"}]},{id:"Spear_Unique1",type:"Melee",rarity:["Unique"],activeEnchants:["Echo"],ancientHuntRunes:["s","i"],stats:{power:5.67,speed:2.03,area:8.52},i18n:[{locale:"fr-FR",name:"Lance chuchotante"},{locale:"en-EN",name:"Whispering spear"}]},{id:"Spear_Unique2",type:"Melee",rarity:["Unique"],ancientHuntRunes:["s"],stats:{power:5.67,speed:2.03,area:8.52},i18n:[{locale:"fr-FR",name:"Lance de chance"},{locale:"en-EN",name:"Fortune spear"}]},{id:"Spear_spooky2",events:["Spooky Fall 22"],type:"Melee",rarity:["Unique"],ancientHuntRunes:["s"],stats:{power:5.67,speed:2.03,area:8.52},i18n:[{locale:"fr-FR",name:"Lance d'effroi"},{locale:"en-EN",name:"Spine-chill spear"}]},{id:"Sword",type:"Melee",rarity:["Common","Rare"],ancientHuntRunes:["i"],stats:{power:4.99,speed:3.16,area:2.96},i18n:[{locale:"fr-FR",name:"Épée"},{locale:"en-EN",name:"Sword"}]},{id:"Sword_Unique1",type:"Melee",rarity:["Unique"],ancientHuntRunes:["i"],stats:{power:4.99,speed:3.16,area:2.96},i18n:[{locale:"fr-FR",name:"Épée en diamant"},{locale:"en-EN",name:"Diamond sword"}]},{id:"Sword_Unique2",type:"Melee",rarity:["Unique"],activeEnchants:["CriticalHit"],ancientHuntRunes:["i"],stats:{power:4.99,speed:3.16,area:2.96},i18n:[{locale:"fr-FR",name:"Hawkbrand"},{locale:"en-EN",name:"Hawkbrand"}]},{id:"Sword_Spooky1",events:["Spooky Fall"],type:"Melee",rarity:["Unique"],activeEnchants:["CriticalHit"],ancientHuntRunes:["i"],stats:{power:4.99,speed:3.16,area:2.96},i18n:[{locale:"fr-FR",name:"Épée sinistre"},{locale:"en-EN",name:"Sinister sword"}]},{id:"Whip",dlcId:"Jungle Awakens",type:"Melee",rarity:["Common","Rare"],ancientHuntRunes:["s"],stats:{power:8.69,speed:1.1,area:1},i18n:[{locale:"fr-FR",name:"Fouet"},{locale:"en-EN",name:"Whip"}]},{id:"Whip_Unique1",dlcId:"Jungle Awakens",type:"Melee",rarity:["Unique"],ancientHuntRunes:["s","i"],stats:{power:8.69,speed:1.1,area:1},i18n:[{locale:"fr-FR",name:"Fouet de liane"},{locale:"en-EN",name:"Vine whip"}]},{id:"TempestKnife",dlcId:"Howling Peaks",type:"Melee",rarity:["Common","Rare"],activeEnchants:["Rushdown"],ancientHuntRunes:["c"],stats:{power:4.62,speed:4.22,area:2.26},i18n:[{locale:"fr-FR",name:"Couteau de tempête"},{locale:"en-EN",name:"Tempest Knife"}]},{id:"TempestKnife_Unique1",dlcId:"Howling Peaks",type:"Melee",rarity:["Unique"],activeEnchants:["Committed","Rushdown"],ancientHuntRunes:["c","i"],stats:{power:4.62,speed:4.22,area:1.55},i18n:[{locale:"fr-FR",name:"Couteau inébranlable de tempête"},{locale:"en-EN",name:"Resolute Tempest Knife"}]},{id:"TempestKnife_Unique2",dlcId:"Howling Peaks",type:"Melee",rarity:["Unique"],activeEnchants:["Rushdown"],ancientHuntRunes:["c","s"],stats:{power:4.62,speed:4.22,area:2.24},i18n:[{locale:"fr-FR",name:"Couteau glaçant des raffales"},{locale:"en-EN",name:"Chill Gale Knife"}]},{id:"Boneclub",dlcId:"Flames of the Nether",type:"Melee",rarity:["Common","Rare"],ancientHuntRunes:["i"],stats:{power:13.32,speed:1,area:8.55},i18n:[{locale:"fr-FR",name:"Gourdin en os"},{locale:"en-EN",name:"Boneclub"}]},{id:"Boneclub_Unique1",dlcId:"Flames of the Nether",type:"Melee",rarity:["Unique"],activeEnchants:["BaneOfIllagers"],ancientHuntRunes:["i"],stats:{power:13.32,speed:1,area:8.55},i18n:[{locale:"fr-FR",name:"Massue en os"},{locale:"en-EN",name:"Bone cudgel"}]},{id:"Chainsword",dlcId:"Flames of the Nether",type:"Melee",rarity:["Common","Rare"],ancientHuntRunes:["u","t"],stats:{power:3.82,speed:8.26,area:1.43},i18n:[{locale:"fr-FR",name:"Lame de scie cassée"},{locale:"en-EN",name:"Broken sawblade"}]},{id:"Chainsword_Unique1",dlcId:"Flames of the Nether",type:"Melee",rarity:["Unique"],ancientHuntRunes:["c","t"],stats:{power:3.82,speed:8.26,area:1.43},i18n:[{locale:"fr-FR",name:"Lame de scie mécanique"},{locale:"en-EN",name:"Mechanized sawblade"}]},{id:"Anchor",dlcId:"Hidden Depths",type:"Melee",rarity:["Common","Rare"],ancientHuntRunes:["i"],stats:{power:14,speed:1,area:14},i18n:[{locale:"fr-FR",name:"Ancre"},{locale:"en-EN",name:"Anchor"}]},{id:"Anchor_Unique1",dlcId:"Hidden Depths",type:"Melee",rarity:["Unique"],ancientHuntRunes:["i"],stats:{power:14,speed:1,area:14},i18n:[{locale:"fr-FR",name:"Ancre corrodée"},{locale:"en-EN",name:"Encrusted anchor"}]},{id:"CoralBlade",dlcId:"Hidden Depths",type:"Melee",rarity:["Common","Rare"],ancientHuntRunes:["i"],stats:{power:1.86,speed:4.54,area:2.39},i18n:[{locale:"fr-FR",name:"Lame de corail"},{locale:"en-EN",name:"Coral blade"}]},{id:"CoralBlade_Unique1",dlcId:"Hidden Depths",type:"Melee",rarity:["Unique"],ancientHuntRunes:["i"],stats:{power:2.57,speed:3.48,area:4.32},i18n:[{locale:"fr-FR",name:"Lame-Éponge"},{locale:"en-EN",name:"Sponge striker"}]},{id:"Backstabber",dlcId:"Echoing Void",type:"Melee",rarity:["Common","Rare"],activeEnchants:["Backstabber"],ancientHuntRunes:["c"],stats:{power:5.65,speed:4.07,area:1.66},i18n:[{locale:"fr-FR",name:"Traître"},{locale:"en-EN",name:"Backstabber"}]},{id:"Backstabber_Unique1",dlcId:"Echoing Void",type:"Melee",rarity:["Unique"],activeEnchants:["Backstabber","Echo"],ancientHuntRunes:["c","i"],stats:{power:5.65,speed:4.07,area:1.66},i18n:[{locale:"fr-FR",name:"Preste-lame"},{locale:"en-EN",name:"Swift striker"}]},{id:"ObsidianClaymore",dlcId:"Echoing Void",type:"Melee",rarity:["Common","Rare"],ancientHuntRunes:["t"],stats:{power:14,speed:1,area:9.24},i18n:[{locale:"fr-FR",name:"Claymore d'obsidienne"},{locale:"en-EN",name:"Obsidian claymore"}]},{id:"ObsidianClaymore_Unique1",dlcId:"Echoing Void",type:"Melee",rarity:["Unique"],activeEnchants:["SharedPain"],ancientHuntRunes:["t","i"],stats:{power:14,speed:1,area:9.24},i18n:[{locale:"fr-FR",name:"La nuit sans étoiles"},{locale:"en-EN",name:"The starless night"}]},{id:"VoidTouchedBlades",dlcId:"Echoing Void",type:"Melee",rarity:["Common","Rare"],activeEnchants:["VoidTouchedMelee"],ancientHuntRunes:["s"],stats:{power:5.71,speed:3.11,area:2.2},i18n:[{locale:"fr-FR",name:"Lames touchées par le vide"},{locale:"en-EN",name:"Void touched blades"}]},{id:"VoidTouchedBlades_Unique1",dlcId:"Echoing Void",type:"Melee",rarity:["Unique"],activeEnchants:["VoidTouchedMelee","Leeching"],ancientHuntRunes:["s","i"],stats:{power:5.71,speed:3.11,area:2.2},i18n:[{locale:"fr-FR",name:"Le début et la fin"},{locale:"en-EN",name:"The beginning and the end"}]},{id:"Bow",type:"Ranged",rarity:["Common","Rare"],ancientHuntRunes:["r"],stats:{power:4.18,speed:3.41,ammo:6.57},i18n:[{locale:"fr-FR",name:"Arc"},{locale:"en-EN",name:"Bow"}]},{id:"Bow_Unique1",type:"Ranged",rarity:["Unique"],activeEnchants:["Growing"],ancientHuntRunes:["r"],stats:{power:4.18,speed:3.41,ammo:6.57},i18n:[{locale:"fr-FR",name:"Arc d'os"},{locale:"en-EN",name:"Bonebow"}]},{id:"Bow_Unique2",type:"Ranged",rarity:["Unique"],activeEnchants:["BonusShot"],ancientHuntRunes:["s","r"],stats:{power:4.18,speed:3.41,ammo:6.57},i18n:[{locale:"fr-FR",name:"Arc jumeaux"},{locale:"en-EN",name:"Twin box"}]},{id:"Bow_Spooky1",events:["Spooky Fall"],type:"Ranged",rarity:["Unique"],activeEnchants:["BonusShot"],ancientHuntRunes:["s","i"],stats:{power:4.18,speed:3.41,ammo:6.57},i18n:[{locale:"fr-FR",name:"Arc hanté"},{locale:"en-EN",name:"Haunted bow"}]},{id:"BurstCrossbow",type:"Ranged",rarity:["Common","Rare"],ancientHuntRunes:["r","p"],stats:{power:3.6,speed:3.92,ammo:4.1},i18n:[{locale:"fr-FR",name:"Arbalète explosive"},{locale:"en-EN",name:"Burst crossbow"}]},{id:"BurstCrossbow_Unique1",type:"Ranged",rarity:["Unique"],activeEnchants:["EnigmaResonatorRanged"],ancientHuntRunes:["o","r","p"],stats:{power:3.6,speed:3.92,ammo:4.1},i18n:[{locale:"fr-FR",name:"Arbalète de chasseur d'âmes"},{locale:"en-EN",name:"Soul hunter crossbow"}]},{id:"BurstCrossbow_Unique2",type:"Ranged",rarity:["Unique"],activeEnchants:["DynamoRanged"],ancientHuntRunes:["c","r","p"],stats:{power:3.6,speed:3.92,ammo:4.1},i18n:[{locale:"fr-FR",name:"Arbalète corrompue"},{locale:"en-EN",name:"Corrupted crossbow"}]},{id:"Crossbow",type:"Ranged",rarity:["Common","Rare"],ancientHuntRunes:["r"],stats:{power:7.07,speed:1.95,ammo:4.1},i18n:[{locale:"fr-FR",name:"Arbalète"},{locale:"en-EN",name:"Crossbow"}]},{id:"Crossbow_Unique1",type:"Ranged",rarity:["Unique"],activeEnchants:["Piercing"],ancientHuntRunes:["r"],stats:{power:7.07,speed:1.95,ammo:4.1},i18n:[{locale:"fr-FR",name:"La trancheuse"},{locale:"en-EN",name:"The slicer"}]},{id:"Crossbow_Unique2",type:"Ranged",rarity:["Unique"],activeEnchants:["RapidFire"],ancientHuntRunes:["c","r"],stats:{power:7.07,speed:1.95,ammo:4.1},i18n:[{locale:"fr-FR",name:"Chercheur d'azure"},{locale:"en-EN",name:"Azure seeker"}]},{id:"DualCrossbows",type:"Ranged",rarity:["Common","Rare"],ancientHuntRunes:["r"],stats:{power:3.86,speed:3.65,ammo:3.48},i18n:[{locale:"fr-FR",name:"Doubles arbalètes"},{locale:"en-EN",name:"Dual crossbows"}]},{id:"DualCrossbows_Unique1",type:"Ranged",rarity:["Unique"],activeEnchants:["Unchanting"],ancientHuntRunes:["r","a"],stats:{power:3.86,speed:3.65,ammo:3.48},i18n:[{locale:"fr-FR",name:"Arbalètes ensorcelées"},{locale:"en-EN",name:"Spellbound crossbows"}]},{id:"DualCrossbows_Unique2",type:"Ranged",rarity:["Unique"],activeEnchants:["Growing"],ancientHuntRunes:["r"],stats:{power:3.86,speed:3.65,ammo:3.48},i18n:[{locale:"fr-FR",name:"Mini arbalètes"},{locale:"en-EN",name:"Baby crossbows"}]},{id:"ExplodingCrossbow",type:"Ranged",rarity:["Common","Rare"],ancientHuntRunes:["i"],stats:{power:12.27,speed:1,ammo:1},i18n:[{locale:"fr-FR",name:"Arbalète explosive"},{locale:"en-EN",name:"Exploding crossbow"}]},{id:"ExplodingCrossbow_Unique1",type:"Ranged",rarity:["Unique"],activeEnchants:["Gravity"],ancientHuntRunes:["i","a"],stats:{power:12.27,speed:1,ammo:1},i18n:[{locale:"fr-FR",name:"Arbalète qui implose"},{locale:"en-EN",name:"Imploding crossbow"}]},{id:"ExplodingCrossbow_Unique2",type:"Ranged",rarity:["Unique"],activeEnchants:["ChainReaction"],ancientHuntRunes:["i"],stats:{power:12.27,speed:1,ammo:1},i18n:[{locale:"fr-FR",name:"Lanceur de carreaux enflammés"},{locale:"en-EN",name:"Firebolt thrower"}]},{id:"HeavyCrossbow",type:"Ranged",rarity:["Common","Rare"],ancientHuntRunes:["i"],stats:{power:14,speed:1,ammo:1},i18n:[{locale:"fr-FR",name:"Arbalète lourde"},{locale:"en-EN",name:"Heavy crossbow"}]},{id:"HeavyCrossbow_Unique1",type:"Ranged",rarity:["Unique"],activeEnchants:["Punch"],ancientHuntRunes:["i"],stats:{power:14,speed:1,ammo:1},i18n:[{locale:"fr-FR",name:"Arbalète de la mort"},{locale:"en-EN",name:"Doom crossbow"}]},{id:"HeavyCrossbow_Unique2",type:"Ranged",rarity:["Unique"],activeEnchants:["Ricochet"],ancientHuntRunes:["r","i"],stats:{power:14,speed:1,ammo:1},i18n:[{locale:"fr-FR",name:"Arbalète du tueur"},{locale:"en-EN",name:"Slayer crossbow"}]},{id:"HuntingBow",type:"Ranged",rarity:["Common","Rare"],ancientHuntRunes:["u"],stats:{power:4.18,speed:3.41,ammo:6.57},i18n:[{locale:"fr-FR",name:"Arc de chasse"},{locale:"en-EN",name:"Hunting bow"}]},{id:"HuntingBow_Unique1",type:"Ranged",rarity:["Unique"],activeEnchants:["Infinity"],ancientHuntRunes:["u","r"],stats:{power:4.18,speed:3.41,ammo:6.57},i18n:[{locale:"fr-FR",name:"Promesse du chasseur"},{locale:"en-EN",name:"Hunter's promise"}]},{id:"HuntingBow_Unique2",type:"Ranged",rarity:["Unique"],activeEnchants:["Power"],ancientHuntRunes:["u","r"],stats:{power:4.18,speed:3.41,ammo:6.57},i18n:[{locale:"fr-FR",name:"Arc du maître"},{locale:"en-EN",name:"Master's bow"}]},{id:"HuntingBow_Unique3",type:"Ranged",rarity:["Unique"],activeEnchants:["DynamoRanged"],ancientHuntRunes:["u","c"],stats:{power:4.18,speed:3.41,ammo:6.57},i18n:[{locale:"fr-FR",name:"Arc antique"},{locale:"en-EN",name:"Ancient bow"}]},{id:"Longbow",type:"Ranged",rarity:["Common","Rare"],ancientHuntRunes:["r"],stats:{power:5.33,speed:3.41,ammo:4.1},i18n:[{locale:"fr-FR",name:"Arc long"},{locale:"en-EN",name:"Longbow"}]},{id:"Longbow_Unique1",type:"Ranged",rarity:["Unique"],activeEnchants:["Supercharge"],ancientHuntRunes:["s","r"],stats:{power:5.33,speed:3.41,ammo:4.1},i18n:[{locale:"fr-FR",name:"Arc de garde"},{locale:"en-EN",name:"Guardian bow"}]},{id:"Longbow_Unique2",type:"Ranged",rarity:["Unique"],activeEnchants:["FuseShot"],ancientHuntRunes:["r","a"],stats:{power:5.33,speed:3.41,ammo:4.1},i18n:[{locale:"fr-FR",name:"Serpent rouge"},{locale:"en-EN",name:"Red snake"}]},{id:"Powerbow",type:"Ranged",rarity:["Common","Rare"],ancientHuntRunes:["r","i"],stats:{power:9.96,speed:3.41,ammo:1.62},i18n:[{locale:"fr-FR",name:"Arc de puissance"},{locale:"en-EN",name:"Power bow"}]},{id:"Powerbow_Unique1",type:"Ranged",rarity:["Unique"],activeEnchants:["Power"],ancientHuntRunes:["r","i"],stats:{power:9.96,speed:3.41,ammo:1.62},i18n:[{locale:"fr-FR",name:"Arc de puissance d'élite"},{locale:"en-EN",name:"Elite power bow"}]},{id:"Powerbow_Unique2",type:"Ranged",rarity:["Unique"],activeEnchants:["RadianceRanged"],ancientHuntRunes:["s","r","i"],stats:{power:9.96,speed:3.41,ammo:1.62},i18n:[{locale:"fr-FR",name:"Colibri"},{locale:"en-EN",name:"Sabrewing"}]},{id:"PowerBow_Spooky2",type:"Ranged",rarity:["Unique"],activeEnchants:["Power"],ancientHuntRunes:["s","r","i"],stats:{power:9.96,speed:3.41,ammo:1.62},i18n:[{locale:"fr-FR",name:"Arc fantôme"},{locale:"en-EN",name:"Phantom bow"}]},{id:"RapidCrossbow",type:"Ranged",rarity:["Common","Rare"],ancientHuntRunes:["r"],stats:{power:1,speed:9.28,ammo:11.52},i18n:[{locale:"fr-FR",name:"Arbalète rapide"},{locale:"en-EN",name:"Rapid crossbow"}]},{id:"RapidCrossbow_Unique1",type:"Ranged",rarity:["Unique"],activeEnchants:["BonusShot"],ancientHuntRunes:["s","r"],stats:{power:1,speed:9.28,ammo:11.52},i18n:[{locale:"fr-FR",name:"Arbalète papillon"},{locale:"en-EN",name:"Butterfly crossbow"}]},{id:"RapidCrossbow_Unique2",type:"Ranged",rarity:["Unique"],activeEnchants:["Accelerating"],ancientHuntRunes:["c","r"],stats:{power:1,speed:9.28,ammo:11.52},i18n:[{locale:"fr-FR",name:"Arbalète automatique"},{locale:"en-EN",name:"Auto crossbow"}]},{id:"ScatterCrossbow",type:"Ranged",rarity:["Common","Rare"],ancientHuntRunes:["t"],stats:{power:4.18,speed:7.82,ammo:4.1},i18n:[{locale:"fr-FR",name:"Arbalète à dispersion"},{locale:"en-EN",name:"Scatter crossbow"}]},{id:"ScatterCrossbow_Unique1",type:"Ranged",rarity:["Unique"],ancientHuntRunes:["i","t"],stats:{power:3.95,speed:14,ammo:4.1},i18n:[{locale:"fr-FR",name:"Harpbalète"},{locale:"en-EN",name:"Harp crossbow"}]},{id:"ScatterCrossbow_Unique2",type:"Ranged",rarity:["Unique"],activeEnchants:["Ricochet"],ancientHuntRunes:["i","t"],stats:{power:4.18,speed:7.82,ammo:4.1},i18n:[{locale:"fr-FR",name:"Harpbalète de foudre"},{locale:"en-EN",name:"Lightning harp crossbow"}]},{id:"Shortbow",type:"Ranged",rarity:["Common","Rare"],ancientHuntRunes:["r"],stats:{power:2.73,speed:8.26,ammo:14},i18n:[{locale:"fr-FR",name:"Arc court"},{locale:"en-EN",name:"Shortbow"}]},{id:"Shortbow_Unique1",type:"Ranged",rarity:["Unique"],activeEnchants:["RapidFire"],ancientHuntRunes:["c","r"],stats:{power:2.73,speed:8.26,ammo:14},i18n:[{locale:"fr-FR",name:"Arc violet"},{locale:"en-EN",name:"Purple storm"}]},{id:"Shortbow_Unique2",type:"Ranged",rarity:["Unique"],activeEnchants:["Accelerating"],ancientHuntRunes:["c","r"],stats:{power:2.73,speed:8.26,ammo:14},i18n:[{locale:"fr-FR",name:"Petit arc mécanique"},{locale:"en-EN",name:"Mechanical shortbow"}]},{id:"Shortbow_Unique3",type:"Ranged",rarity:["Unique"],activeEnchants:["RadianceRanged"],ancientHuntRunes:["s","r"],stats:{power:2.73,speed:8.26,ammo:14},i18n:[{locale:"fr-FR",name:"Arc de charme d'amour"},{locale:"en-EN",name:"Love spell bow"}]},{id:"SoulBow",type:"Ranged",rarity:["Common","Rare"],ancientHuntRunes:["o"],soulgathering:!0,stats:{power:4.18,speed:3.41,ammo:5.33},i18n:[{locale:"fr-FR",name:"Arc des âmes"},{locale:"en-EN",name:"Soul bow"}]},{id:"SoulBow_Unique1",type:"Ranged",rarity:["Unique"],activeEnchants:["TempoTheft"],ancientHuntRunes:["c","o"],soulgathering:!0,stats:{power:4.18,speed:3.41,ammo:5.33},i18n:[{locale:"fr-FR",name:"Arc nocturne"},{locale:"en-EN",name:"Nocturnal bow"}]},{id:"SoulBow_Unique2",type:"Ranged",rarity:["Unique"],activeEnchants:["Multishot"],ancientHuntRunes:["o","r"],soulgathering:!0,stats:{power:4.18,speed:3.41,ammo:5.33},i18n:[{locale:"fr-FR",name:"Arc des âmes perdues"},{locale:"en-EN",name:"Bow of lost souls"}]},{id:"SoulBow_Winter1",events:["Chills and Thrills","Festival of Frost"],type:"Ranged",rarity:["Unique"],activeEnchants:["TempoTheft"],ancientHuntRunes:["o","t"],soulgathering:!0,stats:{power:4.18,speed:3.41,ammo:5.33},i18n:[{locale:"fr-FR",name:"Arc frissonnant"},{locale:"en-EN",name:"Shivering bow"}]},{id:"SoulCrossbow",type:"Ranged",rarity:["Common","Rare"],ancientHuntRunes:["o"],soulgathering:!0,stats:{power:5.33,speed:1.95,ammo:2.86},i18n:[{locale:"fr-FR",name:"Arblète des âmes"},{locale:"en-EN",name:"Soul crossbow"}]},{id:"SoulCrossbow_Unique1",type:"Ranged",rarity:["Unique"],activeEnchants:["EnigmaResonatorRanged"],ancientHuntRunes:["o"],soulgathering:!0,stats:{power:5.33,speed:1.95,ammo:2.86},i18n:[{locale:"fr-FR",name:"Arbalète sauvage des âmes"},{locale:"en-EN",name:"Feral soul crossbow"}]},{id:"SoulCrossbow_Unique2",type:"Ranged",rarity:["Unique"],activeEnchants:["Gravity"],ancientHuntRunes:["o","a"],soulgathering:!0,stats:{power:5.33,speed:1.95,ammo:2.86},i18n:[{locale:"fr-FR",name:"Crystal de vide"},{locale:"en-EN",name:"Voidcaller"}]},{id:"Trickbow",type:"Ranged",rarity:["Common","Rare"],ancientHuntRunes:["r"],stats:{power:1.87,speed:3.41,ammo:5.33},i18n:[{locale:"fr-FR",name:"Arc piège"},{locale:"en-EN",name:"Trickbow"}]},{id:"Trickbow_Unique1",type:"Ranged",rarity:["Unique"],activeEnchants:["PoisonedRanged"],ancientHuntRunes:["r","a"],stats:{power:1.87,speed:3.41,ammo:5.33},i18n:[{locale:"fr-FR",name:"La menace verte"},{locale:"en-EN",name:"The green menace"}]},{id:"Trickbow_Unique2",type:"Ranged",rarity:["Unique"],activeEnchants:["WildRage"],ancientHuntRunes:["r","i"],stats:{power:1.87,speed:3.41,ammo:5.33},i18n:[{locale:"fr-FR",name:"La crapule rose"},{locale:"en-EN",name:"The pink scoundrel"}]},{id:"Trickbow_Year1",events:["First Year Anniversary","Second Year Anniversary"],type:"Ranged",rarity:["Unique"],activeEnchants:["WildRage","Ricochet"],ancientHuntRunes:["r","i"],stats:{power:1.87,speed:3.41,ammo:5.33},i18n:[{locale:"fr-FR",name:"Arc en sucre"},{locale:"en-EN",name:"Sugar Rush"}]},{id:"SlowBow",dlcId:"Creeping Winter",type:"Ranged",rarity:["Common","Rare"],ancientHuntRunes:["s"],stats:{power:4.18,speed:3.41,ammo:6.57},i18n:[{locale:"fr-FR",name:"Arc des neiges"},{locale:"en-EN",name:"Snow bow"}]},{id:"SlowBow_Unique1",dlcId:"Creeping Winter",type:"Ranged",rarity:["Unique"],ancientHuntRunes:["s","r"],stats:{power:4.18,speed:3.41,ammo:6.57},i18n:[{locale:"fr-FR",name:"Toucher de l'hiver"},{locale:"en-EN",name:"Winter's touch"}]},{id:"SlowBow_Spooky2",events:["Spookier Fall"],type:"Ranged",rarity:["Unique"],ancientHuntRunes:["s","r"],stats:{power:4.18,speed:3.41,ammo:6.57},i18n:[{locale:"fr-FR",name:"Arc en toile"},{locale:"en-EN",name:"Web bow"}]},{id:"WindBow",dlcId:"Howling Peaks",type:"Ranged",rarity:["Common","Rare"],ancientHuntRunes:["i"],stats:{power:4.18,speed:3.41,ammo:5.95},i18n:[{locale:"fr-FR",name:"Arc soufflant"},{locale:"en-EN",name:"Wind bow"}]},{id:"WindBow_Unique1",dlcId:"Howling Peaks",type:"Ranged",rarity:["Unique"],activeEnchants:["Ricochet"],ancientHuntRunes:["r","i"],stats:{power:4.18,speed:3.41,ammo:5.95},i18n:[{locale:"fr-FR",name:"Écho de la vallée"},{locale:"en-EN",name:"Echo of the Valley"}]},{id:"WindBow_Unique2",dlcId:"Howling Peaks",type:"Ranged",rarity:["Unique"],activeEnchants:["RollCharge"],ancientHuntRunes:["c","i"],stats:{power:4.18,speed:3.41,ammo:5.95},i18n:[{locale:"fr-FR",name:"Arc explosif des rafales"},{locale:"en-EN",name:"Burst gale bow"}]},{id:"CogCrossbow",dlcId:"Flames of the Nether",type:"Ranged",rarity:["Common","Rare"],ancientHuntRunes:["r"],stats:{power:12.27,speed:12.15,ammo:2.86},i18n:[{locale:"fr-FR",name:"Arbalète mécanique"},{locale:"en-EN",name:"Cog crossbow"}]},{id:"CogCrossbow_Unique1",dlcId:"Flames of the Nether",type:"Ranged",rarity:["Unique"],activeEnchants:["Piercing"],ancientHuntRunes:["r","i"],stats:{power:12.27,speed:12.15,ammo:2.86},i18n:[{locale:"fr-FR",name:"Fierté des piglins"},{locale:"en-EN",name:"Pride of the piglins"}]},{id:"TwistingVineBow",dlcId:"Flames of the Nether",type:"Ranged",rarity:["Common","Rare"],ancientHuntRunes:["r"],stats:{power:4.18,speed:3.41,ammo:1},i18n:[{locale:"fr-FR",name:"Arc en lianes tortueuses"},{locale:"en-EN",name:"Twisting vine bow"}]},{id:"TwistingVineBow_Unique1",dlcId:"Flames of the Nether",type:"Ranged",rarity:["Unique"],activeEnchants:["RollCharge"],ancientHuntRunes:["c","r"],stats:{power:4.18,speed:3.41,ammo:1},i18n:[{locale:"fr-FR",name:"Arc de lianes pleureuses"},{locale:"en-EN",name:"Weeping vine bow"}]},{id:"BubbleBow",dlcId:"Hidden Depths",type:"Ranged",rarity:["Common","Rare"],ancientHuntRunes:["r"],stats:{power:3.02,speed:3.41,area:6.57},i18n:[{locale:"fr-FR",name:"Arc à bulles"},{locale:"en-EN",name:"Bubble bow"}]},{id:"BubbleBow_Unique1",dlcId:"Hidden Depths",type:"Ranged",rarity:["Unique"],ancientHuntRunes:["r"],stats:{power:3.02,speed:3.41,area:6.57},i18n:[{locale:"fr-FR",name:"Éclat'bulles"},{locale:"en-EN",name:"Bubble burster"}]},{id:"BubbleBow_Spooky2",events:["Spooky Fall 22"],type:"Ranged",rarity:["Unique"],activeEnchants:["Ricochet"],ancientHuntRunes:["r","s"],stats:{power:3.02,speed:3.41,area:6.57},i18n:[{locale:"fr-FR",name:"Arc visqueux"},{locale:"en-EN",name:"Gloopy bow"}]},{id:"HarpoonCrossbow",dlcId:"Hidden Depths",type:"Ranged",rarity:["Common","Rare"],ancientHuntRunes:["r"],stats:{power:7.64,speed:3.41,area:4.1},i18n:[{locale:"fr-FR",name:"Arbalète à harpons"},{locale:"en-EN",name:"Harpoon crossbow"}]},{id:"HarpoonCrossbow_Unique1",dlcId:"Hidden Depths",type:"Ranged",rarity:["Unique"],ancientHuntRunes:["r"],stats:{power:7.64,speed:3.41,area:4.1},i18n:[{locale:"fr-FR",name:"Arbalète nautique"},{locale:"en-EN",name:"Nautical crossbow"}]},{id:"ShadowCrossbow",dlcId:"Echoing Void",type:"Ranged",rarity:["Common","Rare"],ancientHuntRunes:["r"],stats:{power:4.76,speed:1.95,ammo:4.1},i18n:[{locale:"fr-FR",name:"Arbalète de l'ombre"},{locale:"en-EN",name:"Shadow crossbow"}]},{id:"ShadowCrossbow_Unique1",dlcId:"Echoing Void",type:"Ranged",rarity:["Unique"],activeEnchants:["ShadowShot"],ancientHuntRunes:["r","c"],stats:{power:4.76,speed:1.47,ammo:4.1},i18n:[{locale:"fr-FR",name:"Arbalète voilée"},{locale:"en-EN",name:"Veiled crossbow"}]},{id:"BatCrossbow",events:["Spooky Fall 22"],type:"Ranged",rarity:["Unique"],activeEnchants:["ShadowShot"],ancientHuntRunes:["r","s"],stats:{power:4.76,speed:1.47,ammo:4.1},i18n:[{locale:"fr-FR",name:"Arbalète hurlante"},{locale:"en-EN",name:"Shrieking crossbow"}]},{id:"VoidBow",dlcId:"Echoing Void",type:"Ranged",rarity:["Common","Rare"],activeEnchants:["VoidTouchedRanged"],ancientHuntRunes:["r"],stats:{power:5.1,speed:2.63,ammo:4.1},i18n:[{locale:"fr-FR",name:"Arc du vide"},{locale:"en-EN",name:"Void bow"}]},{id:"VoidBow_Unique1",dlcId:"Echoing Void",type:"Ranged",rarity:["Unique"],activeEnchants:["VoidTouchedRanged","FuseShot"],ancientHuntRunes:["r","a"],stats:{power:5.1,speed:2.63,ammo:4.1},i18n:[{locale:"fr-FR",name:"Appel du vide"},{locale:"en-EN",name:"Call of the void"}]}];async function eP(){return ZM.map(n=>({dataValues:{...n,i18n:n.i18n.map(e=>({dataValues:e}))}}))}const tP=Object.freeze(Object.defineProperty({__proto__:null,findAll:eP},Symbol.toStringTag,{value:"Module"})),nP=[{count:0,type:"Emerald"},{count:0,type:"Gold"}],rP=[{enchantments:[{id:"Echo",investedPoints:0,level:0},{id:"Unset",investedPoints:0,level:0},{id:"Unset",investedPoints:0,level:0},{id:"Unset",investedPoints:0,level:0},{id:"Unset",investedPoints:0,level:0},{id:"Unset",investedPoints:0,level:0},{id:"Unset",investedPoints:0,level:0},{id:"Unset",investedPoints:0,level:0},{id:"Unset",investedPoints:0,level:0}],equipmentSlot:"MeleeGear",power:1,rarity:"Common",type:"Sword",upgraded:!1},{enchantments:[{id:"Ricochet",investedPoints:0,level:0},{id:"Unset",investedPoints:0,level:0},{id:"Unset",investedPoints:0,level:0},{id:"Unset",investedPoints:0,level:0},{id:"Unset",investedPoints:0,level:0},{id:"Unset",investedPoints:0,level:0},{id:"Unset",investedPoints:0,level:0},{id:"Unset",investedPoints:0,level:0},{id:"Unset",investedPoints:0,level:0}],equipmentSlot:"RangedGear",power:1,rarity:"Common",type:"Bow",upgraded:!1}],iP="Demo",sP="00000000-0000-0000-0000-000000000000",aP="steve",oP=[],lP=1,nE={currency:nP,items:rP,name:iP,playerId:sP,skin:aP,storageChestItems:oP,xp:lP},np="mcd-save-editor",Fv={settings:{},character:nE,file:"demo.json"};function rp(){try{return JSON.parse(localStorage.getItem(np)??JSON.stringify(Fv))}catch{return Fv}}function rE(n){localStorage.setItem(np,JSON.stringify(n))}async function cP(){const n=rp();return Object.entries(n.settings).map(([e,t])=>({dataValues:{key:e,value:t}}))}async function iE(n){const e=rp(),t=JSON.parse(n);return e.settings[t.key]=t.value,rE(e),{dataValues:t}}const uP=Object.freeze(Object.defineProperty({__proto__:null,findAll:cP,updateOrCreate:iE},Symbol.toStringTag,{value:"Module"}));function au(n){for(let e=n.length-1;e>0;e-=1){const t=Math.floor(Math.random()*(e+1));[n[e],n[t]]=[n[t],n[e]]}return n}function sE(n,e){return n.reduce((t,i,r)=>{const s=Math.floor(r/e);return t[s]=[].concat(t[s]??[],i),t},[])}function Un(n){return Te.isDev?`/${n}`:`/${np}/${n}`}function aE(n,e){const t=document.createElement("a");t.setAttribute("href",`data:text/plain;charset=utf-8,${encodeURIComponent(e)}`),t.setAttribute("download",n),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}function dP(n){const e=document.createElement("a");e.setAttribute("href",n),e.setAttribute("target","_blank"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}async function oE(n="application/json"){return new Promise(e=>{const t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept",n),t.style.display="none",document.body.appendChild(t),t.addEventListener("change",()=>{e(t.files),document.body.removeChild(t)}),t.click()})}async function lE(n){return new Promise(e=>{const t=new FileReader;t.addEventListener("load",()=>{e(t.result)}),t.readAsText(n)})}const hP=()=>{const n=Dn([]),e={pushRawNotification(t){n.value.push(t),t.delay>0&&window.setTimeout(()=>{e.removeNotification(t)},t.delay)},pushNotification(t,i,r=3e3){const s={type:t,text:i,delay:r};e.pushRawNotification(s)},success(t,i=3e3){e.pushNotification("success",t,i)},warning(t,i=3e3){e.pushNotification("warning",t,i)},error(t,i=3e3){e.pushNotification("error",t,i)},info(t,i=3e3){e.pushNotification("info",t,i)},removeNotification(t){const i=n.value.indexOf(t);i>-1&&n.value.splice(i,1)}};return{notifications:n,actions:e}},Ut=hP();function cE(n,...e){const t=new CustomEvent(n,{detail:{...e}});document.body.dispatchEvent(t)}const Lv={async localeChange(n){cE("localeChange",n),await iE(`{"key": "locale", "value": "${n}"}`)},async openGithubLink(n){dP(n)},async exportItem(n,e){aE("item.json",e)},async importItem(){const n=await oE();return n!=null&&n.length?lE(n[0]):""},async restoreBackup(){Ut.actions.error(Ce.global.t("App.webMode"))},async encryptFile(){Ut.actions.error(Ce.global.t("App.webMode"))},async decryptFile(){Ut.actions.error(Ce.global.t("App.webMode"))},fetchCharactersFiles(){return[]},fetchProfilFolders(){return[]}},fP={async invoke(n,...e){return Lv[n](...e)},send:cE,sendSync(n,...e){return Lv[n](...e)},on(n,e){document.body.addEventListener(n,t=>e(...Object.values(t.detail)))},AncientMob:OM,Armor:LM,ArmorProperty:qM,Artefact:VM,Dlc:zM,Enchant:YM,Event:JM,Weapon:tP,Setting:uP,CipherUtils:{cipher(n,e){return btoa(e)},decipher(n,e){return atob(e)}},homedir:"/",plateform:navigator.userAgent,clipboard:navigator.clipboard,isDev:!1,isWeb:!0},Te=vM||fP,mP={class:"m-title-bar"},pP={key:0,class:"m-title-bar__app"},gP={class:"m-title-bar__button-ctn"},vP=["disabled"],yP=pn({name:"TitleBar",__name:"index",props:{name:{},minimizable:{type:Boolean,default:!0},maximizable:{type:Boolean,default:!0},closable:{type:Boolean,default:!0},showHelp:{type:Boolean,default:!0},appTitle:{}},emits:["help","minimize","maximize","close"],setup(n,{emit:e}){const t=e,i=n,r={minimize(){t("minimize"),Te.send(`minimize:${i.name}`)},maximize(){t("maximize"),Te.send(`maximize:${i.name}`)},close(){t("close"),Te.send(`close:${i.name}`)}};return(s,a)=>{const o=Tx("icon");return O(),H("nav",mP,[Yt(s.$slots,"menu",{windowName:i.name}),i.appTitle?(O(),H("div",pP,pe(i.appTitle),1)):Re("",!0),q("div",gP,[i.showHelp?(O(),H("button",{key:0,type:"button",class:"m-title-bar__button",onClick:a[0]||(a[0]=l=>t("help"))},[tn(q("span",null,null,512),[[o,void 0,"help"]])])):Re("",!0),!F(Te).isWeb&&i.minimizable?(O(),H("button",{key:1,type:"button",class:"m-title-bar__button",onClick:a[1]||(a[1]=(...l)=>r.minimize&&r.minimize(...l))},[tn(q("span",null,null,512),[[o,void 0,"minimize"]])])):Re("",!0),!F(Te).isWeb&&(i.maximizable||i.minimizable)?(O(),H("button",{key:2,disabled:!i.maximizable,class:"m-title-bar__button",onClick:a[2]||(a[2]=(...l)=>r.maximize&&r.maximize(...l))},[tn(q("span",null,null,512),[[o,void 0,"maximize"]])],8,vP)):Re("",!0),!F(Te).isWeb&&i.closable?(O(),H("button",{key:3,class:_e(s.GenerateModifiers("m-title-bar__button",{close:!0})),onClick:a[3]||(a[3]=(...l)=>r.close&&r.close(...l))},[tn(q("span",null,null,512),[[o,void 0,"close"]])],2)):Re("",!0)])])}}});const bP={class:"m-title-bar__menu-item"},EP=pn({name:"TitleBarMenuItem",__name:"MenuItem",props:{id:{},label:{default:""}},emits:["click"],setup(n,{emit:e}){const t=e,i=n;return(r,s)=>(O(),H("li",bP,[q("button",{type:"button",class:"m-title-bar__menu-item__button",onClick:s[0]||(s[0]=a=>t("click",a,i.id))},pe(i.label),1),Yt(r.$slots,"default")]))}});const wP={class:"m-title-bar__menu"},CP=pn({name:"TitleBarMenu",__name:"Menu",props:{menuList:{default:()=>[]}},setup(n){const{t:e}=_t(),t=Dn(null),i=n,r=it({activeMenu:void 0}),s={handleWindowClick(a){const o=a.target;!o.matches(".TitleBarMenuCtn")&&!o.closest(".TitleBarMenuCtn")&&a.target!==t.value&&(r.activeMenu=void 0,window.removeEventListener("click",s.handleWindowClick))},toggleMenu(a){r.activeMenu===a?r.activeMenu=void 0:(r.activeMenu=a,window.addEventListener("click",s.handleWindowClick))},closeMenu(){r.activeMenu=void 0}};return(a,o)=>(O(),H("div",{class:"m-title-bar__menu-ctn",ref_key:"root",ref:t},[q("ul",wP,[(O(!0),H(He,null,ht(i.menuList,(l,c)=>(O(),ze(EP,{key:`menu${c}`,id:l,label:F(e)(`App.TitleBarMenu.${l}.label`),onClick:qn((u,d)=>s.toggleMenu(d),["stop","prevent"])},{default:Ve(()=>[Yt(a.$slots,l,{visible:l===r.activeMenu,close:s.closeMenu})]),_:2},1032,["id","label","onClick"]))),128))])],512))}});const ou=pn({name:"ContextMenu",__name:"index",props:{visible:{type:Boolean,default:!1},anchor:{default:"bottom left"},shadowed:{type:Boolean,default:!1}},setup(n){const e=n,t=it({isVisible:e.visible});return At(()=>e.visible,i=>{t.isVisible=i}),(i,r)=>tn((O(),H("ul",{class:_e(`${i.GenerateModifiers("m-contextmenu",{shadowed:e.shadowed})} ${e.anchor}`)},[Yt(i.$slots,"default")],2)),[[yr,t.isVisible]])}});const SP={class:"ContextMenuItemName"},_P=pn({name:"ContextSubMenu",__name:"SubMenu",props:{disabled:{type:Boolean,default:!1},visible:{type:Boolean,default:!0},label:{}},emits:["over","out"],setup(n,{emit:e}){const t=e,i=n;return(r,s)=>tn((O(),H("div",{class:_e(r.GenerateModifiers("m-contextmenu-item",{arrowRight:!0,disabled:i.disabled})),onMouseover:s[0]||(s[0]=a=>t("over")),onMouseout:s[1]||(s[1]=a=>t("out"))},[q("div",SP,pe(i.label),1),Yt(r.$slots,"default")],34)),[[yr,i.visible]])}}),xP={class:"m-contextmenu-item__icon"},RP={class:"m-contextmenu-item__name"},AP={class:"m-contextmenu-item__shortcut"},fa=pn({name:"ContextMenuItem",__name:"Item",props:{disabled:{type:Boolean,default:!1},visible:{type:Boolean,default:!0},icon:{},label:{},shortcut:{}},setup(n){const e=n;return(t,i)=>tn((O(),H("button",{type:"button",class:_e(t.GenerateModifiers("m-contextmenu-item",{disabled:e.disabled}))},[q("div",xP,[e.icon?(O(),H("i",{key:0,class:_e(e.icon)},null,2)):Re("",!0)]),q("div",RP,pe(e.label),1),q("div",AP,pe(e.shortcut),1)],2)),[[yr,e.visible]])}});const kP=Object.assign({name:"ContextMenuSeparator"},{__name:"Separator",setup(n){return(e,t)=>(O(),H("div",{class:_e(e.GenerateModifiers("m-contextmenu-item",{separator:!0}))},null,2))}});class Yd{constructor(e){this.data=e}get Emerald(){var e;return this.currencyExists("Emerald")?((e=this.getCurrency("Emerald"))==null?void 0:e.count)??0:0}set Emerald(e){this.setCurrencyCount("Emerald",e)}get Gold(){var e;return this.currencyExists("Gold")?((e=this.getCurrency("Gold"))==null?void 0:e.count)??0:0}set Gold(e){this.setCurrencyCount("Gold",e)}getCurrency(e){const[t]=this.data.filter(({type:i})=>i===e);return t||null}currencyExists(e){return this.getCurrency(e)!==null}setCurrencyCount(e,t){if(!this.currencyExists(e))this.data.push({type:e,count:Math.max(0,parseInt(t,10))});else{const i=this.getCurrency(e);i&&(i.count=Math.max(0,parseInt(t,10)))}}}class Xs{constructor(e,t=[]){this.data=e,Object.keys(e).forEach(i=>{t.includes(i)||Object.defineProperty(this,i,{get:()=>this.data[i],set:r=>{this.data[i]=r}})})}}class Xa extends Xs{constructor(e,t=[]){super(e,["i18n",...t])}get i18n(){return this.data.i18n.reduce((e,t)=>({...e,[t.dataValues.locale]:t.dataValues}),{})}getI18n(e,t=""){var i,r;return((i=this.i18n[Ce.global.locale.value])==null?void 0:i[e])??((r=this.i18n["en-EN"])==null?void 0:r[e])??t}}class DP extends Xs{constructor(e){super(e,[])}}const MP=()=>{const n=it({dlcs:{}});return{state:n,actions:{async load(){const t=await Te.Dlc.findAll();n.dlcs=t.reduce((i,r)=>({...i,[r.dataValues.id]:new DP({...r.dataValues,releasedAt:new Date(r.dataValues.releasedAt)})}),{})}}}},Ja=MP();class PP extends Xa{constructor(e){super(e,[])}get dlc(){return Ja.state.dlcs[this.dlcId]}get image(){return Un(`img/Enchants/${this.id}.png`)}}const TP=()=>{const n=it({enchants:{}});return{state:n,actions:{async load(){const t=await Te.Enchant.findAll();n.enchants=t.reduce((i,r)=>({...i,[r.dataValues.id]:new PP(r.dataValues)}),{})},createRandomGameEnchantOfType(t){const[i]=au(Object.values(n.enchants).filter(r=>r.type.includes(t)));return new An({id:i.id,investedPoints:0,level:0})}}}},$s=TP();var pf=(n=>(n.COMMON="Common",n.POWERFUL="Powerful",n))(pf||{});class An extends Xs{constructor(t,i){super(t,[]);qt(this,"netherite",!1);this.isGilded=i}static get UNSET(){return new An({id:"Unset",investedPoints:0,level:0})}get enchantData(){return $s.state.enchants[this.id]?$s.state.enchants[this.id]:$s.state.enchants.Unknown}get enchantmentPointsInvested(){if(this.netherite)return 0;const{tier:t}=this.enchantData,i=(t===pf.COMMON?0:1)+(this.isGilded?1:0);return[...Array(this.level).keys()].map(r=>r+1+i).reduce((r,s)=>r+s,0)}get enchantIdentifier(){return this.enchantData.type?this.id:"Unknown"}getInvestmentCostForLevel(t){if(this.netherite)return 0;const{tier:i}=this.enchantData,r=(i===pf.COMMON?0:1)+(this.isGilded?1:0);return[...Array(3).keys()].map(s=>s+1+r)[t-1]}setNetherite(t){this.netherite=t}toString(){return this.enchantData.getI18n("name")}}class IP extends Xa{constructor(e){super(e,[])}get dlc(){return Ja.state.dlcs[this.dlcId]}toGameData(){return new uE({id:this.id,rarity:"Common"})}}const OP=()=>{const n=it({properties:{}});return{state:n,actions:{async load(){const t=await Te.ArmorProperty.findAll();n.properties=t.reduce((i,r)=>({...i,[r.dataValues.id]:new IP(r.dataValues)}),{})}}}},Sa=OP();class uE extends Xs{constructor(e){super(e,[])}get armorPropertyData(){return Sa.state.properties[this.id]?Sa.state.properties[this.id]:Sa.state.properties.Unknown}get armorPropertyIdentifier(){return this.armorPropertyData.id!=="Unknown"?this.id:"Unknown"}}let NP=class extends Xs{constructor(e){super(e,[])}};const FP=()=>{const n=it({events:{}});return{state:n,actions:{async load(){const t=await Te.Event.findAll();n.events=t.reduce((i,r)=>({...i,[r.dataValues.id]:new NP({...r.dataValues,startedAt:new Date(r.dataValues.startedAt),endedAt:new Date(r.dataValues.endedAt)})}),{})}}}},fd=FP();class LP extends Xa{constructor(e){super(e,["events","armorproperties"])}get dlc(){return Ja.state.dlcs[this.dlcId]}get events(){return(this.data.events??[]).map(e=>fd.state.events[e])}get armorproperties(){return(this.data.armorproperties??[]).map(e=>Sa.state.properties[e])}get image(){return Un(`img/Items/Armors/${this.id}.png`)}toGameData(e){const t={inventoryIndex:e,power:1,rarity:this.rarity[0],type:this.id,upgraded:!1};return this.id==="MysteryArmor"?t.armorproperties=au(this.armorproperties).slice(0,2).map(i=>i.toGameData().data):t.armorproperties=this.armorproperties.map(i=>i.toGameData().data),new Pt(t)}}class BP extends Xa{constructor(e){super(e,["events"])}get dlc(){return Ja.state.dlcs[this.dlcId]}get events(){return(this.data.events??[]).map(e=>fd.state.events[e])}get image(){return Un(`img/Items/Artefacts/${this.id}.png`)}toGameData(e){return new Pt({inventoryIndex:e,power:1,rarity:this.rarity[0],type:this.id,upgraded:!1})}}class $P extends Xa{constructor(e){super(e,["events"])}get dlc(){return Ja.state.dlcs[this.dlcId]}get events(){return(this.data.events??[]).map(e=>fd.state.events[e])}get image(){return Un(`img/Items/${this.type}Weapons/${this.id}.png`)}toGameData(e){return new Pt({inventoryIndex:e,power:1,rarity:this.rarity[0],type:this.id,enchantments:[...Array(9).keys()].map(()=>$s.actions.createRandomGameEnchantOfType(this.type).data),upgraded:!1})}}const qP=()=>{const n=it({armors:{},artefacts:{},weapons:{}}),e=Qe(()=>({...n.armors,...n.artefacts,...n.weapons})),t=Qe(()=>({...n.armors,...n.weapons}));return{state:n,items:e,itemsButArtefacts:t,actions:{async load(){const r=await Te.Armor.findAll();n.armors=r.reduce((o,l)=>({...o,[l.dataValues.id]:new LP(l.dataValues)}),{});const s=await Te.Artefact.findAll();n.artefacts=s.reduce((o,l)=>({...o,[l.dataValues.id]:new BP(l.dataValues)}),{});const a=await Te.Weapon.findAll();n.weapons=a.reduce((o,l)=>({...o,[l.dataValues.id]:new $P(l.dataValues)}),{})}}}},yt=qP();var Ln=(n=>(n.COMMON="Common",n.RARE="Rare",n.UNIQUE="Unique",n))(Ln||{}),ft=(n=>(n.MELEE="Melee",n.ARMOR="Armor",n.RANGED="Ranged",n.ARTEFACT="Artefact",n))(ft||{});class Ci{constructor(e){qt(this,"list");qt(this,"compressed",{});this.list=e??[],this.compressed=this.list.reduce((t,i)=>({...t,[i]:(t[i]??0)+1}),{})}countContains(e){return Object.entries(e.compressed).reduce((t,[i,r])=>t+(this.compressed[i]&&this.compressed[i]>=r?1:0),0)}add(e){return new Ci([...this.list,...e.list])}sub(e){const t=[...this.list];return e.list.forEach(i=>{t.includes(i)&&t.splice(t.indexOf(i),1)}),new Ci(t)}merge(e){const t=[this.compressed,e.compressed].reduce((i,r)=>(Object.entries(r).forEach(([s,a])=>{i[s]=Math.max(i[s]||0,a)}),i),{});return new Ci(Object.entries(t).reduce((i,[r,s])=>i.concat([...Array(s).keys()].map(()=>r)),[]))}isEmpty(){return this.list.length===0}get length(){return this.list.length}}class Pt extends Xs{constructor(t){super(t,["enchantments","netheriteEnchant","armorproperties"]);qt(this,"$key",0);this.data.enchantments&&this.data.enchantments.length<9&&[...Array(9-this.data.enchantments.length).keys()].forEach(()=>{var i;(i=this.data.enchantments)==null||i.push(An.UNSET.data)})}static get SWORD(){return new Pt({enchantments:[...Array(9).keys()].map(()=>An.UNSET.data),power:1,rarity:Ln.COMMON,type:"Sword",upgraded:!1})}static get ARMOR(){return new Pt({armorproperties:[{id:"IncreasedArrowBundleSize",rarity:Ln.COMMON},{id:"RangedDamageBoost",rarity:Ln.COMMON}],enchantments:[...Array(9).keys()].map(()=>An.UNSET.data),power:1,rarity:Ln.COMMON,type:"ArchersStrappings",upgraded:!1})}static get BOW(){return new Pt({enchantments:[...Array(9).keys()].map(()=>An.UNSET.data),power:1,rarity:Ln.COMMON,type:"Bow",upgraded:!1})}static get ARTEFACT(){return new Pt({power:1,rarity:Ln.COMMON,type:"FireworksArrowItem",upgraded:!1})}get itemData(){return yt.items.value[this.data.type]?yt.items.value[this.data.type]:yt.items.value.Unknown}get itemType(){if(this.itemData.type)return this.itemData.type;if(this.data.armorproperties)return ft.ARMOR;if(this.data.enchantments){const[[t]]=this.enchantments.filter(i=>i.enchantData.type&&i.enchantData.type.length===1).map(i=>i.enchantData.type);return t}return ft.ARTEFACT}get itemIdentifier(){return this.itemData.type?this.data.type:"Unknown"}isGear(){return!!this.data.equipmentSlot&&this.data.equipmentSlot.indexOf("Gear")>=0}isHotbar(){return!!this.data.equipmentSlot&&this.data.equipmentSlot.indexOf("Hotbar")>=0}isEquipped(){return this.isGear()||this.isHotbar()}isStored(){return G.state.selectedCharacter.storageChest.contains(this)}get weaponType(){return this.data.type.toLowerCase().indexOf("crossbow")>=0?"Crossbow":"Bow"}isEnchanted(){return this.enchantmentPointsInvested>0}isCommon(){return this.data.rarity===Ln.COMMON}isRare(){return this.data.rarity===Ln.RARE}isUnique(){return this.data.rarity===Ln.UNIQUE}isGilded(){return!!this.data.netheriteEnchant&&this.data.netheriteEnchant.id!=="Unset"&&this.data.netheriteEnchant.level>0}isMelee(){return this.itemData.type===ft.MELEE}isArmor(){return this.itemData.type===ft.ARMOR}isRanged(){return this.itemData.type===ft.RANGED}isArtefact(){return this.itemData.type===ft.ARTEFACT}get gearType(){return this.itemData.type}set gearType(t){this.data.equipmentSlot=`${t}Gear`}get hotbarSlot(){var t;return parseInt(((t=this.data.equipmentSlot)==null?void 0:t.replace("HotbarSlot",""))??"",10)}set hotbarSlot(t){this.data.equipmentSlot=`HotbarSlot${t}`}get powerLevel(){return Math.floor((this.data.power-1)*10)+1}set powerLevel(t){const i=this.data.power,r=(t-1)/10+1;this.data.power=(r*10+i*10%1)/10}get enchantmentPointsInvested(){return this.enchantments.reduce((t,i)=>t+i.enchantmentPointsInvested,0)}get chunkedEnchantments(){return sE((i=>i.length===9?i:[...i,...[...Array(9-i.length+1).keys()].map(()=>An.UNSET).reduce((r,s)=>[...r,s],[])])(this.enchantments),3)}get enchantments(){return(this.data.enchantments??[]).map(t=>new An(t,this.isGilded()))}get netheriteEnchant(){const t=this.isGilded()?new An(this.data.netheriteEnchant):An.UNSET;return t.setNetherite(!0),t}set netheriteEnchant(t){this.data.netheriteEnchant=t.data}get armorproperties(){return(this.data.armorproperties??[]).map(t=>new uE(t))}get runeList(){return new Ci(this.itemData.ancientHuntRunes)}convertTo(t){const{type:i}=this.itemData,r=t.type;if(this.data.type=t.id,[this.data.rarity]=t.rarity,this.data.upgraded=!1,r===ft.ARTEFACT&&this.data.enchantments&&delete this.data.enchantments,this.data.netheriteEnchant&&(delete this.data.netheriteEnchant,this.$key+=1),r!==ft.ARTEFACT&&(this.data.enchantments=[...Array(9).keys()].map(()=>An.UNSET.data)),r!==ft.ARMOR&&i!==ft.ARMOR&&delete this.data.armorproperties,r===ft.ARMOR)if(t.id==="MysteryArmor"){const s=t.armorproperties.map(a=>({id:a,rarity:Ln.COMMON}));s.sort(()=>.5-Math.random()),this.data.armorproperties=s.slice(0,3)}else this.data.armorproperties=t.armorproperties.map(s=>({id:s,rarity:Ln.COMMON}))}equip(){const{type:t}=this.itemData;let i=null;if(delete this.data.inventoryIndex,t!==ft.ARTEFACT)[i]=G.state.selectedCharacter.inventory.gears.filter(r=>r&&r.gearType===t),this.gearType=t;else{const r=G.state.selectedCharacter.inventory.hotbar.map(l=>l?l.hotbarSlot:null),[s]=[1,2,3].filter(l=>r.indexOf(l)<0),a=G.state.oldSelectedItem&&G.state.oldSelectedItem.isArtefact(),o=s||a&&G.state.oldSelectedItem.hotbarSlot||1;[i]=G.state.selectedCharacter.inventory.hotbar.filter(l=>l&&l.hotbarSlot===o),this.hotbarSlot=o}i?i.unequip():G.state.selectedCharacter.inventory.checkIntegrity()}unequip(){this.data.inventoryIndex=0,delete this.data.equipmentSlot,G.state.selectedCharacter.inventory.checkIntegrity()}toString(){return this.itemData.getI18n("name")}clone(){return new Pt(JSON.parse(JSON.stringify(this.data)))}}class dE{constructor(e,t){qt(this,"items",[]);this.data=t,this.items=this.data.map(i=>new Pt(i)),this.constructor.MAX_STORAGE_SIZE||Object.defineProperty(this.constructor,"MAX_STORAGE_SIZE",{get:()=>e})}get inventory(){return this.items}isFull(){return this.inventory.length===this.constructor.MAX_STORAGE_SIZE}getAvailableSlotCount(){return this.constructor.MAX_STORAGE_SIZE-this.inventory.length}addItem(e){e.data.equipmentSlot&&delete e.data.equipmentSlot,e.data.inventoryIndex=0,e.data.markedNew=!0;const t=this.items.findIndex(i=>i.data.inventoryIndex===0);this.data.splice(t,0,e.data),this.items.splice(t,0,e),this.checkIntegrity(),G.setters.setItem(this.inventory[0])}removeItem(e){this.data.splice(this.data.indexOf(e.data),1),this.items.splice(this.items.indexOf(e),1),this.checkIntegrity()}contains(e){return this.items.includes(e)}}class Qd extends dE{constructor(e){super(180,e)}get gears(){const e=this.items.filter(t=>t.isGear());if(e.length<3){const[t]=e.filter(s=>s.gearType===ft.MELEE),[i]=e.filter(s=>s.gearType===ft.ARMOR),[r]=e.filter(s=>s.gearType===ft.RANGED);return[t,i,r]}return e}get hotbar(){const e=this.items.filter(t=>t.isHotbar());if(e.length<3){const[t]=e.filter(s=>s.hotbarSlot===1),[i]=e.filter(s=>s.hotbarSlot===2),[r]=e.filter(s=>s.hotbarSlot===3);return[t,i,r]}return e}get inventory(){return this.items.filter(e=>!e.isEquipped())}insertAt(e,t){Object.keys(t).forEach(i=>{e[i]=t[i]}),this.items.push(e),G.setters.setItem(e),this.checkIntegrity()}checkIntegrity(){const[e]=this.gears.filter(l=>l&&l.gearType===ft.MELEE),[t]=this.gears.filter(l=>l&&l.gearType===ft.ARMOR),[i]=this.gears.filter(l=>l&&l.gearType===ft.RANGED),[r]=this.hotbar.filter(l=>l&&l.hotbarSlot===1),[s]=this.hotbar.filter(l=>l&&l.hotbarSlot===2),[a]=this.hotbar.filter(l=>l&&l.hotbarSlot===3),o=this.inventory;o.forEach((l,c)=>{l.data.inventoryIndex=c}),this.items=[e,t,i,r,s,a,...o].filter(l=>!!l),this.data=this.items.map(({data:l})=>l),G.state.selectedCharacter.data.items=this.data}}class Xd extends dE{constructor(e){super(300,e)}addItem(e){e.data.markedNew=!0,this.data.splice(0,0,e.data),this.items.splice(0,0,e),this.checkIntegrity(),[G.state.selectedItem]=this.inventory}checkIntegrity(){this.items=this.items.filter(e=>!!e),this.data=this.items.map(({data:e})=>e),G.state.selectedCharacter.data.storageChestItems=this.data}}class UP{d(e){return`${e.getDate()}`.padStart(2,"0")}D(e){const t=Ce.global.t(`Date.days[${e.getDay()}]`),i=t.substring(0,3);return i===t?i:`${i}.`}j(e){return e.getDate()}l(e){return Ce.global.t(`Date.days[${e.getDay()}]`)}N(e){return e.getDay()+1}S(e){const t=Ce.global.t(`Date.daySuffix[${e.getDate()-1}]`)||null;return t&&t!==`Date.daySuffix[${e.getDate()-1}]`?t:Ce.global.t("Date.defaultDaySuffix")}w(e){return e.getDay()}F(e){return Ce.global.t(`Date.months[${e.getMonth()}]`)}m(e){return`${e.getMonth()+1}`.padStart(2,"0")}M(e){const t=Ce.global.t(`Date.months[${e.getMonth()}]`),i=t.substring(0,4);return t===i?i:`${i}.`}n(e){return e.getMonth()+1}t(e){return[31,27+this.L(e),31,30,31,30,31,31,30,31,30,31][e.getMonth()]}L(e){return e.getFullYear()%100!==0||e.getFullYear()%400===0?1:0}Y(e){return e.getFullYear()}y(e){return parseInt(`${e.getFullYear()}`.substring(2),10)}G(e){return e.getHours()}H(e){return`${e.getHours()}`.padStart(2,"0")}i(e){return`${e.getMinutes()}`.padStart(2,"0")}s(e){return`${e.getSeconds()}`.padStart(2,"0")}format(e,t){return t.split("").map(i=>typeof this[i]=="function"?this[i](e):i).join("")}}const hE=new UP;class HP{constructor(e){qt(this,"data",{filePath:null,profilId:null,characterId:null});this.data=e,Object.assign(this.data,e),Object.keys(this.data).forEach(t=>{Object.defineProperty(this,t,{get:()=>this.data[t],set:i=>{this.data[t]=i}})})}get createdAt(){const e=new RegExp(`^${this.characterId}-([0-9]{4})-([0-9]{2})-([0-9]{2})-([0-9]{2})h([0-9]{2})\\.json\\.bak$`);return new Date(this.filePath.replace(e,"$1-$2-$3 $4:$5"))}get formatedDate(){return hE.format(this.createdAt,Ce.global.t("MCD.CharacterCorruptionDetection.dateFormat"))}async restore(){return Te.invoke("restoreBackup",this.profilId,this.characterId,this.filePath)}}class Jd{static async encrypt(e,t,i=!0){return Te.invoke("encryptFile",e,t,i)}static decrypt(e,t=!1){return Te.invoke("decryptFile",e,t)}}var bo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var gf={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(n,e){(function(t,i){i(e)})(bo,function(t){function i(){for(var M=arguments.length,A=Array(M),T=0;T<M;T++)A[T]=arguments[T];if(A.length>1){A[0]=A[0].slice(0,-1);for(var z=A.length-1,j=1;j<z;++j)A[j]=A[j].slice(1,-1);return A[z]=A[z].slice(1),A.join("")}else return A[0]}function r(M){return"(?:"+M+")"}function s(M){return M===void 0?"undefined":M===null?"null":Object.prototype.toString.call(M).split(" ").pop().split("]").shift().toLowerCase()}function a(M){return M.toUpperCase()}function o(M){return M!=null?M instanceof Array?M:typeof M.length!="number"||M.split||M.setInterval||M.call?[M]:Array.prototype.slice.call(M):[]}function l(M,A){var T=M;if(A)for(var z in A)T[z]=A[z];return T}function c(M){var A="[A-Za-z]",T="[0-9]",z=i(T,"[A-Fa-f]"),j=r(r("%[EFef]"+z+"%"+z+z+"%"+z+z)+"|"+r("%[89A-Fa-f]"+z+"%"+z+z)+"|"+r("%"+z+z)),De="[\\:\\/\\?\\#\\[\\]\\@]",Ie="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",st=i(De,Ie),Dt=M?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",zt=M?"[\\uE000-\\uF8FF]":"[]",nt=i(A,T,"[\\-\\.\\_\\~]",Dt);r(A+i(A,T,"[\\+\\-\\.]")+"*"),r(r(j+"|"+i(nt,Ie,"[\\:]"))+"*");var xt=r(r("25[0-5]")+"|"+r("2[0-4]"+T)+"|"+r("1"+T+T)+"|"+r("0?[1-9]"+T)+"|0?0?"+T),Gt=r(xt+"\\."+xt+"\\."+xt+"\\."+xt),We=r(z+"{1,4}"),Ot=r(r(We+"\\:"+We)+"|"+Gt),Jt=r(r(We+"\\:")+"{6}"+Ot),Nt=r("\\:\\:"+r(We+"\\:")+"{5}"+Ot),Oi=r(r(We)+"?\\:\\:"+r(We+"\\:")+"{4}"+Ot),Hr=r(r(r(We+"\\:")+"{0,1}"+We)+"?\\:\\:"+r(We+"\\:")+"{3}"+Ot),Vr=r(r(r(We+"\\:")+"{0,2}"+We)+"?\\:\\:"+r(We+"\\:")+"{2}"+Ot),ta=r(r(r(We+"\\:")+"{0,3}"+We)+"?\\:\\:"+We+"\\:"+Ot),ws=r(r(r(We+"\\:")+"{0,4}"+We)+"?\\:\\:"+Ot),mr=r(r(r(We+"\\:")+"{0,5}"+We)+"?\\:\\:"+We),jr=r(r(r(We+"\\:")+"{0,6}"+We)+"?\\:\\:"),Cs=r([Jt,Nt,Oi,Hr,Vr,ta,ws,mr,jr].join("|")),fi=r(r(nt+"|"+j)+"+");r("[vV]"+z+"+\\."+i(nt,Ie,"[\\:]")+"+"),r(r(j+"|"+i(nt,Ie))+"*");var so=r(j+"|"+i(nt,Ie,"[\\:\\@]"));return r(r(j+"|"+i(nt,Ie,"[\\@]"))+"+"),r(r(so+"|"+i("[\\/\\?]",zt))+"*"),{NOT_SCHEME:new RegExp(i("[^]",A,T,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(i("[^\\%\\:]",nt,Ie),"g"),NOT_HOST:new RegExp(i("[^\\%\\[\\]\\:]",nt,Ie),"g"),NOT_PATH:new RegExp(i("[^\\%\\/\\:\\@]",nt,Ie),"g"),NOT_PATH_NOSCHEME:new RegExp(i("[^\\%\\/\\@]",nt,Ie),"g"),NOT_QUERY:new RegExp(i("[^\\%]",nt,Ie,"[\\:\\@\\/\\?]",zt),"g"),NOT_FRAGMENT:new RegExp(i("[^\\%]",nt,Ie,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(i("[^]",nt,Ie),"g"),UNRESERVED:new RegExp(nt,"g"),OTHER_CHARS:new RegExp(i("[^\\%]",nt,st),"g"),PCT_ENCODED:new RegExp(j,"g"),IPV4ADDRESS:new RegExp("^("+Gt+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Cs+")"+r(r("\\%25|\\%(?!"+z+"{2})")+"("+fi+")")+"?\\]?$")}}var u=c(!1),d=c(!0),h=function(){function M(A,T){var z=[],j=!0,De=!1,Ie=void 0;try{for(var st=A[Symbol.iterator](),Dt;!(j=(Dt=st.next()).done)&&(z.push(Dt.value),!(T&&z.length===T));j=!0);}catch(zt){De=!0,Ie=zt}finally{try{!j&&st.return&&st.return()}finally{if(De)throw Ie}}return z}return function(A,T){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return M(A,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(M){if(Array.isArray(M)){for(var A=0,T=Array(M.length);A<M.length;A++)T[A]=M[A];return T}else return Array.from(M)},m=2147483647,p=36,g=1,v=26,C=38,y=700,E=72,_=128,w="-",k=/^xn--/,I=/[^\0-\x7E]/,P=/[\x2E\u3002\uFF0E\uFF61]/g,Z={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},X=p-g,B=Math.floor,$=String.fromCharCode;function U(M){throw new RangeError(Z[M])}function re(M,A){for(var T=[],z=M.length;z--;)T[z]=A(M[z]);return T}function le(M,A){var T=M.split("@"),z="";T.length>1&&(z=T[0]+"@",M=T[1]),M=M.replace(P,".");var j=M.split("."),De=re(j,A).join(".");return z+De}function ae(M){for(var A=[],T=0,z=M.length;T<z;){var j=M.charCodeAt(T++);if(j>=55296&&j<=56319&&T<z){var De=M.charCodeAt(T++);(De&64512)==56320?A.push(((j&1023)<<10)+(De&1023)+65536):(A.push(j),T--)}else A.push(j)}return A}var ue=function(A){return String.fromCodePoint.apply(String,f(A))},ve=function(A){return A-48<10?A-22:A-65<26?A-65:A-97<26?A-97:p},me=function(A,T){return A+22+75*(A<26)-((T!=0)<<5)},ke=function(A,T,z){var j=0;for(A=z?B(A/y):A>>1,A+=B(A/T);A>X*v>>1;j+=p)A=B(A/X);return B(j+(X+1)*A/(A+C))},Me=function(A){var T=[],z=A.length,j=0,De=_,Ie=E,st=A.lastIndexOf(w);st<0&&(st=0);for(var Dt=0;Dt<st;++Dt)A.charCodeAt(Dt)>=128&&U("not-basic"),T.push(A.charCodeAt(Dt));for(var zt=st>0?st+1:0;zt<z;){for(var nt=j,xt=1,Gt=p;;Gt+=p){zt>=z&&U("invalid-input");var We=ve(A.charCodeAt(zt++));(We>=p||We>B((m-j)/xt))&&U("overflow"),j+=We*xt;var Ot=Gt<=Ie?g:Gt>=Ie+v?v:Gt-Ie;if(We<Ot)break;var Jt=p-Ot;xt>B(m/Jt)&&U("overflow"),xt*=Jt}var Nt=T.length+1;Ie=ke(j-nt,Nt,nt==0),B(j/Nt)>m-De&&U("overflow"),De+=B(j/Nt),j%=Nt,T.splice(j++,0,De)}return String.fromCodePoint.apply(String,T)},Xe=function(A){var T=[];A=ae(A);var z=A.length,j=_,De=0,Ie=E,st=!0,Dt=!1,zt=void 0;try{for(var nt=A[Symbol.iterator](),xt;!(st=(xt=nt.next()).done);st=!0){var Gt=xt.value;Gt<128&&T.push($(Gt))}}catch(ao){Dt=!0,zt=ao}finally{try{!st&&nt.return&&nt.return()}finally{if(Dt)throw zt}}var We=T.length,Ot=We;for(We&&T.push(w);Ot<z;){var Jt=m,Nt=!0,Oi=!1,Hr=void 0;try{for(var Vr=A[Symbol.iterator](),ta;!(Nt=(ta=Vr.next()).done);Nt=!0){var ws=ta.value;ws>=j&&ws<Jt&&(Jt=ws)}}catch(ao){Oi=!0,Hr=ao}finally{try{!Nt&&Vr.return&&Vr.return()}finally{if(Oi)throw Hr}}var mr=Ot+1;Jt-j>B((m-De)/mr)&&U("overflow"),De+=(Jt-j)*mr,j=Jt;var jr=!0,Cs=!1,fi=void 0;try{for(var so=A[Symbol.iterator](),sg;!(jr=(sg=so.next()).done);jr=!0){var ag=sg.value;if(ag<j&&++De>m&&U("overflow"),ag==j){for(var Bl=De,$l=p;;$l+=p){var ql=$l<=Ie?g:$l>=Ie+v?v:$l-Ie;if(Bl<ql)break;var og=Bl-ql,lg=p-ql;T.push($(me(ql+og%lg,0))),Bl=B(og/lg)}T.push($(me(Bl,0))),Ie=ke(De,mr,Ot==We),De=0,++Ot}}}catch(ao){Cs=!0,fi=ao}finally{try{!jr&&so.return&&so.return()}finally{if(Cs)throw fi}}++De,++j}return T.join("")},Fe=function(A){return le(A,function(T){return k.test(T)?Me(T.slice(4).toLowerCase()):T})},wt=function(A){return le(A,function(T){return I.test(T)?"xn--"+Xe(T):T})},Ze={version:"2.1.0",ucs2:{decode:ae,encode:ue},decode:Me,encode:Xe,toASCII:wt,toUnicode:Fe},W={};function ce(M){var A=M.charCodeAt(0),T=void 0;return A<16?T="%0"+A.toString(16).toUpperCase():A<128?T="%"+A.toString(16).toUpperCase():A<2048?T="%"+(A>>6|192).toString(16).toUpperCase()+"%"+(A&63|128).toString(16).toUpperCase():T="%"+(A>>12|224).toString(16).toUpperCase()+"%"+(A>>6&63|128).toString(16).toUpperCase()+"%"+(A&63|128).toString(16).toUpperCase(),T}function oe(M){for(var A="",T=0,z=M.length;T<z;){var j=parseInt(M.substr(T+1,2),16);if(j<128)A+=String.fromCharCode(j),T+=3;else if(j>=194&&j<224){if(z-T>=6){var De=parseInt(M.substr(T+4,2),16);A+=String.fromCharCode((j&31)<<6|De&63)}else A+=M.substr(T,6);T+=6}else if(j>=224){if(z-T>=9){var Ie=parseInt(M.substr(T+4,2),16),st=parseInt(M.substr(T+7,2),16);A+=String.fromCharCode((j&15)<<12|(Ie&63)<<6|st&63)}else A+=M.substr(T,9);T+=9}else A+=M.substr(T,3),T+=3}return A}function de(M,A){function T(z){var j=oe(z);return j.match(A.UNRESERVED)?j:z}return M.scheme&&(M.scheme=String(M.scheme).replace(A.PCT_ENCODED,T).toLowerCase().replace(A.NOT_SCHEME,"")),M.userinfo!==void 0&&(M.userinfo=String(M.userinfo).replace(A.PCT_ENCODED,T).replace(A.NOT_USERINFO,ce).replace(A.PCT_ENCODED,a)),M.host!==void 0&&(M.host=String(M.host).replace(A.PCT_ENCODED,T).toLowerCase().replace(A.NOT_HOST,ce).replace(A.PCT_ENCODED,a)),M.path!==void 0&&(M.path=String(M.path).replace(A.PCT_ENCODED,T).replace(M.scheme?A.NOT_PATH:A.NOT_PATH_NOSCHEME,ce).replace(A.PCT_ENCODED,a)),M.query!==void 0&&(M.query=String(M.query).replace(A.PCT_ENCODED,T).replace(A.NOT_QUERY,ce).replace(A.PCT_ENCODED,a)),M.fragment!==void 0&&(M.fragment=String(M.fragment).replace(A.PCT_ENCODED,T).replace(A.NOT_FRAGMENT,ce).replace(A.PCT_ENCODED,a)),M}function Ae(M){return M.replace(/^0*(.*)/,"$1")||"0"}function Je(M,A){var T=M.match(A.IPV4ADDRESS)||[],z=h(T,2),j=z[1];return j?j.split(".").map(Ae).join("."):M}function R(M,A){var T=M.match(A.IPV6ADDRESS)||[],z=h(T,3),j=z[1],De=z[2];if(j){for(var Ie=j.toLowerCase().split("::").reverse(),st=h(Ie,2),Dt=st[0],zt=st[1],nt=zt?zt.split(":").map(Ae):[],xt=Dt.split(":").map(Ae),Gt=A.IPV4ADDRESS.test(xt[xt.length-1]),We=Gt?7:8,Ot=xt.length-We,Jt=Array(We),Nt=0;Nt<We;++Nt)Jt[Nt]=nt[Nt]||xt[Ot+Nt]||"";Gt&&(Jt[We-1]=Je(Jt[We-1],A));var Oi=Jt.reduce(function(mr,jr,Cs){if(!jr||jr==="0"){var fi=mr[mr.length-1];fi&&fi.index+fi.length===Cs?fi.length++:mr.push({index:Cs,length:1})}return mr},[]),Hr=Oi.sort(function(mr,jr){return jr.length-mr.length})[0],Vr=void 0;if(Hr&&Hr.length>1){var ta=Jt.slice(0,Hr.index),ws=Jt.slice(Hr.index+Hr.length);Vr=ta.join(":")+"::"+ws.join(":")}else Vr=Jt.join(":");return De&&(Vr+="%"+De),Vr}else return M}var b=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,N="".match(/(){0}/)[1]===void 0;function J(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},T={},z=A.iri!==!1?d:u;A.reference==="suffix"&&(M=(A.scheme?A.scheme+":":"")+"//"+M);var j=M.match(b);if(j){N?(T.scheme=j[1],T.userinfo=j[3],T.host=j[4],T.port=parseInt(j[5],10),T.path=j[6]||"",T.query=j[7],T.fragment=j[8],isNaN(T.port)&&(T.port=j[5])):(T.scheme=j[1]||void 0,T.userinfo=M.indexOf("@")!==-1?j[3]:void 0,T.host=M.indexOf("//")!==-1?j[4]:void 0,T.port=parseInt(j[5],10),T.path=j[6]||"",T.query=M.indexOf("?")!==-1?j[7]:void 0,T.fragment=M.indexOf("#")!==-1?j[8]:void 0,isNaN(T.port)&&(T.port=M.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?j[4]:void 0)),T.host&&(T.host=R(Je(T.host,z),z)),T.scheme===void 0&&T.userinfo===void 0&&T.host===void 0&&T.port===void 0&&!T.path&&T.query===void 0?T.reference="same-document":T.scheme===void 0?T.reference="relative":T.fragment===void 0?T.reference="absolute":T.reference="uri",A.reference&&A.reference!=="suffix"&&A.reference!==T.reference&&(T.error=T.error||"URI is not a "+A.reference+" reference.");var De=W[(A.scheme||T.scheme||"").toLowerCase()];if(!A.unicodeSupport&&(!De||!De.unicodeSupport)){if(T.host&&(A.domainHost||De&&De.domainHost))try{T.host=Ze.toASCII(T.host.replace(z.PCT_ENCODED,oe).toLowerCase())}catch(Ie){T.error=T.error||"Host's domain name can not be converted to ASCII via punycode: "+Ie}de(T,u)}else de(T,z);De&&De.parse&&De.parse(T,A)}else T.error=T.error||"URI can not be parsed.";return T}function Q(M,A){var T=A.iri!==!1?d:u,z=[];return M.userinfo!==void 0&&(z.push(M.userinfo),z.push("@")),M.host!==void 0&&z.push(R(Je(String(M.host),T),T).replace(T.IPV6ADDRESS,function(j,De,Ie){return"["+De+(Ie?"%25"+Ie:"")+"]"})),(typeof M.port=="number"||typeof M.port=="string")&&(z.push(":"),z.push(String(M.port))),z.length?z.join(""):void 0}var ne=/^\.\.?\//,ie=/^\/\.(\/|$)/,S=/^\/\.\.(\/|$)/,x=/^\/?(?:.|\n)*?(?=\/|$)/;function D(M){for(var A=[];M.length;)if(M.match(ne))M=M.replace(ne,"");else if(M.match(ie))M=M.replace(ie,"/");else if(M.match(S))M=M.replace(S,"/"),A.pop();else if(M==="."||M==="..")M="";else{var T=M.match(x);if(T){var z=T[0];M=M.slice(z.length),A.push(z)}else throw new Error("Unexpected dot segment condition")}return A.join("")}function V(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},T=A.iri?d:u,z=[],j=W[(A.scheme||M.scheme||"").toLowerCase()];if(j&&j.serialize&&j.serialize(M,A),M.host&&!T.IPV6ADDRESS.test(M.host)){if(A.domainHost||j&&j.domainHost)try{M.host=A.iri?Ze.toUnicode(M.host):Ze.toASCII(M.host.replace(T.PCT_ENCODED,oe).toLowerCase())}catch(st){M.error=M.error||"Host's domain name can not be converted to "+(A.iri?"Unicode":"ASCII")+" via punycode: "+st}}de(M,T),A.reference!=="suffix"&&M.scheme&&(z.push(M.scheme),z.push(":"));var De=Q(M,A);if(De!==void 0&&(A.reference!=="suffix"&&z.push("//"),z.push(De),M.path&&M.path.charAt(0)!=="/"&&z.push("/")),M.path!==void 0){var Ie=M.path;!A.absolutePath&&(!j||!j.absolutePath)&&(Ie=D(Ie)),De===void 0&&(Ie=Ie.replace(/^\/\//,"/%2F")),z.push(Ie)}return M.query!==void 0&&(z.push("?"),z.push(M.query)),M.fragment!==void 0&&(z.push("#"),z.push(M.fragment)),z.join("")}function se(M,A){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},z=arguments[3],j={};return z||(M=J(V(M,T),T),A=J(V(A,T),T)),T=T||{},!T.tolerant&&A.scheme?(j.scheme=A.scheme,j.userinfo=A.userinfo,j.host=A.host,j.port=A.port,j.path=D(A.path||""),j.query=A.query):(A.userinfo!==void 0||A.host!==void 0||A.port!==void 0?(j.userinfo=A.userinfo,j.host=A.host,j.port=A.port,j.path=D(A.path||""),j.query=A.query):(A.path?(A.path.charAt(0)==="/"?j.path=D(A.path):((M.userinfo!==void 0||M.host!==void 0||M.port!==void 0)&&!M.path?j.path="/"+A.path:M.path?j.path=M.path.slice(0,M.path.lastIndexOf("/")+1)+A.path:j.path=A.path,j.path=D(j.path)),j.query=A.query):(j.path=M.path,A.query!==void 0?j.query=A.query:j.query=M.query),j.userinfo=M.userinfo,j.host=M.host,j.port=M.port),j.scheme=M.scheme),j.fragment=A.fragment,j}function te(M,A,T){var z=l({scheme:"null"},T);return V(se(J(M,z),J(A,z),z,!0),z)}function L(M,A){return typeof M=="string"?M=V(J(M,A),A):s(M)==="object"&&(M=J(V(M,A),A)),M}function K(M,A,T){return typeof M=="string"?M=V(J(M,T),T):s(M)==="object"&&(M=V(M,T)),typeof A=="string"?A=V(J(A,T),T):s(A)==="object"&&(A=V(A,T)),M===A}function Pe(M,A){return M&&M.toString().replace(!A||!A.iri?u.ESCAPE:d.ESCAPE,ce)}function xe(M,A){return M&&M.toString().replace(!A||!A.iri?u.PCT_ENCODED:d.PCT_ENCODED,oe)}var at={scheme:"http",domainHost:!0,parse:function(A,T){return A.host||(A.error=A.error||"HTTP URIs must have a host."),A},serialize:function(A,T){var z=String(A.scheme).toLowerCase()==="https";return(A.port===(z?443:80)||A.port==="")&&(A.port=void 0),A.path||(A.path="/"),A}},sn={scheme:"https",domainHost:at.domainHost,parse:at.parse,serialize:at.serialize};function _n(M){return typeof M.secure=="boolean"?M.secure:String(M.scheme).toLowerCase()==="wss"}var Ur={scheme:"ws",domainHost:!0,parse:function(A,T){var z=A;return z.secure=_n(z),z.resourceName=(z.path||"/")+(z.query?"?"+z.query:""),z.path=void 0,z.query=void 0,z},serialize:function(A,T){if((A.port===(_n(A)?443:80)||A.port==="")&&(A.port=void 0),typeof A.secure=="boolean"&&(A.scheme=A.secure?"wss":"ws",A.secure=void 0),A.resourceName){var z=A.resourceName.split("?"),j=h(z,2),De=j[0],Ie=j[1];A.path=De&&De!=="/"?De:void 0,A.query=Ie,A.resourceName=void 0}return A.fragment=void 0,A}},hi={scheme:"wss",domainHost:Ur.domainHost,parse:Ur.parse,serialize:Ur.serialize},Fl={},xn="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Wt="[0-9A-Fa-f]",Ll=r(r("%[EFef]"+Wt+"%"+Wt+Wt+"%"+Wt+Wt)+"|"+r("%[89A-Fa-f]"+Wt+"%"+Wt+Wt)+"|"+r("%"+Wt+Wt)),w_="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",C_="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",S_=i(C_,'[\\"\\\\]'),__="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",x_=new RegExp(xn,"g"),ea=new RegExp(Ll,"g"),R_=new RegExp(i("[^]",w_,"[\\.]",'[\\"]',S_),"g"),tg=new RegExp(i("[^]",xn,__),"g"),A_=tg;function Od(M){var A=oe(M);return A.match(x_)?A:M}var ng={scheme:"mailto",parse:function(A,T){var z=A,j=z.to=z.path?z.path.split(","):[];if(z.path=void 0,z.query){for(var De=!1,Ie={},st=z.query.split("&"),Dt=0,zt=st.length;Dt<zt;++Dt){var nt=st[Dt].split("=");switch(nt[0]){case"to":for(var xt=nt[1].split(","),Gt=0,We=xt.length;Gt<We;++Gt)j.push(xt[Gt]);break;case"subject":z.subject=xe(nt[1],T);break;case"body":z.body=xe(nt[1],T);break;default:De=!0,Ie[xe(nt[0],T)]=xe(nt[1],T);break}}De&&(z.headers=Ie)}z.query=void 0;for(var Ot=0,Jt=j.length;Ot<Jt;++Ot){var Nt=j[Ot].split("@");if(Nt[0]=xe(Nt[0]),T.unicodeSupport)Nt[1]=xe(Nt[1],T).toLowerCase();else try{Nt[1]=Ze.toASCII(xe(Nt[1],T).toLowerCase())}catch(Oi){z.error=z.error||"Email address's domain name can not be converted to ASCII via punycode: "+Oi}j[Ot]=Nt.join("@")}return z},serialize:function(A,T){var z=A,j=o(A.to);if(j){for(var De=0,Ie=j.length;De<Ie;++De){var st=String(j[De]),Dt=st.lastIndexOf("@"),zt=st.slice(0,Dt).replace(ea,Od).replace(ea,a).replace(R_,ce),nt=st.slice(Dt+1);try{nt=T.iri?Ze.toUnicode(nt):Ze.toASCII(xe(nt,T).toLowerCase())}catch(Ot){z.error=z.error||"Email address's domain name can not be converted to "+(T.iri?"Unicode":"ASCII")+" via punycode: "+Ot}j[De]=zt+"@"+nt}z.path=j.join(",")}var xt=A.headers=A.headers||{};A.subject&&(xt.subject=A.subject),A.body&&(xt.body=A.body);var Gt=[];for(var We in xt)xt[We]!==Fl[We]&&Gt.push(We.replace(ea,Od).replace(ea,a).replace(tg,ce)+"="+xt[We].replace(ea,Od).replace(ea,a).replace(A_,ce));return Gt.length&&(z.query=Gt.join("&")),z}},k_=/^([^\:]+)\:(.*)/,rg={scheme:"urn",parse:function(A,T){var z=A.path&&A.path.match(k_),j=A;if(z){var De=T.scheme||j.scheme||"urn",Ie=z[1].toLowerCase(),st=z[2],Dt=De+":"+(T.nid||Ie),zt=W[Dt];j.nid=Ie,j.nss=st,j.path=void 0,zt&&(j=zt.parse(j,T))}else j.error=j.error||"URN can not be parsed.";return j},serialize:function(A,T){var z=T.scheme||A.scheme||"urn",j=A.nid,De=z+":"+(T.nid||j),Ie=W[De];Ie&&(A=Ie.serialize(A,T));var st=A,Dt=A.nss;return st.path=(j||T.nid)+":"+Dt,st}},D_=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ig={scheme:"urn:uuid",parse:function(A,T){var z=A;return z.uuid=z.nss,z.nss=void 0,!T.tolerant&&(!z.uuid||!z.uuid.match(D_))&&(z.error=z.error||"UUID is not valid."),z},serialize:function(A,T){var z=A;return z.nss=(A.uuid||"").toLowerCase(),z}};W[at.scheme]=at,W[sn.scheme]=sn,W[Ur.scheme]=Ur,W[hi.scheme]=hi,W[ng.scheme]=ng,W[rg.scheme]=rg,W[ig.scheme]=ig,t.SCHEMES=W,t.pctEncChar=ce,t.pctDecChars=oe,t.parse=J,t.removeDotSegments=D,t.serialize=V,t.resolveComponents=se,t.resolve=te,t.normalize=L,t.equal=K,t.escapeComponent=Pe,t.unescapeComponent=xe,Object.defineProperty(t,"__esModule",{value:!0})})})(gf,gf.exports);var VP=gf.exports,ip=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var i,r,s;if(Array.isArray(e)){if(i=e.length,i!=t.length)return!1;for(r=i;r--!==0;)if(!n(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),i=s.length,i!==Object.keys(t).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[r]))return!1;for(r=i;r--!==0;){var a=s[r];if(!n(e[a],t[a]))return!1}return!0}return e!==e&&t!==t},jP=function(e){for(var t=0,i=e.length,r=0,s;r<i;)t++,s=e.charCodeAt(r++),s>=55296&&s<=56319&&r<i&&(s=e.charCodeAt(r),(s&64512)==56320&&r++);return t},Za={copy:WP,checkDataType:vf,checkDataTypes:zP,coerceToTypes:GP,toHash:sp,getProperty:ap,escapeQuotes:op,equal:ip,ucs2length:jP,varOccurences:QP,varReplace:XP,schemaHasRules:JP,schemaHasRulesExcept:ZP,schemaUnknownRules:eT,toQuotedString:yf,getPathExpr:tT,getPath:nT,getData:sT,unescapeFragment:aT,unescapeJsonPointer:cp,escapeFragment:oT,escapeJsonPointer:lp};function WP(n,e){e=e||{};for(var t in n)e[t]=n[t];return e}function vf(n,e,t,i){var r=i?" !== ":" === ",s=i?" || ":" && ",a=i?"!":"",o=i?"":"!";switch(n){case"null":return e+r+"null";case"array":return a+"Array.isArray("+e+")";case"object":return"("+a+e+s+"typeof "+e+r+'"object"'+s+o+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+r+'"number"'+s+o+"("+e+" % 1)"+s+e+r+e+(t?s+a+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+r+'"'+n+'"'+(t?s+a+"isFinite("+e+")":"")+")";default:return"typeof "+e+r+'"'+n+'"'}}function zP(n,e,t){switch(n.length){case 1:return vf(n[0],e,t,!0);default:var i="",r=sp(n);r.array&&r.object&&(i=r.null?"(":"(!"+e+" || ",i+="typeof "+e+' !== "object")',delete r.null,delete r.array,delete r.object),r.number&&delete r.integer;for(var s in r)i+=(i?" && ":"")+vf(s,e,t,!0);return i}}var Bv=sp(["string","number","integer","boolean","null"]);function GP(n,e){if(Array.isArray(e)){for(var t=[],i=0;i<e.length;i++){var r=e[i];(Bv[r]||n==="array"&&r==="array")&&(t[t.length]=r)}if(t.length)return t}else{if(Bv[e])return[e];if(n==="array"&&e==="array")return["array"]}}function sp(n){for(var e={},t=0;t<n.length;t++)e[n[t]]=!0;return e}var KP=/^[a-z$_][a-z$_0-9]*$/i,YP=/'|\\/g;function ap(n){return typeof n=="number"?"["+n+"]":KP.test(n)?"."+n:"['"+op(n)+"']"}function op(n){return n.replace(YP,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function QP(n,e){e+="[^0-9]";var t=n.match(new RegExp(e,"g"));return t?t.length:0}function XP(n,e,t){return e+="([^0-9])",t=t.replace(/\$/g,"$$$$"),n.replace(new RegExp(e,"g"),t+"$1")}function JP(n,e){if(typeof n=="boolean")return!n;for(var t in n)if(e[t])return!0}function ZP(n,e,t){if(typeof n=="boolean")return!n&&t!="not";for(var i in n)if(i!=t&&e[i])return!0}function eT(n,e){if(typeof n!="boolean"){for(var t in n)if(!e[t])return t}}function yf(n){return"'"+op(n)+"'"}function tT(n,e,t,i){var r=t?"'/' + "+e+(i?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):i?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return mE(n,r)}function nT(n,e,t){var i=yf(t?"/"+lp(e):ap(e));return mE(n,i)}var rT=/^\/(?:[^~]|~0|~1)*$/,iT=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function sT(n,e,t){var i,r,s,a;if(n==="")return"rootData";if(n[0]=="/"){if(!rT.test(n))throw new Error("Invalid JSON-pointer: "+n);r=n,s="rootData"}else{if(a=n.match(iT),!a)throw new Error("Invalid JSON-pointer: "+n);if(i=+a[1],r=a[2],r=="#"){if(i>=e)throw new Error("Cannot access property/index "+i+" levels up, current level is "+e);return t[e-i]}if(i>e)throw new Error("Cannot access data "+i+" levels up, current level is "+e);if(s="data"+(e-i||""),!r)return s}for(var o=s,l=r.split("/"),c=0;c<l.length;c++){var u=l[c];u&&(s+=ap(cp(u)),o+=" && "+s)}return o}function mE(n,e){return n=='""'?e:(n+" + "+e).replace(/([^\\])' \+ '/g,"$1")}function aT(n){return cp(decodeURIComponent(n))}function oT(n){return encodeURIComponent(lp(n))}function lp(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")}function cp(n){return n.replace(/~1/g,"/").replace(/~0/g,"~")}var lT=Za,pE=cT;function cT(n){lT.copy(n,this)}var gE={exports:{}},Gi=gE.exports=function(n,e,t){typeof e=="function"&&(t=e,e={}),t=e.cb||t;var i=typeof t=="function"?t:t.pre||function(){},r=t.post||function(){};Ic(e,i,r,n,"",n)};Gi.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};Gi.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Gi.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Gi.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Ic(n,e,t,i,r,s,a,o,l,c){if(i&&typeof i=="object"&&!Array.isArray(i)){e(i,r,s,a,o,l,c);for(var u in i){var d=i[u];if(Array.isArray(d)){if(u in Gi.arrayKeywords)for(var h=0;h<d.length;h++)Ic(n,e,t,d[h],r+"/"+u+"/"+h,s,r,u,i,h)}else if(u in Gi.propsKeywords){if(d&&typeof d=="object")for(var f in d)Ic(n,e,t,d[f],r+"/"+u+"/"+uT(f),s,r,u,i,f)}else(u in Gi.keywords||n.allKeys&&!(u in Gi.skipKeywords))&&Ic(n,e,t,d,r+"/"+u,s,r,u,i)}t(i,r,s,a,o,l,c)}}function uT(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")}var dT=gE.exports,_l=VP,$v=ip,md=Za,lu=pE,hT=dT,up=ys;ys.normalizeId=ts;ys.fullPath=cu;ys.url=uu;ys.ids=vT;ys.inlineRef=bf;ys.schema=pd;function ys(n,e,t){var i=this._refs[t];if(typeof i=="string")if(this._refs[i])i=this._refs[i];else return ys.call(this,n,e,i);if(i=i||this._schemas[t],i instanceof lu)return bf(i.schema,this._opts.inlineRefs)?i.schema:i.validate||this._compile(i);var r=pd.call(this,e,t),s,a,o;return r&&(s=r.schema,e=r.root,o=r.baseId),s instanceof lu?a=s.validate||n.call(this,s.schema,e,void 0,o):s!==void 0&&(a=bf(s,this._opts.inlineRefs)?s:n.call(this,s,e,void 0,o)),a}function pd(n,e){var t=_l.parse(e),i=yE(t),r=cu(this._getId(n.schema));if(Object.keys(n.schema).length===0||i!==r){var s=ts(i),a=this._refs[s];if(typeof a=="string")return fT.call(this,n,a,t);if(a instanceof lu)a.validate||this._compile(a),n=a;else if(a=this._schemas[s],a instanceof lu){if(a.validate||this._compile(a),s==ts(e))return{schema:a,root:n,baseId:r};n=a}else return;if(!n.schema)return;r=cu(this._getId(n.schema))}return vE.call(this,t,r,n.schema,n)}function fT(n,e,t){var i=pd.call(this,n,e);if(i){var r=i.schema,s=i.baseId;n=i.root;var a=this._getId(r);return a&&(s=uu(s,a)),vE.call(this,t,s,r,n)}}var mT=md.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function vE(n,e,t,i){if(n.fragment=n.fragment||"",n.fragment.slice(0,1)=="/"){for(var r=n.fragment.split("/"),s=1;s<r.length;s++){var a=r[s];if(a){if(a=md.unescapeFragment(a),t=t[a],t===void 0)break;var o;if(!mT[a]&&(o=this._getId(t),o&&(e=uu(e,o)),t.$ref)){var l=uu(e,t.$ref),c=pd.call(this,i,l);c&&(t=c.schema,i=c.root,e=c.baseId)}}}if(t!==void 0&&t!==i.schema)return{schema:t,root:i,baseId:e}}}var pT=md.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function bf(n,e){if(e===!1)return!1;if(e===void 0||e===!0)return Ef(n);if(e)return wf(n)<=e}function Ef(n){var e;if(Array.isArray(n)){for(var t=0;t<n.length;t++)if(e=n[t],typeof e=="object"&&!Ef(e))return!1}else for(var i in n)if(i=="$ref"||(e=n[i],typeof e=="object"&&!Ef(e)))return!1;return!0}function wf(n){var e=0,t;if(Array.isArray(n)){for(var i=0;i<n.length;i++)if(t=n[i],typeof t=="object"&&(e+=wf(t)),e==1/0)return 1/0}else for(var r in n){if(r=="$ref")return 1/0;if(pT[r])e++;else if(t=n[r],typeof t=="object"&&(e+=wf(t)+1),e==1/0)return 1/0}return e}function cu(n,e){e!==!1&&(n=ts(n));var t=_l.parse(n);return yE(t)}function yE(n){return _l.serialize(n).split("#")[0]+"#"}var gT=/#\/?$/;function ts(n){return n?n.replace(gT,""):""}function uu(n,e){return e=ts(e),_l.resolve(n,e)}function vT(n){var e=ts(this._getId(n)),t={"":e},i={"":cu(e,!1)},r={},s=this;return hT(n,{allKeys:!0},function(a,o,l,c,u,d,h){if(o!==""){var f=s._getId(a),m=t[c],p=i[c]+"/"+u;if(h!==void 0&&(p+="/"+(typeof h=="number"?h:md.escapeFragment(h))),typeof f=="string"){f=m=ts(m?_l.resolve(m,f):f);var g=s._refs[f];if(typeof g=="string"&&(g=s._refs[g]),g&&g.schema){if(!$v(a,g.schema))throw new Error('id "'+f+'" resolves to more than one schema')}else if(f!=ts(p))if(f[0]=="#"){if(r[f]&&!$v(a,r[f]))throw new Error('id "'+f+'" resolves to more than one schema');r[f]=a}else s._refs[f]=p}t[o]=m,i[o]=p}}),r}var Zd=up,dp={Validation:qv(yT),MissingRef:qv(hp)};function yT(n){this.message="validation failed",this.errors=n,this.ajv=this.validation=!0}hp.message=function(n,e){return"can't resolve reference "+e+" from id "+n};function hp(n,e,t){this.message=t||hp.message(n,e),this.missingRef=Zd.url(n,e),this.missingSchema=Zd.normalizeId(Zd.fullPath(this.missingRef))}function qv(n){return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var bE=function(n,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var t=typeof e.cycles=="boolean"?e.cycles:!1,i=e.cmp&&function(s){return function(a){return function(o,l){var c={key:o,value:a[o]},u={key:l,value:a[l]};return s(c,u)}}}(e.cmp),r=[];return function s(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a!==void 0){if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);var o,l;if(Array.isArray(a)){for(l="[",o=0;o<a.length;o++)o&&(l+=","),l+=s(a[o])||"null";return l+"]"}if(a===null)return"null";if(r.indexOf(a)!==-1){if(t)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var c=r.push(a)-1,u=Object.keys(a).sort(i&&i(a));for(l="",o=0;o<u.length;o++){var d=u[o],h=s(a[d]);h&&(l&&(l+=","),l+=JSON.stringify(d)+":"+h)}return r.splice(c,1),"{"+l+"}"}}(n)},EE=function(e,t,i){var r="",s=e.schema.$async===!0,a=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),o=e.self._getId(e.schema);if(e.opts.strictKeywords){var l=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(l){var c="unknown keyword: "+l;if(e.opts.strictKeywords==="log")e.logger.warn(c);else throw new Error(c)}}if(e.isTop&&(r+=" var validate = ",s&&(e.async=!0,r+="async "),r+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",o&&(e.opts.sourceCode||e.opts.processCode)&&(r+=" "+("/*# sourceURL="+o+" */")+" ")),typeof e.schema=="boolean"||!(a||e.schema.$ref)){var t="false schema",u=e.level,d=e.dataLevel,h=e.schema[t],f=e.schemaPath+e.util.getProperty(t),m=e.errSchemaPath+"/"+t,_=!e.opts.allErrors,I,p="data"+(d||""),E="valid"+u;if(e.schema===!1){e.isTop?_=!0:r+=" var "+E+" = false; ";var g=g||[];g.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(I||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(m)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'boolean schema is false' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ";var v=r;r=g.pop(),!e.compositeRule&&_?e.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?s?r+=" return data; ":r+=" validate.errors = null; return true; ":r+=" var "+E+" = true; ";return e.isTop&&(r+=" }; return validate; "),r}if(e.isTop){var C=e.isTop,u=e.level=0,d=e.dataLevel=0,p="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var y="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(y);else throw new Error(y)}r+=" var vErrors = null; ",r+=" var errors = 0;     ",r+=" if (rootData === undefined) rootData = data; "}else{var u=e.level,d=e.dataLevel,p="data"+(d||"");if(o&&(e.baseId=e.resolve.url(e.baseId,o)),s&&!e.async)throw new Error("async schema in sync schema");r+=" var errs_"+u+" = errors;"}var E="valid"+u,_=!e.opts.allErrors,w="",k="",I,P=e.schema.type,Z=Array.isArray(P);if(P&&e.opts.nullable&&e.schema.nullable===!0&&(Z?P.indexOf("null")==-1&&(P=P.concat("null")):P!="null"&&(P=[P,"null"],Z=!0)),Z&&P.length==1&&(P=P[0],Z=!1),e.schema.$ref&&a){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(a=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(r+=" "+e.RULES.all.$comment.code(e,"$comment")),P){if(e.opts.coerceTypes)var X=e.util.coerceToTypes(e.opts.coerceTypes,P);var B=e.RULES.types[P];if(X||Z||B===!0||B&&!ie(B)){var f=e.schemaPath+".type",m=e.errSchemaPath+"/type",f=e.schemaPath+".type",m=e.errSchemaPath+"/type",$=Z?"checkDataTypes":"checkDataType";if(r+=" if ("+e.util[$](P,p,e.opts.strictNumbers,!0)+") { ",X){var U="dataType"+u,re="coerced"+u;r+=" var "+U+" = typeof "+p+"; var "+re+" = undefined; ",e.opts.coerceTypes=="array"&&(r+=" if ("+U+" == 'object' && Array.isArray("+p+") && "+p+".length == 1) { "+p+" = "+p+"[0]; "+U+" = typeof "+p+"; if ("+e.util.checkDataType(e.schema.type,p,e.opts.strictNumbers)+") "+re+" = "+p+"; } "),r+=" if ("+re+" !== undefined) ; ";var le=X;if(le)for(var ae,ue=-1,ve=le.length-1;ue<ve;)ae=le[ue+=1],ae=="string"?r+=" else if ("+U+" == 'number' || "+U+" == 'boolean') "+re+" = '' + "+p+"; else if ("+p+" === null) "+re+" = ''; ":ae=="number"||ae=="integer"?(r+=" else if ("+U+" == 'boolean' || "+p+" === null || ("+U+" == 'string' && "+p+" && "+p+" == +"+p+" ",ae=="integer"&&(r+=" && !("+p+" % 1)"),r+=")) "+re+" = +"+p+"; "):ae=="boolean"?r+=" else if ("+p+" === 'false' || "+p+" === 0 || "+p+" === null) "+re+" = false; else if ("+p+" === 'true' || "+p+" === 1) "+re+" = true; ":ae=="null"?r+=" else if ("+p+" === '' || "+p+" === 0 || "+p+" === false) "+re+" = null; ":e.opts.coerceTypes=="array"&&ae=="array"&&(r+=" else if ("+U+" == 'string' || "+U+" == 'number' || "+U+" == 'boolean' || "+p+" == null) "+re+" = ["+p+"]; ");r+=" else {   ";var g=g||[];g.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(I||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(m)+" , params: { type: '",Z?r+=""+P.join(","):r+=""+P,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",Z?r+=""+P.join(","):r+=""+P,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ";var v=r;r=g.pop(),!e.compositeRule&&_?e.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } if ("+re+" !== undefined) {  ";var me=d?"data"+(d-1||""):"parentData",ke=d?e.dataPathArr[d]:"parentDataProperty";r+=" "+p+" = "+re+"; ",d||(r+="if ("+me+" !== undefined)"),r+=" "+me+"["+ke+"] = "+re+"; } "}else{var g=g||[];g.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(I||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(m)+" , params: { type: '",Z?r+=""+P.join(","):r+=""+P,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",Z?r+=""+P.join(","):r+=""+P,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ";var v=r;r=g.pop(),!e.compositeRule&&_?e.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" } "}}if(e.schema.$ref&&!a)r+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",_&&(r+=" } if (errors === ",C?r+="0":r+="errs_"+u,r+=") { ",k+="}");else{var Me=e.RULES;if(Me){for(var B,Xe=-1,Fe=Me.length-1;Xe<Fe;)if(B=Me[Xe+=1],ie(B)){if(B.type&&(r+=" if ("+e.util.checkDataType(B.type,p,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(B.type=="object"&&e.schema.properties){var h=e.schema.properties,wt=Object.keys(h),Ze=wt;if(Ze)for(var W,ce=-1,oe=Ze.length-1;ce<oe;){W=Ze[ce+=1];var de=h[W];if(de.default!==void 0){var Ae=p+e.util.getProperty(W);if(e.compositeRule){if(e.opts.strictDefaults){var y="default is ignored for: "+Ae;if(e.opts.strictDefaults==="log")e.logger.warn(y);else throw new Error(y)}}else r+=" if ("+Ae+" === undefined ",e.opts.useDefaults=="empty"&&(r+=" || "+Ae+" === null || "+Ae+" === '' "),r+=" ) "+Ae+" = ",e.opts.useDefaults=="shared"?r+=" "+e.useDefault(de.default)+" ":r+=" "+JSON.stringify(de.default)+" ",r+="; "}}}else if(B.type=="array"&&Array.isArray(e.schema.items)){var Je=e.schema.items;if(Je){for(var de,ue=-1,R=Je.length-1;ue<R;)if(de=Je[ue+=1],de.default!==void 0){var Ae=p+"["+ue+"]";if(e.compositeRule){if(e.opts.strictDefaults){var y="default is ignored for: "+Ae;if(e.opts.strictDefaults==="log")e.logger.warn(y);else throw new Error(y)}}else r+=" if ("+Ae+" === undefined ",e.opts.useDefaults=="empty"&&(r+=" || "+Ae+" === null || "+Ae+" === '' "),r+=" ) "+Ae+" = ",e.opts.useDefaults=="shared"?r+=" "+e.useDefault(de.default)+" ":r+=" "+JSON.stringify(de.default)+" ",r+="; "}}}}var b=B.rules;if(b){for(var N,J=-1,Q=b.length-1;J<Q;)if(N=b[J+=1],S(N)){var ne=N.code(e,N.keyword,B.type);ne&&(r+=" "+ne+" ",_&&(w+="}"))}}if(_&&(r+=" "+w+" ",w=""),B.type&&(r+=" } ",P&&P===B.type&&!X)){r+=" else { ";var f=e.schemaPath+".type",m=e.errSchemaPath+"/type",g=g||[];g.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(I||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(m)+" , params: { type: '",Z?r+=""+P.join(","):r+=""+P,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",Z?r+=""+P.join(","):r+=""+P,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ";var v=r;r=g.pop(),!e.compositeRule&&_?e.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } "}_&&(r+=" if (errors === ",C?r+="0":r+="errs_"+u,r+=") { ",k+="}")}}}_&&(r+=" "+k+" "),C?(s?(r+=" if (errors === 0) return data;           ",r+=" else throw new ValidationError(vErrors); "):(r+=" validate.errors = vErrors; ",r+=" return errors === 0;       "),r+=" }; return validate;"):r+=" var "+E+" = errors === errs_"+u+";";function ie(D){for(var V=D.rules,se=0;se<V.length;se++)if(S(V[se]))return!0}function S(D){return e.schema[D.keyword]!==void 0||D.implements&&x(D)}function x(D){for(var V=D.implements,se=0;se<V.length;se++)if(e.schema[V[se]]!==void 0)return!0}return r},Yl=up,du=Za,wE=dp,bT=bE,Uv=EE,ET=du.ucs2length,wT=ip,CT=wE.Validation,ST=Cf;function Cf(n,e,t,i){var r=this,s=this._opts,a=[void 0],o={},l=[],c={},u=[],d={},h=[];e=e||{schema:n,refVal:a,refs:o};var f=_T.call(this,n,e,i),m=this._compilations[f.index];if(f.compiling)return m.callValidate=y;var p=this._formats,g=this.RULES;try{var v=E(n,e,t,i);m.validate=v;var C=m.callValidate;return C&&(C.schema=v.schema,C.errors=null,C.refs=v.refs,C.refVal=v.refVal,C.root=v.root,C.$async=v.$async,s.sourceCode&&(C.source=v.source)),v}finally{xT.call(this,n,e,i)}function y(){var $=m.validate,U=$.apply(this,arguments);return y.errors=$.errors,U}function E($,U,re,le){var ae=!U||U&&U.schema==$;if(U.schema!=e.schema)return Cf.call(r,$,U,re,le);var ue=$.$async===!0,ve=Uv({isTop:!0,schema:$,isRoot:ae,baseId:le,root:U,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:wE.MissingRef,RULES:g,validate:Uv,util:du,resolve:Yl,resolveRef:_,usePattern:Z,useDefault:X,useCustomRule:B,opts:s,formats:p,logger:r.logger,self:r});ve=Ql(a,kT)+Ql(l,RT)+Ql(u,AT)+Ql(h,DT)+ve,s.processCode&&(ve=s.processCode(ve,$));var me;try{var ke=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",ve);me=ke(r,g,p,e,a,u,h,wT,ET,CT),a[0]=me}catch(Me){throw r.logger.error("Error compiling schema, function code:",ve),Me}return me.schema=$,me.errors=null,me.refs=o,me.refVal=a,me.root=ae?me:U,ue&&(me.$async=!0),s.sourceCode===!0&&(me.source={code:ve,patterns:l,defaults:u}),me}function _($,U,re){U=Yl.url($,U);var le=o[U],ae,ue;if(le!==void 0)return ae=a[le],ue="refVal["+le+"]",P(ae,ue);if(!re&&e.refs){var ve=e.refs[U];if(ve!==void 0)return ae=e.refVal[ve],ue=w(U,ae),P(ae,ue)}ue=w(U);var me=Yl.call(r,E,e,U);if(me===void 0){var ke=t&&t[U];ke&&(me=Yl.inlineRef(ke,s.inlineRefs)?ke:Cf.call(r,ke,e,t,$))}if(me===void 0)k(U);else return I(U,me),P(me,ue)}function w($,U){var re=a.length;return a[re]=U,o[$]=re,"refVal"+re}function k($){delete o[$]}function I($,U){var re=o[$];a[re]=U}function P($,U){return typeof $=="object"||typeof $=="boolean"?{code:U,schema:$,inline:!0}:{code:U,$async:$&&!!$.$async}}function Z($){var U=c[$];return U===void 0&&(U=c[$]=l.length,l[U]=$),"pattern"+U}function X($){switch(typeof $){case"boolean":case"number":return""+$;case"string":return du.toQuotedString($);case"object":if($===null)return"null";var U=bT($),re=d[U];return re===void 0&&(re=d[U]=u.length,u[re]=$),"default"+re}}function B($,U,re,le){if(r._opts.validateSchema!==!1){var ae=$.definition.dependencies;if(ae&&!ae.every(function(Ze){return Object.prototype.hasOwnProperty.call(re,Ze)}))throw new Error("parent schema must have all required keywords: "+ae.join(","));var ue=$.definition.validateSchema;if(ue){var ve=ue(U);if(!ve){var me="keyword schema is invalid: "+r.errorsText(ue.errors);if(r._opts.validateSchema=="log")r.logger.error(me);else throw new Error(me)}}}var ke=$.definition.compile,Me=$.definition.inline,Xe=$.definition.macro,Fe;if(ke)Fe=ke.call(r,U,re,le);else if(Xe)Fe=Xe.call(r,U,re,le),s.validateSchema!==!1&&r.validateSchema(Fe,!0);else if(Me)Fe=Me.call(r,le,$.keyword,U,re);else if(Fe=$.definition.validate,!Fe)return;if(Fe===void 0)throw new Error('custom keyword "'+$.keyword+'"failed to compile');var wt=h.length;return h[wt]=Fe,{code:"customRule"+wt,validate:Fe}}}function _T(n,e,t){var i=CE.call(this,n,e,t);return i>=0?{index:i,compiling:!0}:(i=this._compilations.length,this._compilations[i]={schema:n,root:e,baseId:t},{index:i,compiling:!1})}function xT(n,e,t){var i=CE.call(this,n,e,t);i>=0&&this._compilations.splice(i,1)}function CE(n,e,t){for(var i=0;i<this._compilations.length;i++){var r=this._compilations[i];if(r.schema==n&&r.root==e&&r.baseId==t)return i}return-1}function RT(n,e){return"var pattern"+n+" = new RegExp("+du.toQuotedString(e[n])+");"}function AT(n){return"var default"+n+" = defaults["+n+"];"}function kT(n,e){return e[n]===void 0?"":"var refVal"+n+" = refVal["+n+"];"}function DT(n){return"var customRule"+n+" = customRules["+n+"];"}function Ql(n,e){if(!n.length)return"";for(var t="",i=0;i<n.length;i++)t+=e(i,n);return t}var SE={exports:{}},gd=SE.exports=function(){this._cache={}};gd.prototype.put=function(e,t){this._cache[e]=t};gd.prototype.get=function(e){return this._cache[e]};gd.prototype.del=function(e){delete this._cache[e]};gd.prototype.clear=function(){this._cache={}};var MT=SE.exports,PT=Za,TT=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,IT=[0,31,28,31,30,31,30,31,31,30,31,30,31],OT=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,_E=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,NT=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,FT=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,xE=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,RE=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,AE=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,kE=/^(?:\/(?:[^~/]|~0|~1)*)*$/,DE=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,ME=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,LT=vd;function vd(n){return n=n=="full"?"full":"fast",PT.copy(vd[n])}vd.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":xE,url:RE,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:_E,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:IE,uuid:AE,"json-pointer":kE,"json-pointer-uri-fragment":DE,"relative-json-pointer":ME};vd.full={date:PE,time:TE,"date-time":qT,uri:HT,"uri-reference":FT,"uri-template":xE,url:RE,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:_E,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:IE,uuid:AE,"json-pointer":kE,"json-pointer-uri-fragment":DE,"relative-json-pointer":ME};function BT(n){return n%4===0&&(n%100!==0||n%400===0)}function PE(n){var e=n.match(TT);if(!e)return!1;var t=+e[1],i=+e[2],r=+e[3];return i>=1&&i<=12&&r>=1&&r<=(i==2&&BT(t)?29:IT[i])}function TE(n,e){var t=n.match(OT);if(!t)return!1;var i=t[1],r=t[2],s=t[3],a=t[5];return(i<=23&&r<=59&&s<=59||i==23&&r==59&&s==60)&&(!e||a)}var $T=/t|\s/i;function qT(n){var e=n.split($T);return e.length==2&&PE(e[0])&&TE(e[1],!0)}var UT=/\/|:/;function HT(n){return UT.test(n)&&NT.test(n)}var VT=/[^\\]\\Z/;function IE(n){if(VT.test(n))return!1;try{return new RegExp(n),!0}catch{return!1}}var jT=function(e,t,i){var r=" ",s=e.level,a=e.dataLevel,o=e.schema[t],l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(a||""),d="valid"+s,h,f;if(o=="#"||o=="#/")e.isRoot?(h=e.async,f="validate"):(h=e.root.schema.$async===!0,f="root.refVal[0]");else{var m=e.resolveRef(e.baseId,o,e.isRoot);if(m===void 0){var p=e.MissingRefError.message(e.baseId,o);if(e.opts.missingRefs=="fail"){e.logger.error(p);var g=g||[];g.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { ref: '"+e.util.escapeQuotes(o)+"' } ",e.opts.messages!==!1&&(r+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(o)+"' "),e.opts.verbose&&(r+=" , schema: "+e.util.toQuotedString(o)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var v=r;r=g.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(r+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(p),c&&(r+=" if (true) { ");else throw new e.MissingRefError(e.baseId,o,p)}else if(m.inline){var C=e.util.copy(e);C.level++;var y="valid"+C.level;C.schema=m.schema,C.schemaPath="",C.errSchemaPath=o;var E=e.validate(C).replace(/validate\.schema/g,m.code);r+=" "+E+" ",c&&(r+=" if ("+y+") { ")}else h=m.$async===!0||e.async&&m.$async!==!1,f=m.code}if(f){var g=g||[];g.push(r),r="",e.opts.passContext?r+=" "+f+".call(this, ":r+=" "+f+"( ",r+=" "+u+", (dataPath || '')",e.errorPath!='""'&&(r+=" + "+e.errorPath);var _=a?"data"+(a-1||""):"parentData",w=a?e.dataPathArr[a]:"parentDataProperty";r+=" , "+_+" , "+w+", rootData)  ";var k=r;if(r=g.pop(),h){if(!e.async)throw new Error("async schema referenced by sync schema");c&&(r+=" var "+d+"; "),r+=" try { await "+k+"; ",c&&(r+=" "+d+" = true; "),r+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",c&&(r+=" "+d+" = false; "),r+=" } ",c&&(r+=" if ("+d+") { ")}else r+=" if (!"+k+") { if (vErrors === null) vErrors = "+f+".errors; else vErrors = vErrors.concat("+f+".errors); errors = vErrors.length; } ",c&&(r+=" else { ")}return r},WT=function(e,t,i){var r=" ",s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),o=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,c=e.util.copy(e),u="";c.level++;var d="valid"+c.level,h=c.baseId,f=!0,m=s;if(m)for(var p,g=-1,v=m.length-1;g<v;)p=m[g+=1],(e.opts.strictKeywords?typeof p=="object"&&Object.keys(p).length>0||p===!1:e.util.schemaHasRules(p,e.RULES.all))&&(f=!1,c.schema=p,c.schemaPath=a+"["+g+"]",c.errSchemaPath=o+"/"+g,r+="  "+e.validate(c)+" ",c.baseId=h,l&&(r+=" if ("+d+") { ",u+="}"));return l&&(f?r+=" if (true) { ":r+=" "+u.slice(0,-1)+" "),r},zT=function(e,t,i){var r=" ",s=e.level,a=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(a||""),h="valid"+s,f="errs__"+s,m=e.util.copy(e),p="";m.level++;var g="valid"+m.level,v=o.every(function(I){return e.opts.strictKeywords?typeof I=="object"&&Object.keys(I).length>0||I===!1:e.util.schemaHasRules(I,e.RULES.all)});if(v){var C=m.baseId;r+=" var "+f+" = errors; var "+h+" = false;  ";var y=e.compositeRule;e.compositeRule=m.compositeRule=!0;var E=o;if(E)for(var _,w=-1,k=E.length-1;w<k;)_=E[w+=1],m.schema=_,m.schemaPath=l+"["+w+"]",m.errSchemaPath=c+"/"+w,r+="  "+e.validate(m)+" ",m.baseId=C,r+=" "+h+" = "+h+" || "+g+"; if (!"+h+") { ",p+="}";e.compositeRule=m.compositeRule=y,r+=" "+p+" if (!"+h+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" } else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else u&&(r+=" if (true) { ");return r},GT=function(e,t,i){var r=" ",s=e.schema[t],a=e.errSchemaPath+"/"+t;e.opts.allErrors;var o=e.util.toQuotedString(s);return e.opts.$comment===!0?r+=" console.log("+o+");":typeof e.opts.$comment=="function"&&(r+=" self._opts.$comment("+o+", "+e.util.toQuotedString(a)+", validate.root.schema);"),r},KT=function(e,t,i){var r=" ",s=e.level,a=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(a||""),h="valid"+s,f=e.opts.$data&&o&&o.$data;f&&(r+=" var schema"+s+" = "+e.util.getData(o.$data,a,e.dataPathArr)+"; "),f||(r+=" var schema"+s+" = validate.schema"+l+";"),r+="var "+h+" = equal("+d+", schema"+s+"); if (!"+h+") {   ";var m=m||[];m.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValue: schema"+s+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be equal to constant' "),e.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var p=r;return r=m.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+p+"]); ":r+=" validate.errors = ["+p+"]; return false; ":r+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",u&&(r+=" else { "),r},YT=function(e,t,i){var r=" ",s=e.level,a=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(a||""),h="valid"+s,f="errs__"+s,m=e.util.copy(e),p="";m.level++;var g="valid"+m.level,v="i"+s,C=m.dataLevel=e.dataLevel+1,y="data"+C,E=e.baseId,_=e.opts.strictKeywords?typeof o=="object"&&Object.keys(o).length>0||o===!1:e.util.schemaHasRules(o,e.RULES.all);if(r+="var "+f+" = errors;var "+h+";",_){var w=e.compositeRule;e.compositeRule=m.compositeRule=!0,m.schema=o,m.schemaPath=l,m.errSchemaPath=c,r+=" var "+g+" = false; for (var "+v+" = 0; "+v+" < "+d+".length; "+v+"++) { ",m.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);var k=d+"["+v+"]";m.dataPathArr[C]=v;var I=e.validate(m);m.baseId=E,e.util.varOccurences(I,y)<2?r+=" "+e.util.varReplace(I,y,k)+" ":r+=" var "+y+" = "+k+"; "+I+" ",r+=" if ("+g+") break; }  ",e.compositeRule=m.compositeRule=w,r+=" "+p+" if (!"+g+") {"}else r+=" if ("+d+".length == 0) {";var P=P||[];P.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should contain a valid item' "),e.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var Z=r;return r=P.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+Z+"]); ":r+=" validate.errors = ["+Z+"]; return false; ":r+=" var err = "+Z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { ",_&&(r+="  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } "),e.opts.allErrors&&(r+=" } "),r},QT=function(e,t,i){var r=" ",s=e.level,a=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(a||""),h="errs__"+s,f=e.util.copy(e),m="";f.level++;var p="valid"+f.level,g={},v={},C=e.opts.ownProperties;for(w in o)if(w!="__proto__"){var y=o[w],E=Array.isArray(y)?v:g;E[w]=y}r+="var "+h+" = errors;";var _=e.errorPath;r+="var missing"+s+";";for(var w in v)if(E=v[w],E.length){if(r+=" if ( "+d+e.util.getProperty(w)+" !== undefined ",C&&(r+=" && Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(w)+"') "),u){r+=" && ( ";var k=E;if(k)for(var I,P=-1,Z=k.length-1;P<Z;){I=k[P+=1],P&&(r+=" || ");var X=e.util.getProperty(I),B=d+X;r+=" ( ( "+B+" === undefined ",C&&(r+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(I)+"') "),r+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?I:X)+") ) "}r+=")) {  ";var $="missing"+s,U="' + "+$+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(_,$,!0):_+" + "+$);var re=re||[];re.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+U+"', depsCount: "+E.length+", deps: '"+e.util.escapeQuotes(E.length==1?E[0]:E.join(", "))+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have ",E.length==1?r+="property "+e.util.escapeQuotes(E[0]):r+="properties "+e.util.escapeQuotes(E.join(", ")),r+=" when property "+e.util.escapeQuotes(w)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var le=r;r=re.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+le+"]); ":r+=" validate.errors = ["+le+"]; return false; ":r+=" var err = "+le+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{r+=" ) { ";var ae=E;if(ae)for(var I,ue=-1,ve=ae.length-1;ue<ve;){I=ae[ue+=1];var X=e.util.getProperty(I),U=e.util.escapeQuotes(I),B=d+X;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(_,I,e.opts.jsonPointers)),r+=" if ( "+B+" === undefined ",C&&(r+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(I)+"') "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+U+"', depsCount: "+E.length+", deps: '"+e.util.escapeQuotes(E.length==1?E[0]:E.join(", "))+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have ",E.length==1?r+="property "+e.util.escapeQuotes(E[0]):r+="properties "+e.util.escapeQuotes(E.join(", ")),r+=" when property "+e.util.escapeQuotes(w)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}r+=" }   ",u&&(m+="}",r+=" else { ")}e.errorPath=_;var me=f.baseId;for(var w in g){var y=g[w];(e.opts.strictKeywords?typeof y=="object"&&Object.keys(y).length>0||y===!1:e.util.schemaHasRules(y,e.RULES.all))&&(r+=" "+p+" = true; if ( "+d+e.util.getProperty(w)+" !== undefined ",C&&(r+=" && Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(w)+"') "),r+=") { ",f.schema=y,f.schemaPath=l+e.util.getProperty(w),f.errSchemaPath=c+"/"+e.util.escapeFragment(w),r+="  "+e.validate(f)+" ",f.baseId=me,r+=" }  ",u&&(r+=" if ("+p+") { ",m+="}"))}return u&&(r+="   "+m+" if ("+h+" == errors) {"),r},XT=function(e,t,i){var r=" ",s=e.level,a=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(a||""),h="valid"+s,f=e.opts.$data&&o&&o.$data;f&&(r+=" var schema"+s+" = "+e.util.getData(o.$data,a,e.dataPathArr)+"; ");var m="i"+s,p="schema"+s;f||(r+=" var "+p+" = validate.schema"+l+";"),r+="var "+h+";",f&&(r+=" if (schema"+s+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+s+")) "+h+" = false; else {"),r+=""+h+" = false;for (var "+m+"=0; "+m+"<"+p+".length; "+m+"++) if (equal("+d+", "+p+"["+m+"])) { "+h+" = true; break; }",f&&(r+="  }  "),r+=" if (!"+h+") {   ";var g=g||[];g.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValues: schema"+s+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var v=r;return r=g.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",u&&(r+=" else { "),r},JT=function(e,t,i){var r=" ",s=e.level,a=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(a||"");if(e.opts.format===!1)return u&&(r+=" if (true) { "),r;var h=e.opts.$data&&o&&o.$data,f;h?(r+=" var schema"+s+" = "+e.util.getData(o.$data,a,e.dataPathArr)+"; ",f="schema"+s):f=o;var m=e.opts.unknownFormats,p=Array.isArray(m);if(h){var g="format"+s,v="isObject"+s,C="formatType"+s;r+=" var "+g+" = formats["+f+"]; var "+v+" = typeof "+g+" == 'object' && !("+g+" instanceof RegExp) && "+g+".validate; var "+C+" = "+v+" && "+g+".type || 'string'; if ("+v+") { ",e.async&&(r+=" var async"+s+" = "+g+".async; "),r+=" "+g+" = "+g+".validate; } if (  ",h&&(r+=" ("+f+" !== undefined && typeof "+f+" != 'string') || "),r+=" (",m!="ignore"&&(r+=" ("+f+" && !"+g+" ",p&&(r+=" && self._opts.unknownFormats.indexOf("+f+") == -1 "),r+=") || "),r+=" ("+g+" && "+C+" == '"+i+"' && !(typeof "+g+" == 'function' ? ",e.async?r+=" (async"+s+" ? await "+g+"("+d+") : "+g+"("+d+")) ":r+=" "+g+"("+d+") ",r+=" : "+g+".test("+d+"))))) {"}else{var g=e.formats[o];if(!g){if(m=="ignore")return e.logger.warn('unknown format "'+o+'" ignored in schema at path "'+e.errSchemaPath+'"'),u&&(r+=" if (true) { "),r;if(p&&m.indexOf(o)>=0)return u&&(r+=" if (true) { "),r;throw new Error('unknown format "'+o+'" is used in schema at path "'+e.errSchemaPath+'"')}var v=typeof g=="object"&&!(g instanceof RegExp)&&g.validate,C=v&&g.type||"string";if(v){var y=g.async===!0;g=g.validate}if(C!=i)return u&&(r+=" if (true) { "),r;if(y){if(!e.async)throw new Error("async format in sync schema");var E="formats"+e.util.getProperty(o)+".validate";r+=" if (!(await "+E+"("+d+"))) { "}else{r+=" if (! ";var E="formats"+e.util.getProperty(o);v&&(E+=".validate"),typeof g=="function"?r+=" "+E+"("+d+") ":r+=" "+E+".test("+d+") ",r+=") { "}}var _=_||[];_.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { format:  ",h?r+=""+f:r+=""+e.util.toQuotedString(o),r+="  } ",e.opts.messages!==!1&&(r+=` , message: 'should match format "`,h?r+="' + "+f+" + '":r+=""+e.util.escapeQuotes(o),r+=`"' `),e.opts.verbose&&(r+=" , schema:  ",h?r+="validate.schema"+l:r+=""+e.util.toQuotedString(o),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var w=r;return r=_.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+w+"]); ":r+=" validate.errors = ["+w+"]; return false; ":r+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",u&&(r+=" else { "),r},ZT=function(e,t,i){var r=" ",s=e.level,a=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(a||""),h="valid"+s,f="errs__"+s,m=e.util.copy(e);m.level++;var p="valid"+m.level,g=e.schema.then,v=e.schema.else,C=g!==void 0&&(e.opts.strictKeywords?typeof g=="object"&&Object.keys(g).length>0||g===!1:e.util.schemaHasRules(g,e.RULES.all)),y=v!==void 0&&(e.opts.strictKeywords?typeof v=="object"&&Object.keys(v).length>0||v===!1:e.util.schemaHasRules(v,e.RULES.all)),E=m.baseId;if(C||y){var _;m.createErrors=!1,m.schema=o,m.schemaPath=l,m.errSchemaPath=c,r+=" var "+f+" = errors; var "+h+" = true;  ";var w=e.compositeRule;e.compositeRule=m.compositeRule=!0,r+="  "+e.validate(m)+" ",m.baseId=E,m.createErrors=!0,r+="  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; }  ",e.compositeRule=m.compositeRule=w,C?(r+=" if ("+p+") {  ",m.schema=e.schema.then,m.schemaPath=e.schemaPath+".then",m.errSchemaPath=e.errSchemaPath+"/then",r+="  "+e.validate(m)+" ",m.baseId=E,r+=" "+h+" = "+p+"; ",C&&y?(_="ifClause"+s,r+=" var "+_+" = 'then'; "):_="'then'",r+=" } ",y&&(r+=" else { ")):r+=" if (!"+p+") { ",y&&(m.schema=e.schema.else,m.schemaPath=e.schemaPath+".else",m.errSchemaPath=e.errSchemaPath+"/else",r+="  "+e.validate(m)+" ",m.baseId=E,r+=" "+h+" = "+p+"; ",C&&y?(_="ifClause"+s,r+=" var "+_+" = 'else'; "):_="'else'",r+=" } "),r+=" if (!"+h+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { failingKeyword: "+_+" } ",e.opts.messages!==!1&&(r+=` , message: 'should match "' + `+_+` + '" schema' `),e.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" }   ",u&&(r+=" else { ")}else u&&(r+=" if (true) { ");return r},eI=function(e,t,i){var r=" ",s=e.level,a=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(a||""),h="valid"+s,f="errs__"+s,m=e.util.copy(e),p="";m.level++;var g="valid"+m.level,v="i"+s,C=m.dataLevel=e.dataLevel+1,y="data"+C,E=e.baseId;if(r+="var "+f+" = errors;var "+h+";",Array.isArray(o)){var _=e.schema.additionalItems;if(_===!1){r+=" "+h+" = "+d+".length <= "+o.length+"; ";var w=c;c=e.errSchemaPath+"/additionalItems",r+="  if (!"+h+") {   ";var k=k||[];k.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+o.length+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have more than "+o.length+" items' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var I=r;r=k.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+I+"]); ":r+=" validate.errors = ["+I+"]; return false; ":r+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",c=w,u&&(p+="}",r+=" else { ")}var P=o;if(P){for(var Z,X=-1,B=P.length-1;X<B;)if(Z=P[X+=1],e.opts.strictKeywords?typeof Z=="object"&&Object.keys(Z).length>0||Z===!1:e.util.schemaHasRules(Z,e.RULES.all)){r+=" "+g+" = true; if ("+d+".length > "+X+") { ";var $=d+"["+X+"]";m.schema=Z,m.schemaPath=l+"["+X+"]",m.errSchemaPath=c+"/"+X,m.errorPath=e.util.getPathExpr(e.errorPath,X,e.opts.jsonPointers,!0),m.dataPathArr[C]=X;var U=e.validate(m);m.baseId=E,e.util.varOccurences(U,y)<2?r+=" "+e.util.varReplace(U,y,$)+" ":r+=" var "+y+" = "+$+"; "+U+" ",r+=" }  ",u&&(r+=" if ("+g+") { ",p+="}")}}if(typeof _=="object"&&(e.opts.strictKeywords?typeof _=="object"&&Object.keys(_).length>0||_===!1:e.util.schemaHasRules(_,e.RULES.all))){m.schema=_,m.schemaPath=e.schemaPath+".additionalItems",m.errSchemaPath=e.errSchemaPath+"/additionalItems",r+=" "+g+" = true; if ("+d+".length > "+o.length+") {  for (var "+v+" = "+o.length+"; "+v+" < "+d+".length; "+v+"++) { ",m.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);var $=d+"["+v+"]";m.dataPathArr[C]=v;var U=e.validate(m);m.baseId=E,e.util.varOccurences(U,y)<2?r+=" "+e.util.varReplace(U,y,$)+" ":r+=" var "+y+" = "+$+"; "+U+" ",u&&(r+=" if (!"+g+") break; "),r+=" } }  ",u&&(r+=" if ("+g+") { ",p+="}")}}else if(e.opts.strictKeywords?typeof o=="object"&&Object.keys(o).length>0||o===!1:e.util.schemaHasRules(o,e.RULES.all)){m.schema=o,m.schemaPath=l,m.errSchemaPath=c,r+="  for (var "+v+" = 0; "+v+" < "+d+".length; "+v+"++) { ",m.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);var $=d+"["+v+"]";m.dataPathArr[C]=v;var U=e.validate(m);m.baseId=E,e.util.varOccurences(U,y)<2?r+=" "+e.util.varReplace(U,y,$)+" ":r+=" var "+y+" = "+$+"; "+U+" ",u&&(r+=" if (!"+g+") break; "),r+=" }"}return u&&(r+=" "+p+" if ("+f+" == errors) {"),r},Hv=function(e,t,i){var r=" ",s=e.level,a=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,E,d="data"+(a||""),h=e.opts.$data&&o&&o.$data,f;h?(r+=" var schema"+s+" = "+e.util.getData(o.$data,a,e.dataPathArr)+"; ",f="schema"+s):f=o;var m=t=="maximum",p=m?"exclusiveMaximum":"exclusiveMinimum",g=e.schema[p],v=e.opts.$data&&g&&g.$data,C=m?"<":">",y=m?">":"<",E=void 0;if(!(h||typeof o=="number"||o===void 0))throw new Error(t+" must be number");if(!(v||g===void 0||typeof g=="number"||typeof g=="boolean"))throw new Error(p+" must be number or boolean");if(v){var _=e.util.getData(g.$data,a,e.dataPathArr),w="exclusive"+s,k="exclType"+s,I="exclIsNumber"+s,P="op"+s,Z="' + "+P+" + '";r+=" var schemaExcl"+s+" = "+_+"; ",_="schemaExcl"+s,r+=" var "+w+"; var "+k+" = typeof "+_+"; if ("+k+" != 'boolean' && "+k+" != 'undefined' && "+k+" != 'number') { ";var E=p,X=X||[];X.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(E||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: '"+p+" should be boolean' "),e.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var B=r;r=X.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+B+"]); ":r+=" validate.errors = ["+B+"]; return false; ":r+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else if ( ",h&&(r+=" ("+f+" !== undefined && typeof "+f+" != 'number') || "),r+=" "+k+" == 'number' ? ( ("+w+" = "+f+" === undefined || "+_+" "+C+"= "+f+") ? "+d+" "+y+"= "+_+" : "+d+" "+y+" "+f+" ) : ( ("+w+" = "+_+" === true) ? "+d+" "+y+"= "+f+" : "+d+" "+y+" "+f+" ) || "+d+" !== "+d+") { var op"+s+" = "+w+" ? '"+C+"' : '"+C+"='; ",o===void 0&&(E=p,c=e.errSchemaPath+"/"+p,f=_,h=v)}else{var I=typeof g=="number",Z=C;if(I&&h){var P="'"+Z+"'";r+=" if ( ",h&&(r+=" ("+f+" !== undefined && typeof "+f+" != 'number') || "),r+=" ( "+f+" === undefined || "+g+" "+C+"= "+f+" ? "+d+" "+y+"= "+g+" : "+d+" "+y+" "+f+" ) || "+d+" !== "+d+") { "}else{I&&o===void 0?(w=!0,E=p,c=e.errSchemaPath+"/"+p,f=g,y+="="):(I&&(f=Math[m?"min":"max"](g,o)),g===(I?f:!0)?(w=!0,E=p,c=e.errSchemaPath+"/"+p,y+="="):(w=!1,Z+="="));var P="'"+Z+"'";r+=" if ( ",h&&(r+=" ("+f+" !== undefined && typeof "+f+" != 'number') || "),r+=" "+d+" "+y+" "+f+" || "+d+" !== "+d+") { "}}E=E||t;var X=X||[];X.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(E||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { comparison: "+P+", limit: "+f+", exclusive: "+w+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be "+Z+" ",h?r+="' + "+f:r+=""+f+"'"),e.opts.verbose&&(r+=" , schema:  ",h?r+="validate.schema"+l:r+=""+o,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var B=r;return r=X.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+B+"]); ":r+=" validate.errors = ["+B+"]; return false; ":r+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",u&&(r+=" else { "),r},Vv=function(e,t,i){var r=" ",s=e.level,a=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p,d="data"+(a||""),h=e.opts.$data&&o&&o.$data,f;if(h?(r+=" var schema"+s+" = "+e.util.getData(o.$data,a,e.dataPathArr)+"; ",f="schema"+s):f=o,!(h||typeof o=="number"))throw new Error(t+" must be number");var m=t=="maxItems"?">":"<";r+="if ( ",h&&(r+=" ("+f+" !== undefined && typeof "+f+" != 'number') || "),r+=" "+d+".length "+m+" "+f+") { ";var p=t,g=g||[];g.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(p||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+f+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have ",t=="maxItems"?r+="more":r+="fewer",r+=" than ",h?r+="' + "+f+" + '":r+=""+o,r+=" items' "),e.opts.verbose&&(r+=" , schema:  ",h?r+="validate.schema"+l:r+=""+o,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var v=r;return r=g.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",u&&(r+=" else { "),r},jv=function(e,t,i){var r=" ",s=e.level,a=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p,d="data"+(a||""),h=e.opts.$data&&o&&o.$data,f;if(h?(r+=" var schema"+s+" = "+e.util.getData(o.$data,a,e.dataPathArr)+"; ",f="schema"+s):f=o,!(h||typeof o=="number"))throw new Error(t+" must be number");var m=t=="maxLength"?">":"<";r+="if ( ",h&&(r+=" ("+f+" !== undefined && typeof "+f+" != 'number') || "),e.opts.unicode===!1?r+=" "+d+".length ":r+=" ucs2length("+d+") ",r+=" "+m+" "+f+") { ";var p=t,g=g||[];g.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(p||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+f+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be ",t=="maxLength"?r+="longer":r+="shorter",r+=" than ",h?r+="' + "+f+" + '":r+=""+o,r+=" characters' "),e.opts.verbose&&(r+=" , schema:  ",h?r+="validate.schema"+l:r+=""+o,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var v=r;return r=g.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",u&&(r+=" else { "),r},Wv=function(e,t,i){var r=" ",s=e.level,a=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p,d="data"+(a||""),h=e.opts.$data&&o&&o.$data,f;if(h?(r+=" var schema"+s+" = "+e.util.getData(o.$data,a,e.dataPathArr)+"; ",f="schema"+s):f=o,!(h||typeof o=="number"))throw new Error(t+" must be number");var m=t=="maxProperties"?">":"<";r+="if ( ",h&&(r+=" ("+f+" !== undefined && typeof "+f+" != 'number') || "),r+=" Object.keys("+d+").length "+m+" "+f+") { ";var p=t,g=g||[];g.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(p||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+f+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have ",t=="maxProperties"?r+="more":r+="fewer",r+=" than ",h?r+="' + "+f+" + '":r+=""+o,r+=" properties' "),e.opts.verbose&&(r+=" , schema:  ",h?r+="validate.schema"+l:r+=""+o,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var v=r;return r=g.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",u&&(r+=" else { "),r},tI=function(e,t,i){var r=" ",s=e.level,a=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(a||""),h=e.opts.$data&&o&&o.$data,f;if(h?(r+=" var schema"+s+" = "+e.util.getData(o.$data,a,e.dataPathArr)+"; ",f="schema"+s):f=o,!(h||typeof o=="number"))throw new Error(t+" must be number");r+="var division"+s+";if (",h&&(r+=" "+f+" !== undefined && ( typeof "+f+" != 'number' || "),r+=" (division"+s+" = "+d+" / "+f+", ",e.opts.multipleOfPrecision?r+=" Math.abs(Math.round(division"+s+") - division"+s+") > 1e-"+e.opts.multipleOfPrecision+" ":r+=" division"+s+" !== parseInt(division"+s+") ",r+=" ) ",h&&(r+="  )  "),r+=" ) {   ";var m=m||[];m.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { multipleOf: "+f+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be multiple of ",h?r+="' + "+f:r+=""+f+"'"),e.opts.verbose&&(r+=" , schema:  ",h?r+="validate.schema"+l:r+=""+o,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var p=r;return r=m.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+p+"]); ":r+=" validate.errors = ["+p+"]; return false; ":r+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",u&&(r+=" else { "),r},nI=function(e,t,i){var r=" ",s=e.level,a=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(a||""),h="errs__"+s,f=e.util.copy(e);f.level++;var m="valid"+f.level;if(e.opts.strictKeywords?typeof o=="object"&&Object.keys(o).length>0||o===!1:e.util.schemaHasRules(o,e.RULES.all)){f.schema=o,f.schemaPath=l,f.errSchemaPath=c,r+=" var "+h+" = errors;  ";var p=e.compositeRule;e.compositeRule=f.compositeRule=!0,f.createErrors=!1;var g;f.opts.allErrors&&(g=f.opts.allErrors,f.opts.allErrors=!1),r+=" "+e.validate(f)+" ",f.createErrors=!0,g&&(f.opts.allErrors=g),e.compositeRule=f.compositeRule=p,r+=" if ("+m+") {   ";var v=v||[];v.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var C=r;r=v.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+C+"]); ":r+=" validate.errors = ["+C+"]; return false; ":r+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else r+="  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(r+=" if (false) { ");return r},rI=function(e,t,i){var r=" ",s=e.level,a=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(a||""),h="valid"+s,f="errs__"+s,m=e.util.copy(e),p="";m.level++;var g="valid"+m.level,v=m.baseId,C="prevValid"+s,y="passingSchemas"+s;r+="var "+f+" = errors , "+C+" = false , "+h+" = false , "+y+" = null; ";var E=e.compositeRule;e.compositeRule=m.compositeRule=!0;var _=o;if(_)for(var w,k=-1,I=_.length-1;k<I;)w=_[k+=1],(e.opts.strictKeywords?typeof w=="object"&&Object.keys(w).length>0||w===!1:e.util.schemaHasRules(w,e.RULES.all))?(m.schema=w,m.schemaPath=l+"["+k+"]",m.errSchemaPath=c+"/"+k,r+="  "+e.validate(m)+" ",m.baseId=v):r+=" var "+g+" = true; ",k&&(r+=" if ("+g+" && "+C+") { "+h+" = false; "+y+" = ["+y+", "+k+"]; } else { ",p+="}"),r+=" if ("+g+") { "+h+" = "+C+" = true; "+y+" = "+k+"; }";return e.compositeRule=m.compositeRule=E,r+=""+p+"if (!"+h+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { passingSchemas: "+y+" } ",e.opts.messages!==!1&&(r+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+="} else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; }",e.opts.allErrors&&(r+=" } "),r},iI=function(e,t,i){var r=" ",s=e.level,a=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(a||""),h=e.opts.$data&&o&&o.$data,f;h?(r+=" var schema"+s+" = "+e.util.getData(o.$data,a,e.dataPathArr)+"; ",f="schema"+s):f=o;var m=h?"(new RegExp("+f+"))":e.usePattern(o);r+="if ( ",h&&(r+=" ("+f+" !== undefined && typeof "+f+" != 'string') || "),r+=" !"+m+".test("+d+") ) {   ";var p=p||[];p.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { pattern:  ",h?r+=""+f:r+=""+e.util.toQuotedString(o),r+="  } ",e.opts.messages!==!1&&(r+=` , message: 'should match pattern "`,h?r+="' + "+f+" + '":r+=""+e.util.escapeQuotes(o),r+=`"' `),e.opts.verbose&&(r+=" , schema:  ",h?r+="validate.schema"+l:r+=""+e.util.toQuotedString(o),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var g=r;return r=p.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+g+"]); ":r+=" validate.errors = ["+g+"]; return false; ":r+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",u&&(r+=" else { "),r},sI=function(e,t,i){var r=" ",s=e.level,a=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(a||""),h="errs__"+s,f=e.util.copy(e),m="";f.level++;var p="valid"+f.level,g="key"+s,v="idx"+s,C=f.dataLevel=e.dataLevel+1,y="data"+C,E="dataProperties"+s,_=Object.keys(o||{}).filter(ue),w=e.schema.patternProperties||{},k=Object.keys(w).filter(ue),I=e.schema.additionalProperties,P=_.length||k.length,Z=I===!1,X=typeof I=="object"&&Object.keys(I).length,B=e.opts.removeAdditional,$=Z||X||B,U=e.opts.ownProperties,re=e.baseId,le=e.schema.required;if(le&&!(e.opts.$data&&le.$data)&&le.length<e.opts.loopRequired)var ae=e.util.toHash(le);function ue(K){return K!=="__proto__"}if(r+="var "+h+" = errors;var "+p+" = true;",U&&(r+=" var "+E+" = undefined;"),$){if(U?r+=" "+E+" = "+E+" || Object.keys("+d+"); for (var "+v+"=0; "+v+"<"+E+".length; "+v+"++) { var "+g+" = "+E+"["+v+"]; ":r+=" for (var "+g+" in "+d+") { ",P){if(r+=" var isAdditional"+s+" = !(false ",_.length)if(_.length>8)r+=" || validate.schema"+l+".hasOwnProperty("+g+") ";else{var ve=_;if(ve)for(var me,ke=-1,Me=ve.length-1;ke<Me;)me=ve[ke+=1],r+=" || "+g+" == "+e.util.toQuotedString(me)+" "}if(k.length){var Xe=k;if(Xe)for(var Fe,wt=-1,Ze=Xe.length-1;wt<Ze;)Fe=Xe[wt+=1],r+=" || "+e.usePattern(Fe)+".test("+g+") "}r+=" ); if (isAdditional"+s+") { "}if(B=="all")r+=" delete "+d+"["+g+"]; ";else{var W=e.errorPath,ce="' + "+g+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers)),Z)if(B)r+=" delete "+d+"["+g+"]; ";else{r+=" "+p+" = false; ";var oe=c;c=e.errSchemaPath+"/additionalProperties";var de=de||[];de.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { additionalProperty: '"+ce+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is an invalid additional property":r+="should NOT have additional properties",r+="' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var Ae=r;r=de.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+Ae+"]); ":r+=" validate.errors = ["+Ae+"]; return false; ":r+=" var err = "+Ae+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=oe,u&&(r+=" break; ")}else if(X)if(B=="failing"){r+=" var "+h+" = errors;  ";var Je=e.compositeRule;e.compositeRule=f.compositeRule=!0,f.schema=I,f.schemaPath=e.schemaPath+".additionalProperties",f.errSchemaPath=e.errSchemaPath+"/additionalProperties",f.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var R=d+"["+g+"]";f.dataPathArr[C]=g;var b=e.validate(f);f.baseId=re,e.util.varOccurences(b,y)<2?r+=" "+e.util.varReplace(b,y,R)+" ":r+=" var "+y+" = "+R+"; "+b+" ",r+=" if (!"+p+") { errors = "+h+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+d+"["+g+"]; }  ",e.compositeRule=f.compositeRule=Je}else{f.schema=I,f.schemaPath=e.schemaPath+".additionalProperties",f.errSchemaPath=e.errSchemaPath+"/additionalProperties",f.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var R=d+"["+g+"]";f.dataPathArr[C]=g;var b=e.validate(f);f.baseId=re,e.util.varOccurences(b,y)<2?r+=" "+e.util.varReplace(b,y,R)+" ":r+=" var "+y+" = "+R+"; "+b+" ",u&&(r+=" if (!"+p+") break; ")}e.errorPath=W}P&&(r+=" } "),r+=" }  ",u&&(r+=" if ("+p+") { ",m+="}")}var N=e.opts.useDefaults&&!e.compositeRule;if(_.length){var J=_;if(J)for(var me,Q=-1,ne=J.length-1;Q<ne;){me=J[Q+=1];var ie=o[me];if(e.opts.strictKeywords?typeof ie=="object"&&Object.keys(ie).length>0||ie===!1:e.util.schemaHasRules(ie,e.RULES.all)){var S=e.util.getProperty(me),R=d+S,x=N&&ie.default!==void 0;f.schema=ie,f.schemaPath=l+S,f.errSchemaPath=c+"/"+e.util.escapeFragment(me),f.errorPath=e.util.getPath(e.errorPath,me,e.opts.jsonPointers),f.dataPathArr[C]=e.util.toQuotedString(me);var b=e.validate(f);if(f.baseId=re,e.util.varOccurences(b,y)<2){b=e.util.varReplace(b,y,R);var D=R}else{var D=y;r+=" var "+y+" = "+R+"; "}if(x)r+=" "+b+" ";else{if(ae&&ae[me]){r+=" if ( "+D+" === undefined ",U&&(r+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(me)+"') "),r+=") { "+p+" = false; ";var W=e.errorPath,oe=c,V=e.util.escapeQuotes(me);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(W,me,e.opts.jsonPointers)),c=e.errSchemaPath+"/required";var de=de||[];de.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+V+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+V+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var Ae=r;r=de.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+Ae+"]); ":r+=" validate.errors = ["+Ae+"]; return false; ":r+=" var err = "+Ae+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=oe,e.errorPath=W,r+=" } else { "}else u?(r+=" if ( "+D+" === undefined ",U&&(r+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(me)+"') "),r+=") { "+p+" = true; } else { "):(r+=" if ("+D+" !== undefined ",U&&(r+=" &&   Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(me)+"') "),r+=" ) { ");r+=" "+b+" } "}}u&&(r+=" if ("+p+") { ",m+="}")}}if(k.length){var se=k;if(se)for(var Fe,te=-1,L=se.length-1;te<L;){Fe=se[te+=1];var ie=w[Fe];if(e.opts.strictKeywords?typeof ie=="object"&&Object.keys(ie).length>0||ie===!1:e.util.schemaHasRules(ie,e.RULES.all)){f.schema=ie,f.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(Fe),f.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(Fe),U?r+=" "+E+" = "+E+" || Object.keys("+d+"); for (var "+v+"=0; "+v+"<"+E+".length; "+v+"++) { var "+g+" = "+E+"["+v+"]; ":r+=" for (var "+g+" in "+d+") { ",r+=" if ("+e.usePattern(Fe)+".test("+g+")) { ",f.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var R=d+"["+g+"]";f.dataPathArr[C]=g;var b=e.validate(f);f.baseId=re,e.util.varOccurences(b,y)<2?r+=" "+e.util.varReplace(b,y,R)+" ":r+=" var "+y+" = "+R+"; "+b+" ",u&&(r+=" if (!"+p+") break; "),r+=" } ",u&&(r+=" else "+p+" = true; "),r+=" }  ",u&&(r+=" if ("+p+") { ",m+="}")}}}return u&&(r+=" "+m+" if ("+h+" == errors) {"),r},aI=function(e,t,i){var r=" ",s=e.level,a=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(a||""),h="errs__"+s,f=e.util.copy(e),m="";f.level++;var p="valid"+f.level;if(r+="var "+h+" = errors;",e.opts.strictKeywords?typeof o=="object"&&Object.keys(o).length>0||o===!1:e.util.schemaHasRules(o,e.RULES.all)){f.schema=o,f.schemaPath=l,f.errSchemaPath=c;var g="key"+s,v="idx"+s,C="i"+s,y="' + "+g+" + '",E=f.dataLevel=e.dataLevel+1,_="data"+E,w="dataProperties"+s,k=e.opts.ownProperties,I=e.baseId;k&&(r+=" var "+w+" = undefined; "),k?r+=" "+w+" = "+w+" || Object.keys("+d+"); for (var "+v+"=0; "+v+"<"+w+".length; "+v+"++) { var "+g+" = "+w+"["+v+"]; ":r+=" for (var "+g+" in "+d+") { ",r+=" var startErrs"+s+" = errors; ";var P=g,Z=e.compositeRule;e.compositeRule=f.compositeRule=!0;var X=e.validate(f);f.baseId=I,e.util.varOccurences(X,_)<2?r+=" "+e.util.varReplace(X,_,P)+" ":r+=" var "+_+" = "+P+"; "+X+" ",e.compositeRule=f.compositeRule=Z,r+=" if (!"+p+") { for (var "+C+"=startErrs"+s+"; "+C+"<errors; "+C+"++) { vErrors["+C+"].propertyName = "+g+"; }   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { propertyName: '"+y+"' } ",e.opts.messages!==!1&&(r+=" , message: 'property name \\'"+y+"\\' is invalid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),u&&(r+=" break; "),r+=" } }"}return u&&(r+=" "+m+" if ("+h+" == errors) {"),r},oI=function(e,t,i){var r=" ",s=e.level,a=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(a||""),h="valid"+s,f=e.opts.$data&&o&&o.$data;f&&(r+=" var schema"+s+" = "+e.util.getData(o.$data,a,e.dataPathArr)+"; ");var m="schema"+s;if(!f)if(o.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var p=[],g=o;if(g)for(var v,C=-1,y=g.length-1;C<y;){v=g[C+=1];var E=e.schema.properties[v];E&&(e.opts.strictKeywords?typeof E=="object"&&Object.keys(E).length>0||E===!1:e.util.schemaHasRules(E,e.RULES.all))||(p[p.length]=v)}}else var p=o;if(f||p.length){var _=e.errorPath,w=f||p.length>=e.opts.loopRequired,k=e.opts.ownProperties;if(u)if(r+=" var missing"+s+"; ",w){f||(r+=" var "+m+" = validate.schema"+l+"; ");var I="i"+s,P="schema"+s+"["+I+"]",Z="' + "+P+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(_,P,e.opts.jsonPointers)),r+=" var "+h+" = true; ",f&&(r+=" if (schema"+s+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+s+")) "+h+" = false; else {"),r+=" for (var "+I+" = 0; "+I+" < "+m+".length; "+I+"++) { "+h+" = "+d+"["+m+"["+I+"]] !== undefined ",k&&(r+=" &&   Object.prototype.hasOwnProperty.call("+d+", "+m+"["+I+"]) "),r+="; if (!"+h+") break; } ",f&&(r+="  }  "),r+="  if (!"+h+") {   ";var X=X||[];X.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+Z+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+Z+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var B=r;r=X.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+B+"]); ":r+=" validate.errors = ["+B+"]; return false; ":r+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else{r+=" if ( ";var $=p;if($)for(var U,I=-1,re=$.length-1;I<re;){U=$[I+=1],I&&(r+=" || ");var le=e.util.getProperty(U),ae=d+le;r+=" ( ( "+ae+" === undefined ",k&&(r+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(U)+"') "),r+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?U:le)+") ) "}r+=") {  ";var P="missing"+s,Z="' + "+P+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(_,P,!0):_+" + "+P);var X=X||[];X.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+Z+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+Z+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var B=r;r=X.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+B+"]); ":r+=" validate.errors = ["+B+"]; return false; ":r+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else if(w){f||(r+=" var "+m+" = validate.schema"+l+"; ");var I="i"+s,P="schema"+s+"["+I+"]",Z="' + "+P+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(_,P,e.opts.jsonPointers)),f&&(r+=" if ("+m+" && !Array.isArray("+m+")) {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+Z+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+Z+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+m+" !== undefined) { "),r+=" for (var "+I+" = 0; "+I+" < "+m+".length; "+I+"++) { if ("+d+"["+m+"["+I+"]] === undefined ",k&&(r+=" || ! Object.prototype.hasOwnProperty.call("+d+", "+m+"["+I+"]) "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+Z+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+Z+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",f&&(r+="  }  ")}else{var ue=p;if(ue)for(var U,ve=-1,me=ue.length-1;ve<me;){U=ue[ve+=1];var le=e.util.getProperty(U),Z=e.util.escapeQuotes(U),ae=d+le;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(_,U,e.opts.jsonPointers)),r+=" if ( "+ae+" === undefined ",k&&(r+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(U)+"') "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+Z+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+Z+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=_}else u&&(r+=" if (true) {");return r},lI=function(e,t,i){var r=" ",s=e.level,a=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(a||""),h="valid"+s,f=e.opts.$data&&o&&o.$data,m;if(f?(r+=" var schema"+s+" = "+e.util.getData(o.$data,a,e.dataPathArr)+"; ",m="schema"+s):m=o,(o||f)&&e.opts.uniqueItems!==!1){f&&(r+=" var "+h+"; if ("+m+" === false || "+m+" === undefined) "+h+" = true; else if (typeof "+m+" != 'boolean') "+h+" = false; else { "),r+=" var i = "+d+".length , "+h+" = true , j; if (i > 1) { ";var p=e.schema.items&&e.schema.items.type,g=Array.isArray(p);if(!p||p=="object"||p=="array"||g&&(p.indexOf("object")>=0||p.indexOf("array")>=0))r+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+d+"[i], "+d+"[j])) { "+h+" = false; break outer; } } } ";else{r+=" var itemIndices = {}, item; for (;i--;) { var item = "+d+"[i]; ";var v="checkDataType"+(g?"s":"");r+=" if ("+e.util[v](p,"item",e.opts.strictNumbers,!0)+") continue; ",g&&(r+=` if (typeof item == 'string') item = '"' + item; `),r+=" if (typeof itemIndices[item] == 'number') { "+h+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}r+=" } ",f&&(r+="  }  "),r+=" if (!"+h+") {   ";var C=C||[];C.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(r+=" , schema:  ",f?r+="validate.schema"+l:r+=""+o,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var y=r;r=C.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",u&&(r+=" else { ")}else u&&(r+=" if (true) { ");return r},cI={$ref:jT,allOf:WT,anyOf:zT,$comment:GT,const:KT,contains:YT,dependencies:QT,enum:XT,format:JT,if:ZT,items:eI,maximum:Hv,minimum:Hv,maxItems:Vv,minItems:Vv,maxLength:jv,minLength:jv,maxProperties:Wv,minProperties:Wv,multipleOf:tI,not:nI,oneOf:rI,pattern:iI,properties:sI,propertyNames:aI,required:oI,uniqueItems:lI,validate:EE},zv=cI,eh=Za.toHash,uI=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"],i=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],r=["number","integer","string","array","object","boolean","null"];return e.all=eh(t),e.types=eh(r),e.forEach(function(s){s.rules=s.rules.map(function(a){var o;if(typeof a=="object"){var l=Object.keys(a)[0];o=a[l],a=l,o.forEach(function(u){t.push(u),e.all[u]=!0})}t.push(a);var c=e.all[a]={keyword:a,code:zv[a],implements:o};return c}),e.all.$comment={keyword:"$comment",code:zv.$comment},s.type&&(e.types[s.type]=s)}),e.keywords=eh(t.concat(i)),e.custom={},e},Gv=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"],dI=function(n,e){for(var t=0;t<e.length;t++){n=JSON.parse(JSON.stringify(n));var i=e[t].split("/"),r=n,s;for(s=1;s<i.length;s++)r=r[i[s]];for(s=0;s<Gv.length;s++){var a=Gv[s],o=r[a];o&&(r[a]={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return n},hI=dp.MissingRef,fI=OE;function OE(n,e,t){var i=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(t=e,e=void 0);var r=s(n).then(function(){var o=i._addSchema(n,void 0,e);return o.validate||a(o)});return t&&r.then(function(o){t(null,o)},t),r;function s(o){var l=o.$schema;return l&&!i.getSchema(l)?OE.call(i,{$ref:l},!0):Promise.resolve()}function a(o){try{return i._compile(o)}catch(c){if(c instanceof hI)return l(c);throw c}function l(c){var u=c.missingSchema;if(f(u))throw new Error("Schema "+u+" is loaded but "+c.missingRef+" cannot be resolved");var d=i._loadingSchemas[u];return d||(d=i._loadingSchemas[u]=i._opts.loadSchema(u),d.then(h,h)),d.then(function(m){if(!f(u))return s(m).then(function(){f(u)||i.addSchema(m,u,void 0,e)})}).then(function(){return a(o)});function h(){delete i._loadingSchemas[u]}function f(m){return i._refs[m]||i._schemas[m]}}}}var mI=function(e,t,i){var r=" ",s=e.level,a=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d,h="data"+(a||""),f="valid"+s,m="errs__"+s,p=e.opts.$data&&o&&o.$data,g;p?(r+=" var schema"+s+" = "+e.util.getData(o.$data,a,e.dataPathArr)+"; ",g="schema"+s):g=o;var v=this,C="definition"+s,y=v.definition,E="",_,w,k,I,P;if(p&&y.$data){P="keywordValidate"+s;var Z=y.validateSchema;r+=" var "+C+" = RULES.custom['"+t+"'].definition; var "+P+" = "+C+".validate;"}else{if(I=e.useCustomRule(v,o,e.schema,e),!I)return;g="validate.schema"+l,P=I.code,_=y.compile,w=y.inline,k=y.macro}var X=P+".errors",B="i"+s,$="ruleErr"+s,U=y.async;if(U&&!e.async)throw new Error("async keyword in sync schema");if(w||k||(r+=""+X+" = null;"),r+="var "+m+" = errors;var "+f+";",p&&y.$data&&(E+="}",r+=" if ("+g+" === undefined) { "+f+" = true; } else { ",Z&&(E+="}",r+=" "+f+" = "+C+".validateSchema("+g+"); if ("+f+") { ")),w)y.statements?r+=" "+I.validate+" ":r+=" "+f+" = "+I.validate+"; ";else if(k){var re=e.util.copy(e),E="";re.level++;var le="valid"+re.level;re.schema=I.validate,re.schemaPath="";var ae=e.compositeRule;e.compositeRule=re.compositeRule=!0;var ue=e.validate(re).replace(/validate\.schema/g,P);e.compositeRule=re.compositeRule=ae,r+=" "+ue}else{var ve=ve||[];ve.push(r),r="",r+="  "+P+".call( ",e.opts.passContext?r+="this":r+="self",_||y.schema===!1?r+=" , "+h+" ":r+=" , "+g+" , "+h+" , validate.schema"+e.schemaPath+" ",r+=" , (dataPath || '')",e.errorPath!='""'&&(r+=" + "+e.errorPath);var me=a?"data"+(a-1||""):"parentData",ke=a?e.dataPathArr[a]:"parentDataProperty";r+=" , "+me+" , "+ke+" , rootData )  ";var Me=r;r=ve.pop(),y.errors===!1?(r+=" "+f+" = ",U&&(r+="await "),r+=""+Me+"; "):U?(X="customErrors"+s,r+=" var "+X+" = null; try { "+f+" = await "+Me+"; } catch (e) { "+f+" = false; if (e instanceof ValidationError) "+X+" = e.errors; else throw e; } "):r+=" "+X+" = null; "+f+" = "+Me+"; "}if(y.modifying&&(r+=" if ("+me+") "+h+" = "+me+"["+ke+"];"),r+=""+E,y.valid)u&&(r+=" if (true) { ");else{r+=" if ( ",y.valid===void 0?(r+=" !",k?r+=""+le:r+=""+f):r+=" "+!y.valid+" ",r+=") { ",d=v.keyword;var ve=ve||[];ve.push(r),r="";var ve=ve||[];ve.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(d||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { keyword: '"+v.keyword+"' } ",e.opts.messages!==!1&&(r+=` , message: 'should pass "`+v.keyword+`" keyword validation' `),e.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var Xe=r;r=ve.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+Xe+"]); ":r+=" validate.errors = ["+Xe+"]; return false; ":r+=" var err = "+Xe+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var Fe=r;r=ve.pop(),w?y.errors?y.errors!="full"&&(r+="  for (var "+B+"="+m+"; "+B+"<errors; "+B+"++) { var "+$+" = vErrors["+B+"]; if ("+$+".dataPath === undefined) "+$+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+$+".schemaPath === undefined) { "+$+'.schemaPath = "'+c+'"; } ',e.opts.verbose&&(r+=" "+$+".schema = "+g+"; "+$+".data = "+h+"; "),r+=" } "):y.errors===!1?r+=" "+Fe+" ":(r+=" if ("+m+" == errors) { "+Fe+" } else {  for (var "+B+"="+m+"; "+B+"<errors; "+B+"++) { var "+$+" = vErrors["+B+"]; if ("+$+".dataPath === undefined) "+$+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+$+".schemaPath === undefined) { "+$+'.schemaPath = "'+c+'"; } ',e.opts.verbose&&(r+=" "+$+".schema = "+g+"; "+$+".data = "+h+"; "),r+=" } } "):k?(r+="   var err =   ",e.createErrors!==!1?(r+=" { keyword: '"+(d||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { keyword: '"+v.keyword+"' } ",e.opts.messages!==!1&&(r+=` , message: 'should pass "`+v.keyword+`" keyword validation' `),e.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; ")):y.errors===!1?r+=" "+Fe+" ":(r+=" if (Array.isArray("+X+")) { if (vErrors === null) vErrors = "+X+"; else vErrors = vErrors.concat("+X+"); errors = vErrors.length;  for (var "+B+"="+m+"; "+B+"<errors; "+B+"++) { var "+$+" = vErrors["+B+"]; if ("+$+".dataPath === undefined) "+$+".dataPath = (dataPath || '') + "+e.errorPath+";  "+$+'.schemaPath = "'+c+'";  ',e.opts.verbose&&(r+=" "+$+".schema = "+g+"; "+$+".data = "+h+"; "),r+=" } } else { "+Fe+" } "),r+=" } ",u&&(r+=" else { ")}return r};const pI="http://json-schema.org/draft-07/schema#",gI="http://json-schema.org/draft-07/schema#",vI="Core schema meta-schema",yI={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},bI=["object","boolean"],EI={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},NE={$schema:pI,$id:gI,title:vI,definitions:yI,type:bI,properties:EI,default:!0};var Kv=NE,wI={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:Kv.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:Kv.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},CI=/^[a-z_$][a-z0-9_$-]*$/i,SI=mI,_I=wI,xI={add:RI,get:AI,remove:kI,validate:Sf};function RI(n,e){var t=this.RULES;if(t.keywords[n])throw new Error("Keyword "+n+" is already defined");if(!CI.test(n))throw new Error("Keyword "+n+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var i=e.type;if(Array.isArray(i))for(var r=0;r<i.length;r++)a(n,i[r],e);else a(n,i,e);var s=e.metaSchema;s&&(e.$data&&this._opts.$data&&(s={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(s,!0))}t.keywords[n]=t.all[n]=!0;function a(o,l,c){for(var u,d=0;d<t.length;d++){var h=t[d];if(h.type==l){u=h;break}}u||(u={type:l,rules:[]},t.push(u));var f={keyword:o,definition:c,custom:!0,code:SI,implements:c.implements};u.rules.push(f),t.custom[o]=f}return this}function AI(n){var e=this.RULES.custom[n];return e?e.definition:this.RULES.keywords[n]||!1}function kI(n){var e=this.RULES;delete e.keywords[n],delete e.all[n],delete e.custom[n];for(var t=0;t<e.length;t++)for(var i=e[t].rules,r=0;r<i.length;r++)if(i[r].keyword==n){i.splice(r,1);break}return this}function Sf(n,e){Sf.errors=null;var t=this._validateKeyword=this._validateKeyword||this.compile(_I,!0);if(t(n))return!0;if(Sf.errors=t.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(t.errors));return!1}const DI="http://json-schema.org/draft-07/schema#",MI="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",PI="Meta-schema for $data reference (JSON Schema extension proposal)",TI="object",II=["$data"],OI={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},NI=!1,FI={$schema:DI,$id:MI,description:PI,type:TI,required:II,properties:OI,additionalProperties:NI};var FE=ST,qs=up,LI=MT,LE=pE,BI=bE,$I=LT,qI=uI,BE=dI,$E=Za,UI=jt;jt.prototype.validate=VI;jt.prototype.compile=jI;jt.prototype.addSchema=WI;jt.prototype.addMetaSchema=zI;jt.prototype.validateSchema=GI;jt.prototype.getSchema=YI;jt.prototype.removeSchema=XI;jt.prototype.addFormat=sO;jt.prototype.errorsText=iO;jt.prototype._addSchema=JI;jt.prototype._compile=ZI;jt.prototype.compileAsync=fI;var yd=xI;jt.prototype.addKeyword=yd.add;jt.prototype.getKeyword=yd.get;jt.prototype.removeKeyword=yd.remove;jt.prototype.validateKeyword=yd.validate;var qE=dp;jt.ValidationError=qE.Validation;jt.MissingRefError=qE.MissingRef;jt.$dataMetaSchema=BE;var hu="http://json-schema.org/draft-07/schema",Yv=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],HI=["/properties"];function jt(n){if(!(this instanceof jt))return new jt(n);n=this._opts=$E.copy(n)||{},dO(this),this._schemas={},this._refs={},this._fragments={},this._formats=$I(n.format),this._cache=n.cache||new LI,this._loadingSchemas={},this._compilations=[],this.RULES=qI(),this._getId=eO(n),n.loopRequired=n.loopRequired||1/0,n.errorDataPath=="property"&&(n._errorDataPathProperty=!0),n.serialize===void 0&&(n.serialize=BI),this._metaOpts=uO(this),n.formats&&lO(this),n.keywords&&cO(this),aO(this),typeof n.meta=="object"&&this.addMetaSchema(n.meta),n.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),oO(this)}function VI(n,e){var t;if(typeof n=="string"){if(t=this.getSchema(n),!t)throw new Error('no schema with key or ref "'+n+'"')}else{var i=this._addSchema(n);t=i.validate||this._compile(i)}var r=t(e);return t.$async!==!0&&(this.errors=t.errors),r}function jI(n,e){var t=this._addSchema(n,void 0,e);return t.validate||this._compile(t)}function WI(n,e,t,i){if(Array.isArray(n)){for(var r=0;r<n.length;r++)this.addSchema(n[r],void 0,t,i);return this}var s=this._getId(n);if(s!==void 0&&typeof s!="string")throw new Error("schema id must be string");return e=qs.normalizeId(e||s),HE(this,e),this._schemas[e]=this._addSchema(n,t,i,!0),this}function zI(n,e,t){return this.addSchema(n,e,t,!0),this}function GI(n,e){var t=n.$schema;if(t!==void 0&&typeof t!="string")throw new Error("$schema must be a string");if(t=t||this._opts.defaultMeta||KI(this),!t)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var i=this.validate(t,n);if(!i&&e){var r="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(r);else throw new Error(r)}return i}function KI(n){var e=n._opts.meta;return n._opts.defaultMeta=typeof e=="object"?n._getId(e)||e:n.getSchema(hu)?hu:void 0,n._opts.defaultMeta}function YI(n){var e=UE(this,n);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return QI(this,n)}}function QI(n,e){var t=qs.schema.call(n,{schema:{}},e);if(t){var i=t.schema,r=t.root,s=t.baseId,a=FE.call(n,i,r,void 0,s);return n._fragments[e]=new LE({ref:e,fragment:!0,schema:i,root:r,baseId:s,validate:a}),a}}function UE(n,e){return e=qs.normalizeId(e),n._schemas[e]||n._refs[e]||n._fragments[e]}function XI(n){if(n instanceof RegExp)return Xl(this,this._schemas,n),Xl(this,this._refs,n),this;switch(typeof n){case"undefined":return Xl(this,this._schemas),Xl(this,this._refs),this._cache.clear(),this;case"string":var e=UE(this,n);return e&&this._cache.del(e.cacheKey),delete this._schemas[n],delete this._refs[n],this;case"object":var t=this._opts.serialize,i=t?t(n):n;this._cache.del(i);var r=this._getId(n);r&&(r=qs.normalizeId(r),delete this._schemas[r],delete this._refs[r])}return this}function Xl(n,e,t){for(var i in e){var r=e[i];!r.meta&&(!t||t.test(i))&&(n._cache.del(r.cacheKey),delete e[i])}}function JI(n,e,t,i){if(typeof n!="object"&&typeof n!="boolean")throw new Error("schema should be object or boolean");var r=this._opts.serialize,s=r?r(n):n,a=this._cache.get(s);if(a)return a;i=i||this._opts.addUsedSchema!==!1;var o=qs.normalizeId(this._getId(n));o&&i&&HE(this,o);var l=this._opts.validateSchema!==!1&&!e,c;l&&!(c=o&&o==qs.normalizeId(n.$schema))&&this.validateSchema(n,!0);var u=qs.ids.call(this,n),d=new LE({id:o,schema:n,localRefs:u,cacheKey:s,meta:t});return o[0]!="#"&&i&&(this._refs[o]=d),this._cache.put(s,d),l&&c&&this.validateSchema(n,!0),d}function ZI(n,e){if(n.compiling)return n.validate=r,r.schema=n.schema,r.errors=null,r.root=e||r,n.schema.$async===!0&&(r.$async=!0),r;n.compiling=!0;var t;n.meta&&(t=this._opts,this._opts=this._metaOpts);var i;try{i=FE.call(this,n.schema,e,n.localRefs)}catch(s){throw delete n.validate,s}finally{n.compiling=!1,n.meta&&(this._opts=t)}return n.validate=i,n.refs=i.refs,n.refVal=i.refVal,n.root=i.root,i;function r(){var s=n.validate,a=s.apply(this,arguments);return r.errors=s.errors,a}}function eO(n){switch(n.schemaId){case"auto":return rO;case"id":return tO;default:return nO}}function tO(n){return n.$id&&this.logger.warn("schema $id ignored",n.$id),n.id}function nO(n){return n.id&&this.logger.warn("schema id ignored",n.id),n.$id}function rO(n){if(n.$id&&n.id&&n.$id!=n.id)throw new Error("schema $id is different from id");return n.$id||n.id}function iO(n,e){if(n=n||this.errors,!n)return"No errors";e=e||{};for(var t=e.separator===void 0?", ":e.separator,i=e.dataVar===void 0?"data":e.dataVar,r="",s=0;s<n.length;s++){var a=n[s];a&&(r+=i+a.dataPath+" "+a.message+t)}return r.slice(0,-t.length)}function sO(n,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[n]=e,this}function aO(n){var e;if(n._opts.$data&&(e=FI,n.addMetaSchema(e,e.$id,!0)),n._opts.meta!==!1){var t=NE;n._opts.$data&&(t=BE(t,HI)),n.addMetaSchema(t,hu,!0),n._refs["http://json-schema.org/schema"]=hu}}function oO(n){var e=n._opts.schemas;if(e)if(Array.isArray(e))n.addSchema(e);else for(var t in e)n.addSchema(e[t],t)}function lO(n){for(var e in n._opts.formats){var t=n._opts.formats[e];n.addFormat(e,t)}}function cO(n){for(var e in n._opts.keywords){var t=n._opts.keywords[e];n.addKeyword(e,t)}}function HE(n,e){if(n._schemas[e]||n._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}function uO(n){for(var e=$E.copy(n._opts),t=0;t<Yv.length;t++)delete e[Yv[t]];return e}function dO(n){var e=n._opts.logger;if(e===!1)n.logger={log:th,warn:th,error:th};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");n.logger=e}}function th(){}const hO=fE(UI);var fO="Expected a function",VE="__lodash_hash_undefined__",jE=1/0,mO="[object Function]",pO="[object GeneratorFunction]",gO="[object Symbol]",vO=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yO=/^\w*$/,bO=/^\./,EO=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wO=/[\\^$.*+?()[\]{}|]/g,CO=/\\(\\)?/g,SO=/^\[object .+?Constructor\]$/,_O=typeof bo=="object"&&bo&&bo.Object===Object&&bo,xO=typeof self=="object"&&self&&self.Object===Object&&self,fp=_O||xO||Function("return this")();function RO(n,e){return n==null?void 0:n[e]}function AO(n){var e=!1;if(n!=null&&typeof n.toString!="function")try{e=!!(n+"")}catch{}return e}var kO=Array.prototype,DO=Function.prototype,WE=Object.prototype,nh=fp["__core-js_shared__"],Qv=function(){var n=/[^.]+$/.exec(nh&&nh.keys&&nh.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),zE=DO.toString,mp=WE.hasOwnProperty,GE=WE.toString,MO=RegExp("^"+zE.call(mp).replace(wO,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xv=fp.Symbol,PO=kO.splice,TO=KE(fp,"Map"),nl=KE(Object,"create"),Jv=Xv?Xv.prototype:void 0,Zv=Jv?Jv.toString:void 0;function Ws(n){var e=-1,t=n?n.length:0;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}function IO(){this.__data__=nl?nl(null):{}}function OO(n){return this.has(n)&&delete this.__data__[n]}function NO(n){var e=this.__data__;if(nl){var t=e[n];return t===VE?void 0:t}return mp.call(e,n)?e[n]:void 0}function FO(n){var e=this.__data__;return nl?e[n]!==void 0:mp.call(e,n)}function LO(n,e){var t=this.__data__;return t[n]=nl&&e===void 0?VE:e,this}Ws.prototype.clear=IO;Ws.prototype.delete=OO;Ws.prototype.get=NO;Ws.prototype.has=FO;Ws.prototype.set=LO;function eo(n){var e=-1,t=n?n.length:0;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}function BO(){this.__data__=[]}function $O(n){var e=this.__data__,t=bd(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():PO.call(e,t,1),!0}function qO(n){var e=this.__data__,t=bd(e,n);return t<0?void 0:e[t][1]}function UO(n){return bd(this.__data__,n)>-1}function HO(n,e){var t=this.__data__,i=bd(t,n);return i<0?t.push([n,e]):t[i][1]=e,this}eo.prototype.clear=BO;eo.prototype.delete=$O;eo.prototype.get=qO;eo.prototype.has=UO;eo.prototype.set=HO;function Js(n){var e=-1,t=n?n.length:0;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}function VO(){this.__data__={hash:new Ws,map:new(TO||eo),string:new Ws}}function jO(n){return Ed(this,n).delete(n)}function WO(n){return Ed(this,n).get(n)}function zO(n){return Ed(this,n).has(n)}function GO(n,e){return Ed(this,n).set(n,e),this}Js.prototype.clear=VO;Js.prototype.delete=jO;Js.prototype.get=WO;Js.prototype.has=zO;Js.prototype.set=GO;function bd(n,e){for(var t=n.length;t--;)if(iN(n[t][0],e))return t;return-1}function KO(n,e){e=JO(e,n)?[e]:XO(e);for(var t=0,i=e.length;n!=null&&t<i;)n=n[nN(e[t++])];return t&&t==i?n:void 0}function YO(n){if(!QE(n)||eN(n))return!1;var e=sN(n)||AO(n)?MO:SO;return e.test(rN(n))}function QO(n){if(typeof n=="string")return n;if(gp(n))return Zv?Zv.call(n):"";var e=n+"";return e=="0"&&1/n==-jE?"-0":e}function XO(n){return YE(n)?n:tN(n)}function Ed(n,e){var t=n.__data__;return ZO(e)?t[typeof e=="string"?"string":"hash"]:t.map}function KE(n,e){var t=RO(n,e);return YO(t)?t:void 0}function JO(n,e){if(YE(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||gp(n)?!0:yO.test(n)||!vO.test(n)||e!=null&&n in Object(e)}function ZO(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function eN(n){return!!Qv&&Qv in n}var tN=pp(function(n){n=oN(n);var e=[];return bO.test(n)&&e.push(""),n.replace(EO,function(t,i,r,s){e.push(r?s.replace(CO,"$1"):i||t)}),e});function nN(n){if(typeof n=="string"||gp(n))return n;var e=n+"";return e=="0"&&1/n==-jE?"-0":e}function rN(n){if(n!=null){try{return zE.call(n)}catch{}try{return n+""}catch{}}return""}function pp(n,e){if(typeof n!="function"||e&&typeof e!="function")throw new TypeError(fO);var t=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=t.cache;if(s.has(r))return s.get(r);var a=n.apply(this,i);return t.cache=s.set(r,a),a};return t.cache=new(pp.Cache||Js),t}pp.Cache=Js;function iN(n,e){return n===e||n!==n&&e!==e}var YE=Array.isArray;function sN(n){var e=QE(n)?GE.call(n):"";return e==mO||e==pO}function QE(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function aN(n){return!!n&&typeof n=="object"}function gp(n){return typeof n=="symbol"||aN(n)&&GE.call(n)==gO}function oN(n){return n==null?"":QO(n)}function lN(n,e,t){var i=n==null?void 0:KO(n,e);return i===void 0?t:i}var cN=lN;const XE=fE(cN);class uN{constructor(e){this.validationErrorReport=e}get item(){return this.validationErrorReport.item}get error(){return this.validationErrorReport.error}get index(){return parseInt(this.error.dataPath.replace(/.*\[([0-9])\].*/,"$1"),10)}get methodName(){const e=this.error.dataPath.replace(/(.*)\[[0-9]\](.*)/,"$1$2").split(".").map(i=>`${i.substring(0,1).toUpperCase()}${i.substring(1)}`).join(""),t=`${this.error.keyword.substring(0,1).toUpperCase()}${this.error.keyword.substring(1)}`;return`getFixup${e}${t}`}deleteItem(){G.state.selectedCharacter&&(G.state.selectedCharacter.data.items.splice(this.validationErrorReport.itemIndex,1),G.state.selectedCharacter.softReload())}getInvestedPoints(e){const t=$s.state.enchants[e.id];let i=0;return t&&(i=e.level*3+(t.tier==="Powerful"?3:0)),i}getFixup(){if(typeof this[this.methodName]=="function")return this[this.methodName]();throw new Error(`Fixup method "${this.methodName}" is not implemented`)}getFixupGiftedType(){return[{label:Ce.global.t("MCD.DataCorruption.Fixup.giftedType1"),apply:()=>{delete this.item.gifted}},{label:Ce.global.t("MCD.DataCorruption.Fixup.giftedType2"),apply:()=>{this.item.gifted=!0}}]}getFixupGiftedConst(){return this.getFixupGiftedType()}getFixupMarkedNewType(){return[{label:Ce.global.t("MCD.DataCorruption.Fixup.markedNewType1"),apply:()=>{delete this.item.markedNew}},{label:Ce.global.t("MCD.DataCorruption.Fixup.markedNewType2"),apply:()=>{this.item.markedNew=!0}}]}getFixupMarkedNewConst(){return this.getFixupMarkedNewType()}getFixupEquipmentSlotRequired(){return this.getFixupInventoryIndexMinimum()}getFixupInventoryIndexRequired(){return this.getFixupInventoryIndexMinimum()}getFixupInventoryIndexMinimum(){return[{label:Ce.global.t("MCD.DataCorruption.Fixup.inventoryIndexMinimum"),apply:()=>{this.item.inventoryIndex=0}}]}getFixupInventoryIndexMaximum(){return[{label:Ce.global.t("MCD.DataCorruption.Fixup.inventoryIndexMaximum"),apply:()=>{this.item.inventoryIndex=179}},{label:Ce.global.t("MCD.DataCorruption.Fixup.deleteItem"),apply:()=>{this.deleteItem()}},{label:Ce.global.t("MCD.DataCorruption.Fixup.createIssueOnGithub"),apply:()=>{Te.invoke("openGithubLink","https://github.com/MatthieuLepers/mcd-save-editor/issues")}}]}getFixupEnchantmentsRequired(){return[{label:Ce.global.t("MCD.DataCorruption.Fixup.enchantmentsRequired"),apply:()=>{this.item.enchantments=[...Array(9).keys()].map(()=>An.UNSET.data)}}]}getFixupEnchantmentsMinItems(){const e=9-this.item.enchantments.length;return[{label:Ce.global.t("MCD.DataCorruption.Fixup.enchantmentsMinItems",[e]),apply:()=>{this.item.enchantments.push(...[...Array(e).keys()].map(()=>An.UNSET.data))}}]}getFixupEnchantmentsMaxItems(){const e=this.item.enchantments.length-9;return[{label:Ce.global.t("MCD.DataCorruption.Fixup.enchantmentsMinItems",[e]),apply:()=>{this.item.enchantments.splice(9,e)}}]}getFixupEnchantmentsIdRequired(){return[{label:Ce.global.t("MCD.DataCorruption.Fixup.enchantmentsIdRequired"),apply:()=>{this.item.enchantments[this.index].id="Unset",this.item.enchantments[this.index].investedPoints=0,this.item.enchantments[this.index].level=0}}]}getFixupEnchantmentsInvestedPointsRequired(){return[{label:Ce.global.t("MCD.DataCorruption.Fixup.enchantmentsInvestedPointsRequired"),apply:()=>{this.item.enchantments[this.index].investedPoints=0}}]}getFixupEnchantmentsLevelRequired(){return[{label:Ce.global.t("MCD.DataCorruption.Fixup.enchantmentsLevelRequired"),apply:()=>{this.item.enchantments[this.index].level=0}}]}getFixupEnchantmentsIdEnum(){return[{label:Ce.global.t("MCD.DataCorruption.Fixup.enchantmentsIdEnum"),apply:()=>{this.item.enchantments[this.index].id="Unset",this.item.enchantments[this.index].investedPoints=0,this.item.enchantments[this.index].level=0}}]}getFixupEnchantmentsInvestedPointsMinimum(){const e=this.getInvestedPoints(this.item.enchantments[this.index]);return[{label:Ce.global.t("MCD.DataCorruption.Fixup.enchantmentsInvestedPointsMinimum",[e]),apply:()=>{this.item.enchantments[this.index].investedPoints=e}}]}getFixupEnchantmentsInvestedPointsMaximum(){return this.getFixupEnchantmentsInvestedPointsMinimum()}getFixupEnchantmentsLevelMinimum(){return[{label:Ce.global.t("MCD.DataCorruption.Fixup.enchantmentsLevelMinimum"),apply:()=>{this.item.enchantments[this.index].level=0,this.item.enchantments[this.index].investedPoints=0}}]}getFixupEnchantmentsLevelMaximum(){return[...this.getFixupEnchantmentsLevelMinimum(),{label:Ce.global.t("MCD.DataCorruption.Fixup.enchantmentsLevelMaximum"),apply:()=>{this.item.enchantments[this.index].level=3,this.item.enchantments[this.index].investedPoints=this.getInvestedPoints(this.item.enchantments[this.index])}}]}getFixupEnchantmentsChunksLevelConsistency(){return[{label:Ce.global.t("MCD.DataCorruption.Fixup.enchantmentsChunksLevelConsistency"),apply:()=>{this.item.enchantments[this.index*3].level=0,this.item.enchantments[this.index*3].investedPoints=0,this.item.enchantments[this.index*3+1].level=0,this.item.enchantments[this.index*3+1].investedPoints=0,this.item.enchantments[this.index*3+2].level=0,this.item.enchantments[this.index*3+2].investedPoints=0}}]}getFixupEnchantmentsChunksUniqueChunkEnchant(){return[{label:Ce.global.t("MCD.DataCorruption.Fixup.enchantmentsChunksUniqueChunkEnchant"),apply:()=>{const e=this.item.enchantments.slice(this.index,this.index+3),t=Object.groupBy(e,i=>i.id);e.filter(i=>t[i.id].length>1).slice(1).forEach(i=>{i.id="Unset",i.investedPoints=0,i.level=0})}}]}getFixupEnchantmentsForbbiden(){return[{label:Ce.global.t("MCD.DataCorruption.Fixup.enchantmentsForbbiden"),apply:()=>{delete this.item.enchantments}}]}getFixupEquipmentSlotType(){return[{label:Ce.global.t("MCD.DataCorruption.Fixup.equipmentSlotType"),apply:()=>{delete this.item.equipmentSlot,this.item.inventoryIndex=0}}]}getFixupEquipmentSlotEnum(){return this.getFixupEquipmentSlotType()}getFixupNetheriteEnchantType(){return[{label:Ce.global.t("MCD.DataCorruption.Fixup.netheriteEnchantType"),apply:()=>{delete this.item.netheriteEnchant}}]}getFixupNetheriteEnchantIdRequired(){return this.getFixupNetheriteEnchantType()}getFixupNetheriteEnchantInvestedPointsRequired(){const e=this.getInvestedPoints(this.item.netheriteEnchant);return[...this.getFixupNetheriteEnchantType(),{label:Ce.global.t("MCD.DataCorruption.Fixup.netheriteEnchantInvestedPointsRequired",[e]),apply:()=>{this.item.netheriteEnchant.investedPoints=e}}]}getFixupNetheriteEnchantLevelRequired(){return[...this.getFixupNetheriteEnchantType(),{label:Ce.global.t("MCD.DataCorruption.Fixup.netheriteEnchantLevelRequired1"),apply:()=>{this.item.netheriteEnchant.level=1,this.item.netheriteEnchant.investedPoints=this.getInvestedPoints(this.item.netheriteEnchant)}},{label:Ce.global.t("MCD.DataCorruption.Fixup.netheriteEnchantLevelRequired2"),apply:()=>{this.item.netheriteEnchant.level=2,this.item.netheriteEnchant.investedPoints=this.getInvestedPoints(this.item.netheriteEnchant)}},{label:Ce.global.t("MCD.DataCorruption.Fixup.netheriteEnchantLevelRequired3"),apply:()=>{this.item.netheriteEnchant.level=3,this.item.netheriteEnchant.investedPoints=this.getInvestedPoints(this.item.netheriteEnchant)}}]}getFixupNetheriteEnchantLevelMinimum(){return this.getFixupNetheriteEnchantLevelRequired()}getFixupNetheriteEnchantLevelMaximum(){return this.getFixupNetheriteEnchantLevelRequired()}getFixupPowerRequired(){return[{label:Ce.global.t("MCD.DataCorruption.Fixup.powerRequired"),apply:()=>{this.item.power=1}}]}getFixupPowerType(){return this.getFixupPowerRequired()}getFixupRarityRequired(){const e=yt.items.value[this.item.type],t=[];return e?t.push({label:Ce.global.t("MCD.DataCorruption.Fixup.rarityRequired",[e.rarity[0]]),apply:()=>{[this.item.rarity]=e.rarity}}):t.push({label:Ce.global.t("MCD.DataCorruption.Fixup.deleteItem"),apply:()=>{this.deleteItem()}},{label:Ce.global.t("MCD.DataCorruption.Fixup.createIssueOnGithub"),apply:()=>{Te.invoke("openGithubLink","https://github.com/MatthieuLepers/mcd-save-editor/issues")}}),t}getFixupRarityEnum(){return this.getFixupRarityRequired()}getFixupTypeRequired(){return[{label:Ce.global.t("MCD.DataCorruption.Fixup.deleteItem"),apply:()=>{this.deleteItem()}},{label:Ce.global.t("MCD.DataCorruption.Fixup.createIssueOnGithub"),apply:()=>{Te.invoke("openGithubLink","https://github.com/MatthieuLepers/mcd-save-editor/issues")}}]}getFixupTypeEnum(){return this.getFixupTypeRequired()}getFixupUpgradedRequired(){return[{label:Ce.global.t("MCD.DataCorruption.Fixup.upgradedRequired"),apply:()=>{this.item.upgraded=!1}}]}getFixupUpgradedType(){return[{label:Ce.global.t("MCD.DataCorruption.Fixup.upgradedType"),apply:()=>{this.item.upgraded=!1}}]}getFixupUpgradedConst(){return this.getFixupUpgradedType()}getFixupArmorpropertiesMinItems(){const e=yt.state.armors[this.item.type],t=[{label:Ce.global.t("MCD.DataCorruption.Fixup.armorpropertiesMinItems1"),apply:()=>{delete this.item.armorproperties}}];return e?t.push({label:Ce.global.t("MCD.DataCorruption.Fixup.armorpropertiesMinItems2"),apply:()=>{this.item.armorproperties=e.armorproperties.map(i=>i.toGameData())}}):t.push({label:Ce.global.t("MCD.DataCorruption.Fixup.deleteItem"),apply:()=>{this.deleteItem()}},{label:Ce.global.t("MCD.DataCorruption.Fixup.createIssueOnGithub"),apply:()=>{Te.invoke("openGithubLink","https://github.com/MatthieuLepers/mcd-save-editor/issues")}}),t}getFixupArmorpropertiesMaxItems(){const e=yt.state.armors[this.item.type],t=[];return e?t.push({label:Ce.global.t("MCD.DataCorruption.Fixup.armorpropertiesMinItems2"),apply:()=>{this.item.armorproperties=e.armorproperties.map(i=>i.toGameData())}}):t.push({label:Ce.global.t("MCD.DataCorruption.Fixup.deleteItem"),apply:()=>{this.deleteItem()}},{label:Ce.global.t("MCD.DataCorruption.Fixup.createIssueOnGithub"),apply:()=>{Te.invoke("openGithubLink","https://github.com/MatthieuLepers/mcd-save-editor/issues")}}),t}getFixupArmorpropertiesForbbiden(){return[{label:Ce.global.t("MCD.DataCorruption.Fixup.armorpropertiesMinItems1"),apply:()=>{delete this.item.armorproperties}}]}getFixupArmorpropertiesIdRequired(){return this.getFixupArmorpropertiesMaxItems()}getFixupArmorpropertiesIdType(){return this.getFixupArmorpropertiesMaxItems()}getFixupArmorpropertiesIdEnum(){return this.getFixupArmorpropertiesMaxItems()}getFixupArmorpropertiesRarityRequired(){return this.getFixupArmorpropertiesMaxItems()}getFixupArmorpropertiesRarityType(){return this.getFixupArmorpropertiesMaxItems()}getFixupArmorpropertiesUniqueItems(){return this.getFixupArmorpropertiesMaxItems()}getFixupArmorpropertiesRarityEnum(){return[{label:Ce.global.t("MCD.DataCorruption.Fixup.armorpropertiesRarityEnum"),apply:()=>{this.item.armorproperties[this.index].rarity=Ln.COMMON}}]}}class dN{constructor(e,t,i){this.item=e,this.itemIndex=t,this.error=i}get instance(){return JSON.stringify(this.item,null,2)}get value(){if(this.error.dataPath.includes("chunks")){const e=parseInt(this.error.dataPath.replace(/.*chunks\[([0-2])\].*/,"$1"),10);return(this.item.enchantments??[]).slice(e,e+3)}return XE(this.item,this.error.dataPath)}getLine(){if(this.error.dataPath.includes("chunks")){const e=new RegExp(JSON.stringify(this.value).replace("[","").replace("]","").replaceAll("{","\\{\\s+").replaceAll('":','": ').replaceAll(',"',',\\s+"').replaceAll("}","\\s+\\}").replaceAll("\\},\\{","\\},\\s+\\{"),"gm"),[t]=this.instance.match(e),i=this.instance.search(e),r=i+t.length;return`${this.instance.substring(0,i).split(`
`).length} to ${this.instance.substring(0,r).split(`
`).length}`}return`${this.instance.split(`
`).findIndex(e=>e.includes(JSON.stringify(this.value,null,2)))+1}`}getFixup(){return new uN(this).getFixup()}}class JE{constructor(e){qt(this,"errors",[]);this.data=e}addErrorReport({item:e,error:t}){this.errors.push(new dN(e,this.items.indexOf(e),t))}isValid(){return!this.errors.length}validateBySchema(e,t){const r=new hO({allErrors:!0}).compile(e);r(t)||(r.errors??[]).filter(a=>!["oneOf","not"].includes(a.keyword)).forEach(a=>{const o=XE(t,a.dataPath.replace(".","")),l=a.dataPath.replaceAll(/\[[0-9]+\]/g,"").substring(1),{missingProperty:c}=a.params;c?(a.message=Ce.global.t(`MCD.DataCorruption${l.length?`.${l}`:""}.${c}.${a.keyword}`),a.dataPath+=`.${c}`):a.message=Ce.global.t(`MCD.DataCorruption${l.length?`.${l}`:""}.${a.keyword}`,{value:o}),a.dataPath=a.dataPath.substring(1),this.addErrorReport({item:t,error:a})})}validateItemType(e){yt.items.value[e.type]&&(yt.items.value[e.type].type==="Armor"&&!e.armorproperties&&this.addErrorReport({item:e,error:{dataPath:"armorproperties",keyword:"required",message:Ce.global.t("MCD.DataCorruption.armorproperties.required",{itemType:yt.items.value[e.type].type.toLowerCase()}),schemaPath:"#/$defs/item/properties/armorproperties/required"}}),yt.items.value[e.type].type==="Armor"&&!e.enchantments&&this.addErrorReport({item:e,error:{dataPath:"enchantments",keyword:"required",message:Ce.global.t("MCD.DataCorruption.enchantments.required",{itemType:yt.items.value[e.type].type.toLowerCase()}),schemaPath:"#/$defs/item/properties/enchantments/required"}}),(yt.items.value[e.type].type==="Melee"||yt.items.value[e.type].type==="Ranged")&&e.armorproperties&&this.addErrorReport({item:e,error:{dataPath:"armorproperties",keyword:"forbbiden",message:Ce.global.t("MCD.DataCorruption.armorproperties.forbbiden",{itemType:yt.items.value[e.type].type.toLowerCase()}),schemaPath:"#/$defs/item/properties/armorproperties/forbbiden"}}),(yt.items.value[e.type].type==="Melee"||yt.items.value[e.type].type==="Ranged")&&!e.enchantments&&this.addErrorReport({item:e,error:{dataPath:"enchantments",keyword:"required",message:Ce.global.t("MCD.DataCorruption.enchantments.required",{itemType:yt.items.value[e.type].type.toLowerCase()}),schemaPath:"#/$defs/item/properties/armorproperties/required"}}),yt.items.value[e.type].type==="Artefact"&&(e.armorproperties&&this.addErrorReport({item:e,error:{dataPath:"armorproperties",keyword:"forbbiden",message:Ce.global.t("MCD.DataCorruption.armorproperties.forbbiden",{itemType:yt.items.value[e.type].type.toLowerCase()}),schemaPath:"#/$defs/item/properties/armorproperties/forbbiden"}}),e.enchantments&&this.addErrorReport({item:e,error:{dataPath:"enchantments",keyword:"forbbiden",message:Ce.global.t("MCD.DataCorruption.enchantments.forbbiden",{itemType:yt.items.value[e.type].type.toLowerCase()}),schemaPath:"#/$defs/item/properties/enchantments/forbbiden"}}),e.netheriteEnchant&&this.addErrorReport({item:e,error:{dataPath:"netheriteEnchant",keyword:"forbbiden",message:Ce.global.t("MCD.DataCorruption.netheriteEnchant.forbbiden",{itemType:yt.items.value[e.type].type.toLowerCase()}),schemaPath:"#/$defs/item/properties/netheriteEnchant/forbbiden"}})))}validateEnchantmentChunks(e){e.enchantments&&(e.enchantments.filter(i=>i.level>0).map(i=>i.id).includes("Unset")&&this.addErrorReport({item:e,error:{dataPath:"enchantments",keyword:"noLeveledUnset",message:Ce.global.t("MCD.DataCorruption.enchantments.noLeveledUnset"),schemaPath:"#/$defs/item/properties/enchantments/noLeveledUnset"}}),sE(e.enchantments??[],3).forEach((i,r)=>{i.filter(o=>o.level>0).length>1&&this.addErrorReport({item:e,error:{dataPath:`enchantments.chunks[${r}]`,keyword:"levelConsistency",message:Ce.global.t("MCD.DataCorruption.enchantments.chunks.levelConsistency",[r+1]),schemaPath:"#/$defs/item/properties/enchantments/chunks/levelConsistency"}});const a=i.map(o=>o.id).filter((o,l,c)=>c.indexOf(o)!==l&&o!=="Unset");a.length&&this.addErrorReport({item:e,error:{dataPath:`enchantments.chunks[${r}]`,keyword:"uniqueChunkEnchant",message:Ce.global.t("MCD.DataCorruption.enchantments.chunks.uniqueChunkEnchant",[r+1,...a]),schemaPath:"#/$defs/item/properties/enchantments/chunks/uniqueChunkEnchant"}})}))}validateNetheriteEnchant(e){if(e.netheriteEnchant){const i=(e.enchantments??[]).filter(r=>r.level>0).map(r=>r.id).includes(e.netheriteEnchant.id);i&&this.addErrorReport({item:e,error:{dataPath:"netheriteEnchant.id",keyword:"unique",message:Ce.global.t("MCD.DataCorruption.netheriteEnchant.id.unique",[i]),schemaPath:"#/$defs/item/properties/netheriteEnchant/id/unique"}})}}validateArmorProperties(e){if(e.armorproperties){const t=e.armorproperties.map(i=>i.id).filter((i,r,s)=>s.indexOf(i)!==r);t.length&&this.addErrorReport({item:e,error:{dataPath:"armorproperties",keyword:"uniqueItemsId",message:Ce.global.t("MCD.DataCorruption.armorproperties.uniqueItemsId",t),schemaPath:"#/$defs/item/properties/armorproperties/uniqueItemsId"}})}}}const hN="Item",fN="An inventory item",mN="object",pN={equipmentSlot:{type:"string",enum:["MeleeGear","ArmorGear","RangedGear","HotbarSlot1","HotbarSlot2","HotbarSlot3"],message:{type:"equipmentSlot property must be of string type",required:"Missing required inventoryIndex or equipmentSlot key",enum:"Unrecognized slot type"}},inventoryIndex:{type:"number",minimum:0,maximum:179,message:{type:"inventoryIndex property must be of number type",required:"Missing required inventoryIndex or equipmentSlot key",minimum:"inventoryIndex cannot be lower than 0",maximum:"inventoryIndex cannot be higher than 179"}},power:{type:"number",minimum:1,message:{type:"power property must be of number type",minimum:"power cannot be lower than 1"}},rarity:{type:"string",enum:["Unique","Rare","Common"],message:{type:"rarity property must be of string type",enum:"Unrocognized rarity type"}},type:{type:"string",enum:["ArchersStrappings","ArchersStrappings_Unique1","AssassinArmor","AssassinArmor_Unique1","BattleRobe","BattleRobe_Unique1","BeenestArmor","BeenestArmor_Unique1","ChampionsArmor","ChampionsArmor_Unique1","CowardsArmor","CowardsArmor_Unique1","DarkArmor","DarkArmor_Unique1","EvocationRobe","EvocationRobe_Unique1","EvocationRobe_Unique2","FullPlateArmor","FullPlateArmor_Unique1","FullPlateArmor_Spooky2","GhostArmor","GhostArmor_Unique1","GhostArmor_Spooky2","GrimArmor","GrimArmor_Unique1","GrimArmor_Spooky2","MercenaryArmor","MercenaryArmor_Unique1","MercenaryArmor_Spooky1","MysteryArmor","NatureArmor","NatureArmor_Unique1","PhantomArmor","PhantomArmor_Unique1","ReinforcedMail","ReinforcedMail_Unique1","ScaleMail","ScaleMail_Unique1","SoulRobe","SoulRobe_Unique1","SpelunkersArmor","SpelunkersArmor_Unique1","SpelunkersArmor_Year1","WolfArmor","WolfArmor_Unique1","WolfArmor_Unique2","WolfArmor_Winter1","OcelotArmor","OcelotArmor_Unique1","SnowArmor","SnowArmor_Unique1","ClimbingGear","ClimbingGear_Unique1","ClimbingGear_Unique2","EmeraldArmor","EmeraldArmor_Unique1","EmeraldArmor_Unique2","PiglinArmor","PiglinArmor_Unique1","SproutArmor","SproutArmor_Unique1","SquidArmor","SquidArmor_Unique1","TurtleArmor","TurtleArmor_Unique1","BardsGarb","BardsGarb_Unique1","EndRobes","EndRobes_Unique1","ShulkerArmor","ShulkerArmor_Unique1","BeeNest","BootsOfSwiftness","CorruptedBeacon","CorruptedBeacon_Spooky1","DeathCapMushroom","FireworksArrowItem","FishingRod","FlamingQuiver","GhostCloak","GolemKit","GongOfWeakening","Harvester","IronHideAmulet","LightFeather","LightningRod","LoveMedallion","RainbowGrass","ShockPowder","SoulHealer","SoulLantern","SoulTotemOfCasting","TastyBone","TormentQuiver","TotemOfRegeneration","TotemOfShielding","TotemOfSoulProtection","WindHorn","WonderfulWheat","CorruptedSeeds","IceWand","ChargedRedstoneMines","EnchantersTome","SatchelOfTheElements","UpdraftTome","MobMasher","NetherWartSporeGrenade","SpinWheel","ThunderingQuiver","GuardianEye","HeavyHarpoonQuiver","SatchelOfNeed","SatchelOfNourishment","LostEvocation","ShadowSplinter","TomeOfDuplication","VoidQuiver","Axe","Axe_Unique1","Axe_Unique2","Battlestaff","Battlestaff_Unique1","Battlestaff_Unique2","Claymore","Claymore_Unique1","Claymore_Unique2","Claymore_Unique3","Claymore_Winter1","Cutlass","Cutlass_Unique1","Cutlass_Unique2","Cutlass_Year1","Daggers","Daggers_Unique1","Daggers_Unique2","Daggers_Unique3","DoubleAxe","DoubleAxe_Unique1","DoubleAxe_Unique2","Gauntlets","Gauntlets_Unique1","Gauntlets_Unique2","Gauntlets_Unique3","Glaive","Glaive_Unique1","Glaive_Unique2","Glaive_Spooky2","Hammer","Hammer_Unique1","Hammer_Unique2","SkeletonHammer","Katana","Katana_Unique1","Katana_Unique2","Mace","Mace_Unique1","Mace_Unique2","Pickaxe","Pickaxe_Unique1","Rapier","Rapier_Unique1","Rapier_Unique2","Sickles","Sickles_Unique1","Sickles_Unique2","SoulKnife","SoulKnife_Unique1","SoulKnife_Unique2","SoulScythe","SoulScythe_Unique1","SoulScythe_Unique2","SoulScythe_Spooky2","Spear","Spear_Unique1","Spear_Unique2","Spear_spooky2","Sword","Sword_Unique1","Sword_Unique2","Sword_Spooky1","Whip","Whip_Unique1","TempestKnife","TempestKnife_Unique1","TempestKnife_Unique2","Boneclub","Boneclub_Unique1","Chainsword","Chainsword_Unique1","Anchor","Anchor_Unique1","CoralBlade","CoralBlade_Unique1","Backstabber","Backstabber_Unique1","ObsidianClaymore","ObsidianClaymore_Unique1","VoidTouchedBlades","VoidTouchedBlades_Unique1","Bow","Bow_Unique1","Bow_Unique2","Bow_Spooky1","BurstCrossbow","BurstCrossbow_Unique1","BurstCrossbow_Unique2","Crossbow","Crossbow_Unique1","Crossbow_Unique2","DualCrossbows","DualCrossbows_Unique1","DualCrossbows_Unique2","ExplodingCrossbow","ExplodingCrossbow_Unique1","ExplodingCrossbow_Unique2","HeavyCrossbow","HeavyCrossbow_Unique1","HeavyCrossbow_Unique2","HuntingBow","HuntingBow_Unique1","HuntingBow_Unique2","HuntingBow_Unique3","Longbow","Longbow_Unique1","Longbow_Unique2","Powerbow","Powerbow_Unique1","Powerbow_Unique2","PowerBow_Spooky2","RapidCrossbow","RapidCrossbow_Unique1","RapidCrossbow_Unique2","ScatterCrossbow","ScatterCrossbow_Unique1","ScatterCrossbow_Unique2","Shortbow","Shortbow_Unique1","Shortbow_Unique2","Shortbow_Unique3","SoulBow","SoulBow_Unique1","SoulBow_Unique2","SoulBow_Winter1","SoulCrossbow","SoulCrossbow_Unique1","SoulCrossbow_Unique2","Trickbow","Trickbow_Unique1","Trickbow_Unique2","Trickbow_Year1","SlowBow","SlowBow_Unique1","SlowBow_Spooky2","WindBow","WindBow_Unique1","WindBow_Unique2","CogCrossbow","CogCrossbow_Unique1","TwistingVineBow","TwistingVineBow_Unique1","BubbleBow","BubbleBow_Unique1","BubbleBow_Spooky2","HarpoonCrossbow","HarpoonCrossbow_Unique1","ShadowCrossbow","ShadowCrossbow_Unique1","BatCrossbow","VoidBow","VoidBow_Unique1"],message:{type:"type property must be of string type",enum:"Unrocognized type"}},upgraded:{type:"boolean",const:!1,message:{type:"upgraded property must be of boolean type",const:"upgraded can only set to false"}},gifted:{type:"boolean",const:!0,message:{type:"gifted property must be of boolean type",const:"gifted can only set to true"}},markedNew:{type:"boolean",const:!0,message:{type:"markedNew property must be of boolean type",const:"markedNew can only set to true"}},armorproperties:{type:"array",minItems:1,maxItems:4,uniqueItems:!0,items:{$ref:"#/$defs/armorproperty"},message:{type:"armorproperties property must be of array type",minItems:"armorproperties cannot have lower than 1 item",maxItems:"armorproperties cannot have higher than 4 items",uniqueItems:"armorproperties cannot have duplicate items"}},netheriteEnchant:{$ref:"#/$defs/gildedEnchantment"},enchantments:{type:"array",minItems:9,maxItems:9,items:{$ref:"#/$defs/enchantment"}}},gN=["power","rarity","type","upgraded"],vN=[{required:["equipmentSlot"],not:{required:["inventoryIndex"]}},{required:["inventoryIndex"],not:{required:["equipmentSlot"]}}],yN={armorproperty:{type:"object",required:["id","rarity"],properties:{id:{type:"string",enum:["AllyDamageBoost","AreaHeal","Beekeeper","DodgeCooldownIncrease","DodgeGhostForm","DodgeSpeedIncrease","Heavyweight","IncreasedArrowBundleSize","IncreasedMobTargeting","ItemCooldownDecrease","ItemCooldownReset","ItemDamageBoost","LifeStealAura","MeleeAttackSpeedBoost","MeleeDamageBoost","MissChance","MoveSpeedAura","MoveSpeedReduction","PetBat","PotionCooldownDecrease","RangedDamageBoost","SlowResistance","SoulGatheringBoost","SuperbDamageAbsorption","TeleportChance","Unknown","DodgeInvulnerability","EmeraldShield","DodgeRoot","HealingAura","SquidRollLimited","SquidRollQuick","InstantTransmission","Resonant"],message:{type:"id property must be of string type",required:"Missing required property id",enum:"Unrecognized armorproperty id"}},rarity:{type:"string",enum:["Unique","Common","Rare"],message:{type:"rarity property must be of string type",required:"Missing required property rarity",enum:"Unrecognized armorproperty rarity"}}}},gildedEnchantment:{type:"object",required:["id","investedPoints","level"],properties:{id:{type:"string",enum:["Accelerating","Acrobat","AnimaConduitMelee","BagOfSouls","BonusShot","Burning","BurstBowstring","BusyBee","Celerity","ChainReaction","Chains","Chilling","Committed","Cowardice","CriticalHit","Deflecting","DynamoMelee","DynamoRanged","Echo","Electrified","EnigmaResonatorMelee","EnigmaResonatorRanged","Exploding","Explorer","FinalShout","FireAspect","FireTrail","FoodReserves","Freezing","Frenzied","FuseShot","Gravity","GravityMelee","GravityPulse","Growing","HealthSynergy","Infinity","Leeching","Looting","MultiShot","Piercing","PoisonedMelee","PoisonedRanged","PotionFortification","Power","Prospector","Protection","Punch","RadianceMelee","RadianceRanged","Rampaging","RapidFire","Recycler","Ricochet","Sharpness","Shockwave","Smiting","Snowing","SoulSiphon","SpeedSynergy","SpiritSpeed","Stunning","Supercharge","SurpriseGift","Swiftfooted","Swirling","TempoTheft","Thorns","Thundering","TumbleBee","Unchanting","Unset","Weakening","WildRage","BaneOfIllagers","DeathBarter","EmeraldDivination","MultiDodge","ResurrectionSurge","RollCharge","ArtifactCharge","BeastBoss","BeastBurst","BeastSurge","CooldownShot","DamageSynergy","FireFocus","LightningFocus","PainCycle","PoisonFocus","Reckless","ShockWeb","SoulFocus","Flee","GuardingStrike","LuckOfTheSea","MultiCharge","PotionThirstMelee","PotionThirstRanged","Backstabber","DippingPoison","LevitationShot","ShadowFeast","ShadowFlash","VoidTouchedMelee","VoidTouchedRanged"],message:{type:"id property must be of string type",required:"Missing required property id",enum:"Unrecognized enchantment id"}},investedPoints:{type:"number",minimum:0,maximum:12,message:{type:"investedPoints property must be of number type",required:"Missing required property investedPoints",minimum:"investedPoints cannot be lower than 0",maximum:"investedPoints cannot be higher than 12"}},level:{type:"number",minimum:1,maximum:3,message:{type:"level property must be of number type",minimum:"level cannot be lower than 1",maximum:"leve lcannot be higher then 3"}}}},enchantment:{type:"object",required:["id","investedPoints","level"],properties:{id:{type:"string",enum:["Accelerating","Acrobat","AnimaConduitMelee","BagOfSouls","BonusShot","Burning","BurstBowstring","BusyBee","Celerity","ChainReaction","Chains","Chilling","Committed","Cowardice","CriticalHit","Deflecting","DynamoMelee","DynamoRanged","Echo","Electrified","EnigmaResonatorMelee","EnigmaResonatorRanged","Exploding","Explorer","FinalShout","FireAspect","FireTrail","FoodReserves","Freezing","Frenzied","FuseShot","Gravity","GravityMelee","GravityPulse","Growing","HealthSynergy","Infinity","Leeching","Looting","MultiShot","Piercing","PoisonedMelee","PoisonedRanged","PotionFortification","Power","Prospector","Protection","Punch","RadianceMelee","RadianceRanged","Rampaging","RapidFire","Recycler","Ricochet","Sharpness","Shockwave","Smiting","Snowing","SoulSiphon","SpeedSynergy","SpiritSpeed","Stunning","Supercharge","SurpriseGift","Swiftfooted","Swirling","TempoTheft","Thorns","Thundering","TumbleBee","Unchanting","Unset","Weakening","WildRage","BaneOfIllagers","DeathBarter","EmeraldDivination","MultiDodge","ResurrectionSurge","RollCharge","ArtifactCharge","BeastBoss","BeastBurst","BeastSurge","CooldownShot","DamageSynergy","FireFocus","LightningFocus","PainCycle","PoisonFocus","Reckless","ShockWeb","SoulFocus","Flee","GuardingStrike","LuckOfTheSea","MultiCharge","PotionThirstMelee","PotionThirstRanged","Backstabber","DippingPoison","LevitationShot","ShadowFeast","ShadowFlash","VoidTouchedMelee","VoidTouchedRanged"],message:{type:"id property must be of string type",required:"Missing required property id",enum:"Unrecognized enchantment id"}},investedPoints:{type:"number",minimum:0,maximum:12,message:{type:"investedPoints property must be of number type",required:"Missing required property investedPoints",minimum:"investedPoints cannot be lower than 0",maximum:"investedPoints cannot be higher than 12"}},level:{type:"number",minimum:0,maximum:3,message:{type:"level property must be of number type",minimum:"level cannot be lower than 0",maximum:"leve lcannot be higher then 3"}}}}},ZE={title:hN,description:fN,type:mN,properties:pN,required:gN,oneOf:vN,$defs:yN};class ey extends JE{constructor(e){super(e),this.data.items.forEach(t=>{this.validateBySchema(ZE,t),this.validateItemType(t),this.validateEnchantmentChunks(t),this.validateNetheriteEnchant(t),this.validateArmorProperties(t)})}get items(){return this.data.items}}class lr{static getXpForLevel(e){const t=i=>i<=1?0:i===2?500:t(i-1)+600;return t(e)}static level2Xp(e){return[...Array(e+1).keys()].map(lr.getXpForLevel).reduce((t,i)=>t+i,0)}static xp2Level(e){let t=0;for(;lr.level2Xp(t)<e;)t+=1;return lr.level2Xp(t)===e?t:t-1}static isDataCorrupted(e){return new ey(e).isValid()}static getDataCorrupted(e){return new ey(e).errors}}class bs{constructor(e,t){qt(this,"corrupted",[]);qt(this,"currencies");qt(this,"inventory");qt(this,"storageChest");this.data=e,this.filePath=t,this.corrupted=lr.getDataCorrupted(this.data),this.currencies=new Yd(this.data.currency),this.inventory=new Qd(this.corrupted.length?[]:this.data.items),this.storageChest=new Xd(this.corrupted.length?[]:this.data.storageChestItems)}get id(){return this.filePath.replace(".dat","").split("/").pop()}get profilId(){return this.filePath.replace(".dat","").split("/").shift()}get uuid(){return this.data.playerId.replace(/-/,"")}get level(){return lr.xp2Level(this.data.xp)}set level(e){this.data.xp=lr.level2Xp(e)}get enchantmentPointsInvested(){return[...this.inventory.items,...this.storageChest.items].reduce((e,t)=>e+t.enchantmentPointsInvested,0)}get enchantmentPoints(){return this.level-this.enchantmentPointsInvested-1}async save(){return Jd.encrypt(JSON.stringify(this.data,null,2),this.filePath)}async reload(){this.data=await Jd.decrypt(this.filePath,!0),this.corrupted=lr.getDataCorrupted(this.data),this.currencies=new Yd(this.data.currency),this.inventory=new Qd(this.corrupted.length?[]:this.data.items),this.storageChest=new Xd(this.corrupted.length?[]:this.data.storageChestItems),G.setters.setCharacter(this)}softReload(){this.corrupted=lr.getDataCorrupted(this.data),this.currencies=new Yd(this.data.currency),this.inventory=new Qd(this.corrupted.length?[]:this.data.items),this.storageChest=new Xd(this.corrupted.length?[]:this.data.storageChestItems),G.setters.setCharacter(this)}static async loadFromFile(e,t=!1){const i=await Jd.decrypt(e,t);return new bs(i,e)}getAvailableBackup(){return Te.sendSync("fetchCharacterBackups",this.filePath).map(e=>new HP({filePath:e,profilId:this.profilId,characterId:this.id})).sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime())}}class rl{constructor(e){qt(this,"characters",[]);this.id=e}async fetchCharacters(){const e=Te.sendSync("fetchCharactersFiles",this.id);return this.characters=await Promise.all(e.map(t=>bs.loadFromFile(`${this.id}/Characters/${t}`))),this}static getListFromSaveDirectory(){return Te.sendSync("fetchProfilFolders").map(e=>new rl(e))}}const bN=()=>{const n=it({profilList:rl.getListFromSaveDirectory(),selectedProfil:null,selectedCharacter:null,oldSelectedItem:null,selectedItem:null,selectedEnchant:null,selectedEnchantChunkIndex:null,key:0,isDemo:!1}),e={setProfil(i){n.selectedProfil=i,[n.selectedCharacter]=i.characters,n.oldSelectedItem=null,[n.selectedItem]=n.selectedCharacter.inventory.inventory,n.selectedEnchant=null,n.selectedEnchantChunkIndex=null},setCharacter(i){n.selectedCharacter=i,n.oldSelectedItem=null,[n.selectedItem]=i.inventory.inventory,n.selectedEnchant=null,n.selectedEnchantChunkIndex=null},setItem(i){n.oldSelectedItem=n.selectedItem,n.selectedItem=i,n.selectedEnchant=null,n.selectedEnchantChunkIndex=null},setEnchant(i){var r;(r=n.selectedEnchant)!=null&&r.netherite&&(n.selectedEnchant.id!=="Unset"&&n.selectedEnchant.level>0?n.selectedItem.netheriteEnchant=n.selectedEnchant:delete n.selectedItem.data.netheriteEnchant,n.selectedItem.$key+=1),n.selectedEnchant=i,n.selectedEnchantChunkIndex=null}};return{state:n,actions:{enableTutorialOnRoute(i){return i.name==="Home"},getUnallowedEnchantForChunk(){if(!n.selectedEnchant)return[];if(n.selectedEnchant.netherite)return n.selectedItem.chunkedEnchantments.reduce((r,s)=>[...r,s.find(a=>a.level>0)],[]).filter(r=>!!r&&r.id!=="Unset").map(r=>r.id);const i=n.selectedItem.chunkedEnchantments[n.selectedEnchantChunkIndex].findIndex(r=>JSON.stringify(r.data)===JSON.stringify(n.selectedEnchant.data));return n.selectedItem.chunkedEnchantments[n.selectedEnchantChunkIndex].filter((r,s)=>s!==i).map(r=>r.id).filter(r=>r!=="Unset")},loadDemoCharacter(){const i=new bs(nE,"demo.json"),r=new rl("0");n.isDemo=!0,n.profilList=[r],r.characters=[i],e.setProfil(r)}},setters:e}},G=bN(),EN=Object.assign({name:"AppTitleBarFileMenu"},{__name:"FileMenu",props:{visible:{type:Boolean,required:!0},name:{type:String,required:!0}},setup(n){const{t:e}=_t(),{plateform:t}=Te,i=n,r=it({activeSubMenu:null}),s={closeApp(){Te.send(`close:${i.name}`)},handleClickedProfil(a){G.setters.setProfil(a)},getProfilIcon(a){return G.state.selectedProfil===a?"icon-check":""},async handleClickOpen(){const[a]=await oE(),o=await lE(a);try{const l=JSON.parse(o),c=rp();c.character=l,c.file=a.name,rE(c);const u=new rl(l.playerId),d=new bs(l,a.name);u.characters.push(d),G.state.isDemo=!1,G.state.profilList=[u],G.setters.setProfil(u)}catch{Ut.actions.error(e("App.TitleBarMenu.fileMenu.invalidFile"))}},handleClickExport(){aE(G.state.selectedCharacter.filePath,JSON.stringify(G.state.selectedCharacter.data,null,2))}};return(a,o)=>(O(),ze(ou,{visible:i.visible},{default:Ve(()=>[F(Te).isWeb?(O(),ze(fa,{key:0,label:F(e)("App.TitleBarMenu.fileMenu.open"),onClick:s.handleClickOpen},null,8,["label","onClick"])):Re("",!0),F(Te).isWeb?(O(),ze(fa,{key:1,label:F(e)("App.TitleBarMenu.fileMenu.export"),onClick:s.handleClickExport},null,8,["label","onClick"])):Re("",!0),F(Te).isWeb?Re("",!0):(O(),ze(_P,{key:2,label:F(e)("App.TitleBarMenu.fileMenu.selectProfil"),onOver:o[0]||(o[0]=l=>r.activeSubMenu="selectProfil"),onOut:o[1]||(o[1]=l=>r.activeSubMenu=null)},{default:Ve(()=>[be(ou,{visible:r.activeSubMenu==="selectProfil",anchor:"top right"},{default:Ve(()=>[(O(!0),H(He,null,ht(F(G).state.profilList,(l,c)=>(O(),ze(fa,{key:c,label:l.id,icon:s.getProfilIcon(l),onClick:u=>s.handleClickedProfil(l)},null,8,["label","icon","onClick"]))),128))]),_:1},8,["visible"])]),_:1},8,["label"])),F(Te).isWeb?Re("",!0):(O(),ze(kP,{key:3})),F(Te).isWeb?Re("",!0):(O(),ze(fa,{key:4,label:F(e)("App.TitleBarMenu.fileMenu.exit"),shortcut:F(t)==="darwin"?"Cmd+Q":"Alt+F4",onClick:s.closeApp},null,8,["label","shortcut","onClick"]))]),_:1},8,["visible"]))}}),wN=Object.assign({name:"AppTitleBarLangMenu"},{__name:"LangMenu",props:{visible:{type:Boolean,required:!0}},emits:["close"],setup(n,{emit:e}){const{t,locale:i,availableLocales:r}=_t(),s=e,a=n,o={handleSetLocale(l){Te.invoke("localeChange",l),i.value=l,s("close")}};return(l,c)=>(O(),ze(ou,{visible:a.visible},{default:Ve(()=>[(O(!0),H(He,null,ht(F(r),(u,d)=>(O(),ze(fa,{key:d,label:F(t)(`App.TitleBarMenu.langMenu.${u}`),icon:u===F(i)?"icon-check":"",onClick:h=>o.handleSetLocale(u)},null,8,["label","icon","onClick"]))),128))]),_:1},8,["visible"]))}}),CN=Object.assign({name:"AppTitleBarAboutMenu"},{__name:"AboutMenu",props:{visible:{type:Boolean,required:!0}},setup(n){const e=n,t={handleOpenBrowser(){Te.invoke("openGithubLink","https://github.com/MatthieuLepers/mcd-save-editor")}};return(i,r)=>(O(),ze(ou,{visible:e.visible},{default:Ve(()=>[be(fa,{label:"Github",onClick:t.handleOpenBrowser},null,8,["onClick"])]),_:1},8,["visible"]))}}),SN=Object.assign({name:"AppTitleBar"},{__name:"index",props:{name:{type:String,required:!0},appTitle:{type:String,default:null},showHelp:{type:Boolean,default:!1}},emits:["help","minimize","maximize","close"],setup(n,{emit:e}){const t=e,i=n,r=Qe(()=>({menuList:["fileMenu","langMenu","aboutMenu"]}));return(s,a)=>(O(),ze(yP,{name:i.name,appTitle:i.appTitle,maximizable:!1,showHelp:i.showHelp,onHelp:a[0]||(a[0]=o=>t("help")),onMinimize:a[1]||(a[1]=o=>t("minimize")),onMaximize:a[2]||(a[2]=o=>t("maximize")),onClose:a[3]||(a[3]=o=>t("close"))},{menu:Ve(({windowName:o})=>[be(CP,{menuList:r.value.menuList},{fileMenu:Ve(({visible:l,close:c})=>[be(EN,{visible:l,name:o,onClose:c},null,8,["visible","name","onClose"])]),langMenu:Ve(({visible:l,close:c})=>[be(wN,{visible:l,onClose:c},null,8,["visible","onClose"])]),aboutMenu:Ve(({visible:l,close:c})=>[be(CN,{visible:l,onClose:c},null,8,["visible","onClose"])]),_:2},1032,["menuList"])]),_:1},8,["name","appTitle","showHelp"]))}});/*!
  * vue-draggable-next v2.2.0
  * (c) 2023 Anish George
  * @license MIT
  *//**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ty(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function oi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ty(Object(t),!0).forEach(function(i){_N(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ty(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Oc(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Oc=function(e){return typeof e}:Oc=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oc(n)}function _N(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ri(){return Ri=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ri.apply(this,arguments)}function xN(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function RN(n,e){if(n==null)return{};var t=xN(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}var AN="1.14.0";function Si(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}var Pi=Si(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),xl=Si(/Edge/i),ny=Si(/firefox/i),Fo=Si(/safari/i)&&!Si(/chrome/i)&&!Si(/android/i),ew=Si(/iP(ad|od|hone)/i),kN=Si(/chrome/i)&&Si(/android/i),tw={capture:!1,passive:!1};function pt(n,e,t){n.addEventListener(e,t,!Pi&&tw)}function ot(n,e,t){n.removeEventListener(e,t,!Pi&&tw)}function fu(n,e){if(e){if(e[0]===">"&&(e=e.substring(1)),n)try{if(n.matches)return n.matches(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e)}catch{return!1}return!1}}function DN(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function Qr(n,e,t,i){if(n){t=t||document;do{if(e!=null&&(e[0]===">"?n.parentNode===t&&fu(n,e):fu(n,e))||i&&n===t)return n;if(n===t)break}while(n=DN(n))}return null}var ry=/\s+/g;function sr(n,e,t){if(n&&e)if(n.classList)n.classList[t?"add":"remove"](e);else{var i=(" "+n.className+" ").replace(ry," ").replace(" "+e+" "," ");n.className=(i+(t?" "+e:"")).replace(ry," ")}}function qe(n,e,t){var i=n&&n.style;if(i){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(t=n.currentStyle),e===void 0?t:t[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=t+(typeof t=="string"?"":"px")}}function _a(n,e){var t="";if(typeof n=="string")t=n;else do{var i=qe(n,"transform");i&&i!=="none"&&(t=i+" "+t)}while(!e&&(n=n.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(t)}function nw(n,e,t){if(n){var i=n.getElementsByTagName(e),r=0,s=i.length;if(t)for(;r<s;r++)t(i[r],r);return i}return[]}function si(){var n=document.scrollingElement;return n||document.documentElement}function on(n,e,t,i,r){if(!(!n.getBoundingClientRect&&n!==window)){var s,a,o,l,c,u,d;if(n!==window&&n.parentNode&&n!==si()?(s=n.getBoundingClientRect(),a=s.top,o=s.left,l=s.bottom,c=s.right,u=s.height,d=s.width):(a=0,o=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(e||t)&&n!==window&&(r=r||n.parentNode,!Pi))do if(r&&r.getBoundingClientRect&&(qe(r,"transform")!=="none"||t&&qe(r,"position")!=="static")){var h=r.getBoundingClientRect();a-=h.top+parseInt(qe(r,"border-top-width")),o-=h.left+parseInt(qe(r,"border-left-width")),l=a+s.height,c=o+s.width;break}while(r=r.parentNode);if(i&&n!==window){var f=_a(r||n),m=f&&f.a,p=f&&f.d;f&&(a/=p,o/=m,d/=m,u/=p,l=a+u,c=o+d)}return{top:a,left:o,bottom:l,right:c,width:d,height:u}}}function iy(n,e,t){for(var i=Ki(n,!0),r=on(n)[e];i;){var s=on(i)[t],a=void 0;if(t==="top"||t==="left"?a=r>=s:a=r<=s,!a)return i;if(i===si())break;i=Ki(i,!1)}return!1}function qa(n,e,t,i){for(var r=0,s=0,a=n.children;s<a.length;){if(a[s].style.display!=="none"&&a[s]!==Ue.ghost&&(i||a[s]!==Ue.dragged)&&Qr(a[s],t.draggable,n,!1)){if(r===e)return a[s];r++}s++}return null}function vp(n,e){for(var t=n.lastElementChild;t&&(t===Ue.ghost||qe(t,"display")==="none"||e&&!fu(t,e));)t=t.previousElementSibling;return t||null}function pr(n,e){var t=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==Ue.clone&&(!e||fu(n,e))&&t++;return t}function sy(n){var e=0,t=0,i=si();if(n)do{var r=_a(n),s=r.a,a=r.d;e+=n.scrollLeft*s,t+=n.scrollTop*a}while(n!==i&&(n=n.parentNode));return[e,t]}function MN(n,e){for(var t in n)if(n.hasOwnProperty(t)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===n[t][i])return Number(t)}return-1}function Ki(n,e){if(!n||!n.getBoundingClientRect)return si();var t=n,i=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var r=qe(t);if(t.clientWidth<t.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return si();if(i||e)return t;i=!0}}while(t=t.parentNode);return si()}function PN(n,e){if(n&&e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function rh(n,e){return Math.round(n.top)===Math.round(e.top)&&Math.round(n.left)===Math.round(e.left)&&Math.round(n.height)===Math.round(e.height)&&Math.round(n.width)===Math.round(e.width)}var Lo;function rw(n,e){return function(){if(!Lo){var t=arguments,i=this;t.length===1?n.call(i,t[0]):n.apply(i,t),Lo=setTimeout(function(){Lo=void 0},e)}}}function TN(){clearTimeout(Lo),Lo=void 0}function iw(n,e,t){n.scrollLeft+=e,n.scrollTop+=t}function sw(n){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(n).cloneNode(!0):t?t(n).clone(!0)[0]:n.cloneNode(!0)}var cr="Sortable"+new Date().getTime();function IN(){var n=[],e;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(r){if(!(qe(r,"display")==="none"||r===Ue.ghost)){n.push({target:r,rect:on(r)});var s=oi({},n[n.length-1].rect);if(r.thisAnimationDuration){var a=_a(r,!0);a&&(s.top-=a.f,s.left-=a.e)}r.fromRect=s}})}},addAnimationState:function(i){n.push(i)},removeAnimationState:function(i){n.splice(MN(n,{target:i}),1)},animateAll:function(i){var r=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var s=!1,a=0;n.forEach(function(o){var l=0,c=o.target,u=c.fromRect,d=on(c),h=c.prevFromRect,f=c.prevToRect,m=o.rect,p=_a(c,!0);p&&(d.top-=p.f,d.left-=p.e),c.toRect=d,c.thisAnimationDuration&&rh(h,d)&&!rh(u,d)&&(m.top-d.top)/(m.left-d.left)===(u.top-d.top)/(u.left-d.left)&&(l=NN(m,h,f,r.options)),rh(d,u)||(c.prevFromRect=u,c.prevToRect=d,l||(l=r.options.animation),r.animate(c,m,d,l)),l&&(s=!0,a=Math.max(a,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof i=="function"&&i()},a):typeof i=="function"&&i(),n=[]},animate:function(i,r,s,a){if(a){qe(i,"transition",""),qe(i,"transform","");var o=_a(this.el),l=o&&o.a,c=o&&o.d,u=(r.left-s.left)/(l||1),d=(r.top-s.top)/(c||1);i.animatingX=!!u,i.animatingY=!!d,qe(i,"transform","translate3d("+u+"px,"+d+"px,0)"),this.forRepaintDummy=ON(i),qe(i,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),qe(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){qe(i,"transition",""),qe(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},a)}}}}function ON(n){return n.offsetWidth}function NN(n,e,t,i){return Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*i.animation}var na=[],ih={initializeByDefault:!0},Rl={mount:function(e){for(var t in ih)ih.hasOwnProperty(t)&&!(t in e)&&(e[t]=ih[t]);na.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),na.push(e)},pluginEvent:function(e,t,i){var r=this;this.eventCanceled=!1,i.cancel=function(){r.eventCanceled=!0};var s=e+"Global";na.forEach(function(a){t[a.pluginName]&&(t[a.pluginName][s]&&t[a.pluginName][s](oi({sortable:t},i)),t.options[a.pluginName]&&t[a.pluginName][e]&&t[a.pluginName][e](oi({sortable:t},i)))})},initializePlugins:function(e,t,i,r){na.forEach(function(o){var l=o.pluginName;if(!(!e.options[l]&&!o.initializeByDefault)){var c=new o(e,t,e.options);c.sortable=e,c.options=e.options,e[l]=c,Ri(i,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var a=this.modifyOption(e,s,e.options[s]);typeof a<"u"&&(e.options[s]=a)}},getEventProperties:function(e,t){var i={};return na.forEach(function(r){typeof r.eventProperties=="function"&&Ri(i,r.eventProperties.call(t[r.pluginName],e))}),i},modifyOption:function(e,t,i){var r;return na.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[t]=="function"&&(r=s.optionListeners[t].call(e[s.pluginName],i))}),r}};function FN(n){var e=n.sortable,t=n.rootEl,i=n.name,r=n.targetEl,s=n.cloneEl,a=n.toEl,o=n.fromEl,l=n.oldIndex,c=n.newIndex,u=n.oldDraggableIndex,d=n.newDraggableIndex,h=n.originalEvent,f=n.putSortable,m=n.extraEventProperties;if(e=e||t&&t[cr],!!e){var p,g=e.options,v="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!Pi&&!xl?p=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(p=document.createEvent("Event"),p.initEvent(i,!0,!0)),p.to=a||t,p.from=o||t,p.item=r||t,p.clone=s,p.oldIndex=l,p.newIndex=c,p.oldDraggableIndex=u,p.newDraggableIndex=d,p.originalEvent=h,p.pullMode=f?f.lastPutMode:void 0;var C=oi(oi({},m),Rl.getEventProperties(i,e));for(var y in C)p[y]=C[y];t&&t.dispatchEvent(p),g[v]&&g[v].call(e,p)}}var LN=["evt"],zn=function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=i.evt,s=RN(i,LN);Rl.pluginEvent.bind(Ue)(e,t,oi({dragEl:fe,parentEl:Ht,ghostEl:Ke,rootEl:Ft,nextEl:Ms,lastDownEl:Nc,cloneEl:Vt,cloneHidden:Wi,dragStarted:Eo,putSortable:gn,activeSortable:Ue.active,originalEvent:r,oldIndex:ma,oldDraggableIndex:Bo,newIndex:ar,newDraggableIndex:Ui,hideGhostForTarget:cw,unhideGhostForTarget:uw,cloneNowHidden:function(){Wi=!0},cloneNowShown:function(){Wi=!1},dispatchSortableEvent:function(o){Nn({sortable:t,name:o,originalEvent:r})}},s))};function Nn(n){FN(oi({putSortable:gn,cloneEl:Vt,targetEl:fe,rootEl:Ft,oldIndex:ma,oldDraggableIndex:Bo,newIndex:ar,newDraggableIndex:Ui},n))}var fe,Ht,Ke,Ft,Ms,Nc,Vt,Wi,ma,ar,Bo,Ui,Jl,gn,la=!1,mu=!1,pu=[],As,kr,sh,ah,ay,oy,Eo,ra,$o,qo=!1,Zl=!1,Fc,Rn,oh=[],_f=!1,gu=[],wd=typeof document<"u",ec=ew,ly=xl||Pi?"cssFloat":"float",BN=wd&&!kN&&!ew&&"draggable"in document.createElement("div"),aw=function(){if(wd){if(Pi)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),ow=function(e,t){var i=qe(e),r=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),s=qa(e,0,t),a=qa(e,1,t),o=s&&qe(s),l=a&&qe(a),c=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+on(s).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+on(a).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&o.float&&o.float!=="none"){var d=o.float==="left"?"left":"right";return a&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return s&&(o.display==="block"||o.display==="flex"||o.display==="table"||o.display==="grid"||c>=r&&i[ly]==="none"||a&&i[ly]==="none"&&c+u>r)?"vertical":"horizontal"},$N=function(e,t,i){var r=i?e.left:e.top,s=i?e.right:e.bottom,a=i?e.width:e.height,o=i?t.left:t.top,l=i?t.right:t.bottom,c=i?t.width:t.height;return r===o||s===l||r+a/2===o+c/2},qN=function(e,t){var i;return pu.some(function(r){var s=r[cr].options.emptyInsertThreshold;if(!(!s||vp(r))){var a=on(r),o=e>=a.left-s&&e<=a.right+s,l=t>=a.top-s&&t<=a.bottom+s;if(o&&l)return i=r}}),i},lw=function(e){function t(s,a){return function(o,l,c,u){var d=o.options.group.name&&l.options.group.name&&o.options.group.name===l.options.group.name;if(s==null&&(a||d))return!0;if(s==null||s===!1)return!1;if(a&&s==="clone")return s;if(typeof s=="function")return t(s(o,l,c,u),a)(o,l,c,u);var h=(a?o:l).options.group.name;return s===!0||typeof s=="string"&&s===h||s.join&&s.indexOf(h)>-1}}var i={},r=e.group;(!r||Oc(r)!="object")&&(r={name:r}),i.name=r.name,i.checkPull=t(r.pull,!0),i.checkPut=t(r.put),i.revertClone=r.revertClone,e.group=i},cw=function(){!aw&&Ke&&qe(Ke,"display","none")},uw=function(){!aw&&Ke&&qe(Ke,"display","")};wd&&document.addEventListener("click",function(n){if(mu)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),mu=!1,!1},!0);var ks=function(e){if(fe){e=e.touches?e.touches[0]:e;var t=qN(e.clientX,e.clientY);if(t){var i={};for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[cr]._onDragOver(i)}}},UN=function(e){fe&&fe.parentNode[cr]._isOutsideThisEl(e.target)};function Ue(n,e){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=e=Ri({},e),n[cr]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ow(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,o){a.setData("Text",o.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Ue.supportPointer!==!1&&"PointerEvent"in window&&!Fo,emptyInsertThreshold:5};Rl.initializePlugins(this,n,t);for(var i in t)!(i in e)&&(e[i]=t[i]);lw(e);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=e.forceFallback?!1:BN,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?pt(n,"pointerdown",this._onTapStart):(pt(n,"mousedown",this._onTapStart),pt(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(pt(n,"dragover",this),pt(n,"dragenter",this)),pu.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ri(this,IN())}Ue.prototype={constructor:Ue,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(ra=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,fe):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,i=this.el,r=this.options,s=r.preventOnFilter,a=e.type,o=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(o||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=r.filter;if(YN(i),!fe&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||r.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Fo&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Qr(l,r.draggable,i,!1),!(l&&l.animated)&&Nc!==l)){if(ma=pr(l),Bo=pr(l,r.draggable),typeof u=="function"){if(u.call(this,e,l,this)){Nn({sortable:t,rootEl:c,name:"filter",targetEl:l,toEl:i,fromEl:i}),zn("filter",t,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(d){if(d=Qr(c,d.trim(),i,!1),d)return Nn({sortable:t,rootEl:d,name:"filter",targetEl:l,fromEl:i,toEl:i}),zn("filter",t,{evt:e}),!0}),u)){s&&e.cancelable&&e.preventDefault();return}r.handle&&!Qr(c,r.handle,i,!1)||this._prepareDragStart(e,o,l)}}},_prepareDragStart:function(e,t,i){var r=this,s=r.el,a=r.options,o=s.ownerDocument,l;if(i&&!fe&&i.parentNode===s){var c=on(i);if(Ft=s,fe=i,Ht=fe.parentNode,Ms=fe.nextSibling,Nc=i,Jl=a.group,Ue.dragged=fe,As={target:fe,clientX:(t||e).clientX,clientY:(t||e).clientY},ay=As.clientX-c.left,oy=As.clientY-c.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,fe.style["will-change"]="all",l=function(){if(zn("delayEnded",r,{evt:e}),Ue.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!ny&&r.nativeDraggable&&(fe.draggable=!0),r._triggerDragStart(e,t),Nn({sortable:r,name:"choose",originalEvent:e}),sr(fe,a.chosenClass,!0)},a.ignore.split(",").forEach(function(u){nw(fe,u.trim(),lh)}),pt(o,"dragover",ks),pt(o,"mousemove",ks),pt(o,"touchmove",ks),pt(o,"mouseup",r._onDrop),pt(o,"touchend",r._onDrop),pt(o,"touchcancel",r._onDrop),ny&&this.nativeDraggable&&(this.options.touchStartThreshold=4,fe.draggable=!0),zn("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(xl||Pi))){if(Ue.eventCanceled){this._onDrop();return}pt(o,"mouseup",r._disableDelayedDrag),pt(o,"touchend",r._disableDelayedDrag),pt(o,"touchcancel",r._disableDelayedDrag),pt(o,"mousemove",r._delayedDragTouchMoveHandler),pt(o,"touchmove",r._delayedDragTouchMoveHandler),a.supportPointer&&pt(o,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(l,a.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){fe&&lh(fe),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;ot(e,"mouseup",this._disableDelayedDrag),ot(e,"touchend",this._disableDelayedDrag),ot(e,"touchcancel",this._disableDelayedDrag),ot(e,"mousemove",this._delayedDragTouchMoveHandler),ot(e,"touchmove",this._delayedDragTouchMoveHandler),ot(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?pt(document,"pointermove",this._onTouchMove):t?pt(document,"touchmove",this._onTouchMove):pt(document,"mousemove",this._onTouchMove):(pt(fe,"dragend",this),pt(Ft,"dragstart",this._onDragStart));try{document.selection?Lc(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(la=!1,Ft&&fe){zn("dragStarted",this,{evt:t}),this.nativeDraggable&&pt(document,"dragover",UN);var i=this.options;!e&&sr(fe,i.dragClass,!1),sr(fe,i.ghostClass,!0),Ue.active=this,e&&this._appendGhost(),Nn({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(kr){this._lastX=kr.clientX,this._lastY=kr.clientY,cw();for(var e=document.elementFromPoint(kr.clientX,kr.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(kr.clientX,kr.clientY),e!==t);)t=e;if(fe.parentNode[cr]._isOutsideThisEl(e),t)do{if(t[cr]){var i=void 0;if(i=t[cr]._onDragOver({clientX:kr.clientX,clientY:kr.clientY,target:e,rootEl:t}),i&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);uw()}},_onTouchMove:function(e){if(As){var t=this.options,i=t.fallbackTolerance,r=t.fallbackOffset,s=e.touches?e.touches[0]:e,a=Ke&&_a(Ke,!0),o=Ke&&a&&a.a,l=Ke&&a&&a.d,c=ec&&Rn&&sy(Rn),u=(s.clientX-As.clientX+r.x)/(o||1)+(c?c[0]-oh[0]:0)/(o||1),d=(s.clientY-As.clientY+r.y)/(l||1)+(c?c[1]-oh[1]:0)/(l||1);if(!Ue.active&&!la){if(i&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(Ke){a?(a.e+=u-(sh||0),a.f+=d-(ah||0)):a={a:1,b:0,c:0,d:1,e:u,f:d};var h="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");qe(Ke,"webkitTransform",h),qe(Ke,"mozTransform",h),qe(Ke,"msTransform",h),qe(Ke,"transform",h),sh=u,ah=d,kr=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Ke){var e=this.options.fallbackOnBody?document.body:Ft,t=on(fe,!0,ec,!0,e),i=this.options;if(ec){for(Rn=e;qe(Rn,"position")==="static"&&qe(Rn,"transform")==="none"&&Rn!==document;)Rn=Rn.parentNode;Rn!==document.body&&Rn!==document.documentElement?(Rn===document&&(Rn=si()),t.top+=Rn.scrollTop,t.left+=Rn.scrollLeft):Rn=si(),oh=sy(Rn)}Ke=fe.cloneNode(!0),sr(Ke,i.ghostClass,!1),sr(Ke,i.fallbackClass,!0),sr(Ke,i.dragClass,!0),qe(Ke,"transition",""),qe(Ke,"transform",""),qe(Ke,"box-sizing","border-box"),qe(Ke,"margin",0),qe(Ke,"top",t.top),qe(Ke,"left",t.left),qe(Ke,"width",t.width),qe(Ke,"height",t.height),qe(Ke,"opacity","0.8"),qe(Ke,"position",ec?"absolute":"fixed"),qe(Ke,"zIndex","100000"),qe(Ke,"pointerEvents","none"),Ue.ghost=Ke,e.appendChild(Ke),qe(Ke,"transform-origin",ay/parseInt(Ke.style.width)*100+"% "+oy/parseInt(Ke.style.height)*100+"%")}},_onDragStart:function(e,t){var i=this,r=e.dataTransfer,s=i.options;if(zn("dragStart",this,{evt:e}),Ue.eventCanceled){this._onDrop();return}zn("setupClone",this),Ue.eventCanceled||(Vt=sw(fe),Vt.draggable=!1,Vt.style["will-change"]="",this._hideClone(),sr(Vt,this.options.chosenClass,!1),Ue.clone=Vt),i.cloneId=Lc(function(){zn("clone",i),!Ue.eventCanceled&&(i.options.removeCloneOnHide||Ft.insertBefore(Vt,fe),i._hideClone(),Nn({sortable:i,name:"clone"}))}),!t&&sr(fe,s.dragClass,!0),t?(mu=!0,i._loopId=setInterval(i._emulateDragOver,50)):(ot(document,"mouseup",i._onDrop),ot(document,"touchend",i._onDrop),ot(document,"touchcancel",i._onDrop),r&&(r.effectAllowed="move",s.setData&&s.setData.call(i,r,fe)),pt(document,"drop",i),qe(fe,"transform","translateZ(0)")),la=!0,i._dragStartId=Lc(i._dragStarted.bind(i,t,e)),pt(document,"selectstart",i),Eo=!0,Fo&&qe(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,i=e.target,r,s,a,o=this.options,l=o.group,c=Ue.active,u=Jl===l,d=o.sort,h=gn||c,f,m=this,p=!1;if(_f)return;function g(ue,ve){zn(ue,m,oi({evt:e,isOwner:u,axis:f?"vertical":"horizontal",revert:a,dragRect:r,targetRect:s,canSort:d,fromSortable:h,target:i,completed:C,onMove:function(ke,Me){return tc(Ft,t,fe,r,ke,on(ke),e,Me)},changed:y},ve))}function v(){g("dragOverAnimationCapture"),m.captureAnimationState(),m!==h&&h.captureAnimationState()}function C(ue){return g("dragOverCompleted",{insertion:ue}),ue&&(u?c._hideClone():c._showClone(m),m!==h&&(sr(fe,gn?gn.options.ghostClass:c.options.ghostClass,!1),sr(fe,o.ghostClass,!0)),gn!==m&&m!==Ue.active?gn=m:m===Ue.active&&gn&&(gn=null),h===m&&(m._ignoreWhileAnimating=i),m.animateAll(function(){g("dragOverAnimationComplete"),m._ignoreWhileAnimating=null}),m!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(i===fe&&!fe.animated||i===t&&!i.animated)&&(ra=null),!o.dragoverBubble&&!e.rootEl&&i!==document&&(fe.parentNode[cr]._isOutsideThisEl(e.target),!ue&&ks(e)),!o.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),p=!0}function y(){ar=pr(fe),Ui=pr(fe,o.draggable),Nn({sortable:m,name:"change",toEl:t,newIndex:ar,newDraggableIndex:Ui,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=Qr(i,o.draggable,t,!0),g("dragOver"),Ue.eventCanceled)return p;if(fe.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||m._ignoreWhileAnimating===i)return C(!1);if(mu=!1,c&&!o.disabled&&(u?d||(a=Ht!==Ft):gn===this||(this.lastPutMode=Jl.checkPull(this,c,fe,e))&&l.checkPut(this,c,fe,e))){if(f=this._getDirection(e,i)==="vertical",r=on(fe),g("dragOverValid"),Ue.eventCanceled)return p;if(a)return Ht=Ft,v(),this._hideClone(),g("revert"),Ue.eventCanceled||(Ms?Ft.insertBefore(fe,Ms):Ft.appendChild(fe)),C(!0);var E=vp(t,o.draggable);if(!E||WN(e,f,this)&&!E.animated){if(E===fe)return C(!1);if(E&&t===e.target&&(i=E),i&&(s=on(i)),tc(Ft,t,fe,r,i,s,e,!!i)!==!1)return v(),t.appendChild(fe),Ht=t,y(),C(!0)}else if(E&&jN(e,f,this)){var _=qa(t,0,o,!0);if(_===fe)return C(!1);if(i=_,s=on(i),tc(Ft,t,fe,r,i,s,e,!1)!==!1)return v(),t.insertBefore(fe,_),Ht=t,y(),C(!0)}else if(i.parentNode===t){s=on(i);var w=0,k,I=fe.parentNode!==t,P=!$N(fe.animated&&fe.toRect||r,i.animated&&i.toRect||s,f),Z=f?"top":"left",X=iy(i,"top","top")||iy(fe,"top","top"),B=X?X.scrollTop:void 0;ra!==i&&(k=s[Z],qo=!1,Zl=!P&&o.invertSwap||I),w=zN(e,i,s,f,P?1:o.swapThreshold,o.invertedSwapThreshold==null?o.swapThreshold:o.invertedSwapThreshold,Zl,ra===i);var $;if(w!==0){var U=pr(fe);do U-=w,$=Ht.children[U];while($&&(qe($,"display")==="none"||$===Ke))}if(w===0||$===i)return C(!1);ra=i,$o=w;var re=i.nextElementSibling,le=!1;le=w===1;var ae=tc(Ft,t,fe,r,i,s,e,le);if(ae!==!1)return(ae===1||ae===-1)&&(le=ae===1),_f=!0,setTimeout(VN,30),v(),le&&!re?t.appendChild(fe):i.parentNode.insertBefore(fe,le?re:i),X&&iw(X,0,B-X.scrollTop),Ht=fe.parentNode,k!==void 0&&!Zl&&(Fc=Math.abs(k-on(i)[Z])),y(),C(!0)}if(t.contains(fe))return C(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){ot(document,"mousemove",this._onTouchMove),ot(document,"touchmove",this._onTouchMove),ot(document,"pointermove",this._onTouchMove),ot(document,"dragover",ks),ot(document,"mousemove",ks),ot(document,"touchmove",ks)},_offUpEvents:function(){var e=this.el.ownerDocument;ot(e,"mouseup",this._onDrop),ot(e,"touchend",this._onDrop),ot(e,"pointerup",this._onDrop),ot(e,"touchcancel",this._onDrop),ot(document,"selectstart",this)},_onDrop:function(e){var t=this.el,i=this.options;if(ar=pr(fe),Ui=pr(fe,i.draggable),zn("drop",this,{evt:e}),Ht=fe&&fe.parentNode,ar=pr(fe),Ui=pr(fe,i.draggable),Ue.eventCanceled){this._nulling();return}la=!1,Zl=!1,qo=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),xf(this.cloneId),xf(this._dragStartId),this.nativeDraggable&&(ot(document,"drop",this),ot(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Fo&&qe(document.body,"user-select",""),qe(fe,"transform",""),e&&(Eo&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),Ke&&Ke.parentNode&&Ke.parentNode.removeChild(Ke),(Ft===Ht||gn&&gn.lastPutMode!=="clone")&&Vt&&Vt.parentNode&&Vt.parentNode.removeChild(Vt),fe&&(this.nativeDraggable&&ot(fe,"dragend",this),lh(fe),fe.style["will-change"]="",Eo&&!la&&sr(fe,gn?gn.options.ghostClass:this.options.ghostClass,!1),sr(fe,this.options.chosenClass,!1),Nn({sortable:this,name:"unchoose",toEl:Ht,newIndex:null,newDraggableIndex:null,originalEvent:e}),Ft!==Ht?(ar>=0&&(Nn({rootEl:Ht,name:"add",toEl:Ht,fromEl:Ft,originalEvent:e}),Nn({sortable:this,name:"remove",toEl:Ht,originalEvent:e}),Nn({rootEl:Ht,name:"sort",toEl:Ht,fromEl:Ft,originalEvent:e}),Nn({sortable:this,name:"sort",toEl:Ht,originalEvent:e})),gn&&gn.save()):ar!==ma&&ar>=0&&(Nn({sortable:this,name:"update",toEl:Ht,originalEvent:e}),Nn({sortable:this,name:"sort",toEl:Ht,originalEvent:e})),Ue.active&&((ar==null||ar===-1)&&(ar=ma,Ui=Bo),Nn({sortable:this,name:"end",toEl:Ht,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){zn("nulling",this),Ft=fe=Ht=Ke=Ms=Vt=Nc=Wi=As=kr=Eo=ar=Ui=ma=Bo=ra=$o=gn=Jl=Ue.dragged=Ue.ghost=Ue.clone=Ue.active=null,gu.forEach(function(e){e.checked=!0}),gu.length=sh=ah=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":fe&&(this._onDragOver(e),HN(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,i=this.el.children,r=0,s=i.length,a=this.options;r<s;r++)t=i[r],Qr(t,a.draggable,this.el,!1)&&e.push(t.getAttribute(a.dataIdAttr)||KN(t));return e},sort:function(e,t){var i={},r=this.el;this.toArray().forEach(function(s,a){var o=r.children[a];Qr(o,this.options.draggable,r,!1)&&(i[s]=o)},this),t&&this.captureAnimationState(),e.forEach(function(s){i[s]&&(r.removeChild(i[s]),r.appendChild(i[s]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Qr(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(t===void 0)return i[e];var r=Rl.modifyOption(this,e,t);typeof r<"u"?i[e]=r:i[e]=t,e==="group"&&lw(i)},destroy:function(){zn("destroy",this);var e=this.el;e[cr]=null,ot(e,"mousedown",this._onTapStart),ot(e,"touchstart",this._onTapStart),ot(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(ot(e,"dragover",this),ot(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),pu.splice(pu.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Wi){if(zn("hideClone",this),Ue.eventCanceled)return;qe(Vt,"display","none"),this.options.removeCloneOnHide&&Vt.parentNode&&Vt.parentNode.removeChild(Vt),Wi=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Wi){if(zn("showClone",this),Ue.eventCanceled)return;fe.parentNode==Ft&&!this.options.group.revertClone?Ft.insertBefore(Vt,fe):Ms?Ft.insertBefore(Vt,Ms):Ft.appendChild(Vt),this.options.group.revertClone&&this.animate(fe,Vt),qe(Vt,"display",""),Wi=!1}}};function HN(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function tc(n,e,t,i,r,s,a,o){var l,c=n[cr],u=c.options.onMove,d;return window.CustomEvent&&!Pi&&!xl?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=n,l.dragged=t,l.draggedRect=i,l.related=r||e,l.relatedRect=s||on(e),l.willInsertAfter=o,l.originalEvent=a,n.dispatchEvent(l),u&&(d=u.call(c,l,a)),d}function lh(n){n.draggable=!1}function VN(){_f=!1}function jN(n,e,t){var i=on(qa(t.el,0,t.options,!0)),r=10;return e?n.clientX<i.left-r||n.clientY<i.top&&n.clientX<i.right:n.clientY<i.top-r||n.clientY<i.bottom&&n.clientX<i.left}function WN(n,e,t){var i=on(vp(t.el,t.options.draggable)),r=10;return e?n.clientX>i.right+r||n.clientX<=i.right&&n.clientY>i.bottom&&n.clientX>=i.left:n.clientX>i.right&&n.clientY>i.top||n.clientX<=i.right&&n.clientY>i.bottom+r}function zN(n,e,t,i,r,s,a,o){var l=i?n.clientY:n.clientX,c=i?t.height:t.width,u=i?t.top:t.left,d=i?t.bottom:t.right,h=!1;if(!a){if(o&&Fc<c*r){if(!qo&&($o===1?l>u+c*s/2:l<d-c*s/2)&&(qo=!0),qo)h=!0;else if($o===1?l<u+Fc:l>d-Fc)return-$o}else if(l>u+c*(1-r)/2&&l<d-c*(1-r)/2)return GN(e)}return h=h||a,h&&(l<u+c*s/2||l>d-c*s/2)?l>u+c/2?1:-1:0}function GN(n){return pr(fe)<pr(n)?1:-1}function KN(n){for(var e=n.tagName+n.className+n.src+n.href+n.textContent,t=e.length,i=0;t--;)i+=e.charCodeAt(t);return i.toString(36)}function YN(n){gu.length=0;for(var e=n.getElementsByTagName("input"),t=e.length;t--;){var i=e[t];i.checked&&gu.push(i)}}function Lc(n){return setTimeout(n,0)}function xf(n){return clearTimeout(n)}wd&&pt(document,"touchmove",function(n){(Ue.active||la)&&n.cancelable&&n.preventDefault()});Ue.utils={on:pt,off:ot,css:qe,find:nw,is:function(e,t){return!!Qr(e,t,e,!1)},extend:PN,throttle:rw,closest:Qr,toggleClass:sr,clone:sw,index:pr,nextTick:Lc,cancelNextTick:xf,detectDirection:ow,getChild:qa};Ue.get=function(n){return n[cr]};Ue.mount=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(Ue.utils=oi(oi({},Ue.utils),i.utils)),Rl.mount(i)})};Ue.create=function(n,e){return new Ue(n,e)};Ue.version=AN;var Zt=[],wo,Rf,Af=!1,ch,uh,vu,Co;function QN(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return n.prototype={dragStarted:function(t){var i=t.originalEvent;this.sortable.nativeDraggable?pt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?pt(document,"pointermove",this._handleFallbackAutoScroll):i.touches?pt(document,"touchmove",this._handleFallbackAutoScroll):pt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var i=t.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?ot(document,"dragover",this._handleAutoScroll):(ot(document,"pointermove",this._handleFallbackAutoScroll),ot(document,"touchmove",this._handleFallbackAutoScroll),ot(document,"mousemove",this._handleFallbackAutoScroll)),cy(),Bc(),TN()},nulling:function(){vu=Rf=wo=Af=Co=ch=uh=null,Zt.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,i){var r=this,s=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,o=document.elementFromPoint(s,a);if(vu=t,i||this.options.forceAutoScrollFallback||xl||Pi||Fo){dh(t,this.options,o,i);var l=Ki(o,!0);Af&&(!Co||s!==ch||a!==uh)&&(Co&&cy(),Co=setInterval(function(){var c=Ki(document.elementFromPoint(s,a),!0);c!==l&&(l=c,Bc()),dh(t,r.options,c,i)},10),ch=s,uh=a)}else{if(!this.options.bubbleScroll||Ki(o,!0)===si()){Bc();return}dh(t,this.options,Ki(o,!1),!1)}}},Ri(n,{pluginName:"scroll",initializeByDefault:!0})}function Bc(){Zt.forEach(function(n){clearInterval(n.pid)}),Zt=[]}function cy(){clearInterval(Co)}var dh=rw(function(n,e,t,i){if(e.scroll){var r=(n.touches?n.touches[0]:n).clientX,s=(n.touches?n.touches[0]:n).clientY,a=e.scrollSensitivity,o=e.scrollSpeed,l=si(),c=!1,u;Rf!==t&&(Rf=t,Bc(),wo=e.scroll,u=e.scrollFn,wo===!0&&(wo=Ki(t,!0)));var d=0,h=wo;do{var f=h,m=on(f),p=m.top,g=m.bottom,v=m.left,C=m.right,y=m.width,E=m.height,_=void 0,w=void 0,k=f.scrollWidth,I=f.scrollHeight,P=qe(f),Z=f.scrollLeft,X=f.scrollTop;f===l?(_=y<k&&(P.overflowX==="auto"||P.overflowX==="scroll"||P.overflowX==="visible"),w=E<I&&(P.overflowY==="auto"||P.overflowY==="scroll"||P.overflowY==="visible")):(_=y<k&&(P.overflowX==="auto"||P.overflowX==="scroll"),w=E<I&&(P.overflowY==="auto"||P.overflowY==="scroll"));var B=_&&(Math.abs(C-r)<=a&&Z+y<k)-(Math.abs(v-r)<=a&&!!Z),$=w&&(Math.abs(g-s)<=a&&X+E<I)-(Math.abs(p-s)<=a&&!!X);if(!Zt[d])for(var U=0;U<=d;U++)Zt[U]||(Zt[U]={});(Zt[d].vx!=B||Zt[d].vy!=$||Zt[d].el!==f)&&(Zt[d].el=f,Zt[d].vx=B,Zt[d].vy=$,clearInterval(Zt[d].pid),(B!=0||$!=0)&&(c=!0,Zt[d].pid=setInterval((function(){i&&this.layer===0&&Ue.active._onTouchMove(vu);var re=Zt[this.layer].vy?Zt[this.layer].vy*o:0,le=Zt[this.layer].vx?Zt[this.layer].vx*o:0;typeof u=="function"&&u.call(Ue.dragged.parentNode[cr],le,re,n,vu,Zt[this.layer].el)!=="continue"||iw(Zt[this.layer].el,le,re)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&h!==l&&(h=Ki(h,!1)));Af=c}},30),dw=function(e){var t=e.originalEvent,i=e.putSortable,r=e.dragEl,s=e.activeSortable,a=e.dispatchSortableEvent,o=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var c=i||s;o();var u=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,d=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(d)&&(a("spill"),this.onSpill({dragEl:r,putSortable:i}))}};function yp(){}yp.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var r=qa(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),i&&i.animateAll()},drop:dw};Ri(yp,{pluginName:"revertOnSpill"});function bp(){}bp.prototype={onSpill:function(e){var t=e.dragEl,i=e.putSortable,r=i||this.sortable;r.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),r.animateAll()},drop:dw};Ri(bp,{pluginName:"removeOnSpill"});Ue.mount(new QN);Ue.mount(bp,yp);function XN(){return typeof window<"u"?window.console:global.console}const JN=XN();function ZN(n){const e=Object.create(null);return function(i){return e[i]||(e[i]=n(i))}}const e2=/-(\w)/g,uy=ZN(n=>n.replace(e2,(e,t)=>t?t.toUpperCase():""));function hh(n){n.parentElement!==null&&n.parentElement.removeChild(n)}function dy(n,e,t){const i=t===0?n.children[0]:n.children[t-1].nextSibling;n.insertBefore(e,i)}function t2(n,e){return Object.values(n).indexOf(e)}function n2(n,e,t,i){if(!n)return[];const r=Object.values(n),s=e.length-i;return[...e].map((o,l)=>l>=s?r.length:r.indexOf(o))}function hw(n,e){this.$nextTick(()=>this.$emit(n.toLowerCase(),e))}function r2(n){return e=>{this.realList!==null&&this["onDrag"+n](e),hw.call(this,n,e)}}function i2(n){return["transition-group","TransitionGroup"].includes(n)}function s2(n){if(!n||n.length!==1)return!1;const[{type:e}]=n;return e?i2(e.name):!1}function a2(n,e){return e?{...e.props,...e.attrs}:n}const kf=["Start","Add","Remove","Update","End"],Df=["Choose","Unchoose","Sort","Filter","Clone"],o2=["Move",...kf,...Df].map(n=>"on"+n);let fh=null;const l2={options:Object,list:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:n=>n},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null},component:{type:String,default:null},modelValue:{type:Array,required:!1,default:null}},c2=pn({name:"VueDraggableNext",inheritAttrs:!1,emits:["update:modelValue","move","change",...kf.map(n=>n.toLowerCase()),...Df.map(n=>n.toLowerCase())],props:l2,data(){return{transitionMode:!1,noneFunctionalComponentMode:!1,headerOffset:0,footerOffset:0,_sortable:{},visibleIndexes:[],context:{}}},render(){const n=this.$slots.default?this.$slots.default():null,e=a2(this.$attrs,this.componentData);return n?(this.transitionMode=s2(n),js(this.getTag(),e,n)):js(this.getTag(),e,[])},created(){this.list!==null&&this.modelValue!==null&&JN.error("list props are mutually exclusive! Please set one.")},mounted(){const n={};kf.forEach(r=>{n["on"+r]=r2.call(this,r)}),Df.forEach(r=>{n["on"+r]=hw.bind(this,r)});const e=Object.keys(this.$attrs).reduce((r,s)=>(r[uy(s)]=this.$attrs[s],r),{}),t=Object.assign({},e,n,{onMove:(r,s)=>this.onDragMove(r,s)});!("draggable"in t)&&(t.draggable=">*");const i=this.$el.nodeType===1?this.$el:this.$el.parentElement;this._sortable=new Ue(i,t),i.__draggable_component__=this,this.computeIndexes()},beforeUnmount(){try{this._sortable!==void 0&&this._sortable.destroy()}catch{}},computed:{realList(){return this.list?this.list:this.modelValue}},watch:{$attrs:{handler(n){this.updateOptions(n)},deep:!0},realList(){this.computeIndexes()}},methods:{getTag(){return this.component?nd(this.component):this.tag},updateOptions(n){for(var e in n){const t=uy(e);o2.indexOf(t)===-1&&this._sortable.option(t,n[e])}},getChildrenNodes(){return this.$el.children},computeIndexes(){this.$nextTick(()=>{this.visibleIndexes=n2(this.getChildrenNodes(),this.$el.children,this.transitionMode,this.footerOffset)})},getUnderlyingVm(n){const e=t2(this.getChildrenNodes()||[],n);if(e===-1)return null;const t=this.realList[e];return{index:e,element:t}},emitChanges(n){this.$nextTick(()=>{this.$emit("change",n)})},alterList(n){if(this.list){n(this.list);return}const e=[...this.modelValue];n(e),this.$emit("update:modelValue",e)},spliceList(){const n=e=>e.splice(...arguments);this.alterList(n)},updatePosition(n,e){const t=i=>i.splice(e,0,i.splice(n,1)[0]);this.alterList(t)},getVmIndex(n){const e=this.visibleIndexes,t=e.length;return n>t-1?t:e[n]},getComponent(){return this.$slots.default?this.$slots.default()[0].componentInstance:null},resetTransitionData(n){if(!this.noTransitionOnDrag||!this.transitionMode)return;var e=this.getChildrenNodes();e[n].data=null;const t=this.getComponent();t.children=[],t.kept=void 0},onDragStart(n){this.computeIndexes(),this.context=this.getUnderlyingVm(n.item),this.context&&(n.item._underlying_vm_=this.clone(this.context.element),fh=n.item)},onDragAdd(n){const e=n.item._underlying_vm_;if(e===void 0)return;hh(n.item);const t=this.getVmIndex(n.newIndex);this.spliceList(t,0,e),this.computeIndexes();const i={element:e,newIndex:t};this.emitChanges({added:i})},onDragRemove(n){if(dy(this.$el,n.item,n.oldIndex),n.pullMode==="clone"){hh(n.clone);return}if(!this.context)return;const e=this.context.index;this.spliceList(e,1);const t={element:this.context.element,oldIndex:e};this.resetTransitionData(e),this.emitChanges({removed:t})},onDragUpdate(n){hh(n.item),dy(n.from,n.item,n.oldIndex);const e=this.context.index,t=this.getVmIndex(n.newIndex);this.updatePosition(e,t);const i={element:this.context.element,oldIndex:e,newIndex:t};this.emitChanges({moved:i})},updateProperty(n,e){n.hasOwnProperty(e)&&(n[e]+=this.headerOffset)},onDragMove(n,e){const t=this.move;if(!t||!this.realList)return!0;const i=this.getRelatedContextFromMoveEvent(n),r=this.context,s=this.computeFutureIndex(i,n);Object.assign(r,{futureIndex:s});const a=Object.assign({},n,{relatedContext:i,draggedContext:r});return t(a,e)},onDragEnd(){this.computeIndexes(),fh=null},getTrargetedComponent(n){return n.__draggable_component__},getRelatedContextFromMoveEvent({to:n,related:e}){const t=this.getTrargetedComponent(n);if(!t)return{component:t};const i=t.realList,r={list:i,component:t};if(n!==e&&i&&t.getUnderlyingVm){const s=t.getUnderlyingVm(e);if(s)return Object.assign(s,r)}return r},computeFutureIndex(n,e){const t=[...e.to.children].filter(a=>a.style.display!=="none");if(t.length===0)return 0;const i=t.indexOf(e.related),r=n.component.getVmIndex(i);return t.indexOf(fh)!==-1||!e.willInsertAfter?r:r+1}}}),u2=["data-tab"],d2=["onClick"],h2={key:0,class:"m-tabs__navigation-list__item"},f2=q("span",{class:"icon-plus"},null,-1),m2=[f2],p2={class:"m-tabs__container"},g2=pn({name:"Tabs",__name:"index",props:Zc({allowAdd:{type:Boolean,default:!1},allowMoveFn:{type:Function,default:()=>!0},modifiers:{default:()=>({})}},{modelValue:{},modelModifiers:{},tabs:{default:()=>[]},tabsModifiers:{}}),emits:Zc(["newTab"],["update:modelValue","update:tabs"]),setup(n,{emit:e}){const t=e,i=Ia(n,"modelValue"),r=Ia(n,"tabs"),s=n,a=it({offset:0}),o=Qe(()=>({currentTab:r.value.find(({id:c})=>i.value===c)})),l={handleMouseWheel(c){const u=c.deltaY>0?1:-1;a.offset=Math.max(0,Math.min(r.value.length-1,a.offset+u))},handleChangeOrder(){r.value.forEach((c,u)=>{c.order=u})}};return(c,u)=>(O(),H("div",{class:_e(c.GenerateModifiers("m-tabs",s.modifiers))},[q("nav",{class:"m-tabs__navigation",onWheel:u[2]||(u[2]=(...d)=>l.handleMouseWheel&&l.handleMouseWheel(...d))},[be(F(c2),{modelValue:r.value,"onUpdate:modelValue":u[1]||(u[1]=d=>r.value=d),move:s.allowMoveFn,class:"m-tabs__navigation-list",tag:"ul",onChange:l.handleChangeOrder},{default:Ve(()=>[(O(!0),H(He,null,ht(r.value,(d,h)=>(O(),H("li",{key:d.id,"data-tab":d.label,class:_e(c.GenerateModifiers("m-tabs__navigation-list__item",{current:d.id===i.value,hidden:a.offset>h}))},[q("button",{type:"button",class:"m-tabs__navigation-button",onClick:f=>i.value=d.id},[Yt(c.$slots,`${d.id}Nav`,{tab:d},()=>[Lt(pe(d.label),1)])],8,d2)],10,u2))),128)),s.allowAdd?(O(),H("li",h2,[q("button",{type:"button",class:"m-tabs__navigation-list__add",onClick:u[0]||(u[0]=d=>t("newTab"))},m2)])):Re("",!0)]),_:3},8,["modelValue","move","onChange"])],32),q("div",p2,[Yt(c.$slots,o.value.currentTab.id,{tab:o.value.currentTab})])],2))}});const v2=["type","disabled"],y2={key:0,class:"m-button__icon"},Nr=pn({name:"MButton",__name:"index",props:{type:{default:"button"},disabled:{type:Boolean,default:!1},icon:{type:[String,Boolean]},iconSide:{default:"left"},modifiers:{default:()=>({})}},setup(n){const e=Kb(),t=n;return(i,r)=>(O(),H("button",{class:_e(i.GenerateModifiers("m-button",{...t.modifiers,disabled:t.disabled,iconed:!!t.icon,[`iconed-${t.iconSide}`]:!0,iconOnly:!Object.keys(F(e)).length})),type:t.type,disabled:t.disabled},[t.icon===!0?(O(),H("div",y2,[Yt(i.$slots,"icon")])):t.icon?(O(),H("span",{key:1,class:_e(["m-button__icon",t.icon]),"aria-hidden":"true"},null,2)):Re("",!0),Yt(i.$slots,"default")],10,v2))}});const b2={class:"m-notification-list"},E2=pn({name:"NotificationList",__name:"List",setup(n){const e=Dn(Ut.notifications),t={handleClickAction(i){var r;i.delay||Ut.actions.removeNotification(i),(r=i.action)==null||r.callback()}};return At(()=>Ut.notifications,i=>{i.value=i.value}),(i,r)=>(O(),H("ol",b2,[(O(!0),H(He,null,ht(e.value,(s,a)=>(O(),H("li",{key:a,class:_e(i.GenerateModifiers("m-notification-list__item",{[s.type]:!0}))},[Yt(i.$slots,(s==null?void 0:s.id)??"text",{notification:s},()=>[Lt(pe(s.text),1)]),s.action?(O(),ze(Nr,{key:0,class:"m-notification-list__item-btn",icon:s.action.icon,modifiers:{danger:!0,inverted:!0},onClick:o=>t.handleClickAction(s)},{default:Ve(()=>[Lt(pe(s.action.label??""),1)]),_:2},1032,["icon","onClick"])):Re("",!0)],2))),128))]))}});const w2=()=>{const n=it({modals:{},openQueue:[]}),e={register(t){n.modals[t.name]=t},unregister(t){n.modals[t.name]&&delete n.modals[t.name]},show(t){return n.modals[t]?(n.openQueue.unshift(t),Ta(()=>{n.modals[t].state.open=!0}),n.modals[t]):null},hide(t){Ta(()=>{n.modals[t]&&e.isLastOpen(t)&&(n.openQueue.shift(),n.modals[t].state.open=!1)})},isLastOpen(t){const[i]=n.openQueue;return t===i}};return{state:n,actions:e}},br=w2(),C2=["id"],S2={class:"m-modal__header"},_2={class:"m-modal__body"},x2={key:0,class:"m-modal__footer"},il=pn({name:"Modal",__name:"index",props:{name:{},title:{},showClose:{type:Boolean,default:!0},showFooter:{type:Boolean,default:!0},acceptOnly:{type:Boolean,default:!1},refuseOnly:{type:Boolean,default:!1},acceptLabel:{default:"Ok"},refuseLabel:{default:"Cancel"},modifiers:{default:()=>({})}},emits:["open","close","accept","refuse"],setup(n,{emit:e}){const t=e,i=Dn(null),r=n,s=it({open:!1,oldFocusElement:null}),a=Qe(()=>({backDropVisible:br.actions.isLastOpen(r.name)})),o={handleClose(){var u;s.open&&(br.actions.hide(r.name),(u=s.oldFocusElement)==null||u.focus(),t("close"))},handleAccept(){t("accept"),o.handleClose()},handleRefuse(){var u;t("refuse"),o.handleClose(),(u=s.oldFocusElement)==null||u.focus()}},l=u=>{u.target===i.value&&o.handleClose()};At(()=>s.open,u=>{var d,h;u?(t("open"),s.oldFocusElement=document.activeElement,(h=(d=i.value)==null?void 0:d.querySelector("input, select, textarea, area, button, a, [tabindex]"))==null||h.focus()):o.handleClose()});const c={name:r.name,state:s};return $r(()=>{br.actions.register(c),window.addEventListener("mouseup",l),window.addEventListener("touchend",l)}),td(()=>{br.actions.unregister(c),window.removeEventListener("mouseup",l),window.removeEventListener("touchend",l)}),(u,d)=>(O(),H("div",{ref_key:"root",ref:i,class:_e(u.GenerateModifiers("m-modal__backdrop",{visible:a.value.backDropVisible,open:s.open,topMost:s.open&&a.value.backDropVisible}))},[q("div",{id:r.name,class:_e(u.GenerateModifiers("m-modal",{...r.modifiers,noFooter:!r.showFooter}))},[q("div",S2,[Yt(u.$slots,"header",{title:r.title},()=>[Lt(pe(r.title),1)])]),q("div",_2,[Yt(u.$slots,"default")]),r.showFooter?(O(),H("div",x2,[Yt(u.$slots,"footer",{accept:o.handleAccept,refuse:o.handleRefuse,close:o.handleClose},()=>[r.acceptOnly?Re("",!0):(O(),ze(Nr,{key:0,type:"button",class:_e(u.GenerateModifiers("m-modal__btn",{refuse:!0})),modifiers:{danger:!0},onClick:o.handleRefuse},{default:Ve(()=>[Lt(pe(r.refuseLabel),1)]),_:1},8,["class","onClick"])),r.refuseOnly?Re("",!0):(O(),ze(Nr,{key:1,type:"button",class:_e(u.GenerateModifiers("m-modal__btn",{accept:!0})),modifiers:{secondary:!0},onClick:o.handleAccept},{default:Ve(()=>[Lt(pe(r.acceptLabel),1)]),_:1},8,["class","onClick"]))])])):Re("",!0),r.showClose?Yt(u.$slots,"close",{key:1,close:o.handleClose},()=>[q("button",{type:"button",class:_e(u.GenerateModifiers("m-modal__btn",{close:!0})),onClick:d[0]||(d[0]=(...h)=>o.handleClose&&o.handleClose(...h))},null,2)]):Re("",!0)],10,C2)],2))}});const R2={key:0,class:"m-progress-bar__label"},A2=["aria-valuenow","aria-valuetext","aria-label"],k2=pn({name:"ProgressBar",__name:"index",props:{label:{},ariaLabel:{},percent:{default:0},modifiers:{default:()=>({})}},setup(n){const e=Kb(),t=n;return(i,r)=>(O(),H("div",{class:_e(i.GenerateModifiers("m-progress-bar",t.modifiers))},[t.label||F(e).label?(O(),H("span",R2,[Yt(i.$slots,"label",{},()=>[Lt(pe(t.label),1)])])):Re("",!0),q("div",{class:"m-progress-bar__track",role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":Math.round(t.percent*100*10)/10,"aria-valuetext":`${Math.round(t.percent*100*10)/10}%`,"aria-label":t.ariaLabel},[q("span",{class:"m-progress-bar__progress",style:Xu({width:`calc(${t.percent*100}% - 4px)`})},[Yt(i.$slots,"track",{},()=>[Lt(pe(Math.round(t.percent*100*10)/10)+"% ",1)])],4)],8,A2)],2))}});const D2={class:"AppNavigation"},M2=["src","title"],P2=["src","title"],T2=["src","title"],I2=Object.assign({name:"AppNavigation"},{__name:"index",setup(n){const{t:e}=_t(),t=eE();return(i,r)=>{const s=nd("router-link");return O(),H("ul",D2,[q("li",{class:_e(i.GenerateModifiers("AppNavigationItem",{Active:F(t).name==="Home"}))},[be(s,{to:{name:"Home"}},{default:Ve(()=>[q("img",{src:F(Un)("img/UI/Inventory.png"),alt:"Inventory",title:F(e)("App.Navigation.inventory")},null,8,M2)]),_:1})],2),q("li",{class:_e(i.GenerateModifiers("AppNavigationItem",{Active:F(t).name==="StorageChest"}))},[be(s,{to:{name:"StorageChest"}},{default:Ve(()=>[q("img",{src:F(Un)("img/UI/Storage.png"),alt:"StorageChest",title:F(e)("App.Navigation.storageChest")},null,8,P2)]),_:1})],2),q("li",{class:_e(i.GenerateModifiers("AppNavigationItem",{Active:F(t).name==="AncientHunts"}))},[be(s,{to:{name:"AncientHunts"}},{default:Ve(()=>[q("img",{src:F(Un)("img/UI/AncientHunts.png"),alt:"Ancient Hunts",title:F(e)("App.Navigation.ancientHunts")},null,8,T2)]),_:1})],2)])}}});const O2={class:"TutorialPoly",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1048 554","xml:space":"preserve"},N2=["d"],F2=Object.assign({name:"TutorialPoly"},{__name:"Poly",props:{polygonList:{type:Array,default:()=>[]}},setup(n){const e=n,t=Qe(()=>{const i=e.polygonList.map(r=>{const[s,...a]=r,o=a.map(([l,c])=>`L${l},${c}`).join("");return`M${s[0]},${s[1]}${o}`});return{pathList:[`M0,0V${window.innerHeight}H${window.innerWidth}V0z`,...i]}});return(i,r)=>(O(),H("svg",O2,[q("path",{d:t.value.pathList.join(" "),class:"TutorialPolyBackDrop"},null,8,N2)]))}});class L2{constructor(e){qt(this,"name",null);qt(this,"parent",null);qt(this,"polygonList",[]);qt(this,"fullfilled",null);qt(this,"reasonId",null);qt(this,"onFullfilled",null);qt(this,"onError",null);Object.assign(this,e??{})}setFullfilled(e,t,i=!1){return this.parent&&!Ne.state.stepData.objectiveList[this.parent].fullfilled?this:((!this.fullfilled||this.fullfilled&&this.reasonId!==null||i)&&(this.fullfilled=e,this.reasonId=t??null,this.isFullfilled()&&typeof this.onFullfilled=="function"&&this.onFullfilled(),!this.isFullfilled()&&typeof this.onError=="function"&&this.onError()),this)}getIcon(){return this.fullfilled===null?"neutral":this.fullfilled?"check":"close"}isFullfilled(){return!!this.fullfilled&&!this.reasonId}reset(){this.fullfilled=null,this.reasonId=null}}class ci{constructor(e){qt(this,"nextStepId",null);qt(this,"prevStepId",null);qt(this,"objectiveList",{});Object.assign(this,e??{})}get polygonList(){if(this.hasObjectives()){const[e]=Object.values(this.objectiveList).filter(t=>!t.isFullfilled());return(e??{}).polygonList??[]}return[]}get currentObjective(){if(this.hasObjectives()){const[e]=Object.values(this.objectiveList).filter(t=>!t.isFullfilled());return e||{}}return{}}hasObjectives(){return!!Object.values(this.objectiveList).length}addObjective(e){this.objectiveList[e.name]=new L2(e)}next(){this.nextStepId&&this.isFinished()&&(Ne.state.currentStep=this.nextStepId,Ne.state.stepData=Uo[this.nextStepId],Ne.state.stepData.resetObjectives())}prev(){this.prevStepId&&(Ne.state.currentStep=this.prevStepId,Ne.state.stepData=Uo[this.prevStepId],Ne.state.stepData.resetObjectives())}isFinished(){return Object.values(this.objectiveList).reduce((e,t)=>e&&t.isFullfilled(),!0)}resetObjectives(){Object.values(this.objectiveList).forEach(e=>{e.reset()})}}class B2 extends ci{}const $2=new B2;class q2 extends ci{constructor(){super({nextStepId:"DragAndDrop"})}}const U2=new q2,Le=48,he=-30;class ut{static get GEAR_MELEE(){return[[28+Le,223+he],[102+Le,223+he],[102+Le,297+he],[28+Le,297+he]]}static get GEAR_ARMOR(){return[[135+Le,177+he],[205+Le,177+he],[205+Le,247+he],[135+Le,247+he]]}static get GEAR_RANGED(){return[[245+Le,207+he],[315+Le,207+he],[315+Le,277+he],[245+Le,277+he]]}static get HOTBAR_SLOT1(){return[[45+Le,470+he],[115+Le,470+he],[115+Le,540+he],[45+Le,540+he]]}static get HOTBAR_SLOT2(){return[[135+Le,470+he],[205+Le,470+he],[205+Le,540+he],[135+Le,540+he]]}static get HOTBAR_SLOT3(){return[[225+Le,470+he],[295+Le,470+he],[295+Le,540+he],[225+Le,540+he]]}static INVENTORY_SLOT(e){const t={x:(e-1)%3*90+(e-1)%3*6,y:Math.floor((e-1)/3)*90+Math.floor((e-1)/3)*6};return[[359+t.x+Le,200+t.y+he],[449+t.x+Le,200+t.y+he],[449+t.x+Le,290+t.y+he],[359+t.x+Le,290+t.y+he]]}static get SELECTED_ENCHANTMENT(){return[[734+Le,459+he-22],[745.5+Le,468.5+he-22],[750.7+Le,462.7+he-22],[765+Le,477.4+he-22],[761.3+Le,483.4+he-22],[770+Le,496+he-22],[734+Le,531+he-22],[697+Le,496+he-22],[734+Le,459+he-22]]}static get ENCHANTMENT_SLOT1(){return[[709+Le,473+he-20],[730+Le,494+he-20],[709+Le,515+he-20],[689+Le,494+he-20]]}static get ENCHANTMENT_SLOT2(){return[[735+Le,499+he-20],[756+Le,519+he-20],[735+Le,540+he-20],[714+Le,519+he-20]]}static get ENCHANTMENT_SLOT3(){return[[762+Le,483+he-20],[782+Le,503+he-20],[762+Le,523+he-20],[742+Le,503+he-20]]}static NETHERITE_ENCHANTMENT_SLOT(){const t=document.getElementById("app").getBoundingClientRect(),i=document.querySelector(".MCDGildedEnchant"),{x:r,y:s,width:a,height:o}=i.getBoundingClientRect();return[[r-t.x,s-t.y+he],[r-t.x+a,s-t.y+he],[r-t.x+a,s-t.y+o+he],[r-t.x,s-t.y+o+he]]}static ITEM_SELECTOR(){const t=document.getElementById("app").getBoundingClientRect(),i=document.querySelector(".MCDItemSelectOuter"),{x:r,y:s,width:a,height:o}=i.getBoundingClientRect();return[[r-t.x,s-t.y+he],[r-t.x+a,s-t.y+he],[r-t.x+a,s-t.y+o+he],[r-t.x,s-t.y+o+he]]}static ITEM_SELECTOR_DROPDOWN(){const t=document.getElementById("app").getBoundingClientRect(),i=document.querySelector(".MCDItemSelectOuter"),{x:r,y:s,height:a}=i.getBoundingClientRect();return[[r-t.x,s-t.y+a+9+he],[r-t.x+300,s-t.y+a+9+he],[r-t.x+300,s-t.y+a+301+he],[r-t.x,s-t.y+a+301+he]]}static ITEM_RARITY_LABEL(){const t=document.getElementById("app").getBoundingClientRect(),i=document.querySelector(".MCDRarityLabel"),{x:r,y:s,width:a,height:o}=i.getBoundingClientRect();return[[r-t.x,s-t.y+he],[r-t.x+a,s-t.y+he],[r-t.x+a,s-t.y+o+he],[r-t.x,s-t.y+o+he]]}static ITEM_POWER_LABEL(){const t=document.getElementById("app").getBoundingClientRect(),i=document.querySelector(".MCDItemTitlePower"),{x:r,y:s,width:a,height:o}=i.getBoundingClientRect();return[[r-t.x,s-t.y+he],[r-t.x+a,s-t.y+he],[r-t.x+a,s-t.y+o+he],[r-t.x,s-t.y+o+he]]}static ENCHANTMENT_SELECTOR(){const t=document.getElementById("app").getBoundingClientRect(),i=document.querySelector(".MCDEnchantSelect"),{x:r,y:s,width:a,height:o}=i.getBoundingClientRect();return[[r-t.x,s-t.y-3+he],[r-t.x+a+10,s-t.y-3+he],[r-t.x+a+10,s-t.y+o+3+he],[r-t.x,s-t.y+o+3+he]]}static ENCHANTMENT_SELECTOR_DROPDOWN(){const t=document.getElementById("app").getBoundingClientRect(),i=document.querySelector(".MCDEnchantSelect"),{x:r,y:s,height:a}=i.getBoundingClientRect();return[[r-t.x,s-t.y+a+9+he],[r-t.x+300,s-t.y+a+9+he],[r-t.x+300,s-t.y+a+271+he],[r-t.x,s-t.y+a+271+he]]}static ENCHANTMENT_TIER_LIST(){const t=document.getElementById("app").getBoundingClientRect(),i=document.querySelector(".TierContainer"),{x:r,y:s,width:a,height:o}=i.getBoundingClientRect();return[[r-t.x,s-t.y+he],[r-t.x+a+17,s-t.y+he],[r-t.x+a+17,s-t.y+o+he],[r-t.x,s-t.y+o+he]]}static ENCHANTMENT_EDITOR_CLOSE_BUTTON(){const t=document.getElementById("app").getBoundingClientRect(),i=document.querySelector(".MCDEnchantmentEditor h2 .MCDButton"),{x:r,y:s,width:a,height:o}=i.getBoundingClientRect();return[[r-t.x,s-t.y+he],[r-t.x+a,s-t.y+he],[r-t.x+a,s-t.y+o+he],[r-t.x,s-t.y+o+he]]}}class H2 extends ci{constructor(){super({prevStepId:"Welcome",nextStepId:"EquipUnequip"}),this.addObjective({name:"DragNDrop",polygonList:[ut.INVENTORY_SLOT(1),ut.INVENTORY_SLOT(2)]})}}const V2=new H2;class j2 extends ci{constructor(){super({prevStepId:"DragAndDrop",nextStepId:"EditItemType"}),this.addObjective({name:"UnequipItem",polygonList:[ut.GEAR_MELEE]}),this.addObjective({name:"EquipItem",parent:"UnequipItem",polygonList:[ut.INVENTORY_SLOT(1)]})}}const W2=new j2;class z2 extends ci{constructor(){super({prevStepId:"EquipUnequip",nextStepId:"EditEnchantment"}),this.addObjective({name:"SelectItem",polygonList:[ut.INVENTORY_SLOT(1)],onFullfilled:()=>{this.objectiveList.OpenSelector.polygonList=[ut.ITEM_SELECTOR()]}}),this.addObjective({name:"OpenSelector",onFullfilled:()=>{this.objectiveList.ChooseNewItem.polygonList=[ut.ITEM_SELECTOR_DROPDOWN()]}}),this.addObjective({name:"ChooseNewItem",onFullfilled:()=>{this.objectiveList.ChangeRarity.polygonList=[ut.ITEM_RARITY_LABEL()]}}),this.addObjective({name:"ChangeRarity",onFullfilled:()=>{this.objectiveList.ChangeLevel.polygonList=[ut.ITEM_POWER_LABEL()]}}),this.addObjective({name:"ChangeLevel"})}}const G2=new z2;class K2 extends ci{constructor(){super({prevStepId:"EditItemType",nextStepId:"EditEnchantment2"}),this.addObjective({name:"ChooseEnchantmentToEdit",polygonList:[ut.ENCHANTMENT_SLOT1],onFullfilled:()=>{this.objectiveList.OpenSelector.polygonList=[ut.ENCHANTMENT_SELECTOR()]}}),this.addObjective({name:"OpenSelector",onFullfilled:()=>{this.objectiveList.ChooseNewEnchantment.polygonList=[ut.ENCHANTMENT_SELECTOR_DROPDOWN()]}}),this.addObjective({name:"ChooseNewEnchantment",onFullfilled:()=>{this.objectiveList.UpgradeEnchantment.polygonList=[ut.ENCHANTMENT_TIER_LIST()]}}),this.addObjective({name:"UpgradeEnchantment",onFullfilled:()=>{this.objectiveList.CloseEditor.polygonList=[ut.ENCHANTMENT_EDITOR_CLOSE_BUTTON()]}}),this.addObjective({name:"CloseEditor"})}}const Y2=new K2;class Q2 extends ci{constructor(){super({prevStepId:"EditEnchantment",nextStepId:"AddNetheriteEnchantment"}),this.addObjective({name:"ClickUpgradedEnchantment",polygonList:[ut.SELECTED_ENCHANTMENT],onFullfilled:()=>{this.objectiveList.DowngradeEnchantment.polygonList=[ut.ENCHANTMENT_TIER_LIST()]}}),this.addObjective({name:"DowngradeEnchantment"}),this.addObjective({name:"ChooseEnchantmentToEdit",polygonList:[ut.ENCHANTMENT_SLOT2],onFullfilled:()=>{this.objectiveList.OpenSelector.polygonList=[ut.ENCHANTMENT_SELECTOR()]}}),this.addObjective({name:"OpenSelector",onFullfilled:()=>{this.objectiveList.ChooseNewEnchantment.polygonList=[ut.ENCHANTMENT_SELECTOR_DROPDOWN()]}}),this.addObjective({name:"ChooseNewEnchantment",onFullfilled:()=>{this.objectiveList.UpgradeEnchantment.polygonList=[ut.ENCHANTMENT_TIER_LIST()]}}),this.addObjective({name:"UpgradeEnchantment",onFullfilled:()=>{this.objectiveList.CloseEditor.polygonList=[ut.ENCHANTMENT_EDITOR_CLOSE_BUTTON()]}}),this.addObjective({name:"CloseEditor"})}}const X2=new Q2;class J2 extends ci{constructor(){super({prevStepId:"EditEnchantment2",nextStepId:"RemoveNetheriteEnchantment"}),this.addObjective({name:"SelectItem",polygonList:[ut.INVENTORY_SLOT(1)],onFullfilled:()=>{this.objectiveList.ClickNetheriteEnchantmentSlot.polygonList=[ut.NETHERITE_ENCHANTMENT_SLOT()]}}),this.addObjective({name:"ClickNetheriteEnchantmentSlot",onFullfilled:()=>{this.objectiveList.OpenSelector.polygonList=[ut.ENCHANTMENT_SELECTOR()]}}),this.addObjective({name:"OpenSelector",onFullfilled:()=>{this.objectiveList.ChooseNewEnchantment.polygonList=[ut.ENCHANTMENT_SELECTOR_DROPDOWN()]}}),this.addObjective({name:"ChooseNewEnchantment",onFullfilled:()=>{this.objectiveList.UpgradeEnchantment.polygonList=[ut.ENCHANTMENT_TIER_LIST()]}}),this.addObjective({name:"UpgradeEnchantment",onFullfilled:()=>{this.objectiveList.CloseEditor.polygonList=[ut.ENCHANTMENT_EDITOR_CLOSE_BUTTON()]}}),this.addObjective({name:"CloseEditor"})}}const Z2=new J2;class eF extends ci{constructor(){super({prevStepId:"AddNetheriteEnchantmentStep",nextStepId:"TutorialFinish"}),this.addObjective({name:"SelectItem",polygonList:[ut.INVENTORY_SLOT(1)],onFullfilled:()=>{this.objectiveList.ClickNetheriteEnchantmentSlot.polygonList=[ut.NETHERITE_ENCHANTMENT_SLOT()]}}),this.addObjective({name:"ClickNetheriteEnchantmentSlot",onFullfilled:()=>{this.objectiveList.OpenSelector.polygonList=[ut.ENCHANTMENT_SELECTOR()]}}),this.addObjective({name:"OpenSelector",onFullfilled:()=>{this.objectiveList.ChooseUnsetEnchantment.polygonList=[ut.ENCHANTMENT_SELECTOR_DROPDOWN()]}}),this.addObjective({name:"ChooseUnsetEnchantment",onFullfilled:()=>{this.objectiveList.CloseEditor.polygonList=[ut.ENCHANTMENT_EDITOR_CLOSE_BUTTON()]}}),this.addObjective({name:"CloseEditor"})}}const tF=new eF;class nF extends ci{constructor(){super({prevStepId:"EditEnchantment2"})}}const rF=new nF,Uo={TutorialDisabled:$2,Welcome:U2,DragAndDrop:V2,EquipUnequip:W2,EditItemType:G2,EditEnchantment:Y2,EditEnchantment2:X2,AddNetheriteEnchantment:Z2,RemoveNetheriteEnchantment:tF,TutorialFinish:rF},iF=()=>{const n=it({currentStep:"Welcome",isDisabled:!1,stepData:Uo.Welcome,show:!1});return{state:n,actions:{setFullfilled(t,i,r,s=!1){Ta(()=>{n.stepData.objectiveList[t]&&n.stepData.objectiveList[t].setFullfilled(i,r??null,s)})},refreshPolygonListForObjective(t,i){Ta(()=>{n.stepData.objectiveList[t]&&(n.stepData.objectiveList[t].polygonList=i??[])})},disableTutorial(){n.isDisabled=!0,n.currentStep="TutorialDisabled",n.stepData=Uo.TutorialDisabled},enableTutorial(){n.isDisabled=!1,n.currentStep="Welcome",n.stepData=Uo.Welcome}}}},Ne=iF();const sF={class:"Tutorial"},aF={key:0,class:"TutorialStepObjectives"},oF={key:0,class:"TutorialStepObjectivesBubble"},lF=Object.assign({name:"Tutorial"},{__name:"index",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,i=e,{t:r}=_t(),s=it({active:t.modelValue}),a={characterHasEnoughResources(){const o=G.state.selectedCharacter.inventory.inventory.length>=2,l=G.state.selectedCharacter.inventory.gears.filter(u=>u&&u.isMelee()).length===1,c=G.state.selectedCharacter.enchantmentPoints>=18;return o&&l&&c},handleFinishTutorial(o){if(Ne.state.isDisabled){o();return}G.state.selectedCharacter.reload().then(()=>{o()})},handleClose(){s.active=!1,i("update:modelValue",t.active)}};return At(()=>t.modelValue,o=>{s.active=o,o&&(a.characterHasEnoughResources()?Ne.actions.enableTutorial():Ne.actions.disableTutorial(),br.actions.show("TutorialModal"))}),(o,l)=>tn((O(),H("div",sF,[be(F2,{polygonList:F(Ne).state.stepData.polygonList},null,8,["polygonList"]),be(il,{name:"TutorialModal",class:_e(`Tutorial${F(Ne).state.currentStep}Modal ${F(Ne).state.stepData.currentObjective.name||""} ${F(Ne).state.stepData.isFinished()?"Finished":""}`),title:F(r)(`Tutorial.steps.${F(Ne).state.currentStep}.title`),modifiers:{xs:!0},onClose:a.handleClose},{footer:Ve(({close:c})=>[tn(be(Nr,{class:_e(o.GenerateModifiers("m-modal__btn",{refuse:!0})),modifiers:{danger:!0},onClick:l[0]||(l[0]=u=>F(Ne).state.stepData.prev())},{default:Ve(()=>[Lt(pe(F(r)("Tutorial.buttons.prev")),1)]),_:1},8,["class"]),[[yr,F(Ne).state.stepData.prevStepId]]),tn(be(Nr,{class:_e(o.GenerateModifiers("m-modal__btn",{accept:!0})),modifiers:{secondary:!0},onClick:l[1]||(l[1]=u=>F(Ne).state.stepData.next())},{default:Ve(()=>[Lt(pe(F(r)("Tutorial.buttons.next")),1)]),_:1},8,["class"]),[[yr,F(Ne).state.stepData.nextStepId&&F(Ne).state.stepData.isFinished()]]),tn(be(Nr,{class:_e(o.GenerateModifiers("m-modal__btn",{accept:!0})),modifiers:{secondary:!0},onClick:u=>a.handleFinishTutorial(c)},{default:Ve(()=>[Lt(pe(F(r)("Tutorial.buttons.finished")),1)]),_:2},1032,["class","onClick"]),[[yr,!F(Ne).state.stepData.nextStepId&&F(Ne).state.stepData.isFinished()]])]),default:Ve(()=>[q("p",null,pe(F(r)(`Tutorial.steps.${F(Ne).state.currentStep}.desc`)),1),F(Ne).state.stepData.hasObjectives()?(O(),H("ul",aF,[(O(!0),H(He,null,ht(Object.values(F(Ne).state.stepData.objectiveList),(c,u)=>(O(),H("li",{key:u},[q("i",{class:_e(`icon-${c.getIcon()}`)},null,2),q("span",null,pe(F(r)(`Tutorial.steps.${F(Ne).state.currentStep}.objectives.${c.name}.title`)),1),c.reasonId?(O(),H("div",oF,pe(F(r)(`Tutorial.steps.${F(Ne).state.currentStep}.objectives.${c.name}.reasons.${c.reasonId}`)),1)):Re("",!0)]))),128))])):Re("",!0)]),_:1},8,["class","title","onClose"])],512)),[[yr,s.active]])}});class Ep extends Xs{getBoolean(){return this.value==="true"}setBoolean(e){this.value=e.toString()}static async findAll(){return(await Te.Setting.findAll()).reduce((t,i)=>({...t,[i.dataValues.key]:new Ep(i.dataValues)}),{})}async save(){const{key:e,value:t}=this.data;return await Te.Setting.updateOrCreate(JSON.stringify({key:e,value:t})),this}}const cF=()=>{const n=it({settings:{}});return{state:n,actions:{getSetting(t){var i;return((i=n.settings)==null?void 0:i[t])??null},getString(t,i){var r,s;return((s=(r=n.settings)==null?void 0:r[t])==null?void 0:s.value)||i||""},async setString(t,i){return n.settings[t]?(n.settings[t].value=i,n.settings[t].save()):null},getBoolean(t,i){var r,s;return((s=(r=n.settings)==null?void 0:r[t])==null?void 0:s.value)==="true"||i||!1},async setBoolean(t,i){return n.settings[t]?(n.settings[t].value=i.toString(),n.settings[t].save()):null},async toggleBoolean(t){return this.setBoolean(t,!this.getBoolean(t))},async load(){n.settings=await Ep.findAll()}}}},mh=cF(),hy={"Alt+F4":()=>{Te.send("close:main")},"Command+Q":()=>{Te.send("close:main")}};class fw extends Xa{constructor(e){super(e,[])}get image(){return Un(`img/AncientMobs/${this.id}.png`)}get runeList(){return new Ci(this.neededRunes)}get groupedRunes(){return this.runeList.compressed}}const uF=()=>{const n=it({mobs:{}});return{state:n,actions:{async load(){const t=await Te.AncientMob.findAll();n.mobs=t.reduce((i,r)=>({...i,[r.dataValues.id]:new fw(r.dataValues)}),{})}}}},mw=uF();const dF={key:0,class:"Page"},hF={key:0,class:"CharacterActionContainer"},fF=["title"],mF=q("i",{class:"icon-edit"},null,-1),pF=[mF],gF=["onUpdate:modelValue"],vF=["title","disabled","onClick"],yF=q("span",{class:"icon-reload"},null,-1),bF=[yF],EF=["title","disabled","onClick"],wF=q("span",{class:"icon-save"},null,-1),CF=[wF],SF={key:1,class:"WaitBloc"},_F={key:1,class:"Page WaitBloc"},xF={__name:"App",setup(n){const e=eE(),{locale:t,t:i}=_t(),r=it({showTutorial:!1,ready:!1,mcdVersion:"1.17.0.0",loadingTabs:[],savingTabs:[],currentTab:null}),s=Qe(()=>({tabs:G.state.profilList.length?G.state.selectedProfil.characters.map(l=>({id:l.uuid,label:l.data.name})):[]})),a={reload(l){r.loadingTabs.push(l.id),l.reload().then(()=>{Ut.actions.success(i("App.tabs.reload.success"))}).catch(()=>{Ut.actions.error(i("App.tabs.reload.error"))}).finally(()=>{r.loadingTabs.splice(r.loadingTabs.indexOf(l.id),1)})},save(l){l.corrupted.length?Ut.actions.error(i("App.tabs.save.corruptedError")):(r.savingTabs.push(l.id),l.save().then(c=>{c?Ut.actions.success(i("App.tabs.save.success")):Ut.actions.error(i("App.tabs.save.error"))}).catch(()=>{Ut.actions.error(i("App.tabs.save.error"))}).finally(()=>{r.savingTabs.splice(r.savingTabs.indexOf(l.id),1)}))}};Te.on("localeChange",l=>{t.value=l}),Te.on("runShortcut",l=>{l in hy&&hy[l]()});const o={id:"downloadupdate",type:"info",text:i("App.Updater.downloadingUpdate"),delay:0,action:{callback(){Ut.actions.removeNotification(o)},icon:"icon-close"}};return Te.on("update-available",()=>{Ut.actions.pushRawNotification(o)}),Te.on("download-progress",l=>{r.percent=l/100}),Te.on("update-downloaded",()=>{const l={type:"success",text:i("App.Updater.readyToInstall"),delay:0,action:{callback(){Te.sendSync("quitAndInstallUpdate")},label:i("App.Updater.quitAndInstall"),icon:"icon-export"}};Ut.actions.removeNotification(o),Ut.actions.pushRawNotification(l)}),At(()=>r.currentTab,l=>{G.setters.setCharacter(G.state.selectedProfil.characters.find(c=>c.uuid===l))}),At(()=>G.state.selectedProfil,()=>{r.currentTab=G.state.selectedCharacter.uuid}),wl(()=>{Te.on("database-ready",async()=>{await mh.actions.load(),await Te.invoke("localeChange",mh.actions.getString("locale","en-EN")),t.value=mh.actions.getString("locale","en-EN"),await mw.actions.load(),await Ja.actions.load(),await fd.actions.load(),await Sa.actions.load(),await $s.actions.load(),await yt.actions.load(),G.state.profilList.length?Promise.all(G.state.profilList.map(l=>l.fetchCharacters())).then(l=>{r.ready=!0,G.setters.setProfil(l[0]),r.currentTab=G.state.selectedCharacter.uuid}):(r.ready=!0,G.actions.loadDemoCharacter(),r.currentTab=G.state.selectedCharacter.uuid)}),Te.isWeb&&Te.send("database-ready")}),(l,c)=>{var d,h;const u=nd("router-view");return O(),H(He,null,[be(SN,{name:"main",appTitle:`Save editor for MCD ≤ ${r.mcdVersion}`,showHelp:F(G).actions.enableTutorialOnRoute(F(e)),onHelp:c[0]||(c[0]=f=>r.showTutorial=!0)},null,8,["appTitle","showHelp"]),r.ready?(O(),H("main",dF,[s.value.tabs.length>0?(O(),ze(g2,{key:0,modelValue:r.currentTab,"onUpdate:modelValue":c[2]||(c[2]=f=>r.currentTab=f),tabs:s.value.tabs,onAllowMoveFn:()=>!1},Ix({_:2},[ht(((d=F(G).state.selectedProfil)==null?void 0:d.characters)??[],(f,m)=>({name:`${f.uuid}Nav`,fn:Ve(()=>[q("span",null,pe(f.data.name||F(i)("App.tabs.unamedCharacter")),1),F(G).state.isDemo?Re("",!0):(O(),H("div",hF,[q("button",{title:F(i)("App.tabs.edit.label"),class:"CharacterAction CharacterActionEditName",onClick:c[1]||(c[1]=p=>F(br).actions.show("EditButtonModal"))},pF,8,fF),be(il,{name:"EditButtonModal",title:F(i)("App.tabs.edit.modal.title"),acceptLabel:F(i)("App.tabs.edit.modal.okLabel"),refuseLabel:F(i)("App.tabs.edit.modal.cancelLabel"),modifiers:{xs:!0}},{default:Ve(()=>[tn(q("input",{"onUpdate:modelValue":p=>f.data.name=p},null,8,gF),[[ad,f.data.name]])]),_:2},1032,["title","acceptLabel","refuseLabel"]),F(Te).isWeb?Re("",!0):(O(),H("button",{key:0,class:_e(["CharacterAction CharacterActionReload",{loading:r.loadingTabs.includes(f.id)}]),title:F(i)("App.tabs.reload.label"),disabled:r.loadingTabs.includes(f.id),onClick:p=>a.reload(f)},bF,10,vF)),F(Te).isWeb?Re("",!0):(O(),H("button",{key:1,class:"CharacterAction CharacterActionSave",title:F(i)("App.tabs.save.label"),disabled:r.savingTabs.includes(f.id),onClick:p=>a.save(f)},CF,8,EF))]))])})),ht(((h=F(G).state.selectedProfil)==null?void 0:h.characters)??[],(f,m)=>({name:f.uuid,fn:Ve(()=>[be(u,{character:f},null,8,["character"])])}))]),1032,["modelValue","tabs"])):(O(),H("div",SF,pe(F(i)("App.noProfilFound")),1))])):(O(),H("main",_F,pe(F(i)("App.loadingProfils")),1)),be(E2,null,{downloadupdate:Ve(({notification:f})=>[Lt(pe(f.text)+" ",1),be(k2,{class:"app__progress-bar",percent:r.percent},null,8,["percent"])]),_:1}),r.ready?(O(),ze(lF,{key:2,modelValue:r.showTutorial,"onUpdate:modelValue":c[3]||(c[3]=f=>r.showTutorial=f)},null,8,["modelValue"])):Re("",!0),be(I2)],64)}}};const RF={class:"MCDCharacter"},AF={class:"MCDCharacterHeader"},pw=Object.assign({name:"MCDCharacter"},{__name:"Character",setup(n){return(e,t)=>(O(),H("div",RF,[q("header",AF,[Yt(e.$slots,"header")]),q("div",{class:_e(e.GenerateModifiers("MCDCharacterColumn",{Fst:!0}))},[Yt(e.$slots,"Column1")],2),q("div",{class:_e(e.GenerateModifiers("MCDCharacterColumn",{Snd:!0}))},[Yt(e.$slots,"Column2")],2),q("div",{class:_e(e.GenerateModifiers("MCDCharacterColumn",{Trd:!0}))},[Yt(e.$slots,"Column3")],2),Yt(e.$slots,"default")]))}});const kF={class:"MCDCurrency"},DF=["src","alt"],MF=["value"],PF={key:1,class:"MCDCurrencySpan"},ph=Object.assign({name:"MCDCurrency"},{__name:"Currency",props:Zc({image:{type:String,required:!0},imageAlt:{type:String,default:""},readonly:{type:Boolean,default:!1}},{modelValue:{type:Number},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=Ia(n,"modelValue"),t=n;return(i,r)=>(O(),H("div",kF,[q("img",{src:Un(t.image),alt:t.imageAlt,class:"MCDCurrencyImage"},null,8,DF),t.readonly?(O(),H("span",PF,pe(e.value),1)):(O(),H("input",{key:0,class:"MCDCurrencyField",type:"number",value:e.value,onInput:r[0]||(r[0]=s=>e.value=parseInt(s.target.value,10))},null,40,MF))]))}});const TF={class:"MCDCharacterCorruptionDetection"},IF={key:0},OF={key:1},gw=Object.assign({name:"MCDCharacterCorruptionDetection"},{__name:"CharacterCorruptionDetection",props:{character:{type:bs,required:!0}},setup(n){const{t:e,tm:t}=_t(),i=n,r=it({availableBackup:null}),s={handleConfirm(){r.availableBackup.restore().then(a=>{if(!a)throw new Error;return i.character.reload()}).then(()=>{Ut.actions.success(e("MCD.CharacterCorruptionDetection.restoreSuccess"))}).catch(()=>{Ut.actions.error(e("MCD.CharacterCorruptionDetection.restoreError"))}).finally(()=>{br.actions.hide(`corruptedDataModal${i.character.id}`)})}};return wl(()=>{[r.availableBackup]=i.character.getAvailableBackup()}),$r(()=>{br.actions.show(`corruptedDataModal${i.character.id}`)}),(a,o)=>{const l=nd("router-link");return O(),H("div",TF,[be(il,{name:`corruptedDataModal${i.character.id}`,title:F(e)("MCD.CharacterCorruptionDetection.title"),showClose:!1,onAccept:s.handleConfirm},{footer:Ve(({accept:c})=>[be(l,{custom:"",to:{name:"CorruptedData"}},{default:Ve(({navigate:u})=>[be(Nr,{class:_e(a.GenerateModifiers("m-modal__btn",{refuse:!0})),modifiers:{danger:!0},onClick:u},{default:Ve(()=>[Lt(pe(F(e)("MCD.CharacterCorruptionDetection.showReport")),1)]),_:2},1032,["class","onClick"])]),_:1}),be(Nr,{class:_e(a.GenerateModifiers("m-modal__btn",{accept:!0})),modifiers:{secondary:!0},onClick:c},{default:Ve(()=>[Lt(pe(F(e)("MCD.CharacterCorruptionDetection.okLabel")),1)]),_:2},1032,["class","onClick"])]),default:Ve(()=>[r.availableBackup?(O(),H("div",IF,[(O(!0),H(He,null,ht(F(t)("MCD.CharacterCorruptionDetection.contentBackupAvailable"),(c,u)=>(O(),H("p",{key:u},pe(c.replace("{date}",r.availableBackup.formatedDate)),1))),128))])):(O(),H("div",OF,[(O(!0),H(He,null,ht(F(t)("MCD.CharacterCorruptionDetection.contentNoBackupAvailable"),(c,u)=>(O(),H("p",{key:u},pe(c),1))),128))]))]),_:1},8,["name","title","onAccept"])])}}});const NF=pR('<div class="MCDItemTileInnerBox"><div class="MCDItemTileInnerBoxSegment Top"></div><div class="MCDItemTileInnerBoxSegment Left"></div><div class="MCDItemTileInnerBoxSegment Bottom"></div><div class="MCDItemTileInnerBoxBody"></div></div>',1),FF=["src"],LF=["src"],vw=Object.assign({name:"MCDItemTile"},{__name:"ItemTile",props:{rarity:{type:String,default:"Common"},item:{type:String,default:null},isNew:{type:Boolean,default:!1},isEvent:{type:Boolean,default:!1}},emits:["dragstart","dragend"],setup(n,{emit:e}){const t=e,i=n;return(r,s)=>(O(),H("div",{class:_e(r.GenerateModifiers("MCDItemTile",{[i.rarity.toLowerCase()]:!0,New:i.isNew})),draggable:"true",onDragstart:s[0]||(s[0]=a=>t("dragstart",a)),onDragend:s[1]||(s[1]=a=>t("dragend",a))},[NF,i.isEvent?(O(),H("img",{key:0,src:F(Un)("img/UI/SeasonalTrial.png"),class:"MCDItemTileEvent"},null,8,FF)):Re("",!0),i.item?(O(),H("img",{key:1,src:i.item,class:"MCDItemTileImage"},null,8,LF)):Re("",!0)],34))}});const BF={key:0,class:"MCDRuneListContainer"},$F=["src","alt","title"],qF={key:1,class:"MCDRuneListContainer--Compressed"},UF=["src","alt","title"],yu=Object.assign({name:"MCDRuneList"},{__name:"RuneList",props:{list:{type:Ci,required:!0},compress:{type:Boolean,default:!1}},setup(n){const e=n;return(t,i)=>e.list.length?(O(),H("div",{key:0,class:_e(`MCDRuneList MCDRuneList--${e.list.length%2===0?"pair":"ipair"}`)},[e.compress?(O(),H("div",qF,[(O(!0),H(He,null,ht(Object.entries(e.list.compressed),([r,s],a)=>(O(),H("div",{class:"MCDRuneListItem",key:`rune${a}`},[(O(!0),H(He,null,ht(s,o=>(O(),H("img",{key:o,src:F(Un)(`img/runes/${r}.png`),alt:`Rune ${r.toUpperCase()}`,title:`Rune ${r.toUpperCase()}`,class:_e(`MCDRuneListItemImage MCDRuneListItemImage--${o}`)},null,10,UF))),128)),q("span",null,pe(s),1)]))),128))])):(O(),H("div",BF,[(O(!0),H(He,null,ht(n.list.list,(r,s)=>(O(),H("img",{src:F(Un)(`img/runes/${r}.png`),alt:`Rune ${r.toUpperCase()}`,title:`Rune ${r.toUpperCase()}`,key:`rune${s}`},null,8,$F))),128))]))],2)):Re("",!0)}}),HF=()=>{const n=it({to:null,from:null}),e={setDragTo(t){n.to=t},setDragFrom(t){n.from=t},handleDropToEmpty(){n.to.hotbarSlot?n.from.hotbarSlot=n.to.hotbarSlot:n.from.gearType=n.to.gearType,delete n.from.data.inventoryIndex},handleDrop(t){const i=n.from.isEquipped(),r=n.to.isEquipped();e[`drop${i?"Equipped":"Inventory"}To${r?"Equipped":"Inventory"}`]();const a=n.from.isStored()&&n.to.isStored()?"storageChest":"inventory",o=t[a].items.indexOf(n.from),l=t[a].items.indexOf(n.to);t[a].items[l]=n.from,t.data.items[l]=n.from.data,t[a].items[o]=n.to,t.data.items[o]=n.to.data},dropEquippedToInventory(){n.from.data.inventoryIndex=n.to.data.inventoryIndex,delete n.to.data.inventoryIndex,n.to.data.equipmentSlot=n.from.data.equipmentSlot,delete n.from.data.equipmentSlot},dropInventoryToEquipped(){n.to.data.inventoryIndex=n.from.data.inventoryIndex,delete n.from.data.inventoryIndex,n.from.data.equipmentSlot=n.to.data.equipmentSlot,delete n.to.data.equipmentSlot},dropInventoryToInventory(){const t=n.from.data.inventoryIndex;n.from.data.inventoryIndex=n.to.data.inventoryIndex,n.to.data.inventoryIndex=t},dropEquippedToEquipped(){const t=n.from.data.equipmentSlot;n.from.data.equipmentSlot=n.to.data.equipmentSlot,n.to.data.equipmentSlot=t},dropToInventory(t){t.inventory.addItem(n.from),t.storageChest.removeItem(n.from)},dropToStorageChest(t){t.storageChest.addItem(n.from),t.inventory.removeItem(n.from)}};return{state:n,actions:e}},an=HF();const VF={class:"MCDItemLevel"},jF={key:0,class:"MCDItemSoulGathering icon-soulgathering"},WF={key:1,class:"MCDItemEnchanted"},zF=q("i",{class:"icon-enchanted"},null,-1),Ua=Object.assign({name:"MCDItem"},{__name:"Item",props:{item:{type:Pt},showRuneList:{type:Boolean,default:!1},noDragEvent:{type:Boolean,default:!1},disableEquipControl:{type:Boolean,default:!1}},setup(n){const e=n,t=it({isHolded:!1}),i={selectItem(r){e.showRuneList||(G.setters.setItem(e.item),e.item.data.markedNew&&delete e.item.data.markedNew,Ne.actions.setFullfilled("SelectItem",!0),!e.disableEquipControl&&(r.which===2||r.button===4)&&(r.preventDefault(),e.item.isEquipped()?Ne.actions.setFullfilled("UnequipItem",!0):Ne.actions.setFullfilled("EquipItem",!0),e.item[e.item.isEquipped()?"unequip":"equip"]()))},handleDragStart(){e.noDragEvent||(t.isHolded=!0,an.actions.setDragFrom(e.item))},handleDragEnd(){e.noDragEvent||(t.isHolded=!1,Ne.actions.setFullfilled("DragNDrop",!1))},handleDragOver(r){if(!e.noDragEvent){an.actions.setDragTo(e.item);const s=an.state.from!==an.state.to,a=an.state.from.isEquipped()||an.state.to.isEquipped(),o=an.state.from.itemData.type===an.state.to.itemData.type;s&&(a&&o||!a)?(r.preventDefault(),Ne.actions.setFullfilled("DragNDrop",!0,"ValidDrop")):Ne.actions.setFullfilled("DragNDrop",!1,"InvalidDrop")}},handleDrop(){e.noDragEvent||(an.actions.handleDrop(G.state.selectedCharacter),G.setters.setItem(an.state.from),G.state.key+=1,Ne.actions.setFullfilled("DragNDrop",!0))}};return(r,s)=>(O(),H("div",{key:n.item.$key,class:_e(r.GenerateModifiers("MCDItem",{Selected:e.item===F(G).state.selectedItem,DragHolded:t.isHolded,Gilded:e.item.isGilded(),[e.item.data.rarity]:!0})),onMousedown:s[0]||(s[0]=(...a)=>i.selectItem&&i.selectItem(...a)),onDragover:s[1]||(s[1]=qn((...a)=>i.handleDragOver&&i.handleDragOver(...a),["stop"])),onDrop:s[2]||(s[2]=qn((...a)=>i.handleDrop&&i.handleDrop(...a),["stop"]))},[q("div",VF,[q("i",{class:_e(`icon-${e.item.itemType.toLowerCase()}`)},null,2),Lt(" "+pe(e.item.powerLevel),1)]),e.item.itemData.soulgathering?(O(),H("i",jF)):Re("",!0),e.item.isEnchanted()?(O(),H("div",WF,[zF,Lt(" "+pe(e.item.enchantmentPointsInvested),1)])):Re("",!0),be(vw,{rarity:e.item.data.rarity,item:e.item.itemData.image||null,isNew:e.item.data.markedNew,isEvent:!!e.item.itemData.events.length&&!e.showRuneList,onDragstart:qn(i.handleDragStart,["stop"]),onDragend:qn(i.handleDragEnd,["stop"])},null,8,["rarity","item","isNew","isEvent","onDragstart","onDragend"]),e.showRuneList?(O(),ze(yu,{key:2,list:e.item.runeList},null,8,["list"])):Re("",!0)],34))}}),GF={key:0,class:"MCDItemLevel"},sl=Object.assign({name:"MCDItemEmpty"},{__name:"ItemEmpty",props:{itemType:{type:String,default:null},hotbarSlot:{type:Number,default:null},index:{type:Number,default:0},noDragEvent:{type:Boolean,default:!1},cross:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1}},setup(n){const e=n,t={handleDragOver(i){e.noDragEvent||(an.actions.setDragTo({type:e.itemType,hotbarSlot:e.hotbarSlot}),an.state.from&&an.state.from.itemData.type===e.itemType&&i.preventDefault())},handleDrop(){e.noDragEvent||(an.actions.handleDropToEmpty(),G.setters.setItem(an.state.from),G.state.selectedCharacter.inventory.checkIntegrity(),G.state.key+=1)},handleCreateItem(){if(e.clickable){let i=Pt.SWORD;if(e.itemType){i={[ft.MELEE]:Pt.SWORD,[ft.ARMOR]:Pt.ARMOR,[ft.RANGED]:Pt.BOW,[ft.ARTEFACT]:Pt.ARTEFACT}[e.itemType];const s=e.hotbarSlot?{hotbarSlot:e.hotbarSlot}:{gearType:e.itemType};G.state.selectedCharacter.inventory.insertAt(i,s)}else G.state.selectedCharacter.inventory.insertAt(i,{inventoryIndex:e.index})}}};return(i,r)=>(O(),H("div",{class:_e(i.GenerateModifiers("MCDItem",{Empty:!0,CrossIcon:e.cross,Clickable:e.clickable})),onDragover:r[0]||(r[0]=qn((...s)=>t.handleDragOver&&t.handleDragOver(...s),["stop"])),onDrop:r[1]||(r[1]=qn((...s)=>t.handleDrop&&t.handleDrop(...s),["stop"])),onClick:r[2]||(r[2]=(...s)=>t.handleCreateItem&&t.handleCreateItem(...s))},[e.itemType?(O(),H("div",GF,[q("i",{class:_e(`icon-${e.itemType.toLowerCase()}`)},null,2)])):Re("",!0),be(vw)],34))}});const KF={version:"1.1",width:"70px",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 121.5 140.1","xml:space":"preserve"},YF=q("path",{fill:"none",stroke:"#373434","stroke-width":"8","stroke-miterlimit":"10",d:"M9.6,40.6l51.1-29.5l51.1,29.5l0,59l-51.1,29.5L9.6,99.6L9.6,40.6z"},null,-1),QF=["stroke-dasharray"],XF=q("path",{fill:"#0F1013",d:"M61,0.1L0.3,34.9l-0.3,70l60.5,35.2l60.8-34.8l0.3-70L61,0.1z M115.3,101.9l-54.8,31.3L6,101.4l0.2-63.1L61,7l54.5,31.8L115.3,101.9z M12.8,42l48.4-27.5l48,28.1l-0.4,55.6l-0.1,0.1l-48.3,27.4l-0.1-0.1L12.4,97.6L12.8,42z"},null,-1),JF=q("path",{fill:"#131418",d:"M46,8.6L60.8,0l14.8,8.6l0,17.1l-14.8,8.6L46,25.7V8.6z"},null,-1),ZF=q("path",{fill:"#D372F4",d:"M61.7,29.8c-2.8,0-5.6-1-7.5-2.7c-2.2-1.9-3.5-4.7-3.6-7.9c-0.1-3.4,1.2-6.8,3.4-9c3.1-3,8-4,12.6-2.5l-0.5,1.4c-4-1.4-8.4-0.5-11.1,2.1c-2,1.9-3.1,4.9-3,7.9c0.1,2.8,1.2,5.2,3.1,6.8c2,1.7,4.9,2.6,7.6,2.3c2.2-0.2,4-1.2,5.2-2.7c2-2.6,2.3-7.4-0.6-10.2c-2-2-6.2-3.5-8.9-1.1c-1.3,1.1-2,2.9-1.9,4.9c0.1,1.7,0.7,3.1,1.8,3.9c1.6,1.2,4.7,1.3,6-0.5c0.9-1.2,1.1-3.4,0-4.3c-0.5-0.4-1.3-0.6-1.9-0.6c-0.2,0-0.5,0.1-0.7,0.3c-0.3,0.3-0.2,0.9-0.1,1.4l-1.4,0.4c-0.2-0.5-0.4-1.8,0.3-2.7c0.4-0.5,1-0.8,1.7-0.9c1-0.1,2.2,0.3,3,0.9c1.8,1.5,1.6,4.6,0.2,6.4c-1.9,2.4-5.9,2.4-8.1,0.8c-1.4-1.1-2.3-2.9-2.4-5c-0.1-2.4,0.8-4.7,2.4-6.1c3.1-2.7,8.1-1.6,10.9,1.2c3.1,3.1,3.5,8.6,0.7,12.2c-1.4,1.9-3.6,3-6.2,3.3C62.5,29.8,62.1,29.8,61.7,29.8z"},null,-1),eL={x:"60.75",y:"60","text-anchor":"middle","font-size":"18","letter-spacing":"1.5",fill:"#fff"},tL={x:"60.75",y:"95","text-anchor":"middle","font-size":"34","letter-spacing":"1.5",fill:"#fff"},nL=Object.assign({name:"MCDLevelBadge"},{__name:"LevelBadge",setup(n){const{t:e}=_t(),t=Qe(()=>{const r=lr.xp2Level(G.state.selectedCharacter.data.xp),s=(G.state.selectedCharacter.data.xp-lr.level2Xp(r))/lr.getXpForLevel(r+1);return{level:r,percent:s}}),i={handleMouseOver(){window.onmousewheel=r=>{const s=r.deltaY>0?-1:1;G.state.selectedCharacter.data.xp+=lr.getXpForLevel(t.value.level)*(s/10)}},handleMouseOut(){window.onmousewheel=null}};return(r,s)=>(O(),H("div",{class:"MCDLevelBadge",onMouseover:s[0]||(s[0]=(...a)=>i.handleMouseOver&&i.handleMouseOver(...a)),onMouseout:s[1]||(s[1]=(...a)=>i.handleMouseOut&&i.handleMouseOut(...a))},[(O(),H("svg",KF,[YF,q("path",{fill:"none",stroke:"#933FB9","stroke-width":"8","stroke-miterlimit":"10","stroke-dasharray":`${354*t.value.percent} 354`,"stroke-dashoffset":"0",style:{transform:"rotate(60deg)","transform-origin":"50% 50%"},d:"M9.6,40.6l51.1-29.5l51.1,29.5l0,59l-51.1,29.5L9.6,99.6L9.6,40.6z"},null,8,QF),XF,JF,ZF,q("text",eL,pe(F(e)("MCD.LevelBadge.level").toUpperCase()),1),q("text",tL,pe(t.value.level),1)]))],32))}});const rL={class:"MCDGearsContainers"},iL=["src","alt"],sL={class:"MCDArtefacts"},aL=Object.assign({name:"MCDGears"},{__name:"Gears",props:{gears:{type:Array,required:!0},hotbar:{type:Array,required:!0}},setup(n){const e=n;return(t,i)=>(O(),H("div",{class:"MCDGears",key:F(G).state.key},[q("div",rL,[(O(!0),H(He,null,ht(e.gears,(r,s)=>(O(),ze(Yh(r?Ua:sl),{key:s,item:r,itemType:Object.values(F(ft))[s],clickable:!0},null,8,["item","itemType"]))),128))]),q("img",{class:"MCDGearsSkin",src:F(Un)(`img/CharactersSkins/${F(G).state.selectedCharacter.data.skin}.png`),alt:F(G).state.selectedCharacter.data.skin},null,8,iL),be(nL),q("div",sL,[(O(!0),H(He,null,ht(e.hotbar,(r,s)=>(O(),ze(Yh(r?Ua:sl),{key:s,item:r,itemType:F(ft).ARTEFACT,hotbarSlot:s+1,clickable:!0},null,8,["item","itemType","hotbarSlot"]))),128))])]))}}),yw={ALL:{name:"all",icon:"all",filterByItem:()=>!0},MELEE:{name:"melee",icon:"melee",filterByItem:n=>n.isMelee()},ARMOR:{name:"armor",icon:"helm",filterByItem:n=>n.isArmor()},RANGED:{name:"ranged",icon:"ranged",filterByItem:n=>n.isRanged()},ARTEFACT:{name:"artefact",icon:"artefact",filterByItem:n=>n.isArtefact()},ENCHANTED:{name:"enchanted",icon:"enchanted",filterByItem:n=>n.isEnchanted()}},oL=()=>{const n=it({filter:yw.ALL}),e=Qe(()=>G.state.selectedCharacter.inventory.inventory.filter(n.filter.filterByItem));return{state:n,inventory:e}},Kn=oL();const lL={class:"MCDInventoryFilters"},cL=["onClick"],bw=Object.assign({name:"MCDInventory"},{__name:"Inventory",props:{disableEquipControl:{type:Boolean,default:!1},noDragEvent:{type:Boolean,default:!0}},setup(n){const{t:e}=_t(),t=n,i=it({dragOver:!1}),r=Qe(()=>({globalKey:G.state.key,emptySlots:(()=>{if(Kn.inventory.value.length<12)return[...Array(12-Kn.inventory.value.length).keys()];const a=Kn.inventory.value.length;return[...Array(Math.ceil(a/3)*3-a).keys()]})()})),s={setFilter(a){Kn.state.filter=a,Kn.inventory.value.length?G.setters.setItem(Kn.inventory.value[0]):G.setters.setItem(G.state.selectedCharacter.inventory.gears[0])},handleDragOver(a){t.noDragEvent||an.state.from.isStored()&&(a.preventDefault(),i.dragOver=!0)},handleDrop(){t.noDragEvent||(an.actions.dropToInventory(G.state.selectedCharacter),i.dragOver=!1)}};return(a,o)=>(O(),H("div",{class:"MCDInventory",key:r.value.globalKey},[q("div",lL,[(O(!0),H(He,null,ht(Object.values(F(yw)),(l,c)=>(O(),H("button",{key:c,class:_e(a.GenerateModifiers("MCDInventoryFilter",{Selected:F(Kn).state.filter.name===l.name})),onClick:u=>s.setFilter(l)},[q("span",null,pe(F(e)(`MCD.Inventory.filters.${l.name}`)),1),q("i",{class:_e(`icon-${l.icon}`)},null,2)],10,cL))),128))]),q("div",{class:_e(a.GenerateModifiers("MCDInventoryItems",{Over:i.dragOver})),onDragover:o[0]||(o[0]=qn((...l)=>s.handleDragOver&&s.handleDragOver(...l),["stop"])),onDragleave:o[1]||(o[1]=qn(l=>i.dragOver=!1,["stop"])),onDrop:o[2]||(o[2]=qn((...l)=>s.handleDrop&&s.handleDrop(...l),["stop"]))},[(O(!0),H(He,null,ht(F(Kn).inventory.value,(l,c)=>(O(),ze(Ua,{key:c,item:l,disableEquipControl:t.disableEquipControl,noDragOverEvent:!t.noDragEvent,noDropEvent:!t.noDragEvent},null,8,["item","disableEquipControl","noDragOverEvent","noDropEvent"]))),128)),(O(!0),H(He,null,ht(r.value.emptySlots,(l,c)=>(O(),ze(sl,{key:F(Kn).inventory.value.length+c,index:F(Kn).inventory.value.length+c,noDragEvent:!0,cross:!0,clickable:!0},null,8,["index"]))),128))],34)]))}});const uL={class:"MCDItemSelectInner"},dL={class:"MCDItemSelectFiltersContainer"},hL={key:0,class:"MCDItemSelectFilters"},fL=["title","onClick"],mL={class:"MCDItemSelectInputSearch"},pL=["placeholder"],gL=q("i",{class:"icon-search"},null,-1),vL={class:"MCDItemSelectChoiceList"},yL=["onClick"],bL=["src","alt"],EL={class:"MCDItemSelectChoiceName"},wL={key:1,class:"MCDItemSelectChoiceEvents"},CL=Object.assign({name:"MCDItemSelect"},{__name:"ItemSelect",props:{modelValue:{type:Object,required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(n){const e=[{name:"all",icon:"all"},{name:"Melee",icon:"melee"},{name:"Ranged",icon:"ranged"},{name:"Armor",icon:"helm"},{name:"Artefact",icon:"artefact"},{name:"DLC",icon:"dlc"},{name:"Event",icon:"calendar"}],t=Dn(null),{t:i}=_t(),r=Ia(n,"modelValue"),s=it({filtersList:e,filter:"all",open:!1,searchString:""}),a=Qe(()=>({filteredItemList:(()=>{const l=c=>!c.disabled&&c.id!==r.value.data.type&&c.getI18n("name").toLowerCase().indexOf(s.searchString.toLowerCase())>=0;if(r.value.isEquipped()){const c=r.value.isGear()?r.value.gearType:"Artefact";return Object.values(yt.items.value).filter(u=>u.type===c&&l(u))}return s.filter==="all"?Object.values(yt.items.value).filter(l):s.filter==="Event"?Object.values(yt.items.value).filter(c=>!!c.events.length&&l(c)).sort((c,u)=>c.events[0].startedAt.getTime()-u.events[0].startedAt.getTime()):s.filter==="DLC"?Object.values(yt.items.value).filter(c=>c.dlcId&&l(c)).sort((c,u)=>c.dlc.releasedAt.getTime()-u.dlc.releasedAt.getTime()):Object.values(yt.items.value).filter(c=>c.type===s.filter&&l(c))})()})),o={setFilter(l){s.filter=l},selectItem(l){document.getElementById("app").classList.remove("modal"),r.value.convertTo(l.data),l.type===ft.ARTEFACT||l.type!==ft.ARTEFACT&&l.rarity.length===1?(Ne.actions.setFullfilled("OpenSelector",null,null,!0),Ne.actions.setFullfilled("ChooseNewItem",!1,"InvalidItem")):Ne.actions.setFullfilled("ChooseNewItem",!0),s.open=!1},handleClickToggle(){s.open||Ne.actions.setFullfilled("OpenSelector",!0),s.open=!s.open},refreshTutorialPolygonList(){Ne.actions.refreshPolygonListForObjective("OpenSelector",[ut.ITEM_SELECTOR()])}};return At(()=>s.open,l=>{document.getElementById("app").classList[l?"add":"remove"]("modal")}),$r(()=>{window.onclick=l=>{!l.target.matches(".MCDItemSelect")&&!l.target.closest(".MCDItemSelect")&&l.target!==t.value&&(s.open=!1,window.onclick=null)}}),(l,c)=>(O(),H("div",{class:_e(l.GenerateModifiers("MCDItemSelect",{Focus:s.open,NoFilters:r.value.isEquipped()})),ref_key:"root",ref:t},[q("div",{class:"MCDItemSelectOuter",onClick:c[0]||(c[0]=(...u)=>o.handleClickToggle&&o.handleClickToggle(...u)),onMouseover:c[1]||(c[1]=(...u)=>o.refreshTutorialPolygonList&&o.refreshTutorialPolygonList(...u)),onMouseout:c[2]||(c[2]=(...u)=>o.refreshTutorialPolygonList&&o.refreshTutorialPolygonList(...u))},pe(r.value.toString()),33),tn(q("div",uL,[q("div",dL,[r.value.isEquipped()?Re("",!0):(O(),H("div",hL,[(O(!0),H(He,null,ht(s.filtersList,({name:u,icon:d},h)=>(O(),H("button",{key:h,class:_e(l.GenerateModifiers("MCDItemSelectFilter",{Selected:s.filter===u})),title:F(i)(`MCD.Inventory.filters.${u.toLowerCase()}`),onClick:qn(f=>o.setFilter(u),["stop"])},[q("i",{class:_e(`icon-${d}`)},null,2)],10,fL))),128))])),q("div",mL,[tn(q("input",{type:"text","onUpdate:modelValue":c[3]||(c[3]=u=>s.searchString=u),placeholder:F(i)("MCD.ItemSelect.search")},null,8,pL),[[ad,s.searchString]]),gL])]),q("div",vL,[(O(!0),H(He,null,ht(a.value.filteredItemList,(u,d)=>(O(),H("div",{class:"MCDItemSelectChoice",key:d,onClick:h=>o.selectItem(u)},[q("img",{class:"MCDItemSelectChoiceImage",src:u.image,alt:u.getI18n("name")},null,8,bL),q("div",EL,[q("strong",null,pe(u.getI18n("name")),1),q("span",null,[(O(!0),H(He,null,ht(u.rarity,(h,f)=>(O(),H("span",{key:f,class:_e(h.toLowerCase())},pe(F(i)(`MCD.RarityLabel.${h.toLowerCase()}`)),3))),128))]),u.dlcId?(O(),H("span",{key:0,class:_e(`${u.dlc.id.replace(/ /g,"")}`)},pe(u.dlc.id)+" DLC ",3)):Re("",!0),u.events.length?(O(),H("ul",wL,[(O(!0),H(He,null,ht(u.events,(h,f)=>(O(),H("li",{key:f,class:_e(`${h.id.replace(/ /g,"")}`)},pe(h.id)+" Event ",3))),128))])):Re("",!0)])],8,yL))),128))])],512),[[yr,s.open]])],2))}});const SL={class:"MCDArmorPropertySelectInner"},_L={class:"MCDArmorPropertySelectFiltersContainer"},xL={class:"MCDArmorPropertySelectInputSearch"},RL=["placeholder"],AL=q("i",{class:"icon-search"},null,-1),kL={class:"MCDArmorPropertySelectChoiceList"},DL=["onClick"],ML={class:"MCDArmorPropertySelectChoiceName"},PL=Object.assign({name:"MCDArmorPropertySelect"},{__name:"ArmorPropertySelect",props:{property:{type:Object,required:!0},item:{type:Pt,required:!0}},setup(n){const{t:e}=_t(),t=Dn(null),i=n,r=it({open:!1,searchString:""}),s=Qe(()=>({filteredList:(()=>{const o=i.item.data.armorproperties.map(l=>l.id);return Object.values(Sa.state.properties).filter(l=>o.indexOf(l.id)<0&&l.id!==i.property.id&&l.getI18n("name").toLowerCase().indexOf(r.searchString.toLowerCase())>=0).sort((l,c)=>l.dlc.releasedAt.getTime()-c.dlc.releasedAt.getTime()||l.getI18n("name").localeCompare(c.getI18n("name")))})()})),a={selectProperty(o){i.property.id=o.id,r.open=!1}};return At(()=>r.open,()=>{document.getElementById("app").classList.toggle("modal")}),$r(()=>{window.onclick=o=>{!o.target.matches(".MCDEnchantSelect")&&!o.target.closest(".MCDEnchantSelect")&&o.target!==t.value&&(r.open=!1,window.onclick=null)}}),(o,l)=>(O(),H("div",{class:_e(o.GenerateModifiers("MCDArmorPropertySelect",{Focus:r.open})),ref_key:"root",ref:t},[q("div",{class:"MCDArmorPropertySelectOuter",onClick:l[0]||(l[0]=c=>r.open=!r.open)},pe(i.property.armorPropertyData.getI18n("name")),1),tn(q("div",SL,[q("div",_L,[q("div",xL,[tn(q("input",{type:"text","onUpdate:modelValue":l[1]||(l[1]=c=>r.searchString=c),placeholder:F(e)("MCD.ItemSelect.search")},null,8,RL),[[ad,r.searchString]]),AL])]),q("div",kL,[(O(!0),H(He,null,ht(s.value.filteredList,(c,u)=>(O(),H("div",{class:"MCDArmorPropertySelectChoice",key:u,onClick:d=>a.selectProperty(c)},[q("div",ML,[q("strong",null,pe(c.getI18n("name")),1),c.dlcId?(O(),H("span",{key:0,class:_e(`${c.dlc.id.replace(/ /,"")}`)},pe(c.dlc.id)+" DLC ",3)):Re("",!0)])],8,DL))),128))])],512),[[yr,r.open]])],2))}});const TL=["title"],IL=Object.assign({name:"MCDRarityLabel"},{__name:"RarityLabel",props:{item:{type:Pt,required:!0}},setup(n){const{t:e}=_t(),t=n,i={handleChangeRarity(){t.item.isUnique()||(t.item.data.rarity=t.item.isCommon()?Ln.RARE:Ln.COMMON,Ne.actions.setFullfilled("ChangeRarity",!0))}};return(r,s)=>(O(),H("div",{class:_e(`MCDRarityLabel ${t.item.data.rarity.toLowerCase()} ${t.item.isUnique()?"":"pointer"}`),title:`${t.item.isUnique()?"":F(e)("MCD.RarityLabel.clickToToggle")}`,onClick:s[0]||(s[0]=(...a)=>i.handleChangeRarity&&i.handleChangeRarity(...a))},pe(F(e)(`MCD.RarityLabel.${t.item.data.rarity.toLowerCase()}`)),11,TL))}});const OL=Object.assign({name:"MCDGildedLabel"},{__name:"GildedLabel",props:{item:{type:Pt}},setup(n){const{t:e}=_t(),t=n;return(i,r)=>tn((O(),H("div",{class:"MCDGildedLabel"},pe(F(e)("MCD.GildedLabel")),513)),[[yr,t.item.isGilded()]])}});const NL={class:"MCDGildedEnchantImage"},FL=["src","alt"],LL={class:"MCDGildedEnchantName"},BL=Object.assign({name:"MCDGildedEnchant"},{__name:"GildedEnchant",props:{modelValue:{type:An},modelModifiers:{}},emits:["update:modelValue"],setup(n){const e=Ia(n,"modelValue"),t=it({ench:e.value}),i=Qe(()=>({tier:[...Array(t.ench.level).keys()].reduce(s=>`i${s}`,"")})),r={handleAddNetheriteEnchant(){G.setters.setEnchant(e.value),Ne.actions.setFullfilled("ClickNetheriteEnchantmentSlot",!0)}};return At(()=>e.value,s=>{t.ench=s}),(s,a)=>(O(),H("div",{class:"MCDGildedEnchant",onClick:a[0]||(a[0]=(...o)=>r.handleAddNetheriteEnchant&&r.handleAddNetheriteEnchant(...o))},[q("div",NL,[q("img",{src:t.ench.enchantData.image,alt:t.ench.enchantData.getI18n("name")},null,8,FL),q("span",null,pe(i.value.tier),1)]),q("span",LL,pe(t.ench.enchantData.getI18n("name")),1)]))}});const $L=["onClick"],qL=["src","alt"],UL={key:0,class:"MCDItemEnchantSlotTier"},HL=["title"],VL={class:"EnchName"},jL={class:"Tier"},WL={key:0,class:"MCDItemEnchantSlotInfo"},zL={class:"EmptySlot"},GL=Object.assign({name:"MCDItemEnchantmentChoice"},{__name:"ItemEnchantmentChoice",props:{choices:{type:Array,default:()=>[]},chunkIndex:{type:Number,required:!0}},setup(n){const{t:e}=_t(),t=n,i={hasChosen(){return t.choices.filter(({level:r})=>r>0).length===1},getChosen(){return t.choices.length-1-t.choices.indexOf(t.choices.filter(({level:r})=>r>0).pop())},isChosen(r){return r.level>0},getTier(r){return[...Array(r).keys()].reduce(s=>`i${s}`,"")},handleSelectEnchant(r){G.setters.setEnchant(r),G.state.selectedEnchantChunkIndex=t.chunkIndex,i.isChosen(r)?Ne.actions.setFullfilled("ClickUpgradedEnchantment",!0):Ne.actions.setFullfilled("ChooseEnchantmentToEdit",!0)}};return(r,s)=>(O(),H("div",{class:_e(`MCDItemEnchantmentChoice${i.hasChosen()?` selected-${i.getChosen()}`:""}`)},[(O(!0),H(He,null,ht(t.choices.slice().reverse(),(a,o)=>(O(),H("div",{class:_e(`MCDItemEnchantSlot${i.isChosen(a)?" selected":""}`),key:`enchant${o}`},[q("button",{class:_e(`MCDItemEnchant MCDItemEnchant-${o} ${a.enchantData.tier}`),onClick:l=>i.handleSelectEnchant(a)},[q("img",{src:a.enchantData.image,alt:a.enchantIdentifier},null,8,qL)],10,$L),a.level>0?(O(),H("div",UL,pe(i.getTier(a.level)),1)):Re("",!0),i.isChosen(a)?(O(),H("div",{key:1,class:"MCDItemEnchantSlotInfo",title:a.enchantData.getI18n("name")},[q("span",VL,pe(a.enchantData.getI18n("name")),1),q("span",jL,pe(F(e)(`MCD.ItemEnchantmentChoice.tiers.${a.enchantData.tier.toLowerCase()}`)),1)],8,HL)):Re("",!0)],2))),128)),i.hasChosen()?Re("",!0):(O(),H("div",WL,[q("strong",zL,pe(F(e)("MCD.ItemEnchantmentChoice.emptySlot")),1)]))],2))}});const KL={class:"MCDItemEnchantmentList"},YL={class:"MCDItemEnchantmentListTitle"},QL={class:"MCDItemEnchantmentListContainer"},XL=Object.assign({name:"MCDItemEnchantmentList"},{__name:"ItemEnchantmentList",props:{item:{type:Pt}},setup(n){const{t:e}=_t(),t=n;return(i,r)=>(O(),H("div",KL,[q("h3",YL,pe(F(e)("MCD.ItemEnchantmentList.title")),1),q("div",QL,[(O(!0),H(He,null,ht(t.item.chunkedEnchantments,(s,a)=>(O(),ze(GL,{key:`enchChoice${a}`,choices:s,chunkIndex:a},null,8,["choices","chunkIndex"]))),128))])]))}});const JL=["disabled","title"],ZL={key:1},ns=Object.assign({name:"MCDButton"},{__name:"Button",props:{icon:{type:String,default:null},label:{type:String,default:null},title:{type:String,default:null},variant:{type:String,default:"light"},size:{type:String,default:"sm"},disabled:{type:Boolean,default:!1}},emits:["click"],setup(n,{emit:e}){const t=e,i=n;return(r,s)=>(O(),H("button",{disabled:i.disabled,class:_e(r.GenerateModifiers("MCDButton",{[i.variant]:!0,[i.size]:!0})),title:i.title,onClick:s[0]||(s[0]=a=>t("click"))},[i.icon?(O(),H("i",{key:0,class:_e(`icon-${i.icon}`)},null,2)):Re("",!0),i.label?(O(),H("span",ZL,pe(i.label),1)):Re("",!0)],10,JL))}});class eB extends JE{constructor(e){super(e),this.validateBySchema(ZE,this.data),this.validateItemType(this.data),this.validateEnchantmentChunks(this.data),this.validateArmorProperties(this.data)}get items(){return[this.data]}}const tB={class:"MCDImportButton"},nB={class:"ImportedItemDetails"},rB={class:"ImportedItemDetailsInfos"},iB=Object.assign({name:"MCDImportButton"},{__name:"ImportButton",setup(n){const{t:e}=_t(),t=it({importedItem:null}),i={async importItem(){const r={title:e("Electron.dialogs.openFile.title"),buttonLabel:e("Electron.dialogs.openFile.button"),defaultPath:`${Te.homedir}/Desktop`,filters:[{name:e("Electron.dialogs.filters.json"),extensions:["json"]}],properties:["openFile"]},s=await Te.invoke("importItem",r);if(s)try{const a=JSON.parse(s);new eB(a).isValid()?(t.importedItem=new Pt(a),br.actions.show("ImportConfirmModal")):br.actions.show("ImportErrorModal")}catch{br.actions.show("ImportErrorModal")}},handleModalConfirm(){G.state.selectedCharacter.inventory.addItem(t.importedItem),t.importedItem=null,br.actions.hide("ConfirmImportModal")}};return(r,s)=>(O(),H("div",tB,[be(ns,{class:"MCDButtonImport",icon:"import",title:F(e)("MCD.ImportButton.label"),size:"xs",onClick:i.importItem},null,8,["title","onClick"]),be(il,{name:"ImportConfirmModal",title:F(e)("MCD.ImportButton.modal.confirm.title"),acceptLabel:F(e)("MCD.ImportButton.modal.confirm.okLabel"),refuseLabel:F(e)("MCD.ImportButton.modal.confirm.cancelLabel"),onAccept:i.handleModalConfirm},{default:Ve(()=>[q("div",nB,[t.importedItem?(O(),ze(Ua,{key:0,item:t.importedItem,noDragEvent:!0},null,8,["item"])):Re("",!0),q("div",rB,[q("p",null,pe(F(e)("MCD.ImportButton.modal.confirm.content1")),1),q("p",null,pe(F(e)("MCD.ImportButton.modal.confirm.content2")),1)])])]),_:1},8,["title","acceptLabel","refuseLabel","onAccept"]),be(il,{name:"ImportErrorModal",title:F(e)("MCD.ImportButton.modal.error.title"),refuseOnly:!0,refuseLabel:F(e)("MCD.ImportButton.modal.error.cancelLabel")},{default:Ve(()=>[q("p",null,pe(F(e)("MCD.ImportButton.modal.error.content")),1)]),_:1},8,["title","refuseLabel"])]))}});const sB={class:"MCDExportButton"},aB=Object.assign({name:"MCDExportButton"},{__name:"ExportButton",props:{item:{type:Pt,required:!0}},setup(n){const{t:e}=_t(),t=n,i={async exportItem(){const r={title:e("Electron.dialogs.saveFile.title"),buttonLabel:e("Electron.dialogs.saveFile.button"),defaultPath:`${Te.homedir}/Desktop/${t.item.itemData.getI18n("name")}.json`,filters:[{name:e("Electron.dialogs.filters.json"),extensions:["json"]}],properties:[]};await Te.invoke("exportItem",r,JSON.stringify(t.item.data,null,2))}};return(r,s)=>(O(),H("div",sB,[be(ns,{class:"MCDButtonExport",icon:"export",title:F(e)("MCD.ExportButton.label"),size:"xs",onClick:i.exportItem},null,8,["title","onClick"])]))}});const oB={class:"MCDCloneButton"},lB=Object.assign({name:"MCDCloneButton"},{__name:"CloneButton",props:{item:{type:Pt,required:!0}},setup(n){const{t:e}=_t(),t=n,i={cloneItem(){t.item.isStored()?(G.state.selectedCharacter.storageChest.addItem(t.item.clone()),G.setters.setItem(G.state.selectedCharacter.storageChest.items[0])):(G.state.selectedCharacter.inventory.addItem(t.item.clone()),Kn.inventory.value.length?G.setters.setItem(Kn.inventory.value[0]):G.setters.setItem(G.state.selectedCharacter.inventory.gears[0]))}};return(r,s)=>(O(),H("div",oB,[be(ns,{class:"MCDButtonClone",icon:"duplicate",title:F(e)("MCD.CloneButton.label"),size:"xs",onClick:i.cloneItem},null,8,["title","onClick"])]))}});const cB={class:"MCDDeleteButton"},uB=Object.assign({name:"MCDDeleteButton"},{__name:"DeleteButton",props:{item:{type:Pt,required:!0}},setup(n){const{t:e}=_t(),t=n,i={removeItem(){t.item.isStored()?(G.state.selectedCharacter.storageChest.removeItem(t.item),G.setters.setItem(G.state.selectedCharacter.storageChest.items[0])):(G.state.selectedCharacter.inventory.removeItem(t.item),Kn.inventory.value.length?G.setters.setItem(Kn.inventory.value[0]):G.setters.setItem(G.selectedCharacter.inventory.gears[0]))}};return(r,s)=>(O(),H("div",cB,[be(ns,{class:"MCDButtonDelete",icon:"delete",title:F(e)("MCD.DeleteButton.label"),size:"xs",onClick:i.removeItem},null,8,["title","onClick"])]))}});const dB={class:"MCDItemDetailsInfos"},hB={class:"MCDItemTitle"},fB={class:"MCDItemTitleContainer"},mB={class:"MCDItemTitleContainerRow"},pB={key:0,class:"MCDItemArmorProperties"},gB=["src","alt"],vB={key:0},yB={class:"MCDItemImage"},bB=["src","alt"],EB={class:"MCDItemDetailsActions"},Ew=Object.assign({name:"MCDItemDetails"},{__name:"ItemDetails",props:{item:{type:Pt},enableClone:{type:Boolean,default:!0},enableDelete:{type:Boolean,default:!0}},setup(n){const e=n,t={setEnchantments(i){e.item.data.enchantments=i},handleMouseOver(){window.onmousewheel=i=>{const r=i.deltaY>0?-1:1;e.item.data.power=Math.max(1,e.item.data.power+r/10),Ne.actions.setFullfilled("ChangeLevel",!0)}},handleMouseOut(){window.onmousewheel=null}};return(i,r)=>e.item.data.type?(O(),H("div",{class:"MCDItemDetails",key:e.item.$key},[q("div",dB,[q("div",hB,[q("div",fB,[q("div",mB,[q("span",{class:"MCDItemTitlePower",onMouseover:r[0]||(r[0]=(...s)=>t.handleMouseOver&&t.handleMouseOver(...s)),onMouseout:r[1]||(r[1]=(...s)=>t.handleMouseOut&&t.handleMouseOut(...s))},pe(e.item.powerLevel),33),q("i",{class:_e(`icon-${e.item.itemType.toLowerCase()}`)},null,2)]),be(IL,{item:e.item},null,8,["item"]),be(OL,{item:e.item},null,8,["item"])]),be(CL,{modelValue:e.item,"onUpdate:modelValue":r[2]||(r[2]=s=>e.item=s)},null,8,["modelValue"]),e.item.isArmor()?(O(),H("ul",pB,[(O(!0),H(He,null,ht(e.item.armorproperties,(s,a)=>(O(),H("li",{class:_e(`MCDItemArmorPropertiesItem ${s.rarity.toLowerCase()}`),key:a},[q("img",{class:"MCDItemArmorPropertiesRarity",src:F(Un)(`img/UI/${s.rarity.toLowerCase()}.png`),alt:s.rarity},null,8,gB),e.item.data.type!=="MysteryArmor"?(O(),H("span",vB,pe(s.armorPropertyData.getI18n("name")),1)):(O(),ze(PL,{key:1,property:s,item:e.item},null,8,["property","item"]))],2))),128))])):Re("",!0),e.item.itemType!=="Artefact"?(O(),ze(BL,{key:1,modelValue:e.item.netheriteEnchant,"onUpdate:modelValue":r[3]||(r[3]=s=>e.item.netheriteEnchant=s)},null,8,["modelValue"])):Re("",!0)]),q("div",yB,[q("img",{src:e.item.itemData.image,alt:e.item.itemData.getI18n("name")},null,8,bB),q("div",EB,[F(G).state.selectedCharacter.inventory.isFull()?Re("",!0):(O(),ze(iB,{key:0})),be(aB,{item:e.item},null,8,["item"]),e.enableClone?(O(),ze(lB,{key:1,item:e.item},null,8,["item"])):Re("",!0),e.enableDelete?(O(),ze(uB,{key:2,item:e.item},null,8,["item"])):Re("",!0)])])]),e.item.itemType!=="Artefact"?(O(),ze(XL,{key:0,item:e.item,onInput:t.setEnchantments},null,8,["item","onInput"])):Re("",!0)])):Re("",!0)}});const wB={class:"MCDEnchantSelectInner"},CB={class:"MCDEnchantSelectFiltersContainer"},SB={class:"MCDEnchantSelectInputSearch"},_B=["placeholder"],xB=q("i",{class:"icon-search"},null,-1),RB={class:"MCDEnchantSelectChoiceList"},AB=["onClick"],kB=["src","alt"],DB={class:"MCDEnchantSelectChoiceName"},MB=Object.assign({name:"MCDEnchantSelect"},{__name:"EnchantSelect",props:Zc({unallowedEnchants:{type:Array,default:()=>[]}},{modelValue:{type:An},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=Dn(null),{t}=_t(),i=Ia(n,"modelValue"),r=n,s=it({open:!1,searchString:""}),a=Qe(()=>({filteredList:(()=>{const{type:l,soulgathering:c,activeEnchants:u}=G.state.selectedItem.itemData,d=m=>m.soulgathering?m.soulgathering===c:!0,h=m=>u?u.indexOf(m.id)<0:!0,f=m=>G.state.selectedItem.weaponType&&m.weaponType?G.state.selectedItem.weaponType===m.weaponType:!0;return Object.values($s.state.enchants).filter(m=>!r.unallowedEnchants.includes(m.id)&&m.id!==i.value.id&&m.getI18n("name").toLowerCase().indexOf(s.searchString.toLowerCase())>=0&&m.type.indexOf(l)>=0&&d(m)&&h(m)&&f(m)).sort((m,p)=>(m.id==="Unset"?-1:1)||m.dlc.releasedAt.getTime()-p.dlc.releasedAt.getTime()||m.getI18n("name").localeCompare(p.getI18n("name")))})()})),o={selectEnchant(l){i.value.id=l.id,Ne.actions.setFullfilled("ChooseNewEnchantment",!0),G.state.selectedItem.$key+=1,l.id==="Unset"?(i.value.level=0,Ne.actions.setFullfilled("ChooseUnsetEnchantment",!0)):(Ne.actions.setFullfilled("ChooseUnsetEnchantment",!1,"InvalidSelection"),Ne.state.stepData.currentObjective.onError=()=>{s.open=!0}),s.open=!1},handleClickToggle(){s.open||Ne.actions.setFullfilled("OpenSelector",!0),s.open=!s.open}};return $r(()=>{window.onclick=l=>{!l.target.matches(".MCDEnchantSelect")&&!l.target.closest(".MCDEnchantSelect")&&l.target!==e.value&&(s.open=!1,window.onclick=null)}}),(l,c)=>(O(),H("div",{class:_e(l.GenerateModifiers("MCDEnchantSelect",{Focus:s.open})),ref_key:"root",ref:e},[q("div",{class:"MCDEnchantSelectOuter",onClick:c[0]||(c[0]=(...u)=>o.handleClickToggle&&o.handleClickToggle(...u))},pe(i.value.toString()),1),tn(q("div",wB,[q("div",CB,[q("div",SB,[tn(q("input",{type:"text","onUpdate:modelValue":c[1]||(c[1]=u=>s.searchString=u),placeholder:F(t)("MCD.ItemSelect.search")},null,8,_B),[[ad,s.searchString]]),xB])]),q("div",RB,[(O(!0),H(He,null,ht(a.value.filteredList,(u,d)=>(O(),H("div",{class:"MCDEnchantSelectChoice",key:d,onClick:h=>o.selectEnchant(u)},[q("img",{class:"MCDEnchantSelectChoiceImage",src:u.image,alt:u.getI18n("name")},null,8,kB),q("div",DB,[q("strong",null,pe(u.getI18n("name")),1),q("span",null,pe(F(t)(`MCD.ItemEnchantmentChoice.tiers.${u.tier.toLowerCase()}`)),1),u.dlcId?(O(),H("span",{key:0,class:_e(`${u.dlc.id.replace(/ /,"")}`)},pe(u.dlc.id)+" DLC ",3)):Re("",!0)])],8,AB))),128))])],512),[[yr,s.open]])],2))}});const PB={class:"MCDEnchantmentEditor"},TB={key:0,class:"MCDEnchantmentEditorContainer"},IB={class:"MCDEnchantmentEditorLeft"},OB={key:0,class:"TierContainer"},NB=["disabled","checked","id","name","onClick"],FB=["for"],LB={key:0,class:"icon-checked"},BB={key:1,class:"tier"},$B={class:"MCDEnchantmentEditorRight"},qB=["src","alt"],UB={key:0,class:"MCDEnchantmentEditorCost"},HB=q("span",null,"Enchant Cost",-1),VB=["src"],ww=Object.assign({name:"MCDEnchantmentEditor"},{__name:"EnchantmentEditor",setup(n){const e=Dn(xi().uid),{t}=_t(),i={setLevel(r,s){if(r.target.checked){const a=G.state.selectedEnchant.getInvestmentCostForLevel(s);G.state.selectedCharacter.enchantmentPoints>=a?G.state.selectedEnchant.level=s:Ut.actions.error(t("MCD.EnchantmentEditor.costError",{cost:a,pluralize:a>=1?"s":""}))}else G.state.selectedEnchant.level=s-1;G.state.selectedEnchant.level===3&&Ne.actions.setFullfilled("UpgradeEnchantment",!0),G.state.selectedEnchant.level===0&&Ne.actions.setFullfilled("DowngradeEnchantment",!0)},getUpgradeTier(r){return[...Array(r).keys()].reduce(s=>`${s}i`,"")},closeEditor(){G.setters.setEnchant(null),Ne.actions.setFullfilled("CloseEditor",!0)}};return(r,s)=>tn((O(),H("div",PB,[F(G).state.selectedEnchant&&F(G).state.selectedEnchant.enchantIdentifier?(O(),H("div",TB,[q("h2",null,[be(MB,{modelValue:F(G).state.selectedEnchant,"onUpdate:modelValue":s[0]||(s[0]=a=>F(G).state.selectedEnchant=a),unallowedEnchants:F(G).actions.getUnallowedEnchantForChunk()},null,8,["modelValue","unallowedEnchants"]),be(ns,{icon:"close",onClick:i.closeEditor,variant:"dark"},null,8,["onClick"])]),q("div",IB,[q("p",null,pe(F(G).state.selectedEnchant.enchantData.getI18n("desc")),1),F(G).state.selectedEnchant.enchantIdentifier!=="Unset"?(O(),H("div",OB,[q("h3",null,pe(F(t)("MCD.EnchantmentEditor.upgradeTiers")),1),q("ul",null,[(O(!0),H(He,null,ht(F(G).state.selectedEnchant.enchantData.getI18n("level"),(a,o)=>(O(),H("li",{key:`${F(G).state.selectedEnchant.enchantIdentifier}lvl${o}`,class:_e({checked:F(G).state.selectedEnchant.level>=o+1})},[q("input",{disabled:F(G).state.selectedEnchant.level<o,checked:F(G).state.selectedEnchant.level>=o+1,id:`${F(G).state.selectedEnchant.enchantIdentifier}Level${o}_${e.value}`,type:"checkbox",name:`levelGroup${e.value}`,onClick:qn(l=>i.setLevel(l,o+1),["stop"])},null,8,NB),q("label",{for:`${F(G).state.selectedEnchant.enchantIdentifier}Level${o}_${e.value}`},[F(G).state.selectedEnchant.level>=o+1?(O(),H("i",LB)):(O(),H("span",BB,[q("span",null,pe(i.getUpgradeTier(o+1)),1)])),Lt(" "+pe(a),1)],8,FB)],2))),128))])])):Re("",!0)]),q("div",$B,[q("img",{src:F(G).state.selectedEnchant.enchantData.image,alt:F(G).state.selectedEnchant.enchantIdentifier},null,8,qB),!F(G).state.selectedEnchant.netherite&&F(G).state.selectedEnchant.level<3?(O(),H("div",UB,[HB,q("p",null,[q("img",{src:F(Un)("img/UI/EnchantmentPoint.png"),alt:"Enchantment point"},null,8,VB),Lt(" "+pe(F(G).state.selectedEnchant.getInvestmentCostForLevel(F(G).state.selectedEnchant.level+1)),1)])])):Re("",!0)])])):Re("",!0)],512)),[[yr,!!F(G).state.selectedEnchant&&!!F(G).state.selectedEnchant.enchantIdentifier]])}}),jB=Object.assign({name:"HomePage"},{__name:"index",props:{character:{type:bs,required:!0}},setup(n){const e=n;return $r(()=>{G.setters.setItem(e.character.inventory.inventory[0]??e.character.inventory.gears[0])}),(t,i)=>(O(),H(He,null,[(O(),ze(pw,{character:e.character,key:F(G).state.key},{header:Ve(()=>[be(ph,{modelValue:e.character.currencies.Emerald,"onUpdate:modelValue":i[0]||(i[0]=r=>e.character.currencies.Emerald=r),image:"img/UI/Emerald.png",imageAlt:"Emerald"},null,8,["modelValue"]),be(ph,{modelValue:e.character.currencies.Gold,"onUpdate:modelValue":i[1]||(i[1]=r=>e.character.currencies.Gold=r),image:"img/UI/Gold.png",imageAlt:"Gold"},null,8,["modelValue"]),be(ph,{modelValue:e.character.enchantmentPoints,image:"img/UI/EnchantmentPoint.png",imageAlt:"EnchantmentPoint",readonly:""},null,8,["modelValue"])]),Column1:Ve(()=>[be(aL,{gears:F(G).state.selectedCharacter.inventory.gears,hotbar:F(G).state.selectedCharacter.inventory.hotbar},null,8,["gears","hotbar"])]),Column2:Ve(()=>[be(bw)]),Column3:Ve(()=>[F(G).state.selectedItem?(O(),ze(Ew,{key:0,item:F(G).state.selectedItem},null,8,["item"])):Re("",!0)]),default:Ve(()=>[be(ww)]),_:1},8,["character"])),e.character.corrupted.length?(O(),ze(gw,{key:0,character:e.character},null,8,["character"])):Re("",!0)],64))}});const WB={class:"MCDStorageChestTitle"},zB=Object.assign({name:"MCDStorageChest"},{__name:"StorageChest",setup(n){const{t:e}=_t(),t=it({dragOver:!1}),i=Qe(()=>{const s=G.state.key,a=G.state.selectedCharacter.storageChest.items,o=a.length,l=a.length<12?[...Array(12-a.length).keys()]:[...Array(Math.ceil(o/3)*3-o).keys()];return{globalKey:s,storageChest:a,emptySlots:l}}),r={handleDragOver(s){an.state.from.isStored()||(s.preventDefault(),t.dragOver=!0)},handleDrop(){an.actions.dropToStorageChest(G.state.selectedCharacter),t.dragOver=!1}};return(s,a)=>(O(),H("div",{class:"MCDStorageChest",key:i.value.globalKey},[q("div",WB,pe(F(e)("App.Navigation.storageChest")),1),q("div",{class:_e(s.GenerateModifiers("MCDStorageChestItems",{Over:t.dragOver})),onDragover:a[0]||(a[0]=qn((...o)=>r.handleDragOver&&r.handleDragOver(...o),["stop"])),onDragleave:a[1]||(a[1]=qn(o=>t.dragOver=!1,["stop"])),onDrop:a[2]||(a[2]=qn((...o)=>r.handleDrop&&r.handleDrop(...o),["stop"]))},[(O(!0),H(He,null,ht(i.value.storageChest,(o,l)=>(O(),ze(Ua,{key:l,item:o,disableEquipControl:!0,noDragOverEvent:!0,noDropEvent:!0},null,8,["item"]))),128)),(O(!0),H(He,null,ht(i.value.emptySlots,(o,l)=>(O(),ze(sl,{key:i.value.storageChest.length+l,noDragEvent:!0,cross:!0}))),128))],34)]))}}),GB={class:"StorageChestPage"},KB=Object.assign({name:"StorageChestPage"},{__name:"index",props:{character:{type:bs,required:!0}},setup(n){const e=n;return $r(()=>{G.setters.setItem(e.character.inventory.inventory[0])}),(t,i)=>(O(),H("section",GB,[(O(),ze(pw,{character:e.character,key:F(G).state.key},{Column1:Ve(()=>[be(zB)]),Column2:Ve(()=>[be(bw,{disableEquipControl:!0,noDragEvent:!1})]),Column3:Ve(()=>[F(G).state.selectedItem?(O(),ze(Ew,{key:0,item:F(G).state.selectedItem},null,8,["item"])):Re("",!0)]),default:Ve(()=>[be(ww)]),_:1},8,["character"])),e.character.corrupted.length?(O(),ze(gw,{key:0,character:e.character},null,8,["character"])):Re("",!0)]))}}),YB=()=>{const n=it({ancientMobList:[]}),e=Qe(()=>n.ancientMobList.reduce((i,r)=>i.merge(r.runeList),new Ci([])));return{state:n,runeList:e,actions:{addMob(i){n.ancientMobList.push(i)},removeMob(i){n.ancientMobList=n.ancientMobList.filter(r=>r.id!==i.id)},isMobPicked(i){return!!n.ancientMobList.filter(r=>r.id===i.id).length},getBestStartingItemList(i){return au(Object.values(yt.itemsButArtefacts.value).map((r,s)=>r.toGameData(s)).sort((r,s)=>i.countContains(s.runeList)-i.countContains(r.runeList)).filter((r,s,a)=>i.countContains(r.runeList)>=i.countContains(a[0].runeList)))},getNextItemListExcludingTypes(i,r){return au(Object.values(yt.items.value).filter(s=>!(r??[]).includes(s.type)).map((s,a)=>s.toGameData(a)).sort((s,a)=>i.countContains(a.runeList)-i.countContains(s.runeList)).filter((s,a,o)=>i.countContains(s.runeList)>=i.countContains(o[0].runeList)))},findOffers(){const i=u=>{const[d]=u.filter(p=>p&&p.itemType===ft.MELEE),[h]=u.filter(p=>p&&p.itemType===ft.RANGED),[f]=u.filter(p=>p&&p.itemType===ft.ARMOR),[m]=u.filter(p=>p&&p.itemType===ft.ARTEFACT);return[d,h,f,m]},r=e.value;if(r.isEmpty()||r.length>11)return[null,null,null,null];const s=this.getBestStartingItemList(r);let a=s.shift()??null,o=null,l=null,c=null;for(;a;){const u=r.sub(a.runeList);if(u.isEmpty())return i([a,o,l,c]);const d=this.getNextItemListExcludingTypes(u,[a.itemType]);for(o=d.shift()??null;o;){const h=u.sub(o.runeList);if(h.isEmpty())return i([a,o,l,c]);const f=this.getNextItemListExcludingTypes(h,[a.itemType,o.itemType]);for(l=f.shift()??null;l;){const m=h.sub(l.runeList);if(m.isEmpty())return i([a,o,l,c]);const p=this.getNextItemListExcludingTypes(h,[a.itemType,o.itemType,l.itemType]);for(c=p.shift()??null;c;){if(m.sub(c.runeList).isEmpty())return i([a,o,l,c]);c=p.shift()||null}l=f.shift()||null}o=d.shift()||null}a=s.shift()||null}return[null,null,null,null]}}}},Mr=YB();const QB=["for"],XB=["id","checked","value"],JB=["src","alt","title"],ZB={class:"MCDAncientMobInfos"},e$=Object.assign({name:"MCDAncientMob"},{__name:"AncientMob",props:{ancientMob:{type:fw,required:!0}},setup(n){const e=Dn(xi().uid),t=n,i=Qe(()=>({isSelected:Mr.actions.isMobPicked(t.ancientMob)})),r={handleSelectMob(){i.value.isSelected?Mr.actions.removeMob(t.ancientMob):Mr.actions.addMob(t.ancientMob)}};return(s,a)=>(O(),H("label",{for:`ancientMob${e.value}`,class:_e(s.GenerateModifiers("MCDAncientMob",{Selected:i.value.isSelected}))},[q("input",{type:"checkbox",id:`ancientMob${e.value}`,checked:i.value.isSelected,value:t.ancientMob.id,onClick:a[0]||(a[0]=(...o)=>r.handleSelectMob&&r.handleSelectMob(...o))},null,8,XB),q("img",{class:"MCDAncientMobImage",src:t.ancientMob.image,alt:t.ancientMob.id,title:t.ancientMob.getI18n("name")},null,8,JB),q("div",ZB,[q("h4",null,pe(t.ancientMob.getI18n("name")),1),be(yu,{list:t.ancientMob.runeList},null,8,["list"])])],10,QB))}});const t$={class:"AncientHuntsPage Page"},n$={class:"AncientHuntsPage--Left"},r$={class:"AncientHuntsPage--Right"},i$={key:0,class:"AncientHuntsPageRuneList"},s$={key:0,class:"AncientHuntsPageRuneList--ResidualList"},a$={class:"AncientHuntsPageItemList"},o$=Object.assign({name:"AncientHuntsPage"},{__name:"index",setup(n){const{t:e}=_t(),t=it({foundOffers:[null,null,null,null]}),i=Qe(()=>{const s=Object.values(mw.state.mobs).sort((c,u)=>c.getI18n("name").localeCompare(u.getI18n("name"))),a=t.foundOffers.filter(c=>!!c),o=Mr.runeList.value,l=t.foundOffers.filter(c=>!!c).reduce((c,u)=>c.add(u.runeList),new Ci).sub(o);return{mobList:s,foundOffersWithoutNull:a,invocationRuneList:o,residualRuneList:l}}),r={addOffersToInventory(){let s=0;const a=i.value.foundOffersWithoutNull.slice();G.state.selectedCharacter.inventory.getAvailableSlotCount()>=a.length?(a.forEach(o=>{G.state.selectedCharacter.inventory.addItem(o),s+=1}),Ut.actions.success(e("MCD.AncientHunts.successMessage",{count:s,pluralize:s>1?"s":""})),t.foundOffers=Mr.actions.findOffers()):Ut.actions.error(e("MCD.AncientHunts.errorMessage"))},refresh(){Mr.state.ancientMobList.length&&(t.foundOffers=Mr.actions.findOffers())},reset(){Mr.state.ancientMobList=[]}};return $r(()=>{r.reset()}),At(()=>Mr.state,()=>{t.foundOffers=Mr.actions.findOffers()},{deep:!0}),(s,a)=>(O(),H("main",t$,[q("div",n$,[(O(!0),H(He,null,ht(i.value.mobList,(o,l)=>(O(),ze(e$,{key:l,ancientMob:o},null,8,["ancientMob"]))),128))]),q("div",r$,[be(ns,{class:"AncientHuntsPageButtonReset",icon:"close",title:F(e)("MCD.AncientHunts.reset"),onClick:r.reset},null,8,["title","onClick"]),be(ns,{class:"AncientHuntsPageButtonReload",icon:"reload",title:F(e)("MCD.AncientHunts.refresh"),onClick:r.refresh},null,8,["title","onClick"]),F(Mr).runeList.value.length?(O(),H("div",i$,[q("h6",null,pe(F(e)("MCD.AncientHunts.invocationRunes")),1),be(yu,{list:i.value.invocationRuneList,compress:!0},null,8,["list"]),i.value.residualRuneList.isEmpty()?Re("",!0):(O(),H("div",s$,[q("h6",null,pe(F(e)("MCD.AncientHunts.residualRunes",{pluralize:i.value.residualRuneList.length>1?"s":""})),1),be(yu,{list:i.value.residualRuneList,compress:!0},null,8,["list"])]))])):Re("",!0),q("div",a$,[(O(!0),H(He,null,ht(t.foundOffers,(o,l)=>(O(),ze(Yh(o?Ua:sl),{key:l,item:o,itemType:Object.values(F(ft))[l],showRuneList:!0,noDragEvent:!0},null,8,["item","itemType"]))),128))]),be(ns,{class:"AncientHuntsPageButtonAdd",variant:"success",label:F(e)("MCD.AncientHunts.button"),disabled:!i.value.foundOffersWithoutNull.length,onClick:r.addOffersToInventory},null,8,["label","disabled","onClick"])])]))}});let Mf=[],Cw=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?Cw:Mf).push(t=t+n[e])})();function l$(n){if(n<768)return!1;for(let e=0,t=Mf.length;;){let i=e+t>>1;if(n<Mf[i])t=i;else if(n>=Cw[i])e=i+1;else return!0;if(e==t)return!1}}function fy(n){return n>=127462&&n<=127487}const my=8205;function c$(n,e,t=!0,i=!0){return(t?Sw:u$)(n,e,i)}function Sw(n,e,t){if(e==n.length)return e;e&&_w(n.charCodeAt(e))&&xw(n.charCodeAt(e-1))&&e--;let i=gh(n,e);for(e+=py(i);e<n.length;){let r=gh(n,e);if(i==my||r==my||t&&l$(r))e+=py(r),i=r;else if(fy(r)){let s=0,a=e-2;for(;a>=0&&fy(gh(n,a));)s++,a-=2;if(s%2==0)break;e+=2}else break}return e}function u$(n,e,t){for(;e>0;){let i=Sw(n,e-2,t);if(i<e)return i;e--}return 0}function gh(n,e){let t=n.charCodeAt(e);if(!xw(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return _w(i)?(t-55296<<10)+(i-56320)+65536:t}function _w(n){return n>=56320&&n<57344}function xw(n){return n>=55296&&n<56320}function py(n){return n<65536?1:2}class dt{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=Ha(this,e,t);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(t,this.length,r,1),Zr.from(r,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Ha(this,e,t);let i=[];return this.decompose(e,t,i,0),Zr.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new Ho(this),s=new Ho(e);for(let a=t,o=t;;){if(r.next(a),s.next(a),a=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(o+=r.value.length,r.done||o>=i)return!0}}iter(e=1){return new Ho(this,e)}iterRange(e,t=this.length){return new Rw(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Aw(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?dt.empty:e.length<=32?new Kt(e):Zr.from(Kt.split(e,[]))}}class Kt extends dt{constructor(e,t=d$(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,r){for(let s=0;;s++){let a=this.text[s],o=r+a.length;if((t?i:o)>=e)return new h$(r,o,i,a);r=o+1,i++}}decompose(e,t,i,r){let s=e<=0&&t>=this.length?this:new Kt(gy(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(r&1){let a=i.pop(),o=$c(s.text,a.text.slice(),0,s.length);if(o.length<=32)i.push(new Kt(o,a.length+s.length));else{let l=o.length>>1;i.push(new Kt(o.slice(0,l)),new Kt(o.slice(l)))}}else i.push(s)}replace(e,t,i){if(!(i instanceof Kt))return super.replace(e,t,i);[e,t]=Ha(this,e,t);let r=$c(this.text,$c(i.text,gy(this.text,0,e)),t),s=this.length+i.length-(t-e);return r.length<=32?new Kt(r,s):Zr.from(Kt.split(r,[]),s)}sliceString(e,t=this.length,i=`
`){[e,t]=Ha(this,e,t);let r="";for(let s=0,a=0;s<=t&&a<this.text.length;a++){let o=this.text[a],l=s+o.length;s>e&&a&&(r+=i),e<l&&t>s&&(r+=o.slice(Math.max(0,e-s),t-s)),s=l+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(t.push(new Kt(i,r)),i=[],r=-1);return r>-1&&t.push(new Kt(i,r)),t}}class Zr extends dt{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,r){for(let s=0;;s++){let a=this.children[s],o=r+a.length,l=i+a.lines-1;if((t?l:o)>=e)return a.lineInner(e,t,i,r);r=o+1,i=l+1}}decompose(e,t,i,r){for(let s=0,a=0;a<=t&&s<this.children.length;s++){let o=this.children[s],l=a+o.length;if(e<=l&&t>=a){let c=r&((a<=e?1:0)|(l>=t?2:0));a>=e&&l<=t&&!c?i.push(o):o.decompose(e-a,t-a,i,c)}a=l+1}}replace(e,t,i){if([e,t]=Ha(this,e,t),i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let a=this.children[r],o=s+a.length;if(e>=s&&t<=o){let l=a.replace(e-s,t-s,i),c=this.lines-a.lines+l.lines;if(l.lines<c>>5-1&&l.lines>c>>5+1){let u=this.children.slice();return u[r]=l,new Zr(u,this.length-(t-e)+i.length)}return super.replace(s,o,l)}s=o+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=Ha(this,e,t);let r="";for(let s=0,a=0;s<this.children.length&&a<=t;s++){let o=this.children[s],l=a+o.length;a>e&&s&&(r+=i),e<l&&t>a&&(r+=o.sliceString(e-a,t-a,i)),a=l+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Zr))return 0;let i=0,[r,s,a,o]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,s+=t){if(r==a||s==o)return i;let l=this.children[r],c=e.children[s];if(l!=c)return i+l.scanIdentical(c,t);i+=l.length+1}}static from(e,t=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let f of e)i+=f.lines;if(i<32){let f=[];for(let m of e)m.flatten(f);return new Kt(f,t)}let r=Math.max(32,i>>5),s=r<<1,a=r>>1,o=[],l=0,c=-1,u=[];function d(f){let m;if(f.lines>s&&f instanceof Zr)for(let p of f.children)d(p);else f.lines>a&&(l>a||!l)?(h(),o.push(f)):f instanceof Kt&&l&&(m=u[u.length-1])instanceof Kt&&f.lines+m.lines<=32?(l+=f.lines,c+=f.length+1,u[u.length-1]=new Kt(m.text.concat(f.text),m.length+1+f.length)):(l+f.lines>r&&h(),l+=f.lines,c+=f.length+1,u.push(f))}function h(){l!=0&&(o.push(u.length==1?u[0]:Zr.from(u,c)),c=-1,l=u.length=0)}for(let f of e)d(f);return h(),o.length==1?o[0]:new Zr(o,t)}}dt.empty=new Kt([""],0);function d$(n){let e=-1;for(let t of n)e+=t.length+1;return e}function $c(n,e,t=0,i=1e9){for(let r=0,s=0,a=!0;s<n.length&&r<=i;s++){let o=n[s],l=r+o.length;l>=t&&(l>i&&(o=o.slice(0,i-r)),r<t&&(o=o.slice(t-r)),a?(e[e.length-1]+=o,a=!1):e.push(o)),r=l+1}return e}function gy(n,e,t){return $c(n,[""],e,t)}class Ho{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Kt?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],a=s>>1,o=r instanceof Kt?r.text.length:r.children.length;if(a==(t>0?o:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof Kt){let l=r.text[a+(t<0?-1:0)];if(this.offsets[i]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=r.children[a+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof Kt?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Rw{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new Ho(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=i?r:t<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Aw{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(dt.prototype[Symbol.iterator]=function(){return this.iter()},Ho.prototype[Symbol.iterator]=Rw.prototype[Symbol.iterator]=Aw.prototype[Symbol.iterator]=function(){return this});class h${constructor(e,t,i,r){this.from=e,this.to=t,this.number=i,this.text=r}get length(){return this.to-this.from}}function Ha(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function En(n,e,t=!0,i=!0){return c$(n,e,t,i)}function f$(n){return n>=56320&&n<57344}function m$(n){return n>=55296&&n<56320}function Qn(n,e){let t=n.charCodeAt(e);if(!m$(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return f$(i)?(t-55296<<10)+(i-56320)+65536:t}function wp(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function ei(n){return n<65536?1:2}const Pf=/\r\n?|\n/;var $n=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}($n||($n={}));class ai{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,r=0;t<this.sections.length;){let s=this.sections[t++],a=this.sections[t++];a<0?(e(i,r,s),r+=s):r+=a,i+=s}}iterChangedRanges(e,t=!1){Tf(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];r<0?e.push(i,r):e.push(r,i)}return new ai(e)}composeDesc(e){return this.empty?e:e.empty?this:kw(this,e)}mapDesc(e,t=!1){return e.empty?this:If(this,e,t)}mapPos(e,t=-1,i=$n.Simple){let r=0,s=0;for(let a=0;a<this.sections.length;){let o=this.sections[a++],l=this.sections[a++],c=r+o;if(l<0){if(c>e)return s+(e-r);s+=o}else{if(i!=$n.Simple&&c>=e&&(i==$n.TrackDel&&r<e&&c>e||i==$n.TrackBefore&&r<e||i==$n.TrackAfter&&c>e))return null;if(c>e||c==e&&t<0&&!o)return e==r||t<0?s:s+l;s+=l}r=c}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,t=e){for(let i=0,r=0;i<this.sections.length&&r<=t;){let s=this.sections[i++],a=this.sections[i++],o=r+s;if(a>=0&&r<=t&&o>=e)return r<e&&o>t?"cover":!0;r=o}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ai(e)}static create(e){return new ai(e)}}class ln extends ai{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Tf(this,(t,i,r,s,a)=>e=e.replace(r,r+(i-t),a),!1),e}mapDesc(e,t=!1){return If(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let r=0,s=0;r<t.length;r+=2){let a=t[r],o=t[r+1];if(o>=0){t[r]=o,t[r+1]=a;let l=r>>1;for(;i.length<l;)i.push(dt.empty);i.push(a?e.slice(s,s+a):dt.empty)}s+=a}return new ln(t,i)}compose(e){return this.empty?e:e.empty?this:kw(this,e,!0)}map(e,t=!1){return e.empty?this:If(this,e,t,!0)}iterChanges(e,t=!1){Tf(this,e,t)}get desc(){return ai.create(this.sections)}filter(e){let t=[],i=[],r=[],s=new al(this);e:for(let a=0,o=0;;){let l=a==e.length?1e9:e[a++];for(;o<l||o==l&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,l-o);kn(r,u,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;kn(t,u,d),d>0&&Yi(i,t,s.text),s.forward(u),o+=u}let c=e[a++];for(;o<c;){if(s.done)break e;let u=Math.min(s.len,c-o);kn(t,u,-1),kn(r,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),o+=u}}return{changes:new ln(t,i),filtered:ai.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],r=this.sections[t+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let r=[],s=[],a=0,o=null;function l(u=!1){if(!u&&!r.length)return;a<t&&kn(r,t-a,-1);let d=new ln(r,s);o=o?o.compose(d.map(o)):d,r=[],s=[],a=0}function c(u){if(Array.isArray(u))for(let d of u)c(d);else if(u instanceof ln){if(u.length!=t)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${t})`);l(),o=o?o.compose(u.map(o)):u}else{let{from:d,to:h=d,insert:f}=u;if(d>h||d<0||h>t)throw new RangeError(`Invalid change range ${d} to ${h} (in doc of length ${t})`);let m=f?typeof f=="string"?dt.of(f.split(i||Pf)):f:dt.empty,p=m.length;if(d==h&&p==0)return;d<a&&l(),d>a&&kn(r,d-a,-1),kn(r,h-d,p),Yi(s,r,m),a=h}}return c(e),l(!o),o}static empty(e){return new ln(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((a,o)=>o&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;i.length<r;)i.push(dt.empty);i[r]=dt.of(s.slice(1)),t.push(s[0],i[r].length)}}}return new ln(t,i)}static createSet(e,t){return new ln(e,t)}}function kn(n,e,t,i=!1){if(e==0&&t<=0)return;let r=n.length-2;r>=0&&t<=0&&t==n[r+1]?n[r]+=e:r>=0&&e==0&&n[r]==0?n[r+1]+=t:i?(n[r]+=e,n[r+1]+=t):n.push(e,t)}function Yi(n,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<i;)n.push(dt.empty);n.push(t)}}function Tf(n,e,t){let i=n.inserted;for(let r=0,s=0,a=0;a<n.sections.length;){let o=n.sections[a++],l=n.sections[a++];if(l<0)r+=o,s+=o;else{let c=r,u=s,d=dt.empty;for(;c+=o,u+=l,l&&i&&(d=d.append(i[a-2>>1])),!(t||a==n.sections.length||n.sections[a+1]<0);)o=n.sections[a++],l=n.sections[a++];e(r,c,s,u,d),r=c,s=u}}}function If(n,e,t,i=!1){let r=[],s=i?[]:null,a=new al(n),o=new al(e);for(let l=-1;;){if(a.done&&o.len||o.done&&a.len)throw new Error("Mismatched change set lengths");if(a.ins==-1&&o.ins==-1){let c=Math.min(a.len,o.len);kn(r,c,-1),a.forward(c),o.forward(c)}else if(o.ins>=0&&(a.ins<0||l==a.i||a.off==0&&(o.len<a.len||o.len==a.len&&!t))){let c=o.len;for(kn(r,o.ins,-1);c;){let u=Math.min(a.len,c);a.ins>=0&&l<a.i&&a.len<=u&&(kn(r,0,a.ins),s&&Yi(s,r,a.text),l=a.i),a.forward(u),c-=u}o.next()}else if(a.ins>=0){let c=0,u=a.len;for(;u;)if(o.ins==-1){let d=Math.min(u,o.len);c+=d,u-=d,o.forward(d)}else if(o.ins==0&&o.len<u)u-=o.len,o.next();else break;kn(r,c,l<a.i?a.ins:0),s&&l<a.i&&Yi(s,r,a.text),l=a.i,a.forward(a.len-u)}else{if(a.done&&o.done)return s?ln.createSet(r,s):ai.create(r);throw new Error("Mismatched change set lengths")}}}function kw(n,e,t=!1){let i=[],r=t?[]:null,s=new al(n),a=new al(e);for(let o=!1;;){if(s.done&&a.done)return r?ln.createSet(i,r):ai.create(i);if(s.ins==0)kn(i,s.len,0,o),s.next();else if(a.len==0&&!a.done)kn(i,0,a.ins,o),r&&Yi(r,i,a.text),a.next();else{if(s.done||a.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,a.len),c=i.length;if(s.ins==-1){let u=a.ins==-1?-1:a.off?0:a.ins;kn(i,l,u,o),r&&u&&Yi(r,i,a.text)}else a.ins==-1?(kn(i,s.off?0:s.len,l,o),r&&Yi(r,i,s.textBit(l))):(kn(i,s.off?0:s.len,a.off?0:a.ins,o),r&&!a.off&&Yi(r,i,a.text));o=(s.ins>l||a.ins>=0&&a.len>l)&&(o||i.length>c),s.forward2(l),a.forward(l)}}}}class al{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?dt.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?dt.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Ns{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new Ns(i,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return ee.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return ee.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ee.range(e.anchor,e.head)}static create(e,t,i){return new Ns(e,t,i)}}class ee{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:ee.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ee([this.main],0)}addRange(e,t=!0){return ee.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,ee.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ee(e.ranges.map(t=>Ns.fromJSON(t)),e.main)}static single(e,t=e){return new ee([ee.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return ee.normalized(e.slice(),t);i=s.to}return new ee(e,t)}static cursor(e,t=0,i,r){return Ns.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,t,i,r){let s=(i??16777215)<<6|(r==null?7:Math.min(6,r));return t<e?Ns.create(t,e,48|s):Ns.create(e,t,(t>e?8:0)|s)}static normalized(e,t=0){let i=e[t];e.sort((r,s)=>r.from-s.from),t=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],a=e[r-1];if(s.empty?s.from<=a.to:s.from<a.to){let o=a.from,l=Math.max(s.to,a.to);r<=t&&t--,e.splice(--r,2,s.anchor>s.head?ee.range(l,o):ee.range(o,l))}}return new ee(e,t)}}function Dw(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let Cp=0;class Se{constructor(e,t,i,r,s){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=r,this.id=Cp++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Se(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:Sp),!!e.static,e.enables)}of(e){return new qc([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new qc(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new qc(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function Sp(n,e){return n==e||n.length==e.length&&n.every((t,i)=>t===e[i])}class qc{constructor(e,t,i,r){this.dependencies=e,this.facet=t,this.type=i,this.value=r,this.id=Cp++}dynamicSlot(e){var t;let i=this.value,r=this.facet.compareInput,s=this.id,a=e[s]>>1,o=this.type==2,l=!1,c=!1,u=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?c=!0:((t=e[d.id])!==null&&t!==void 0?t:1)&1||u.push(e[d.id]);return{create(d){return d.values[a]=i(d),1},update(d,h){if(l&&h.docChanged||c&&(h.docChanged||h.selection)||Of(d,u)){let f=i(d);if(o?!vy(f,d.values[a],r):!r(f,d.values[a]))return d.values[a]=f,1}return 0},reconfigure:(d,h)=>{let f,m=h.config.address[s];if(m!=null){let p=Eu(h,m);if(this.dependencies.every(g=>g instanceof Se?h.facet(g)===d.facet(g):g instanceof Sn?h.field(g,!1)==d.field(g,!1):!0)||(o?vy(f=i(d),p,r):r(f=i(d),p)))return d.values[a]=p,0}else f=i(d);return d.values[a]=f,1}}}}function vy(n,e,t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}function Of(n,e){let t=!1;for(let i of e)Vo(n,i)&1&&(t=!0);return t}function p$(n,e,t){let i=t.map(l=>n[l.id]),r=t.map(l=>l.type),s=i.filter(l=>!(l&1)),a=n[e.id]>>1;function o(l){let c=[];for(let u=0;u<i.length;u++){let d=Eu(l,i[u]);if(r[u]==2)for(let h of d)c.push(h);else c.push(d)}return e.combine(c)}return{create(l){for(let c of i)Vo(l,c);return l.values[a]=o(l),1},update(l,c){if(!Of(l,s))return 0;let u=o(l);return e.compare(u,l.values[a])?0:(l.values[a]=u,1)},reconfigure(l,c){let u=Of(l,i),d=c.config.facets[e.id],h=c.facet(e);if(d&&!u&&Sp(t,d))return l.values[a]=h,0;let f=o(l);return e.compare(f,h)?(l.values[a]=h,0):(l.values[a]=f,1)}}}const nc=Se.define({static:!0});class Sn{constructor(e,t,i,r,s){this.id=e,this.createF=t,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let t=new Sn(Cp++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(nc).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,r)=>{let s=i.values[t],a=this.updateF(s,r);return this.compareF(s,a)?0:(i.values[t]=a,1)},reconfigure:(i,r)=>{let s=i.facet(nc),a=r.facet(nc),o;return(o=s.find(l=>l.field==this))&&o!=a.find(l=>l.field==this)?(i.values[t]=o.create(i),1):r.config.address[this.id]!=null?(i.values[t]=r.field(this),0):(i.values[t]=this.create(i),1)}}}init(e){return[this,nc.of({field:this,create:e})]}get extension(){return this}}const Ts={lowest:4,low:3,default:2,high:1,highest:0};function ho(n){return e=>new Mw(e,n)}const Zs={highest:ho(Ts.highest),high:ho(Ts.high),default:ho(Ts.default),low:ho(Ts.low),lowest:ho(Ts.lowest)};class Mw{constructor(e,t){this.inner=e,this.prec=t}}class Al{of(e){return new Nf(this,e)}reconfigure(e){return Al.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Nf{constructor(e,t){this.compartment=e,this.inner=t}}class bu{constructor(e,t,i,r,s,a){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let r=[],s=Object.create(null),a=new Map;for(let h of g$(e,t,a))h instanceof Sn?r.push(h):(s[h.facet.id]||(s[h.facet.id]=[])).push(h);let o=Object.create(null),l=[],c=[];for(let h of r)o[h.id]=c.length<<1,c.push(f=>h.slot(f));let u=i==null?void 0:i.config.facets;for(let h in s){let f=s[h],m=f[0].facet,p=u&&u[h]||[];if(f.every(g=>g.type==0))if(o[m.id]=l.length<<1|1,Sp(p,f))l.push(i.facet(m));else{let g=m.combine(f.map(v=>v.value));l.push(i&&m.compare(g,i.facet(m))?i.facet(m):g)}else{for(let g of f)g.type==0?(o[g.id]=l.length<<1|1,l.push(g.value)):(o[g.id]=c.length<<1,c.push(v=>g.dynamicSlot(v)));o[m.id]=c.length<<1,c.push(g=>p$(g,m,f))}}let d=c.map(h=>h(o));return new bu(e,a,d,o,l,s)}}function g$(n,e,t){let i=[[],[],[],[],[]],r=new Map;function s(a,o){let l=r.get(a);if(l!=null){if(l<=o)return;let c=i[l].indexOf(a);c>-1&&i[l].splice(c,1),a instanceof Nf&&t.delete(a.compartment)}if(r.set(a,o),Array.isArray(a))for(let c of a)s(c,o);else if(a instanceof Nf){if(t.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(a.compartment)||a.inner;t.set(a.compartment,c),s(c,o)}else if(a instanceof Mw)s(a.inner,a.prec);else if(a instanceof Sn)i[o].push(a),a.provides&&s(a.provides,o);else if(a instanceof qc)i[o].push(a),a.facet.extensions&&s(a.facet.extensions,Ts.default);else{let c=a.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,o)}}return s(n,Ts.default),i.reduce((a,o)=>a.concat(o))}function Vo(n,e){if(e&1)return 2;let t=e>>1,i=n.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[t]=4;let r=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|r}function Eu(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const Pw=Se.define(),Ff=Se.define({combine:n=>n.some(e=>e),static:!0}),Tw=Se.define({combine:n=>n.length?n[0]:void 0,static:!0}),Iw=Se.define(),Ow=Se.define(),Nw=Se.define(),Fw=Se.define({combine:n=>n.length?n[0]:!1});class Ti{constructor(e,t){this.type=e,this.value=t}static define(){return new v$}}class v${of(e){return new Ti(this,e)}}class y${constructor(e){this.map=e}of(e){return new Ye(this,e)}}class Ye{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new Ye(this.type,t)}is(e){return this.type==e}static define(e={}){return new y$(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(t);s&&i.push(s)}return i}}Ye.reconfigure=Ye.define();Ye.appendConfig=Ye.define();class cn{constructor(e,t,i,r,s,a){this.startState=e,this.changes=t,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=a,this._doc=null,this._state=null,i&&Dw(i,t.newLength),s.some(o=>o.type==cn.time)||(this.annotations=s.concat(cn.time.of(Date.now())))}static create(e,t,i,r,s,a){return new cn(e,t,i,r,s,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(cn.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}cn.time=Ti.define();cn.userEvent=Ti.define();cn.addToHistory=Ti.define();cn.remote=Ti.define();function b$(n,e){let t=[];for(let i=0,r=0;;){let s,a;if(i<n.length&&(r==e.length||e[r]>=n[i]))s=n[i++],a=n[i++];else if(r<e.length)s=e[r++],a=e[r++];else return t;!t.length||t[t.length-1]<s?t.push(s,a):t[t.length-1]<a&&(t[t.length-1]=a)}}function Lw(n,e,t){var i;let r,s,a;return t?(r=e.changes,s=ln.empty(e.changes.length),a=n.changes.compose(e.changes)):(r=e.changes.map(n.changes),s=n.changes.mapDesc(e.changes,!0),a=n.changes.compose(r)),{changes:a,selection:e.selection?e.selection.map(s):(i=n.selection)===null||i===void 0?void 0:i.map(r),effects:Ye.mapEffects(n.effects,r).concat(Ye.mapEffects(e.effects,s)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function Lf(n,e,t){let i=e.selection,r=xa(e.annotations);return e.userEvent&&(r=r.concat(cn.userEvent.of(e.userEvent))),{changes:e.changes instanceof ln?e.changes:ln.of(e.changes||[],t,n.facet(Tw)),selection:i&&(i instanceof ee?i:ee.single(i.anchor,i.head)),effects:xa(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function Bw(n,e,t){let i=Lf(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let a=!!e[s].sequential;i=Lw(i,Lf(n,e[s],a?i.changes.newLength:n.doc.length),a)}let r=cn.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return w$(t?E$(r):r)}function E$(n){let e=n.startState,t=!0;for(let r of e.facet(Iw)){let s=r(n);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:b$(t,s))}if(t!==!0){let r,s;if(t===!1)s=n.changes.invertedDesc,r=ln.empty(e.doc.length);else{let a=n.changes.filter(t);r=a.changes,s=a.filtered.mapDesc(a.changes).invertedDesc}n=cn.create(e,r,n.selection&&n.selection.map(s),Ye.mapEffects(n.effects,s),n.annotations,n.scrollIntoView)}let i=e.facet(Ow);for(let r=i.length-1;r>=0;r--){let s=i[r](n);s instanceof cn?n=s:Array.isArray(s)&&s.length==1&&s[0]instanceof cn?n=s[0]:n=Bw(e,xa(s),!1)}return n}function w$(n){let e=n.startState,t=e.facet(Nw),i=n;for(let r=t.length-1;r>=0;r--){let s=t[r](n);s&&Object.keys(s).length&&(i=Lw(i,Lf(e,s,n.changes.newLength),!0))}return i==n?n:cn.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const C$=[];function xa(n){return n==null?C$:Array.isArray(n)?n:[n]}var Bt=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(Bt||(Bt={}));const S$=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Bf;try{Bf=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function _$(n){if(Bf)return Bf.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||S$.test(t)))return!0}return!1}function x$(n){return e=>{if(!/\S/.test(e))return Bt.Space;if(_$(e))return Bt.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return Bt.Word;return Bt.Other}}class rt{constructor(e,t,i,r,s,a){this.config=e,this.doc=t,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,a&&(a._state=this);for(let o=0;o<this.config.dynamicSlots.length;o++)Vo(this,o<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return Vo(this,i),Eu(this,i)}update(...e){return Bw(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:r}=t;for(let o of e.effects)o.is(Al.reconfigure)?(t&&(r=new Map,t.compartments.forEach((l,c)=>r.set(c,l)),t=null),r.set(o.value.compartment,o.value.extension)):o.is(Ye.reconfigure)?(t=null,i=o.value):o.is(Ye.appendConfig)&&(t=null,i=xa(i).concat(o.value));let s;t?s=e.startState.values.slice():(t=bu.resolve(i,r,this),s=new rt(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let a=e.startState.facet(Ff)?e.newSelection:e.newSelection.asSingle();new rt(t,e.newDoc,a,s,(o,l)=>l.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:ee.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),r=this.changes(i.changes),s=[i.range],a=xa(i.effects);for(let o=1;o<t.ranges.length;o++){let l=e(t.ranges[o]),c=this.changes(l.changes),u=c.map(r);for(let h=0;h<o;h++)s[h]=s[h].map(u);let d=r.mapDesc(c,!0);s.push(l.range.map(d)),r=r.compose(u),a=Ye.mapEffects(a,u).concat(Ye.mapEffects(xa(l.effects),d))}return{changes:r,selection:ee.create(s,t.mainIndex),effects:a}}changes(e=[]){return e instanceof ln?e:ln.of(e,this.doc.length,this.facet(rt.lineSeparator))}toText(e){return dt.of(e.split(this.facet(rt.lineSeparator)||Pf))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Vo(this,t),Eu(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof Sn&&this.config.address[r.id]!=null&&(t[i]=r.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let a=i[s],o=e[s];r.push(a.init(l=>a.spec.fromJSON(o,l)))}}return rt.create({doc:e.doc,selection:ee.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=bu.resolve(e.extensions||[],new Map),i=e.doc instanceof dt?e.doc:dt.of((e.doc||"").split(t.staticFacet(rt.lineSeparator)||Pf)),r=e.selection?e.selection instanceof ee?e.selection:ee.single(e.selection.anchor,e.selection.head):ee.single(0);return Dw(r,i.length),t.staticFacet(Ff)||(r=r.asSingle()),new rt(t,i,r,t.dynamicSlots.map(()=>null),(s,a)=>a.create(s),null)}get tabSize(){return this.facet(rt.tabSize)}get lineBreak(){return this.facet(rt.lineSeparator)||`
`}get readOnly(){return this.facet(Fw)}phrase(e,...t){for(let i of this.facet(rt.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>t.length?i:t[s-1]})),e}languageDataAt(e,t,i=-1){let r=[];for(let s of this.facet(Pw))for(let a of s(this,t,i))Object.prototype.hasOwnProperty.call(a,e)&&r.push(a[e]);return r}charCategorizer(e){return x$(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),a=e-i,o=e-i;for(;a>0;){let l=En(t,a,!1);if(s(t.slice(l,a))!=Bt.Word)break;a=l}for(;o<r;){let l=En(t,o);if(s(t.slice(o,l))!=Bt.Word)break;o=l}return a==o?null:ee.range(a+i,o+i)}}rt.allowMultipleSelections=Ff;rt.tabSize=Se.define({combine:n=>n.length?n[0]:4});rt.lineSeparator=Tw;rt.readOnly=Fw;rt.phrases=Se.define({compare(n,e){let t=Object.keys(n),i=Object.keys(e);return t.length==i.length&&t.every(r=>n[r]==e[r])}});rt.languageData=Pw;rt.changeFilter=Iw;rt.transactionFilter=Ow;rt.transactionExtender=Nw;Al.reconfigure=Ye.define();function ui(n,e,t={}){let i={};for(let r of n)for(let s of Object.keys(r)){let a=r[s],o=i[s];if(o===void 0)i[s]=a;else if(!(o===a||a===void 0))if(Object.hasOwnProperty.call(t,s))i[s]=t[s](o,a);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class zs{eq(e){return this==e}range(e,t=e){return $f.create(e,t,this)}}zs.prototype.startSide=zs.prototype.endSide=0;zs.prototype.point=!1;zs.prototype.mapMode=$n.TrackDel;let $f=class $w{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new $w(e,t,i)}};function qf(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class _p{constructor(e,t,i,r){this.from=e,this.to=t,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,r=0){let s=i?this.to:this.from;for(let a=r,o=s.length;;){if(a==o)return a;let l=a+o>>1,c=s[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-t;if(l==a)return c>=0?a:o;c>=0?o=l:a=l+1}}between(e,t,i,r){for(let s=this.findIndex(t,-1e9,!0),a=this.findIndex(i,1e9,!1,s);s<a;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let i=[],r=[],s=[],a=-1,o=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,d=this.to[l]+e,h,f;if(u==d){let m=t.mapPos(u,c.startSide,c.mapMode);if(m==null||(h=f=m,c.startSide!=c.endSide&&(f=t.mapPos(u,c.endSide),f<h)))continue}else if(h=t.mapPos(u,c.startSide),f=t.mapPos(d,c.endSide),h>f||h==f&&c.startSide>0&&c.endSide<=0)continue;(f-h||c.endSide-c.startSide)<0||(a<0&&(a=h),c.point&&(o=Math.max(o,f-h)),i.push(c),r.push(h-a),s.push(f-a))}return{mapped:i.length?new _p(r,s,i,o):null,pos:a}}}class ct{constructor(e,t,i,r){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=r}static create(e,t,i,r){return new ct(e,t,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,a=e.filter;if(t.length==0&&!a)return this;if(i&&(t=t.slice().sort(qf)),this.isEmpty)return t.length?ct.of(t):this;let o=new qw(this,null,-1).goto(0),l=0,c=[],u=new Ai;for(;o.value||l<t.length;)if(l<t.length&&(o.from-t[l].from||o.startSide-t[l].value.startSide)>=0){let d=t[l++];u.addInner(d.from,d.to,d.value)||c.push(d)}else o.rangeIndex==1&&o.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(o.chunkIndex)<t[l].from)&&(!a||r>this.chunkEnd(o.chunkIndex)||s<this.chunkPos[o.chunkIndex])&&u.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!a||r>o.to||s<o.from||a(o.from,o.to,o.value))&&(u.addInner(o.from,o.to,o.value)||c.push($f.create(o.from,o.to,o.value))),o.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?ct.empty:this.nextLayer.update({add:c,filter:a,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],r=-1;for(let a=0;a<this.chunk.length;a++){let o=this.chunkPos[a],l=this.chunk[a],c=e.touchesRange(o,o+l.length);if(c===!1)r=Math.max(r,l.maxPoint),t.push(l),i.push(e.mapPos(o));else if(c===!0){let{mapped:u,pos:d}=l.map(o,e);u&&(r=Math.max(r,u.maxPoint),t.push(u),i.push(d))}}let s=this.nextLayer.map(e);return t.length==0?s:new ct(i,t,s||ct.empty,r)}between(e,t,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],a=this.chunk[r];if(t>=s&&e<=s+a.length&&a.between(s,e-s,t-s,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return ol.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return ol.from(e).goto(t)}static compare(e,t,i,r,s=-1){let a=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),o=t.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=yy(a,o,i),c=new fo(a,l,s),u=new fo(o,l,s);i.iterGaps((d,h,f)=>by(c,d,u,h,f,r)),i.empty&&i.length==0&&by(c,0,u,0,0,r)}static eq(e,t,i=0,r){r==null&&(r=1e9-1);let s=e.filter(u=>!u.isEmpty&&t.indexOf(u)<0),a=t.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=a.length)return!1;if(!s.length)return!0;let o=yy(s,a),l=new fo(s,o,0).goto(i),c=new fo(a,o,0).goto(i);for(;;){if(l.to!=c.to||!Uf(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>r)return!0;l.next(),c.next()}}static spans(e,t,i,r,s=-1){let a=new fo(e,null,s).goto(t),o=t,l=a.openStart;for(;;){let c=Math.min(a.to,i);if(a.point){let u=a.activeForPoint(a.to),d=a.pointFrom<t?u.length+1:a.point.startSide<0?u.length:Math.min(u.length,l);r.point(o,c,a.point,u,d,a.pointRank),l=Math.min(a.openEnd(c),u.length)}else c>o&&(r.span(o,c,a.active,l),l=a.openEnd(c));if(a.to>i)return l+(a.point&&a.to>i?1:0);o=a.to,a.next()}}static of(e,t=!1){let i=new Ai;for(let r of e instanceof $f?[e]:t?R$(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return ct.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=ct.empty;r=r.nextLayer)t=new ct(r.chunkPos,r.chunk,t,Math.max(r.maxPoint,t.maxPoint));return t}}ct.empty=new ct([],[],null,-1);function R$(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let i=n[t];if(qf(e,i)>0)return n.slice().sort(qf);e=i}return n}ct.empty.nextLayer=ct.empty;class Ai{finishChunk(e){this.chunks.push(new _p(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new Ai)).add(e,t,i)}addInner(e,t,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(ct.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=ct.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function yy(n,e,t){let i=new Map;for(let s of n)for(let a=0;a<s.chunk.length;a++)s.chunk[a].maxPoint<=0&&i.set(s.chunk[a],s.chunkPos[a]);let r=new Set;for(let s of e)for(let a=0;a<s.chunk.length;a++){let o=i.get(s.chunk[a]);o!=null&&(t?t.mapPos(o):o)==s.chunkPos[a]&&!(t!=null&&t.touchesRange(o,o+s.chunk[a].length))&&r.add(s.chunk[a])}return r}class qw{constructor(e,t,i,r=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class ol{constructor(e){this.heap=e}static from(e,t=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let a=e[s];!a.isEmpty;a=a.nextLayer)a.maxPoint>=i&&r.push(new qw(a,t,i,s));return r.length==1?r[0]:new ol(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)vh(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)vh(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),vh(this.heap,0)}}}function vh(n,e){for(let t=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let r=n[i];if(i+1<n.length&&r.compare(n[i+1])>=0&&(r=n[i+1],i++),t.compare(r)<0)break;n[i]=t,n[e]=r,e=i}}class fo{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=ol.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){rc(this.active,e),rc(this.activeTo,e),rc(this.activeRank,e),this.minActive=Ey(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:r,rank:s}=this.cursor;for(;t<this.activeRank.length&&(s-this.activeRank[t]||r-this.activeTo[t])>0;)t++;ic(this.active,t,i),ic(this.activeTo,t,r),ic(this.activeRank,t,s),e&&ic(e,t,this.cursor.from),this.minActive=Ey(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&rc(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function by(n,e,t,i,r,s){n.goto(e),t.goto(i);let a=i+r,o=i,l=i-e;for(;;){let c=n.to+l-t.to,u=c||n.endSide-t.endSide,d=u<0?n.to+l:t.to,h=Math.min(d,a);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&Uf(n.activeForPoint(n.to),t.activeForPoint(t.to))||s.comparePoint(o,h,n.point,t.point):h>o&&!Uf(n.active,t.active)&&s.compareRange(o,h,n.active,t.active),d>a)break;(c||n.openEnd!=t.openEnd)&&s.boundChange&&s.boundChange(d),o=d,u<=0&&n.next(),u>=0&&t.next()}}function Uf(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function rc(n,e){for(let t=e,i=n.length-1;t<i;t++)n[t]=n[t+1];n.pop()}function ic(n,e,t){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=t}function Ey(n,e){let t=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||n[r].endSide-n[t].endSide)<0&&(t=r,i=e[r]);return t}function to(n,e,t=n.length){let i=0;for(let r=0;r<t&&r<n.length;)n.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=En(n,r));return i}function Hf(n,e,t,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==n.length)break;s+=n.charCodeAt(r)==9?t-s%t:1,r=En(n,r)}return i===!0?-1:n.length}const Vf="ͼ",wy=typeof Symbol>"u"?"__"+Vf:Symbol.for(Vf),jf=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Cy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class as{constructor(e,t){this.rules=[];let{finish:i}=t||{};function r(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function s(a,o,l,c){let u=[],d=/^@(\w+)\b/.exec(a[0]),h=d&&d[1]=="keyframes";if(d&&o==null)return l.push(a[0]+";");for(let f in o){let m=o[f];if(/&/.test(f))s(f.split(/,\s*/).map(p=>a.map(g=>p.replace(/&/,g))).reduce((p,g)=>p.concat(g)),m,l);else if(m&&typeof m=="object"){if(!d)throw new RangeError("The value of a property ("+f+") should be a primitive value.");s(r(f),m,u,h)}else m!=null&&u.push(f.replace(/_.*/,"").replace(/[A-Z]/g,p=>"-"+p.toLowerCase())+": "+m+";")}(u.length||h)&&l.push((i&&!d&&!c?a.map(i):a).join(", ")+" {"+u.join(" ")+"}")}for(let a in e)s(r(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Cy[wy]||1;return Cy[wy]=e+1,Vf+e.toString(36)}static mount(e,t,i){let r=e[jf],s=i&&i.nonce;r?s&&r.setNonce(s):r=new A$(e,s),r.mount(Array.isArray(t)?t:[t],e)}}let Sy=new Map;class A${constructor(e,t){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=Sy.get(i);if(s)return e[jf]=s;this.sheet=new r.CSSStyleSheet,Sy.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[jf]=this}mount(e,t){let i=this.sheet,r=0,s=0;for(let a=0;a<e.length;a++){let o=e[a],l=this.modules.indexOf(o);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,o),i)for(let c=0;c<o.rules.length;c++)i.insertRule(o.rules[c],r++)}else{for(;s<l;)r+=this.modules[s++].rules.length;r+=o.rules.length,s++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let a="";for(let l=0;l<this.modules.length;l++)a+=this.modules[l].getRules()+`
`;this.styleTag.textContent=a;let o=t.head||t;this.styleTag.parentNode!=o&&o.insertBefore(this.styleTag,o.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var os={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ll={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},k$=typeof navigator<"u"&&/Mac/.test(navigator.platform),D$=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var yn=0;yn<10;yn++)os[48+yn]=os[96+yn]=String(yn);for(var yn=1;yn<=24;yn++)os[yn+111]="F"+yn;for(var yn=65;yn<=90;yn++)os[yn]=String.fromCharCode(yn+32),ll[yn]=String.fromCharCode(yn);for(var yh in os)ll.hasOwnProperty(yh)||(ll[yh]=os[yh]);function M$(n){var e=k$&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||D$&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?ll:os)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function cl(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function Wf(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function Uc(n,e){if(!e.anchorNode)return!1;try{return Wf(n,e.anchorNode)}catch{return!1}}function Va(n){return n.nodeType==3?Ks(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function jo(n,e,t,i){return t?_y(n,e,t,i,-1)||_y(n,e,t,i,1):!1}function Gs(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function wu(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function _y(n,e,t,i,r){for(;;){if(n==t&&e==i)return!0;if(e==(r<0?0:li(n))){if(n.nodeName=="DIV")return!1;let s=n.parentNode;if(!s||s.nodeType!=1)return!1;e=Gs(n)+(r<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(r<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=r<0?li(n):0}else return!1}}function li(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function kl(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function P$(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function Uw(n,e){let t=e.width/n.offsetWidth,i=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-n.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function T$(n,e,t,i,r,s,a,o){let l=n.ownerDocument,c=l.defaultView||window;for(let u=n,d=!1;u&&!d;)if(u.nodeType==1){let h,f=u==l.body,m=1,p=1;if(f)h=P$(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let C=u.getBoundingClientRect();({scaleX:m,scaleY:p}=Uw(u,C)),h={left:C.left,right:C.left+u.clientWidth*m,top:C.top,bottom:C.top+u.clientHeight*p}}let g=0,v=0;if(r=="nearest")e.top<h.top?(v=-(h.top-e.top+a),t>0&&e.bottom>h.bottom+v&&(v=e.bottom-h.bottom+v+a)):e.bottom>h.bottom&&(v=e.bottom-h.bottom+a,t<0&&e.top-v<h.top&&(v=-(h.top+v-e.top+a)));else{let C=e.bottom-e.top,y=h.bottom-h.top;v=(r=="center"&&C<=y?e.top+C/2-y/2:r=="start"||r=="center"&&t<0?e.top-a:e.bottom-y+a)-h.top}if(i=="nearest"?e.left<h.left?(g=-(h.left-e.left+s),t>0&&e.right>h.right+g&&(g=e.right-h.right+g+s)):e.right>h.right&&(g=e.right-h.right+s,t<0&&e.left<h.left+g&&(g=-(h.left+g-e.left+s))):g=(i=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:i=="start"==o?e.left-s:e.right-(h.right-h.left)+s)-h.left,g||v)if(f)c.scrollBy(g,v);else{let C=0,y=0;if(v){let E=u.scrollTop;u.scrollTop+=v/p,y=(u.scrollTop-E)*p}if(g){let E=u.scrollLeft;u.scrollLeft+=g/m,C=(u.scrollLeft-E)*m}e={left:e.left-C,top:e.top-y,right:e.right-C,bottom:e.bottom-y},C&&Math.abs(C-g)<1&&(i="nearest"),y&&Math.abs(y-v)<1&&(r="nearest")}if(f)break;u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function I$(n){let e=n.ownerDocument,t,i;for(let r=n.parentNode;r&&!(r==e.body||t&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!t&&r.scrollWidth>r.clientWidth&&(t=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:t,y:i}}class O${constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?li(t):0),i,Math.min(e.focusOffset,i?li(i):0))}set(e,t,i,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=r}}let ia=null;function Hw(n){if(n.setActive)return n.setActive();if(ia)return n.focus(ia);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(ia==null?{get preventScroll(){return ia={preventScroll:!0},!0}}:void 0),!ia){ia=!1;for(let t=0;t<e.length;){let i=e[t++],r=e[t++],s=e[t++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let xy;function Ks(n,e,t=e){let i=xy||(xy=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}function Ra(n,e,t,i){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,n.dispatchEvent(s);let a=new KeyboardEvent("keyup",r);return a.synthetic=!0,n.dispatchEvent(a),s.defaultPrevented||a.defaultPrevented}function N$(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function Vw(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function F$(n,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,li(t));;)if(i){if(t.nodeType!=1)return!1;let r=t.childNodes[i-1];r.contentEditable=="false"?i--:(t=r,i=li(t))}else{if(t==n)return!0;i=Gs(t),t=t.parentNode}}function jw(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function Ww(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i>0)return{node:t,offset:i};if(t.nodeType==1&&i>0){if(t.contentEditable=="false")return null;t=t.childNodes[i-1],i=li(t)}else if(t.parentNode&&!wu(t))i=Gs(t),t=t.parentNode;else return null}}function zw(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i<t.nodeValue.length)return{node:t,offset:i};if(t.nodeType==1&&i<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[i],i=0}else if(t.parentNode&&!wu(t))i=Gs(t)+1,t=t.parentNode;else return null}}class Pn{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new Pn(e.parentNode,Gs(e),t)}static after(e,t){return new Pn(e.parentNode,Gs(e)+1,t)}}const xp=[];class St{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,r=null,s;for(let a of this.children){if(a.flags&7){if(!a.dom&&(s=r?r.nextSibling:i.firstChild)){let o=St.get(s);(!o||!o.parent&&o.canReuseDOM(a))&&a.reuseDOM(s)}a.sync(e,t),a.flags&=-8}if(s=r?r.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&s!=a.dom&&(t.written=!0),a.dom.parentNode==i)for(;s&&s!=a.dom;)s=Ry(s);else i.insertBefore(a.dom,s);r=a.dom}for(s=r?r.nextSibling:i.firstChild,s&&t&&t.node==i&&(t.written=!0);s;)s=Ry(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let r=li(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!St.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let a=this.children[r];if(a.dom==i)return s;s+=a.length+a.breakAfter}}domBoundsAround(e,t,i=0){let r=-1,s=-1,a=-1,o=-1;for(let l=0,c=i,u=i;l<this.children.length;l++){let d=this.children[l],h=c+d.length;if(c<e&&h>t)return d.domBoundsAround(e,t,c);if(h>=e&&r==-1&&(r=l,s=c),c>t&&d.dom.parentNode==this.dom){a=l,o=u;break}u=h,c=h+d.breakAfter}return{from:s,to:o<0?i+this.length:o,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=xp){this.markDirty();for(let r=e;r<t;r++){let s=this.children[r];s.parent==this&&i.indexOf(s)<0&&s.destroy()}i.length<250?this.children.splice(e,t-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(t));for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Gw(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,r,s,a){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}St.prototype.breakAfter=0;function Ry(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class Gw{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function Kw(n,e,t,i,r,s,a,o,l){let{children:c}=n,u=c.length?c[e]:null,d=s.length?s[s.length-1]:null,h=d?d.breakAfter:a;if(!(e==i&&u&&!a&&!h&&s.length<2&&u.merge(t,r,s.length?d:null,t==0,o,l))){if(i<c.length){let f=c[i];f&&(r<f.length||f.breakAfter&&(d!=null&&d.breakAfter))?(e==i&&(f=f.split(r),r=0),!h&&d&&f.merge(0,r,d,!0,0,l)?s[s.length-1]=f:((r||f.children.length&&!f.children[0].length)&&f.merge(0,r,null,!1,0,l),s.push(f))):f!=null&&f.breakAfter&&(d?d.breakAfter=1:a=1),i++}for(u&&(u.breakAfter=a,t>0&&(!a&&s.length&&u.merge(t,u.length,s[0],!1,o,0)?u.breakAfter=s.shift().breakAfter:(t<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(t,u.length,null,!1,o,0),e++));e<i&&s.length;)if(c[i-1].become(s[s.length-1]))i--,s.pop(),l=s.length?0:o;else if(c[e].become(s[0]))e++,s.shift(),o=s.length?0:l;else break;!s.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,o,l)&&e--,(e<i||s.length)&&n.replaceChildren(e,i,s)}}function Yw(n,e,t,i,r,s){let a=n.childCursor(),{i:o,off:l}=a.findPos(t,1),{i:c,off:u}=a.findPos(e,-1),d=e-t;for(let h of i)d+=h.length;n.length+=d,Kw(n,c,u,o,l,i,0,r,s)}let Xn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},zf=typeof document<"u"?document:{documentElement:{style:{}}};const Gf=/Edge\/(\d+)/.exec(Xn.userAgent),Qw=/MSIE \d/.test(Xn.userAgent),Kf=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Xn.userAgent),Cd=!!(Qw||Kf||Gf),Ay=!Cd&&/gecko\/(\d+)/i.test(Xn.userAgent),bh=!Cd&&/Chrome\/(\d+)/.exec(Xn.userAgent),ky="webkitFontSmoothing"in zf.documentElement.style,Xw=!Cd&&/Apple Computer/.test(Xn.vendor),Dy=Xw&&(/Mobile\/\w+/.test(Xn.userAgent)||Xn.maxTouchPoints>2);var Ee={mac:Dy||/Mac/.test(Xn.platform),windows:/Win/.test(Xn.platform),linux:/Linux|X11/.test(Xn.platform),ie:Cd,ie_version:Qw?zf.documentMode||6:Kf?+Kf[1]:Gf?+Gf[1]:0,gecko:Ay,gecko_version:Ay?+(/Firefox\/(\d+)/.exec(Xn.userAgent)||[0,0])[1]:0,chrome:!!bh,chrome_version:bh?+bh[1]:0,ios:Dy,android:/Android\b/.test(Xn.userAgent),webkit:ky,safari:Xw,webkit_version:ky?+(/\bAppleWebKit\/(\d+)/.exec(Xn.userAgent)||[0,0])[1]:0,tabSize:zf.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const L$=256;class Lr extends St{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof Lr)||this.length-(t-e)+i.length>L$||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Lr(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Pn(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return B$(this.dom,e,t)}}class ki extends St{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let r of t)r.setParent(this)}setAttrs(e){if(Vw(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,r,s,a){return i&&(!(i instanceof ki&&i.mark.eq(this.mark))||e&&s<=0||t<this.length&&a<=0)?!1:(Yw(this,e,t,i?i.children.slice():[],s-1,a-1),this.markDirty(),!0)}split(e){let t=[],i=0,r=-1,s=0;for(let o of this.children){let l=i+o.length;l>e&&t.push(i<e?o.split(e-i):o),r<0&&i>=e&&(r=s),i=l,s++}let a=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new ki(this.mark,t,a)}domAtPos(e){return Jw(this,e)}coordsAt(e,t){return eC(this,e,t)}}function B$(n,e,t){let i=n.nodeValue.length;e>i&&(e=i);let r=e,s=e,a=0;e==0&&t<0||e==i&&t>=0?Ee.chrome||Ee.gecko||(e?(r--,a=1):s<i&&(s++,a=-1)):t<0?r--:s<i&&s++;let o=Ks(n,r,s).getClientRects();if(!o.length)return null;let l=o[(a?a<0:t>=0)?0:o.length-1];return Ee.safari&&!a&&l.width==0&&(l=Array.prototype.find.call(o,c=>c.width)||l),a?kl(l,a<0):l||null}class Qi extends St{static create(e,t,i){return new Qi(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=Qi.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,r,s,a){return i&&(!(i instanceof Qi)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&a<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof Qi&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return dt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):dt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Pn.before(this.dom):Pn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let a=this.side?this.side<0:e>0;for(let o=a?r.length-1:0;s=r[o],!(e>0?o==0:o==r.length-1||s.top<s.bottom);o+=a?-1:1);return kl(s,!a)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ja extends St{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof ja&&e.side==this.side}split(){return new ja(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Pn.before(this.dom):Pn.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return dt.empty}get isHidden(){return!0}}Lr.prototype.children=Qi.prototype.children=ja.prototype.children=xp;function Jw(n,e){let t=n.dom,{children:i}=n,r=0;for(let s=0;r<i.length;r++){let a=i[r],o=s+a.length;if(!(o==s&&a.getSide()<=0)){if(e>s&&e<o&&a.dom.parentNode==t)return a.domAtPos(e-s);if(e<=s)break;s=o}}for(let s=r;s>0;s--){let a=i[s-1];if(a.dom.parentNode==t)return a.domAtPos(a.length)}for(let s=r;s<i.length;s++){let a=i[s];if(a.dom.parentNode==t)return a.domAtPos(0)}return new Pn(t,0)}function Zw(n,e,t){let i,{children:r}=n;t>0&&e instanceof ki&&r.length&&(i=r[r.length-1])instanceof ki&&i.mark.eq(e.mark)?Zw(i,e.children[0],t-1):(r.push(e),e.setParent(n)),n.length+=e.length}function eC(n,e,t){let i=null,r=-1,s=null,a=-1;function o(c,u){for(let d=0,h=0;d<c.children.length&&h<=u;d++){let f=c.children[d],m=h+f.length;m>=u&&(f.children.length?o(f,u-h):(!s||s.isHidden&&t>0)&&(m>u||h==m&&f.getSide()>0)?(s=f,a=u-h):(h<u||h==m&&f.getSide()<0&&!f.isHidden)&&(i=f,r=u-h)),h=m}}o(n,e);let l=(t<0?i:s)||i||s;return l?l.coordsAt(Math.max(0,l==i?r:a),t):$$(n)}function $$(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=Va(e);return t[t.length-1]||null}function Yf(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const My=Object.create(null);function Cu(n,e,t){if(n==e)return!0;n||(n=My),e||(e=My);let i=Object.keys(n),r=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=r.length-(t&&r.indexOf(t)>-1?1:0))return!1;for(let s of i)if(s!=t&&(r.indexOf(s)==-1||n[s]!==e[s]))return!1;return!0}function Qf(n,e,t){let i=!1;if(e)for(let r in e)t&&r in t||(i=!0,r=="style"?n.style.cssText="":n.removeAttribute(r));if(t)for(let r in t)e&&e[r]==t[r]||(i=!0,r=="style"?n.style.cssText=t[r]:n.setAttribute(r,t[r]));return i}function q$(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let i=n.attributes[t];e[i.name]=i.value}return e}class Ii{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Hn=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(Hn||(Hn={}));class Oe extends zs{constructor(e,t,i,r){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new Dl(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new ls(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:a}=tC(e,t);i=(s?t?-3e8:-1:5e8)-1,r=(a?t?2e8:1:-6e8)+1}return new ls(e,i,r,t,e.widget||null,!0)}static line(e){return new Ml(e)}static set(e,t=!1){return ct.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Oe.none=ct.empty;class Dl extends Oe{constructor(e){let{start:t,end:i}=tC(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof Dl&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&Cu(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Dl.prototype.point=!1;class Ml extends Oe{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Ml&&this.spec.class==e.spec.class&&Cu(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Ml.prototype.mapMode=$n.TrackBefore;Ml.prototype.point=!0;class ls extends Oe{constructor(e,t,i,r,s,a){super(t,i,s,e),this.block=r,this.isReplace=a,this.mapMode=r?t<=0?$n.TrackBefore:$n.TrackAfter:$n.TrackDel}get type(){return this.startSide!=this.endSide?Hn.WidgetRange:this.startSide<=0?Hn.WidgetBefore:Hn.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof ls&&U$(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}ls.prototype.point=!0;function tC(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t??e,end:i??e}}function U$(n,e){return n==e||!!(n&&e&&n.compare(e))}function Hc(n,e,t,i=0){let r=t.length-1;r>=0&&t[r]+i>=n?t[r]=Math.max(t[r],e):t.push(n,e)}class en extends St{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,r,s,a){if(i){if(!(i instanceof en))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),Yw(this,e,t,i?i.children.slice():[],s,a),!0}split(e){let t=new en;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:r}=this.childPos(e);r&&(t.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)t.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Cu(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){Zw(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=Yf(t,this.attrs||{})),i&&(this.attrs=Yf({class:i},this.attrs||{}))}domAtPos(e){return Jw(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&(Vw(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Qf(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let r=this.dom.lastChild;for(;r&&St.get(r)instanceof ki;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=St.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!Ee.ios||!this.children.some(s=>s instanceof Lr))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof Lr)||/[^ -~]/.test(i.text))return null;let r=Va(i.dom);if(r.length!=1)return null;e+=r[0].width,t=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=eC(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let a=(s-r.textHeight)/2;return{top:i.top+a,bottom:i.bottom-a,left:i.left,right:i.left}}}return i}become(e){return e instanceof en&&this.children.length==0&&e.children.length==0&&Cu(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],a=r+s.length;if(a>=t){if(s instanceof en)return s;if(a>t)break}r=a+s.breakAfter}return null}}class _i extends St{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,r,s,a){return i&&(!(i instanceof _i)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&a<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?Pn.before(this.dom):Pn.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new _i(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return xp}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):dt.empty}domBoundsAround(){return null}become(e){return e instanceof _i&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);return i||(this.widget instanceof Xf?null:kl(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t==i?!1:e<0?t<0:i>0}}class Xf extends Ii{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Wo{constructor(e,t,i,r){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof _i&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new en),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(sc(new ja(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof _i)&&this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:a,done:o}=this.cursor.next(this.skip);if(this.skip=0,o)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(sc(new Lr(this.text.slice(this.textOff,this.textOff+r)),t),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,t,i,r){this.buildText(t-e,i,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,i,r,s,a){if(this.disallowBlockEffectsFor[a]&&i instanceof ls){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=t-e;if(i instanceof ls)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new _i(i.widget||Wa.block,o,i));else{let l=Qi.create(i.widget||Wa.inline,o,o?0:i.startSide),c=this.atCursorPos&&!l.isEditable&&s<=r.length&&(e<t||i.startSide>0),u=!l.isEditable&&(e<t||s>r.length||i.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),c&&(d.append(sc(new ja(1),r),s),s=r.length+Math.max(0,s-r.length)),d.append(sc(l,r),s),this.atCursorPos=u,this.pendingBuffer=u?e<t||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,i,r,s){let a=new Wo(e,t,i,s);return a.openEnd=ct.spans(r,t,i,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function sc(n,e){for(let t of e)n=new ki(t,[n],n.length);return n}class Wa extends Ii{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Wa.inline=new Wa("span");Wa.block=new Wa("div");var It=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(It||(It={}));const Ys=It.LTR,Rp=It.RTL;function nC(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const H$=nC("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),V$=nC("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Jf=Object.create(null),zr=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);Jf[e]=t,Jf[t]=-e}function rC(n){return n<=247?H$[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?V$[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const j$=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Xi{get dir(){return this.level%2?Rp:Ys}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,r){let s=-1;for(let a=0;a<e.length;a++){let o=e[a];if(o.from<=t&&o.to>=t){if(o.level==i)return a;(s<0||(r!=0?r<0?o.from<t:o.to>t:e[s].level>o.level))&&(s=a)}}if(s<0)throw new RangeError("Index out of range");return s}}function iC(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let i=n[t],r=e[t];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!iC(i.inner,r.inner))return!1}return!0}const Ct=[];function W$(n,e,t,i,r){for(let s=0;s<=i.length;s++){let a=s?i[s-1].to:e,o=s<i.length?i[s].from:t,l=s?256:r;for(let c=a,u=l,d=l;c<o;c++){let h=rC(n.charCodeAt(c));h==512?h=u:h==8&&d==4&&(h=16),Ct[c]=h==4?2:h,h&7&&(d=h),u=h}for(let c=a,u=l,d=l;c<o;c++){let h=Ct[c];if(h==128)c<o-1&&u==Ct[c+1]&&u&24?h=Ct[c]=u:Ct[c]=256;else if(h==64){let f=c+1;for(;f<o&&Ct[f]==64;)f++;let m=c&&u==8||f<t&&Ct[f]==8?d==1?1:8:256;for(let p=c;p<f;p++)Ct[p]=m;c=f-1}else h==8&&d==1&&(Ct[c]=1);u=h,h&7&&(d=h)}}}function z$(n,e,t,i,r){let s=r==1?2:1;for(let a=0,o=0,l=0;a<=i.length;a++){let c=a?i[a-1].to:e,u=a<i.length?i[a].from:t;for(let d=c,h,f,m;d<u;d++)if(f=Jf[h=n.charCodeAt(d)])if(f<0){for(let p=o-3;p>=0;p-=3)if(zr[p+1]==-f){let g=zr[p+2],v=g&2?r:g&4?g&1?s:r:0;v&&(Ct[d]=Ct[zr[p]]=v),o=p;break}}else{if(zr.length==189)break;zr[o++]=d,zr[o++]=h,zr[o++]=l}else if((m=Ct[d])==2||m==1){let p=m==r;l=p?0:1;for(let g=o-3;g>=0;g-=3){let v=zr[g+2];if(v&2)break;if(p)zr[g+2]|=2;else{if(v&4)break;zr[g+2]|=4}}}}}function G$(n,e,t,i){for(let r=0,s=i;r<=t.length;r++){let a=r?t[r-1].to:n,o=r<t.length?t[r].from:e;for(let l=a;l<o;){let c=Ct[l];if(c==256){let u=l+1;for(;;)if(u==o){if(r==t.length)break;u=t[r++].to,o=r<t.length?t[r].from:e}else if(Ct[u]==256)u++;else break;let d=s==1,h=(u<e?Ct[u]:i)==1,f=d==h?d?1:2:i;for(let m=u,p=r,g=p?t[p-1].to:n;m>l;)m==g&&(m=t[--p].from,g=p?t[p-1].to:n),Ct[--m]=f;l=u}else s=c,l++}}}function Zf(n,e,t,i,r,s,a){let o=i%2?2:1;if(i%2==r%2)for(let l=e,c=0;l<t;){let u=!0,d=!1;if(c==s.length||l<s[c].from){let p=Ct[l];p!=o&&(u=!1,d=p==16)}let h=!u&&o==1?[]:null,f=u?i:i+1,m=l;e:for(;;)if(c<s.length&&m==s[c].from){if(d)break e;let p=s[c];if(!u)for(let g=p.to,v=c+1;;){if(g==t)break e;if(v<s.length&&s[v].from==g)g=s[v++].to;else{if(Ct[g]==o)break e;break}}if(c++,h)h.push(p);else{p.from>l&&a.push(new Xi(l,p.from,f));let g=p.direction==Ys!=!(f%2);em(n,g?i+1:i,r,p.inner,p.from,p.to,a),l=p.to}m=p.to}else{if(m==t||(u?Ct[m]!=o:Ct[m]==o))break;m++}h?Zf(n,l,m,i+1,r,h,a):l<m&&a.push(new Xi(l,m,f)),l=m}else for(let l=t,c=s.length;l>e;){let u=!0,d=!1;if(!c||l>s[c-1].to){let p=Ct[l-1];p!=o&&(u=!1,d=p==16)}let h=!u&&o==1?[]:null,f=u?i:i+1,m=l;e:for(;;)if(c&&m==s[c-1].to){if(d)break e;let p=s[--c];if(!u)for(let g=p.from,v=c;;){if(g==e)break e;if(v&&s[v-1].to==g)g=s[--v].from;else{if(Ct[g-1]==o)break e;break}}if(h)h.push(p);else{p.to<l&&a.push(new Xi(p.to,l,f));let g=p.direction==Ys!=!(f%2);em(n,g?i+1:i,r,p.inner,p.from,p.to,a),l=p.from}m=p.from}else{if(m==e||(u?Ct[m-1]!=o:Ct[m-1]==o))break;m--}h?Zf(n,m,l,i+1,r,h,a):m<l&&a.push(new Xi(m,l,f)),l=m}}function em(n,e,t,i,r,s,a){let o=e%2?2:1;W$(n,r,s,i,o),z$(n,r,s,i,o),G$(r,s,i,o),Zf(n,r,s,e,t,i,a)}function K$(n,e,t){if(!n)return[new Xi(0,0,e==Rp?1:0)];if(e==Ys&&!t.length&&!j$.test(n))return sC(n.length);if(t.length)for(;n.length>Ct.length;)Ct[Ct.length]=256;let i=[],r=e==Ys?0:1;return em(n,r,r,t,0,n.length,i),i}function sC(n){return[new Xi(0,n,0)]}let aC="";function Y$(n,e,t,i,r){var s;let a=i.head-n.from,o=Xi.find(e,a,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),l=e[o],c=l.side(r,t);if(a==c){let h=o+=r?1:-1;if(h<0||h>=e.length)return null;l=e[o=h],a=l.side(!r,t),c=l.side(r,t)}let u=En(n.text,a,l.forward(r,t));(u<l.from||u>l.to)&&(u=c),aC=n.text.slice(Math.min(a,u),Math.max(a,u));let d=o==(r?e.length-1:0)?null:e[o+(r?1:-1)];return d&&u==c&&d.level+(r?0:1)<l.level?ee.cursor(d.side(!r,t)+n.from,d.forward(r,t)?1:-1,d.level):ee.cursor(u+n.from,l.forward(r,t)?-1:1,l.level)}function Q$(n,e,t){for(let i=e;i<t;i++){let r=rC(n.charCodeAt(i));if(r==1)return Ys;if(r==2||r==4)return Rp}return Ys}const oC=Se.define(),lC=Se.define(),cC=Se.define(),uC=Se.define(),tm=Se.define(),dC=Se.define(),hC=Se.define(),Ap=Se.define(),kp=Se.define(),fC=Se.define({combine:n=>n.some(e=>e)}),mC=Se.define({combine:n=>n.some(e=>e)}),pC=Se.define();class Aa{constructor(e,t="nearest",i="nearest",r=5,s=5,a=!1){this.range=e,this.y=t,this.x=i,this.yMargin=r,this.xMargin=s,this.isSnapshot=a}map(e){return e.empty?this:new Aa(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Aa(ee.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const ac=Ye.define({map:(n,e)=>n.map(e)}),gC=Ye.define();function Zn(n,e,t){let i=n.facet(uC);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const Ei=Se.define({combine:n=>n.length?n[0]:!0});let X$=0;const So=Se.define();class Xt{constructor(e,t,i,r,s){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=r,this.extension=s(this)}static define(e,t){const{eventHandlers:i,eventObservers:r,provide:s,decorations:a}=t||{};return new Xt(X$++,e,i,r,o=>{let l=[So.of(o)];return a&&l.push(ul.of(c=>{let u=c.plugin(o);return u?a(u):Oe.none})),s&&l.push(s(o)),l})}static fromClass(e,t){return Xt.define(i=>new e(i),t)}}class Eh{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(Zn(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Zn(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){Zn(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const vC=Se.define(),Dp=Se.define(),ul=Se.define(),yC=Se.define(),Mp=Se.define(),bC=Se.define();function Py(n,e){let t=n.state.facet(bC);if(!t.length)return t;let i=t.map(s=>s instanceof Function?s(n):s),r=[];return ct.spans(i,e.from,e.to,{point(){},span(s,a,o,l){let c=s-e.from,u=a-e.from,d=r;for(let h=o.length-1;h>=0;h--,l--){let f=o[h].spec.bidiIsolate,m;if(f==null&&(f=Q$(e.text,c,u)),l>0&&d.length&&(m=d[d.length-1]).to==c&&m.direction==f)m.to=u,d=m.inner;else{let p={from:c,to:u,direction:f,inner:[]};d.push(p),d=p.inner}}}}),r}const EC=Se.define();function Pp(n){let e=0,t=0,i=0,r=0;for(let s of n.state.facet(EC)){let a=s(n);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(t=Math.max(t,a.right)),a.top!=null&&(i=Math.max(i,a.top)),a.bottom!=null&&(r=Math.max(r,a.bottom)))}return{left:e,right:t,top:i,bottom:r}}const _o=Se.define();class Cr{constructor(e,t,i,r){this.fromA=e,this.toA=t,this.fromB=i,this.toB=r}join(e){return new Cr(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let r=0,s=0,a=0,o=0;;r++){let l=r==e.length?null:e[r],c=a-o,u=l?l.fromB:1e9;for(;s<t.length&&t[s]<u;){let d=t[s],h=t[s+1],f=Math.max(o,d),m=Math.min(u,h);if(f<=m&&new Cr(f+c,m+c,f,m).addToSet(i),h>u)break;s+=2}if(!l)return i;new Cr(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),a=l.toA,o=l.toB}}}class Su{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=ln.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,a,o,l)=>r.push(new Cr(s,a,o,l))),this.changedRanges=r}static create(e,t,i){return new Su(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class Ty extends St{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Oe.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new en],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Cr(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?r=this.domChanged.newSel.head:!i8(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let s=r>-1?Z$(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;i=new Cr(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Ee.ie||Ee.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let a=this.decorations,o=this.updateDeco(),l=n8(a,o,e.changes);return i=Cr.extendWithRanges(i,l),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let a=Ee.chrome||Ee.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,a),this.flags&=-8,a&&(a.written||r.selectionRange.focusNode!=a.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(a=>a.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.children)a instanceof _i&&a.widget instanceof Xf&&s.push(a.dom);r.updateGaps(s)}updateChildren(e,t,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(t);for(let a=r.length-1;;a--){let o=a>=0?r[a]:null;if(!o)break;let{fromA:l,toA:c,fromB:u,toB:d}=o,h,f,m,p;if(i&&i.range.fromB<d&&i.range.toB>u){let E=Wo.build(this.view.state.doc,u,i.range.fromB,this.decorations,this.dynamicDecorationMap),_=Wo.build(this.view.state.doc,i.range.toB,d,this.decorations,this.dynamicDecorationMap);f=E.breakAtStart,m=E.openStart,p=_.openEnd;let w=this.compositionView(i);_.breakAtStart?w.breakAfter=1:_.content.length&&w.merge(w.length,w.length,_.content[0],!1,_.openStart,0)&&(w.breakAfter=_.content[0].breakAfter,_.content.shift()),E.content.length&&w.merge(0,0,E.content[E.content.length-1],!0,0,E.openEnd)&&E.content.pop(),h=E.content.concat(w).concat(_.content)}else({content:h,breakAtStart:f,openStart:m,openEnd:p}=Wo.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:g,off:v}=s.findPos(c,1),{i:C,off:y}=s.findPos(l,-1);Kw(this,C,y,g,v,h,f,m,p)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let i of t.effects)i.is(gC)&&(this.editContextFormatting=i.value)}compositionView(e){let t=new Lr(e.text.nodeValue);t.flags|=8;for(let{deco:r}of e.marks)t=new ki(r,[t],t.length);let i=new en;return i.append(t,0),i}fixCompositionDOM(e){let t=(s,a)=>{a.flags|=8|(a.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(a);let o=St.get(s);o&&o!=a&&(o.dom=null),a.setDOM(s)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];t(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],t(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&!(this.view.state.facet(Ei)||this.dom.tabIndex>-1)&&Uc(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||t||s))return;let a=this.forceSelection;this.forceSelection=!1;let o=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(o.anchor)),c=o.empty?l:this.moveToLine(this.domAtPos(o.head));if(Ee.gecko&&o.empty&&!this.hasComposition&&J$(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=c=new Pn(d,0),a=!0}let u=this.view.observer.selectionRange;(a||!u.focusNode||(!jo(l.node,l.offset,u.anchorNode,u.anchorOffset)||!jo(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,o))&&(this.view.observer.ignore(()=>{Ee.android&&Ee.chrome&&this.dom.contains(u.focusNode)&&r8(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=cl(this.view.root);if(d)if(o.empty){if(Ee.gecko){let h=e8(l.node,l.offset);if(h&&h!=3){let f=(h==1?Ww:zw)(l.node,l.offset);f&&(l=new Pn(f.node,f.offset))}}d.collapse(l.node,l.offset),o.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=o.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(c.node,c.offset)}catch{}}else{let h=document.createRange();o.anchor>o.head&&([l,c]=[c,l]),h.setEnd(c.node,c.offset),h.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(h)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new Pn(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new Pn(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&jo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=cl(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let a=en.find(this,t.head);if(!a)return;let o=a.posAtStart;if(t.head==o||t.head==o+a.length)return;let l=this.coordsAt(t.head,-1),c=this.coordsAt(t.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(t.head+t.assoc);i.collapse(u.node,u.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=t.from&&i.collapse(r,s)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let r=e.offset;!i&&r<t.childNodes.length;r++){let s=St.get(t.childNodes[r]);s instanceof en&&(i=s.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let s=St.get(t.childNodes[r]);s instanceof en&&(i=s.domAtPos(s.length))}return i?new Pn(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let i=St.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let r=this.children[t];if(i<r.length||r instanceof en)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,r=0;for(let s=this.length,a=this.children.length-1;a>=0;a--){let o=this.children[a],l=s-o.breakAfter,c=l-o.length;if(l<e)break;if(c<=e&&(c<e||o.covers(-1))&&(l>e||o.covers(1))&&(!i||o instanceof en&&!(i instanceof en&&t>=0)))i=o,r=c;else if(i&&c==e&&l==e&&o instanceof _i&&Math.abs(t)<2){if(o.deco.startSide<0)break;a&&(i=null)}s=c}return i?i.coordsAt(e-r,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),r=this.children[t];if(!(r instanceof en))return null;for(;r.children.length;){let{i:o,off:l}=r.childPos(i,1);for(;;o++){if(o==r.children.length)return null;if((r=r.children[o]).length)break}i=l}if(!(r instanceof Lr))return null;let s=En(r.text,i);if(s==i)return null;let a=Ks(r.dom,i,s).getClientRects();for(let o=0;o<a.length;o++){let l=a[o];if(o==a.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,a=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,l=this.view.textDirection==It.LTR;for(let c=0,u=0;u<this.children.length;u++){let d=this.children[u],h=c+d.length;if(h>r)break;if(c>=i){let f=d.dom.getBoundingClientRect();if(t.push(f.height),a){let m=d.dom.lastChild,p=m?Va(m):[];if(p.length){let g=p[p.length-1],v=l?g.right-f.left:f.right-g.left;v>o&&(o=v,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=h)}}}c=h+d.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?It.RTL:It.LTR}measureTextSize(){for(let s of this.children)if(s instanceof en){let a=s.measureTextSize();if(a)return a}let e=document.createElement("div"),t,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Va(e.firstChild)[0];t=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:r}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Gw(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,r=0;;r++){let s=r==t.viewports.length?null:t.viewports[r],a=s?s.from-1:this.length;if(a>i){let o=(t.lineBlockAt(a).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(Oe.replace({widget:new Xf(o),block:!0,inclusive:!0,isBlockGap:!0}).range(i,a))}if(!s)break;i=s.to+1}return Oe.set(e)}updateDeco(){let e=1,t=this.view.state.facet(ul).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),i=!1,r=this.view.state.facet(yC).map((s,a)=>{let o=typeof s=="function";return o&&(i=!0),o?s(this.view):s});for(r.length&&(this.dynamicDecorationMap[e++]=i,t.push(ct.join(r))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(pC))try{if(c(this.view,e.range,e))return!0}catch(u){Zn(this.view.state,u,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!i)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=Pp(this.view),a={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:o,offsetHeight:l}=this.view.scrollDOM;T$(this.view.scrollDOM,a,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,o),-o),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==It.LTR)}}function J$(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function wC(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let i=Ww(t.focusNode,t.focusOffset),r=zw(t.focusNode,t.focusOffset),s=i||r;if(r&&i&&r.node!=i.node){let o=St.get(r.node);if(!o||o instanceof Lr&&o.text!=r.node.nodeValue)s=r;else if(n.docView.lastCompositionAfterCursor){let l=St.get(i.node);!l||l instanceof Lr&&l.text!=i.node.nodeValue||(s=r)}}if(n.docView.lastCompositionAfterCursor=s!=i,!s)return null;let a=e-s.offset;return{from:a,to:a+s.node.nodeValue.length,node:s.node}}function Z$(n,e,t){let i=wC(n,t);if(!i)return null;let{node:r,from:s,to:a}=i,o=r.nodeValue;if(/[\n\r]/.test(o)||n.state.doc.sliceString(i.from,i.to)!=o)return null;let l=e.invertedDesc,c=new Cr(l.mapPos(s),l.mapPos(a),s,a),u=[];for(let d=r.parentNode;;d=d.parentNode){let h=St.get(d);if(h instanceof ki)u.push({node:d,deco:h.mark});else{if(h instanceof en||d.nodeName=="DIV"&&d.parentNode==n.contentDOM)return{range:c,text:r,marks:u,line:d};if(d!=n.contentDOM)u.push({node:d,deco:new Dl({inclusive:!0,attributes:q$(d),tagName:d.tagName.toLowerCase()})});else return null}}}function e8(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let t8=class{constructor(){this.changes=[]}compareRange(e,t){Hc(e,t,this.changes)}comparePoint(e,t){Hc(e,t,this.changes)}boundChange(e){Hc(e,e,this.changes)}};function n8(n,e,t){let i=new t8;return ct.compare(n,e,t,i),i.changes}function r8(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function i8(n,e){let t=!1;return e&&n.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(t=!0)}),t}function s8(n,e,t=1){let i=n.charCategorizer(e),r=n.doc.lineAt(e),s=e-r.from;if(r.length==0)return ee.cursor(e);s==0?t=1:s==r.length&&(t=-1);let a=s,o=s;t<0?a=En(r.text,s,!1):o=En(r.text,s);let l=i(r.text.slice(a,o));for(;a>0;){let c=En(r.text,a,!1);if(i(r.text.slice(c,a))!=l)break;a=c}for(;o<r.length;){let c=En(r.text,o);if(i(r.text.slice(o,c))!=l)break;o=c}return ee.range(a+r.from,o+r.from)}function a8(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function o8(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function wh(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function Iy(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function Oy(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function nm(n,e,t){let i,r,s,a,o=!1,l,c,u,d;for(let m=n.firstChild;m;m=m.nextSibling){let p=Va(m);for(let g=0;g<p.length;g++){let v=p[g];r&&wh(r,v)&&(v=Iy(Oy(v,r.bottom),r.top));let C=a8(e,v),y=o8(t,v);if(C==0&&y==0)return m.nodeType==3?Ny(m,e,t):nm(m,e,t);if(!i||a>y||a==y&&s>C){i=m,r=v,s=C,a=y;let E=y?t<v.top?-1:1:C?e<v.left?-1:1:0;o=!E||(E>0?g<p.length-1:g>0)}C==0?t>v.bottom&&(!u||u.bottom<v.bottom)?(l=m,u=v):t<v.top&&(!d||d.top>v.top)&&(c=m,d=v):u&&wh(u,v)?u=Oy(u,v.bottom):d&&wh(d,v)&&(d=Iy(d,v.top))}}if(u&&u.bottom>=t?(i=l,r=u):d&&d.top<=t&&(i=c,r=d),!i)return{node:n,offset:0};let h=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return Ny(i,h,t);if(o&&i.contentEditable!="false")return nm(i,h,t);let f=Array.prototype.indexOf.call(n.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:n,offset:f}}function Ny(n,e,t){let i=n.nodeValue.length,r=-1,s=1e9,a=0;for(let o=0;o<i;o++){let l=Ks(n,o,o+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;a||(a=e-u.left);let d=(u.top>t?u.top-t:t-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&d<s){let h=e>=(u.left+u.right)/2,f=h;if((Ee.chrome||Ee.gecko)&&Ks(n,o).getBoundingClientRect().left==u.right&&(f=!h),d<=0)return{node:n,offset:o+(f?1:0)};r=o+(f?1:0),s=d}}}return{node:n,offset:r>-1?r:a>0?n.nodeValue.length:0}}function CC(n,e,t,i=-1){var r,s;let a=n.contentDOM.getBoundingClientRect(),o=a.top+n.viewState.paddingTop,l,{docHeight:c}=n.viewState,{x:u,y:d}=e,h=d-o;if(h<0)return 0;if(h>c)return n.state.doc.length;for(let E=n.viewState.heightOracle.textHeight/2,_=!1;l=n.elementAtHeight(h),l.type!=Hn.Text;)for(;h=i>0?l.bottom+E:l.top-E,!(h>=0&&h<=c);){if(_)return t?null:0;_=!0,i=-i}d=o+h;let f=l.from;if(f<n.viewport.from)return n.viewport.from==0?0:t?null:Fy(n,a,l,u,d);if(f>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:Fy(n,a,l,u,d);let m=n.dom.ownerDocument,p=n.root.elementFromPoint?n.root:m,g=p.elementFromPoint(u,d);g&&!n.contentDOM.contains(g)&&(g=null),g||(u=Math.max(a.left+1,Math.min(a.right-1,u)),g=p.elementFromPoint(u,d),g&&!n.contentDOM.contains(g)&&(g=null));let v,C=-1;if(g&&((r=n.docView.nearest(g))===null||r===void 0?void 0:r.isEditable)!=!1){if(m.caretPositionFromPoint){let E=m.caretPositionFromPoint(u,d);E&&({offsetNode:v,offset:C}=E)}else if(m.caretRangeFromPoint){let E=m.caretRangeFromPoint(u,d);E&&({startContainer:v,startOffset:C}=E,(!n.contentDOM.contains(v)||Ee.safari&&l8(v,C,u)||Ee.chrome&&c8(v,C,u))&&(v=void 0))}v&&(C=Math.min(li(v),C))}if(!v||!n.docView.dom.contains(v)){let E=en.find(n.docView,f);if(!E)return h>l.top+l.height/2?l.to:l.from;({node:v,offset:C}=nm(E.dom,u,d))}let y=n.docView.nearest(v);if(!y)return null;if(y.isWidget&&((s=y.dom)===null||s===void 0?void 0:s.nodeType)==1){let E=y.dom.getBoundingClientRect();return e.y<E.top||e.y<=E.bottom&&e.x<=(E.left+E.right)/2?y.posAtStart:y.posAtEnd}else return y.localPosFromDOM(v,C)+y.posAtStart}function Fy(n,e,t,i,r){let s=Math.round((i-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let o=n.viewState.heightOracle.textHeight,l=Math.floor((r-t.top-(n.defaultLineHeight-o)*.5)/o);s+=l*n.viewState.heightOracle.lineLength}let a=n.state.sliceDoc(t.from,t.to);return t.from+Hf(a,s,n.state.tabSize)}function l8(n,e,t){let i;if(n.nodeType!=3||e!=(i=n.nodeValue.length))return!1;for(let r=n.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return Ks(n,i-1,i).getBoundingClientRect().left>t}function c8(n,e,t){if(e!=0)return!1;for(let r=n;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=n.nodeType==1?n.getBoundingClientRect():Ks(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function rm(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==Hn.Text))return i}return t}function u8(n,e,t,i){let r=rm(n,e.head),s=!i||r.type!=Hn.Text||!(n.lineWrapping||r.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let a=n.dom.getBoundingClientRect(),o=n.textDirectionAt(r.from),l=n.posAtCoords({x:t==(o==It.LTR)?a.right-1:a.left+1,y:(s.top+s.bottom)/2});if(l!=null)return ee.cursor(l,t?-1:1)}return ee.cursor(t?r.to:r.from,t?-1:1)}function Ly(n,e,t,i){let r=n.state.doc.lineAt(e.head),s=n.bidiSpans(r),a=n.textDirectionAt(r.from);for(let o=e,l=null;;){let c=Y$(r,s,a,o,t),u=aC;if(!c){if(r.number==(t?n.state.doc.lines:1))return o;u=`
`,r=n.state.doc.line(r.number+(t?1:-1)),s=n.bidiSpans(r),c=n.visualLineSide(r,!t)}if(l){if(!l(u))return o}else{if(!i)return c;l=i(u)}o=c}}function d8(n,e,t){let i=n.state.charCategorizer(e),r=i(t);return s=>{let a=i(s);return r==Bt.Space&&(r=a),r==a}}function h8(n,e,t,i){let r=e.head,s=t?1:-1;if(r==(t?n.state.doc.length:0))return ee.cursor(r,e.assoc);let a=e.goalColumn,o,l=n.contentDOM.getBoundingClientRect(),c=n.coordsAtPos(r,e.assoc||-1),u=n.documentTop;if(c)a==null&&(a=c.left-l.left),o=s<0?c.top:c.bottom;else{let f=n.viewState.lineBlockAt(r);a==null&&(a=Math.min(l.right-l.left,n.defaultCharacterWidth*(r-f.from))),o=(s<0?f.top:f.bottom)+u}let d=l.left+a,h=i??n.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let m=o+(h+f)*s,p=CC(n,{x:d,y:m},!1,s);if(m<l.top||m>l.bottom||(s<0?p<r:p>r)){let g=n.docView.coordsForChar(p),v=!g||m<g.top?-1:1;return ee.cursor(p,v,void 0,a)}}}function Vc(n,e,t){for(;;){let i=0;for(let r of n)r.between(e-1,e+1,(s,a,o)=>{if(e>s&&e<a){let l=i||t||(e-s<a-e?-1:1);e=l<0?s:a,i=l}});if(!i)return e}}function Ch(n,e,t){let i=Vc(n.state.facet(Mp).map(r=>r(n)),t.from,e.head>t.from?-1:1);return i==t.from?t:ee.cursor(i,i<t.from?1:-1)}const xo="￿";class f8{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(rt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=xo}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let a=r.nextSibling;if(a==t)break;let o=St.get(r),l=St.get(a);(o&&l?o.breakAfter:(o?o.breakAfter:wu(r))||wu(a)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=a}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,a=1,o;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,i),a=this.lineSeparator.length):(o=r.exec(t))&&(s=o.index,a=o[0].length),this.append(t.slice(i,s<0?t.length:s)),s<0)break;if(this.lineBreak(),a>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=a-1);i=s+a}}readNode(e){if(e.cmIgnore)return;let t=St.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(m8(e,i.node,i.offset)?t:0))}}function m8(n,e,t){for(;;){if(!e||t<li(e))return!1;if(e==n)return!0;t=Gs(e)+1,e=e.parentNode}}class By{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class p8{constructor(e,t,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:s,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let o=s||a?[]:y8(e),l=new f8(o,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=b8(o,this.bounds.from)}else{let o=e.observer.selectionRange,l=s&&s.node==o.focusNode&&s.offset==o.focusOffset||!Wf(e.contentDOM,o.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(o.focusNode,o.focusOffset),c=a&&a.node==o.anchorNode&&a.offset==o.anchorOffset||!Wf(e.contentDOM,o.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(o.anchorNode,o.anchorOffset),u=e.viewport;if((Ee.ios||Ee.chrome)&&e.state.selection.main.empty&&l!=c&&(u.from>0||u.to<e.state.doc.length)){let d=Math.min(l,c),h=Math.max(l,c),f=u.from-d,m=u.to-h;(f==0||f==1||d==0)&&(m==0||m==-1||h==e.state.doc.length)&&(l=0,c=e.state.doc.length)}this.newSel=ee.single(c,l)}}}function SC(n,e){let t,{newSel:i}=e,r=n.state.selection.main,s=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:o}=e.bounds,l=r.from,c=null;(s===8||Ee.android&&e.text.length<o-a)&&(l=r.to,c="end");let u=v8(n.state.doc.sliceString(a,o,xo),e.text,l-a,c);u&&(Ee.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==xo+xo&&u.toB--,t={from:a+u.from,to:a+u.toA,insert:dt.of(e.text.slice(u.from,u.toB).split(xo))})}else i&&(!n.hasFocus&&n.state.facet(Ei)||i.main.eq(r))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!r.empty&&i&&i.main.empty?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,r.to)}:(Ee.mac||Ee.android)&&t&&t.from==t.to&&t.from==r.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=ee.single(i.main.anchor-1,i.main.head-1)),t={from:t.from,to:t.to,insert:dt.of([t.insert.toString().replace("."," ")])}):t&&t.from>=r.from&&t.to<=r.to&&(t.from!=r.from||t.to!=r.to)&&r.to-r.from-(t.to-t.from)<=4?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,r.to))}:Ee.chrome&&t&&t.from==t.to&&t.from==r.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=ee.single(i.main.anchor-1,i.main.head-1)),t={from:r.from,to:r.to,insert:dt.of([" "])}),t)return Tp(n,t,i,s);if(i&&!i.main.eq(r)){let a=!1,o="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(a=!0),o=n.inputState.lastSelectionOrigin),n.dispatch({selection:i,scrollIntoView:a,userEvent:o}),!0}else return!1}function Tp(n,e,t,i=-1){if(Ee.ios&&n.inputState.flushIOSKey(e))return!0;let r=n.state.selection.main;if(Ee.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&n.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Ra(n.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&Ra(n.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&Ra(n.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let a,o=()=>a||(a=g8(n,e,t));return n.state.facet(dC).some(l=>l(n,e.from,e.to,s,o))||n.dispatch(o()),!0}function g8(n,e,t){let i,r=n.state,s=r.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let o=s.from<e.from?r.sliceDoc(s.from,e.from):"",l=s.to>e.to?r.sliceDoc(e.to,s.to):"";i=r.replaceSelection(n.state.toText(o+e.insert.sliceString(0,void 0,n.state.lineBreak)+l))}else{let o=r.changes(e),l=t&&t.main.to<=o.newLength?t.main:void 0;if(r.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=n.state.sliceDoc(e.from,e.to),u,d=t&&wC(n,t.main.head);if(d){let m=e.insert.length-(e.to-e.from);u={from:d.from,to:d.to-m}}else u=n.state.doc.lineAt(s.head);let h=s.to-e.to,f=s.to-s.from;i=r.changeByRange(m=>{if(m.from==s.from&&m.to==s.to)return{changes:o,range:l||m.map(o)};let p=m.to-h,g=p-c.length;if(m.to-m.from!=f||n.state.sliceDoc(g,p)!=c||m.to>=u.from&&m.from<=u.to)return{range:m};let v=r.changes({from:g,to:p,insert:e.insert}),C=m.to-s.to;return{changes:v,range:l?ee.range(Math.max(0,l.anchor+C),Math.max(0,l.head+C)):m.map(v)}})}else i={changes:o,selection:l&&r.selection.replaceRange(l)}}let a="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,a+=".compose",n.inputState.compositionFirstChange&&(a+=".start",n.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:a,scrollIntoView:!0})}function v8(n,e,t,i){let r=Math.min(n.length,e.length),s=0;for(;s<r&&n.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&n.length==e.length)return null;let a=n.length,o=e.length;for(;a>0&&o>0&&n.charCodeAt(a-1)==e.charCodeAt(o-1);)a--,o--;if(i=="end"){let l=Math.max(0,s-Math.min(a,o));t-=a+l-s}if(a<s&&n.length<e.length){let l=t<=s&&t>=a?s-t:0;s-=l,o=s+(o-a),a=s}else if(o<s){let l=t<=s&&t>=o?s-t:0;s-=l,a=s+(a-o),o=s}return{from:s,toA:a,toB:o}}function y8(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:s}=n.observer.selectionRange;return t&&(e.push(new By(t,i)),(r!=t||s!=i)&&e.push(new By(r,s))),e}function b8(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?ee.single(t+e,i+e):null}class E8{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Ee.safari&&e.contentDOM.addEventListener("input",()=>null),Ee.gecko&&F8(e.contentDOM.ownerDocument)}handleEvent(e){!k8(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,t){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,t);for(let r of i.handlers){if(t.defaultPrevented)break;if(r(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=w8(e),i=this.handlers,r=this.view.contentDOM;for(let s in t)if(s!="scroll"){let a=!t[s].handlers.length,o=i[s];o&&a!=!o.handlers.length&&(r.removeEventListener(s,this.handleEvent),o=null),o||r.addEventListener(s,this.handleEvent,{passive:a})}for(let s in i)s!="scroll"&&!t[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&xC.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Ee.android&&Ee.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return Ee.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=_C.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||C8.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Ra(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Ee.safari&&!Ee.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function $y(n,e){return(t,i)=>{try{return e.call(n,i,t)}catch(r){Zn(t.state,r)}}}function w8(n){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of n){let r=i.spec;if(r&&r.domEventHandlers)for(let s in r.domEventHandlers){let a=r.domEventHandlers[s];a&&t(s).handlers.push($y(i.value,a))}if(r&&r.domEventObservers)for(let s in r.domEventObservers){let a=r.domEventObservers[s];a&&t(s).observers.push($y(i.value,a))}}for(let i in Br)t(i).handlers.push(Br[i]);for(let i in xr)t(i).observers.push(xr[i]);return e}const _C=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],C8="dthko",xC=[16,17,18,20,91,92,224,225],oc=6;function lc(n){return Math.max(0,n)*.7+8}function S8(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class _8{constructor(e,t,i,r){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=I$(e.contentDOM),this.atoms=e.state.facet(Mp).map(a=>a(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(rt.allowMultipleSelections)&&x8(e,t),this.dragging=A8(e,t)&&kC(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&S8(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,r=0,s=0,a=this.view.win.innerWidth,o=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:o}=this.scrollParents.y.getBoundingClientRect());let l=Pp(this.view);e.clientX-l.left<=r+oc?t=-lc(r-e.clientX):e.clientX+l.right>=a-oc&&(t=lc(e.clientX-a)),e.clientY-l.top<=s+oc?i=-lc(s-e.clientY):e.clientY+l.bottom>=o-oc&&(i=lc(e.clientY-o)),this.setScrollSpeed(t,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let a=Vc(this.atoms,r.from,0);a!=r.from&&(s=ee.cursor(a,-1))}else{let a=Vc(this.atoms,r.from,-1),o=Vc(this.atoms,r.to,1);(a!=r.from||o!=r.to)&&(s=ee.range(r.from==r.anchor?a:o,r.from==r.head?a:o))}s&&(t||(t=e.ranges.slice()),t[i]=s)}return t?ee.create(t,e.mainIndex):e}select(e){let{view:t}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function x8(n,e){let t=n.state.facet(oC);return t.length?t[0](e):Ee.mac?e.metaKey:e.ctrlKey}function R8(n,e){let t=n.state.facet(lC);return t.length?t[0](e):Ee.mac?!e.altKey:!e.ctrlKey}function A8(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=cl(n.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let a=r[s];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function k8(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=St.get(t))&&i.ignoreEvent(e))return!1;return!0}const Br=Object.create(null),xr=Object.create(null),RC=Ee.ie&&Ee.ie_version<15||Ee.ios&&Ee.webkit_version<604;function D8(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),AC(n,t.value)},50)}function Sd(n,e,t){for(let i of n.facet(e))t=i(t,n);return t}function AC(n,e){e=Sd(n.state,Ap,e);let{state:t}=n,i,r=1,s=t.toText(e),a=s.lines==t.selection.ranges.length;if(im!=null&&t.selection.ranges.every(l=>l.empty)&&im==s.toString()){let l=-1;i=t.changeByRange(c=>{let u=t.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let d=t.toText((a?s.line(r++).text:e)+t.lineBreak);return{changes:{from:u.from,insert:d},range:ee.cursor(c.from+d.length)}})}else a?i=t.changeByRange(l=>{let c=s.line(r++);return{changes:{from:l.from,to:l.to,insert:c.text},range:ee.cursor(l.from+c.length)}}):i=t.replaceSelection(s);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}xr.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Br.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);xr.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};xr.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Br.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of n.state.facet(cC))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=T8(n,e)),t){let i=!n.hasFocus;n.inputState.startMouseSelection(new _8(n,e,t,i)),i&&n.observer.ignore(()=>{Hw(n.contentDOM);let s=n.root.activeElement;s&&!s.contains(n.contentDOM)&&s.blur()});let r=n.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function qy(n,e,t,i){if(i==1)return ee.cursor(e,t);if(i==2)return s8(n.state,e,t);{let r=en.find(n.docView,e),s=n.state.doc.lineAt(r?r.posAtEnd:e),a=r?r.posAtStart:s.from,o=r?r.posAtEnd:s.to;return o<n.state.doc.length&&o==s.to&&o++,ee.range(a,o)}}let Uy=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function M8(n,e,t,i){let r=en.find(n.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let a=r.coordsAt(s,-1);if(a&&Uy(t,i,a))return-1;let o=r.coordsAt(s,1);return o&&Uy(t,i,o)?1:a&&a.bottom>=i?-1:1}function Hy(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:M8(n,t,e.clientX,e.clientY)}}const P8=Ee.ie&&Ee.ie_version<=11;let Vy=null,jy=0,Wy=0;function kC(n){if(!P8)return n.detail;let e=Vy,t=Wy;return Vy=n,Wy=Date.now(),jy=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(jy+1)%3:1}function T8(n,e){let t=Hy(n,e),i=kC(e),r=n.state.selection;return{update(s){s.docChanged&&(t.pos=s.changes.mapPos(t.pos),r=r.map(s.changes))},get(s,a,o){let l=Hy(n,s),c,u=qy(n,l.pos,l.bias,i);if(t.pos!=l.pos&&!a){let d=qy(n,t.pos,t.bias,i),h=Math.min(d.from,u.from),f=Math.max(d.to,u.to);u=h<u.from?ee.range(h,f):ee.range(f,h)}return a?r.replaceRange(r.main.extend(u.from,u.to)):o&&i==1&&r.ranges.length>1&&(c=I8(r,l.pos))?c:o?r.addRange(u):ee.create([u])}}}function I8(n,e){for(let t=0;t<n.ranges.length;t++){let{from:i,to:r}=n.ranges[t];if(i<=e&&r>=e)return ee.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}Br.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let r=n.docView.nearest(e.target);if(r&&r.isWidget){let s=r.posAtStart,a=s+r.length;(s>=t.to||a<=t.from)&&(t=ee.range(s,a))}}let{inputState:i}=n;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",Sd(n.state,kp,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Br.dragend=n=>(n.inputState.draggedContent=null,!1);function zy(n,e,t,i){if(t=Sd(n.state,Ap,t),!t)return;let r=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=n.inputState,a=i&&s&&R8(n,e)?{from:s.from,to:s.to}:null,o={from:r,insert:t},l=n.state.changes(a?[a,o]:o);n.focus(),n.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:a?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Br.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),r=0,s=()=>{++r==t.length&&zy(n,e,i.filter(a=>a!=null).join(n.state.lineBreak),!1)};for(let a=0;a<t.length;a++){let o=new FileReader;o.onerror=s,o.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(o.result)||(i[a]=o.result),s()},o.readAsText(t[a])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return zy(n,e,i,!0),!0}return!1};Br.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=RC?null:e.clipboardData;return t?(AC(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(D8(n),!1)};function O8(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function N8(n){let e=[],t=[],i=!1;for(let r of n.selection.ranges)r.empty||(e.push(n.sliceDoc(r.from,r.to)),t.push(r));if(!e.length){let r=-1;for(let{from:s}of n.selection.ranges){let a=n.doc.lineAt(s);a.number>r&&(e.push(a.text),t.push({from:a.from,to:Math.min(n.doc.length,a.to+1)})),r=a.number}i=!0}return{text:Sd(n,kp,e.join(n.lineBreak)),ranges:t,linewise:i}}let im=null;Br.copy=Br.cut=(n,e)=>{let{text:t,ranges:i,linewise:r}=N8(n.state);if(!t&&!r)return!1;im=r?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=RC?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",t),!0):(O8(n,t),!1)};const DC=Ti.define();function MC(n,e){let t=[];for(let i of n.facet(hC)){let r=i(n,e);r&&t.push(r)}return t?n.update({effects:t,annotations:DC.of(!0)}):null}function PC(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=MC(n.state,e);t?n.dispatch(t):n.update([])}},10)}xr.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),PC(n)};xr.blur=n=>{n.observer.clearSelectionRange(),PC(n)};xr.compositionstart=xr.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};xr.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,Ee.chrome&&Ee.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};xr.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Br.beforeinput=(n,e)=>{var t,i;if(e.inputType=="insertReplacementText"&&n.observer.editContext){let s=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),a=e.getTargetRanges();if(s&&a.length){let o=a[0],l=n.posAtDOM(o.startContainer,o.startOffset),c=n.posAtDOM(o.endContainer,o.endOffset);return Tp(n,{from:l,to:c,insert:n.state.toText(s)},null),!0}}let r;if(Ee.chrome&&Ee.android&&(r=_C.find(s=>s.inputType==e.inputType))&&(n.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let s=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>s+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return Ee.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),Ee.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>xr.compositionend(n,e),20),!1};const Gy=new Set;function F8(n){Gy.has(n)||(Gy.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const Ky=["pre-wrap","normal","pre-line","break-spaces"];let za=!1;function Yy(){za=!1}class L8{constructor(e){this.lineWrapping=e,this.doc=dt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Ky.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(t=!0,this.heightSamples[Math.floor(r*10)]=!0)}return t}refresh(e,t,i,r,s,a){let o=Ky.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=i,this.textHeight=r,this.lineLength=s,l){this.heightSamples={};for(let c=0;c<a.length;c++){let u=a[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class B8{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class ti{constructor(e,t,i,r,s){this.from=e,this.length=t,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?Hn.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ls?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new ti(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Mt=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(Mt||(Mt={}));const jc=.001;class Vn{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>jc&&(za=!0),this.height=e)}replace(e,t,i){return Vn.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,r){let s=this,a=i.doc;for(let o=r.length-1;o>=0;o--){let{fromA:l,toA:c,fromB:u,toB:d}=r[o],h=s.lineAt(l,Mt.ByPosNoHeight,i.setDoc(t),0,0),f=h.to>=c?h:s.lineAt(c,Mt.ByPosNoHeight,i,0,0);for(d+=f.to-c,c=f.to;o>0&&h.from<=r[o-1].toA;)l=r[o-1].fromA,u=r[o-1].fromB,o--,l<h.from&&(h=s.lineAt(l,Mt.ByPosNoHeight,i,0,0));u+=h.from-l,l=h.from;let m=Ip.build(i.setDoc(a),e,u,d);s=_u(s,s.replace(l,c,m))}return s.updateHeight(i,0)}static empty(){return new or(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,r=0,s=0;for(;;)if(t==i)if(r>s*2){let o=e[t-1];o.break?e.splice(--t,1,o.left,null,o.right):e.splice(--t,1,o.left,o.right),i+=1+o.break,r-=o.size}else if(s>r*2){let o=e[i];o.break?e.splice(i,1,o.left,null,o.right):e.splice(i,1,o.left,o.right),i+=2+o.break,s-=o.size}else break;else if(r<s){let o=e[t++];o&&(r+=o.size)}else{let o=e[--i];o&&(s+=o.size)}let a=0;return e[t-1]==null?(a=1,t--):e[t]==null&&(a=1,i++),new $8(Vn.of(e.slice(0,t)),a,Vn.of(e.slice(i)))}}function _u(n,e){return n==e?n:(n.constructor!=e.constructor&&(za=!0),e)}Vn.prototype.size=1;class TC extends Vn{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,r){return new ti(r,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,t,i,r,s,a){e<=s+this.length&&t>=s&&a(this.blockAt(0,i,r,s))}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class or extends TC{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,r){return new ti(r,this.length,i,this.height,this.breaks)}replace(e,t,i){let r=i[0];return i.length==1&&(r instanceof or||r instanceof vn&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof vn?r=new or(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Vn.of(i)}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class vn extends Vn{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,s=r-i+1,a,o=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);a=l/s,this.length>s+1&&(o=(this.height-l)/(this.length-s-1))}else a=this.height/s;return{firstLine:i,lastLine:r,perLine:a,perChar:o}}blockAt(e,t,i,r){let{firstLine:s,lastLine:a,perLine:o,perChar:l}=this.heightMetrics(t,r);if(t.lineWrapping){let c=r+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),u=t.doc.lineAt(c),d=o+u.length*l,h=Math.max(i,e-d/2);return new ti(u.from,u.length,h,d,0)}else{let c=Math.max(0,Math.min(a-s,Math.floor((e-i)/o))),{from:u,length:d}=t.doc.line(s+c);return new ti(u,d,i+o*c,o,0)}}lineAt(e,t,i,r,s){if(t==Mt.ByHeight)return this.blockAt(e,i,r,s);if(t==Mt.ByPosNoHeight){let{from:f,to:m}=i.doc.lineAt(e);return new ti(f,m-f,0,0,0)}let{firstLine:a,perLine:o,perChar:l}=this.heightMetrics(i,s),c=i.doc.lineAt(e),u=o+c.length*l,d=c.number-a,h=r+o*d+l*(c.from-s-d);return new ti(c.from,c.length,Math.max(r,Math.min(h,r+this.height-u)),u,0)}forEachLine(e,t,i,r,s,a){e=Math.max(e,s),t=Math.min(t,s+this.length);let{firstLine:o,perLine:l,perChar:c}=this.heightMetrics(i,s);for(let u=e,d=r;u<=t;){let h=i.doc.lineAt(u);if(u==e){let m=h.number-o;d+=l*m+c*(e-s-m)}let f=l+c*h.length;a(new ti(h.from,h.length,d,f,0)),d+=f,u=h.to+1}}replace(e,t,i){let r=this.length-t;if(r>0){let s=i[i.length-1];s instanceof vn?i[i.length-1]=new vn(s.length+r):i.push(null,new vn(r-1))}if(e>0){let s=i[0];s instanceof vn?i[0]=new vn(e+s.length):i.unshift(new vn(e-1),null)}return Vn.of(i)}decomposeLeft(e,t){t.push(new vn(e-1),null)}decomposeRight(e,t){t.push(null,new vn(this.length-e-1))}updateHeight(e,t=0,i=!1,r){let s=t+this.length;if(r&&r.from<=t+this.length&&r.more){let a=[],o=Math.max(t,r.from),l=-1;for(r.from>t&&a.push(new vn(r.from-t-1).updateHeight(e,t));o<=s&&r.more;){let u=e.doc.lineAt(o).length;a.length&&a.push(null);let d=r.heights[r.index++];l==-1?l=d:Math.abs(d-l)>=jc&&(l=-2);let h=new or(u,d);h.outdated=!1,a.push(h),o+=u+1}o<=s&&a.push(null,new vn(s-o).updateHeight(e,o));let c=Vn.of(a);return(l<0||Math.abs(c.height-this.height)>=jc||Math.abs(l-this.heightMetrics(e,t).perLine)>=jc)&&(za=!0),_u(this,c)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class $8 extends Vn{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,t,i,r):this.right.blockAt(e,t,s,r+this.left.length+this.break)}lineAt(e,t,i,r,s){let a=r+this.left.height,o=s+this.left.length+this.break,l=t==Mt.ByHeight?e<a:e<o,c=l?this.left.lineAt(e,t,i,r,s):this.right.lineAt(e,t,i,a,o);if(this.break||(l?c.to<o:c.from>o))return c;let u=t==Mt.ByPosNoHeight?Mt.ByPosNoHeight:Mt.ByPos;return l?c.join(this.right.lineAt(o,u,i,a,o)):this.left.lineAt(o,u,i,r,s).join(c)}forEachLine(e,t,i,r,s,a){let o=r+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,i,r,s,a),t>=l&&this.right.forEachLine(e,t,i,o,l,a);else{let c=this.lineAt(l,Mt.ByPos,i,r,s);e<c.from&&this.left.forEachLine(e,c.from-1,i,r,s,a),c.to>=e&&c.from<=t&&a(c),t>c.to&&this.right.forEachLine(c.to+1,t,i,o,l,a)}}replace(e,t,i){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let a=s.length;for(let o of i)s.push(o);if(e>0&&Qy(s,a-1),t<this.length){let o=s.length;this.decomposeRight(t,s),Qy(s,o)}return Vn.of(s)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Vn.of(this.break?[e,null,t]:[e,t]):(this.left=_u(this.left,e),this.right=_u(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,r){let{left:s,right:a}=this,o=t+s.length+this.break,l=null;return r&&r.from<=t+s.length&&r.more?l=s=s.updateHeight(e,t,i,r):s.updateHeight(e,t,i),r&&r.from<=o+a.length&&r.more?l=a=a.updateHeight(e,o,i,r):a.updateHeight(e,o,i),l?this.balanced(s,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Qy(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof vn&&(i=n[e+1])instanceof vn&&n.splice(e-1,3,new vn(t.length+1+i.length))}const q8=5;class Ip{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof or?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new or(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let a=t-e;i.block?this.addBlock(new TC(a,r,i)):(a||s||r>=q8)&&this.addLineDeco(r,s,a)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new or(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new vn(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof or)return e;let t=new or(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof or)&&!this.isCovered?this.nodes.push(new or(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof or&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,t,i,r){let s=new Ip(i,e);return ct.spans(t,i,r,s,0),s.finish(i)}}function U8(n,e,t){let i=new H8;return ct.compare(n,e,t,i,0),i.changes}class H8{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,r){(e<t||i&&i.heightRelevant||r&&r.heightRelevant)&&Hc(e,t,this.changes,5)}}function V8(n,e){let t=n.getBoundingClientRect(),i=n.ownerDocument,r=i.defaultView||window,s=Math.max(0,t.left),a=Math.min(r.innerWidth,t.right),o=Math.max(0,t.top),l=Math.min(r.innerHeight,t.bottom);for(let c=n.parentNode;c&&c!=i.body;)if(c.nodeType==1){let u=c,d=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&d.overflow!="visible"){let h=u.getBoundingClientRect();s=Math.max(s,h.left),a=Math.min(a,h.right),o=Math.max(o,h.top),l=Math.min(c==n.parentNode?r.innerHeight:l,h.bottom)}c=d.position=="absolute"||d.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-t.left,right:Math.max(s,a)-t.left,top:o-(t.top+e),bottom:Math.max(o,l)-(t.top+e)}}function j8(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function W8(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Sh{constructor(e,t,i,r){this.from=e,this.to=t,this.size=i,this.displaySize=r}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=t[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e,t){return Oe.replace({widget:new z8(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class z8 extends Ii{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Xy{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Jy,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=It.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Dp).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new L8(t),this.stateDeco=e.facet(ul).filter(i=>typeof i!="function"),this.heightMap=Vn.empty().applyChanges(this.stateDeco,dt.empty,this.heightOracle.setDoc(e.doc),[new Cr(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Oe.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let r=i?t.head:t.anchor;if(!e.some(({from:s,to:a})=>r>=s&&r<=a)){let{from:s,to:a}=this.lineBlockAt(r);e.push(new cc(s,a))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Jy:new Op(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Ro(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(ul).filter(u=>typeof u!="function");let r=e.changedRanges,s=Cr.extendWithRanges(r,U8(i,this.stateDeco,e?e.changes:ln.empty(this.state.doc.length))),a=this.heightMap.height,o=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Yy(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=a||za)&&(e.flags|=2),o?(this.scrollAnchorPos=e.changes.mapPos(o.from,-1),this.scrollAnchorHeight=o.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(mC)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?It.RTL:It.LTR;let a=this.heightOracle.mustRefreshForWrapping(s),o=t.getBoundingClientRect(),l=a||this.mustMeasureContent||this.contentDOMHeight!=o.height;this.contentDOMHeight=o.height,this.mustMeasureContent=!1;let c=0,u=0;if(o.width&&o.height){let{scaleX:E,scaleY:_}=Uw(t,o);(E>.005&&Math.abs(this.scaleX-E)>.005||_>.005&&Math.abs(this.scaleY-_)>.005)&&(this.scaleX=E,this.scaleY=_,c|=16,a=l=!0)}let d=(parseInt(i.paddingTop)||0)*this.scaleY,h=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=h)&&(this.paddingTop=d,this.paddingBottom=h,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let f=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=f&&(this.scrollAnchorHeight=-1,this.scrollTop=f),this.scrolledToBottom=jw(e.scrollDOM);let m=(this.printing?W8:V8)(t,this.paddingTop),p=m.top-this.pixelViewport.top,g=m.bottom-this.pixelViewport.bottom;this.pixelViewport=m;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(l=!0)),!this.inView&&!this.scrollTarget&&!j8(e.dom))return 0;let C=o.width;if((this.contentDOMWidth!=C||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=o.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),l){let E=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(E)&&(a=!0),a||r.lineWrapping&&Math.abs(C-this.contentDOMWidth)>r.charWidth){let{lineHeight:_,charWidth:w,textHeight:k}=e.docView.measureTextSize();a=_>0&&r.refresh(s,_,w,k,C/w,E),a&&(e.docView.minWidth=0,c|=16)}p>0&&g>0?u=Math.max(p,g):p<0&&g<0&&(u=Math.min(p,g)),Yy();for(let _ of this.viewports){let w=_.from==this.viewport.from?E:e.docView.measureVisibleLineHeights(_);this.heightMap=(a?Vn.empty().applyChanges(this.stateDeco,dt.empty,this.heightOracle,[new Cr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,a,new B8(_.from,w))}za&&(c|=2)}let y=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:a,visibleBottom:o}=this,l=new cc(r.lineAt(a-i*1e3,Mt.ByHeight,s,0,0).from,r.lineAt(o+(1-i)*1e3,Mt.ByHeight,s,0,0).to);if(t){let{head:c}=t.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=r.lineAt(c,Mt.ByPos,s,0,0),h;t.y=="center"?h=(d.top+d.bottom)/2-u/2:t.y=="start"||t.y=="nearest"&&c<l.from?h=d.top:h=d.bottom-u,l=new cc(r.lineAt(h-1e3/2,Mt.ByHeight,s,0,0).from,r.lineAt(h+u+1e3/2,Mt.ByHeight,s,0,0).to)}}return l}mapViewport(e,t){let i=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new cc(this.heightMap.lineAt(i,Mt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,Mt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,Mt.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(t,Mt.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:o}=this;return(e==0||r<=a-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||s>=o+Math.max(10,Math.min(i,250)))&&r>a-2*1e3&&s<o+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let r of e)t.touchesRange(r.from,r.to)||i.push(new Sh(t.mapPos(r.from),t.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,a=r<<1;if(this.defaultTextDirection!=It.LTR&&!i)return[];let o=[],l=(u,d,h,f)=>{if(d-u<s)return;let m=this.state.selection.main,p=[m.from];m.empty||p.push(m.to);for(let v of p)if(v>u&&v<d){l(u,v-10,h,f),l(v+10,d,h,f);return}let g=K8(e,v=>v.from>=h.from&&v.to<=h.to&&Math.abs(v.from-u)<s&&Math.abs(v.to-d)<s&&!p.some(C=>v.from<C&&v.to>C));if(!g){if(d<h.to&&t&&i&&t.visibleRanges.some(y=>y.from<=d&&y.to>=d)){let y=t.moveToLineBoundary(ee.cursor(d),!1,!0).head;y>u&&(d=y)}let v=this.gapSize(h,u,d,f),C=i||v<2e6?v:2e6;g=new Sh(u,d,v,C)}o.push(g)},c=u=>{if(u.length<a||u.type!=Hn.Text)return;let d=G8(u.from,u.to,this.stateDeco);if(d.total<a)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,f,m;if(i){let p=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,g,v;if(h!=null){let C=dc(d,h),y=((this.visibleBottom-this.visibleTop)/2+p)/u.height;g=C-y,v=C+y}else g=(this.visibleTop-u.top-p)/u.height,v=(this.visibleBottom-u.top+p)/u.height;f=uc(d,g),m=uc(d,v)}else{let p=d.total*this.heightOracle.charWidth,g=r*this.heightOracle.charWidth,v=0;if(p>2e6)for(let w of e)w.from>=u.from&&w.from<u.to&&w.size!=w.displaySize&&w.from*this.heightOracle.charWidth+v<this.pixelViewport.left&&(v=w.size-w.displaySize);let C=this.pixelViewport.left+v,y=this.pixelViewport.right+v,E,_;if(h!=null){let w=dc(d,h),k=((y-C)/2+g)/p;E=w-k,_=w+k}else E=(C-g)/p,_=(y+g)/p;f=uc(d,E),m=uc(d,_)}f>u.from&&l(u.from,f,u,d),m<u.to&&l(m,u.to,u,d)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return o}gapSize(e,t,i,r){let s=dc(r,i)-dc(r,t);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){Sh.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Oe.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let i=[];ct.spans(t,this.viewport.from,this.viewport.to,{span(s,a){i.push({from:s,to:a})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let s=0;s<i.length&&!(r&8);s++){let a=this.visibleRanges[s],o=i[s];(a.from!=o.from||a.to!=o.to)&&(r|=4,e&&e.mapPos(a.from,-1)==o.from&&e.mapPos(a.to,1)==o.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Ro(this.heightMap.lineAt(e,Mt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Ro(this.heightMap.lineAt(this.scaler.fromDOM(e),Mt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Ro(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class cc{constructor(e,t){this.from=e,this.to=t}}function G8(n,e,t){let i=[],r=n,s=0;return ct.spans(t,n,e,{span(){},point(a,o){a>r&&(i.push({from:r,to:a}),s+=a-r),r=o}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function uc({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let r=0;;r++){let{from:s,to:a}=e[r],o=a-s;if(i<=o)return s+i;i-=o}}function dc(n,e){let t=0;for(let{from:i,to:r}of n.ranges){if(e<=r){t+=e-i;break}t+=r-i}return t/n.total}function K8(n,e){for(let t of n)if(e(t))return t}const Jy={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class Op{constructor(e,t,i){let r=0,s=0,a=0;this.viewports=i.map(({from:o,to:l})=>{let c=t.lineAt(o,Mt.ByPos,e,0,0).top,u=t.lineAt(l,Mt.ByPos,e,0,0).bottom;return r+=u-c,{from:o,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let o of this.viewports)o.domTop=a+(o.top-s)*this.scale,a=o.domBottom=o.domTop+(o.bottom-o.top),s=o.bottom}toDOM(e){for(let t=0,i=0,r=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let t=0,i=0,r=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}eq(e){return e instanceof Op?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to):!1}}function Ro(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new ti(n.from,n.length,t,i-t,Array.isArray(n._content)?n._content.map(r=>Ro(r,e)):n._content)}const hc=Se.define({combine:n=>n.join(" ")}),sm=Se.define({combine:n=>n.indexOf(!0)>-1}),am=as.newName(),IC=as.newName(),OC=as.newName(),NC={"&light":"."+IC,"&dark":"."+OC};function om(n,e,t){return new as(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return n;if(!t||!t[r])throw new RangeError(`Unsupported selector: ${r}`);return t[r]}):n+" "+i}})}const Y8=om("."+am,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},NC),Q8={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},_h=Ee.ie&&Ee.ie_version<=11;class X8{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new O$,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(Ee.ie&&Ee.ie_version<=11||Ee.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(Ee.chrome&&Ee.chrome_version<126)&&(this.editContext=new Z8(e),e.state.facet(Ei)&&(e.contentDOM.editContext=this.editContext.editContext)),_h&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(Ei)?i.root.activeElement!=this.dom:!Uc(this.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Ee.ie&&Ee.ie_version<=11||Ee.android&&Ee.chrome)&&!i.state.selection.main.empty&&r.focusNode&&jo(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=cl(e.root);if(!t)return!1;let i=Ee.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&J8(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let r=Uc(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&F$(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Q8),_h&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),_h&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Ra(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,r=!1;for(let s of e){let a=this.readMutation(s);a&&(a.typeOver&&(r=!0),t==-1?{from:t,to:i}=a:(t=Math.min(a.from,t),i=Math.max(a.to,i)))}return{from:t,to:i,typeOver:r}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),r=this.selectionChanged&&Uc(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new p8(this.view,e,t,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,r=SC(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=Zy(t,e.previousSibling||e.target.previousSibling,-1),r=Zy(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Ei)!=e.state.facet(Ei)&&(e.view.contentDOM.editContext=e.state.facet(Ei)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Zy(n,e,t){for(;e;){let i=St.get(e);if(i&&i.parent==n)return i;let r=e.parentNode;e=r!=n.dom?r:t>0?e.nextSibling:e.previousSibling}return null}function e0(n,e){let t=e.startContainer,i=e.startOffset,r=e.endContainer,s=e.endOffset,a=n.docView.domAtPos(n.state.selection.main.anchor);return jo(a.node,a.offset,r,s)&&([t,i,r,s]=[r,s,t,i]),{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:s}}function J8(n,e){if(e.getComposedRanges){let r=e.getComposedRanges(n.root)[0];if(r)return e0(n,r)}let t=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),t=r.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",i,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",i,!0),t?e0(n,t):null}class Z8{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let r=e.state.selection.main,{anchor:s,head:a}=r,o=this.toEditorPos(i.updateRangeStart),l=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:o,drifted:!1});let c={from:o,to:l,insert:dt.of(i.text.split(`
`))};if(c.from==this.from&&s<this.from?c.from=s:c.to==this.to&&s>this.to&&(c.to=s),c.from==c.to&&!c.insert.length){let u=ee.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));u.main.eq(r)||e.dispatch({selection:u,userEvent:"select"});return}if((Ee.mac||Ee.android)&&c.from==a-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(c={from:o,to:l,insert:dt.of([i.text.replace("."," ")])}),this.pendingContextChange=c,!e.state.readOnly){let u=this.to-this.from+(c.to-c.from+c.insert.length);Tp(e,c,ee.single(this.toEditorPos(i.selectionStart,u),this.toEditorPos(i.selectionEnd,u)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=i=>{let r=[],s=null;for(let a=this.toEditorPos(i.rangeStart),o=this.toEditorPos(i.rangeEnd);a<o;a++){let l=e.coordsForChar(a);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,r.push(s)}t.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let s of i.getTextFormats()){let a=s.underlineStyle,o=s.underlineThickness;if(a!="None"&&o!="None"){let l=this.toEditorPos(s.rangeStart),c=this.toEditorPos(s.rangeEnd);if(l<c){let u=`text-decoration: underline ${a=="Dashed"?"dashed ":a=="Squiggle"?"wavy ":""}${o=="Thin"?1:2}px`;r.push(Oe.mark({attributes:{style:u}}).range(l,c))}}}e.dispatch({effects:gC.of(Oe.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=cl(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((s,a,o,l,c)=>{if(i)return;let u=c.length-(a-s);if(r&&a>=r.to)if(r.from==s&&r.to==a&&r.insert.eq(c)){r=this.pendingContextChange=null,t+=u,this.to+=u;return}else r=null,this.revertPending(e.state);if(s+=t,a+=t,a<=this.from)this.from+=u,this.to+=u;else if(s<this.to){if(s<this.from||a>this.to||this.to-this.from+c.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(a),c.toString()),this.to+=u}t+=u}),r&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange;this.composing&&(this.composing.drifted||e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),r=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class we{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(s=>i(s,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||N$(e.parent)||document,this.viewState=new Xy(e.state||rt.create(e)),e.scrollTo&&e.scrollTo.is(ac)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(So).map(r=>new Eh(r));for(let r of this.plugins)r.update(this);this.observer=new X8(this),this.inputState=new E8(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Ty(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof cn?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,r,s=this.state;for(let h of e){if(h.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=h.state}if(this.destroyed){this.viewState.state=s;return}let a=this.hasFocus,o=0,l=null;e.some(h=>h.annotation(DC))?(this.inputState.notifiedFocused=a,o=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,l=MC(s,a),l||(o=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(rt.phrases)!=this.state.facet(rt.phrases))return this.setState(s);r=Su.create(this,s,e),r.flags|=o;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(d&&(d=d.map(h.changes)),h.scrollIntoView){let{main:f}=h.state.selection;d=new Aa(f.empty?f:ee.cursor(f.head,f.head>f.anchor?-1:1))}for(let f of h.effects)f.is(ac)&&(d=f.value.clip(this.state))}this.viewState.update(r,d),this.bidiCache=xu.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet(_o)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(hc)!=r.state.facet(hc)&&(this.viewState.mustMeasureContent=!0),(t||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!r.empty)for(let h of this.state.facet(tm))try{h(r)}catch(f){Zn(this.state,f,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!SC(this,u)&&c.force&&Ra(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new Xy(e),this.plugins=e.facet(So).map(i=>new Eh(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new Ty(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(So),i=e.state.facet(So);if(t!=i){let r=[];for(let s of i){let a=t.indexOf(s);if(a<0)r.push(new Eh(s));else{let o=this.plugins[a];o.mustUpdate=e,r.push(o)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){Zn(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:a}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let o=0;;o++){if(a<0)if(jw(i))s=-1,a=this.viewState.heightMap.height;else{let f=this.viewState.scrollAnchorAt(r);s=f.from,a=f.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(o>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(f=>{try{return f.read(this)}catch(m){return Zn(this.state,m),t0}}),d=Su.create(this,this.state,[]),h=!1;d.flags|=l,t?t.flags|=l:t=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),h=this.docView.update(d),h&&this.docViewUpdate());for(let f=0;f<c.length;f++)if(u[f]!=t0)try{let m=c[f];m.write&&m.write(u[f],this)}catch(m){Zn(this.state,m)}if(h&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,a=-1;continue}else{let m=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-a;if(m>1||m<-1){r=r+m,i.scrollTop=r/this.scaleY,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let o of this.state.facet(tm))o(t)}get themeClasses(){return am+" "+(this.state.facet(sm)?OC:IC)+" "+this.state.facet(hc)}updateAttrs(){let e=n0(this,vC,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Ei)?"true":"false",class:"cm-content",style:`${Ee.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),n0(this,Dp,t);let i=this.observer.ignore(()=>{let r=Qf(this.contentDOM,this.contentAttrs,t),s=Qf(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let r of i.effects)if(r.is(we.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(_o);let e=this.state.facet(we.cspNonce);as.mount(this.root,this.styleModules.concat(Y8).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return Ch(this,e,Ly(this,e,t,i))}moveByGroup(e,t){return Ch(this,e,Ly(this,e,t,i=>d8(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),s=i[t?i.length-1:0];return ee.cursor(s.side(t,r)+e.from,s.forward(!t,r)?1:-1)}moveToLineBoundary(e,t,i=!0){return u8(this,e,t,i)}moveVertically(e,t,i){return Ch(this,e,h8(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),CC(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),a=s[Xi.find(s,e-r.from,-1,t)];return kl(i,a.dir==It.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(fC)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>eq)return sC(e.length);let t=this.textDirectionAt(e.from),i;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==t&&(s.fresh||iC(s.isolates,i=Py(this,e))))return s.order;i||(i=Py(this,e));let r=K$(e.text,t,i);return this.bidiCache.push(new xu(e.from,e.to,t,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Ee.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Hw(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return ac.of(new Aa(typeof e=="number"?ee.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return ac.of(new Aa(ee.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Xt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Xt.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=as.newName(),r=[hc.of(i),_o.of(om(`.${i}`,e))];return t&&t.dark&&r.push(sm.of(!0)),r}static baseTheme(e){return Zs.lowest(_o.of(om("."+am,e,NC)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),r=i&&St.get(i)||St.get(e);return((t=r==null?void 0:r.rootView)===null||t===void 0?void 0:t.view)||null}}we.styleModule=_o;we.inputHandler=dC;we.clipboardInputFilter=Ap;we.clipboardOutputFilter=kp;we.scrollHandler=pC;we.focusChangeEffect=hC;we.perLineTextDirection=fC;we.exceptionSink=uC;we.updateListener=tm;we.editable=Ei;we.mouseSelectionStyle=cC;we.dragMovesSelection=lC;we.clickAddsSelectionRange=oC;we.decorations=ul;we.outerDecorations=yC;we.atomicRanges=Mp;we.bidiIsolatedRanges=bC;we.scrollMargins=EC;we.darkTheme=sm;we.cspNonce=Se.define({combine:n=>n.length?n[0]:""});we.contentAttributes=Dp;we.editorAttributes=vC;we.lineWrapping=we.contentAttributes.of({class:"cm-lineWrapping"});we.announce=Ye.define();const eq=4096,t0={};class xu{constructor(e,t,i,r,s,a){this.from=e,this.to=t,this.dir=i,this.isolates=r,this.fresh=s,this.order=a}static update(e,t){if(t.empty&&!e.some(s=>s.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:It.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let a=e[s];a.dir==r&&!t.touchesRange(a.from,a.to)&&i.push(new xu(t.mapPos(a.from,1),t.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return i}}function n0(n,e,t){for(let i=n.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],a=typeof s=="function"?s(n):s;a&&Yf(a,t)}return t}const tq=Ee.mac?"mac":Ee.windows?"win":Ee.linux?"linux":"key";function nq(n,e){const t=n.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let r,s,a,o;for(let l=0;l<t.length-1;++l){const c=t[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))a=!0;else if(/^mod$/i.test(c))e=="mac"?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),o&&(i="Meta-"+i),a&&(i="Shift-"+i),i}function fc(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const rq=Zs.default(we.domEventHandlers({keydown(n,e){return LC(FC(e.state),n,e,"editor")}})),_d=Se.define({enables:rq}),r0=new WeakMap;function FC(n){let e=n.facet(_d),t=r0.get(e);return t||r0.set(e,t=aq(e.reduce((i,r)=>i.concat(r),[]))),t}function iq(n,e,t){return LC(FC(n.state),e,n,t)}let zi=null;const sq=4e3;function aq(n,e=tq){let t=Object.create(null),i=Object.create(null),r=(a,o)=>{let l=i[a];if(l==null)i[a]=o;else if(l!=o)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},s=(a,o,l,c,u)=>{var d,h;let f=t[a]||(t[a]=Object.create(null)),m=o.split(/ (?!$)/).map(v=>nq(v,e));for(let v=1;v<m.length;v++){let C=m.slice(0,v).join(" ");r(C,!0),f[C]||(f[C]={preventDefault:!0,stopPropagation:!1,run:[y=>{let E=zi={view:y,prefix:C,scope:a};return setTimeout(()=>{zi==E&&(zi=null)},sq),!0}]})}let p=m.join(" ");r(p,!1);let g=f[p]||(f[p]={preventDefault:!1,stopPropagation:!1,run:((h=(d=f._any)===null||d===void 0?void 0:d.run)===null||h===void 0?void 0:h.slice())||[]});l&&g.run.push(l),c&&(g.preventDefault=!0),u&&(g.stopPropagation=!0)};for(let a of n){let o=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let c of o){let u=t[c]||(t[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=a;for(let h in u)u[h].run.push(f=>d(f,lm))}let l=a[e]||a.key;if(l)for(let c of o)s(c,l,a.run,a.preventDefault,a.stopPropagation),a.shift&&s(c,"Shift-"+l,a.shift,a.preventDefault,a.stopPropagation)}return t}let lm=null;function LC(n,e,t,i){lm=e;let r=M$(e),s=Qn(r,0),a=ei(s)==r.length&&r!=" ",o="",l=!1,c=!1,u=!1;zi&&zi.view==t&&zi.scope==i&&(o=zi.prefix+" ",xC.indexOf(e.keyCode)<0&&(c=!0,zi=null));let d=new Set,h=g=>{if(g){for(let v of g.run)if(!d.has(v)&&(d.add(v),v(t)))return g.stopPropagation&&(u=!0),!0;g.preventDefault&&(g.stopPropagation&&(u=!0),c=!0)}return!1},f=n[i],m,p;return f&&(h(f[o+fc(r,e,!a)])?l=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Ee.windows&&e.ctrlKey&&e.altKey)&&(m=os[e.keyCode])&&m!=r?(h(f[o+fc(m,e,!0)])||e.shiftKey&&(p=ll[e.keyCode])!=r&&p!=m&&h(f[o+fc(p,e,!1)]))&&(l=!0):a&&e.shiftKey&&h(f[o+fc(r,e,!0)])&&(l=!0),!l&&h(f._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),lm=null,l}class Pl{constructor(e,t,i,r,s){this.className=e,this.left=t,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=BC(e);return[new Pl(t,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return oq(e,t,i)}}function BC(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==It.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function i0(n,e,t,i){let r=n.coordsAtPos(e,t*2);if(!r)return i;let s=n.dom.getBoundingClientRect(),a=(r.top+r.bottom)/2,o=n.posAtCoords({x:s.left+1,y:a}),l=n.posAtCoords({x:s.right-1,y:a});return o==null||l==null?i:{from:Math.max(i.from,Math.min(o,l)),to:Math.min(i.to,Math.max(o,l))}}function oq(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let i=Math.max(t.from,n.viewport.from),r=Math.min(t.to,n.viewport.to),s=n.textDirection==It.LTR,a=n.contentDOM,o=a.getBoundingClientRect(),l=BC(n),c=a.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),d=o.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),h=o.right-(u?parseInt(u.paddingRight):0),f=rm(n,i),m=rm(n,r),p=f.type==Hn.Text?f:null,g=m.type==Hn.Text?m:null;if(p&&(n.lineWrapping||f.widgetLineBreaks)&&(p=i0(n,i,1,p)),g&&(n.lineWrapping||m.widgetLineBreaks)&&(g=i0(n,r,-1,g)),p&&g&&p.from==g.from&&p.to==g.to)return C(y(t.from,t.to,p));{let _=p?y(t.from,null,p):E(f,!1),w=g?y(null,t.to,g):E(m,!0),k=[];return(p||f).to<(g||m).from-(p&&g?1:0)||f.widgetLineBreaks>1&&_.bottom+n.defaultLineHeight/2<w.top?k.push(v(d,_.bottom,h,w.top)):_.bottom<w.top&&n.elementAtHeight((_.bottom+w.top)/2).type==Hn.Text&&(_.bottom=w.top=(_.bottom+w.top)/2),C(_).concat(k).concat(C(w))}function v(_,w,k,I){return new Pl(e,_-l.left,w-l.top,k-_,I-w)}function C({top:_,bottom:w,horizontal:k}){let I=[];for(let P=0;P<k.length;P+=2)I.push(v(k[P],_,k[P+1],w));return I}function y(_,w,k){let I=1e9,P=-1e9,Z=[];function X(U,re,le,ae,ue){let ve=n.coordsAtPos(U,U==k.to?-2:2),me=n.coordsAtPos(le,le==k.from?2:-2);!ve||!me||(I=Math.min(ve.top,me.top,I),P=Math.max(ve.bottom,me.bottom,P),ue==It.LTR?Z.push(s&&re?d:ve.left,s&&ae?h:me.right):Z.push(!s&&ae?d:me.left,!s&&re?h:ve.right))}let B=_??k.from,$=w??k.to;for(let U of n.visibleRanges)if(U.to>B&&U.from<$)for(let re=Math.max(U.from,B),le=Math.min(U.to,$);;){let ae=n.state.doc.lineAt(re);for(let ue of n.bidiSpans(ae)){let ve=ue.from+ae.from,me=ue.to+ae.from;if(ve>=le)break;me>re&&X(Math.max(ve,re),_==null&&ve<=B,Math.min(me,le),w==null&&me>=$,ue.dir)}if(re=ae.to+1,re>=le)break}return Z.length==0&&X(B,_==null,$,w==null,n.textDirection),{top:I,bottom:P,horizontal:Z}}function E(_,w){let k=o.top+(w?_.top:_.bottom);return{top:k,bottom:k,horizontal:[]}}}function lq(n,e){return n.constructor==e.constructor&&n.eq(e)}class cq{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Wc)!=e.state.facet(Wc)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(Wc);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!lq(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[i].constructor&&r.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(r.draw(),t);for(;t;){let r=t.nextSibling;t.remove(),t=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Wc=Se.define();function $C(n){return[Xt.define(e=>new cq(e,n)),Wc.of(n)]}const qC=!(Ee.ios&&Ee.webkit&&Ee.webkit_version<534),dl=Se.define({combine(n){return ui(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function uq(n={}){return[dl.of(n),dq,hq,fq,mC.of(!0)]}function UC(n){return n.startState.facet(dl)!=n.state.facet(dl)}const dq=$C({above:!0,markers(n){let{state:e}=n,t=e.facet(dl),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty?!s||qC:t.drawRangeCursor){let a=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",o=r.empty?r:ee.cursor(r.head,r.head>r.anchor?-1:1);for(let l of Pl.forRange(n,a,o))i.push(l)}}return i},update(n,e){n.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=UC(n);return t&&s0(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){s0(e.state,n)},class:"cm-cursorLayer"});function s0(n,e){e.style.animationDuration=n.facet(dl).cursorBlinkRate+"ms"}const hq=$C({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:Pl.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||UC(n)},class:"cm-selectionLayer"}),cm={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};qC&&(cm[".cm-line"].caretColor=cm[".cm-content"].caretColor="transparent !important");const fq=Zs.highest(we.theme(cm)),HC=Ye.define({map(n,e){return n==null?null:e.mapPos(n)}}),Ao=Sn.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,i)=>i.is(HC)?i.value:t,n)}}),mq=Xt.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(Ao);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(Ao)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(Ao),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let i=n.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-i.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(Ao)!=n&&this.view.dispatch({effects:HC.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function pq(){return[Ao,mq]}function a0(n,e,t,i,r){e.lastIndex=0;for(let s=n.iterRange(t,i),a=t,o;!s.next().done;a+=s.value.length)if(!s.lineBreak)for(;o=e.exec(s.value);)r(a+o.index,o)}function gq(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let i=[];for(let{from:r,to:s}of t)r=Math.max(n.state.doc.lineAt(r).from,r-e),s=Math.min(n.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class vq{constructor(e){const{regexp:t,decoration:i,decorate:r,boundary:s,maxLength:a=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(o,l,c,u)=>r(u,c,c+o[0].length,o,l);else if(typeof i=="function")this.addMatch=(o,l,c,u)=>{let d=i(o,l,c);d&&u(c,c+o[0].length,d)};else if(i)this.addMatch=(o,l,c,u)=>u(c,c+o[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=a}createDeco(e){let t=new Ai,i=t.add.bind(t);for(let{from:r,to:s}of gq(e,this.maxLength))a0(e.state.doc,this.regexp,r,s,(a,o)=>this.addMatch(o,e,a,i));return t.finish()}updateDeco(e,t){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,a,o,l)=>{l>=e.view.viewport.from&&o<=e.view.viewport.to&&(i=Math.min(o,i),r=Math.max(l,r))}),e.viewportMoved||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),i,r):t}updateRange(e,t,i,r){for(let s of e.visibleRanges){let a=Math.max(s.from,i),o=Math.min(s.to,r);if(o>a){let l=e.state.doc.lineAt(a),c=l.to<o?e.state.doc.lineAt(o):l,u=Math.max(s.from,l.from),d=Math.min(s.to,c.to);if(this.boundary){for(;a>l.from;a--)if(this.boundary.test(l.text[a-1-l.from])){u=a;break}for(;o<c.to;o++)if(this.boundary.test(c.text[o-c.from])){d=o;break}}let h=[],f,m=(p,g,v)=>h.push(v.range(p,g));if(l==c)for(this.regexp.lastIndex=u-l.from;(f=this.regexp.exec(l.text))&&f.index<d-l.from;)this.addMatch(f,e,f.index+l.from,m);else a0(e.state.doc,this.regexp,u,d,(p,g)=>this.addMatch(g,e,p,m));t=t.update({filterFrom:u,filterTo:d,filter:(p,g)=>p<u||g>d,add:h})}}return t}}const um=/x/.unicode!=null?"gu":"g",yq=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,um),bq={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let xh=null;function Eq(){var n;if(xh==null&&typeof document<"u"&&document.body){let e=document.body.style;xh=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return xh||!1}const zc=Se.define({combine(n){let e=ui(n,{render:null,specialChars:yq,addSpecialChars:null});return(e.replaceTabs=!Eq())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,um)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,um)),e}});function wq(n={}){return[zc.of(n),Cq()]}let o0=null;function Cq(){return o0||(o0=Xt.fromClass(class{constructor(n){this.view=n,this.decorations=Oe.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(zc)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new vq({regexp:n.specialChars,decoration:(e,t,i)=>{let{doc:r}=t.state,s=Qn(e[0],0);if(s==9){let a=r.lineAt(i),o=t.state.tabSize,l=to(a.text,o,i-a.from);return Oe.replace({widget:new Rq((o-l%o)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Oe.replace({widget:new xq(n,s)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(zc);n.startState.facet(zc)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const Sq="•";function _q(n){return n>=32?Sq:n==10?"␤":String.fromCharCode(9216+n)}class xq extends Ii{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=_q(this.code),i=e.state.phrase("Control character")+" "+(bq[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,t);if(r)return r;let s=document.createElement("span");return s.textContent=t,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class Rq extends Ii{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function Aq(){return Dq}const kq=Oe.line({class:"cm-activeLine"}),Dq=Xt.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let i of n.state.selection.ranges){let r=n.lineBlockAt(i.head);r.from>e&&(t.push(kq.range(r.from)),e=r.from)}return Oe.set(t)}},{decorations:n=>n.decorations});class Mq extends Ii{constructor(e){super(),this.content=e}toDOM(e){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),typeof this.content=="string"?t.setAttribute("aria-label","placeholder "+this.content):t.setAttribute("aria-hidden","true"),t}coordsAt(e){let t=e.firstChild?Va(e.firstChild):[];if(!t.length)return null;let i=window.getComputedStyle(e.parentNode),r=kl(t[0],i.direction!="rtl"),s=parseInt(i.lineHeight);return r.bottom-r.top>s*1.5?{left:r.left,right:r.right,top:r.top,bottom:r.top+s}:r}ignoreEvent(){return!1}}function Pq(n){return Xt.fromClass(class{constructor(e){this.view=e,this.placeholder=n?Oe.set([Oe.widget({widget:new Mq(n),side:1}).range(0)]):Oe.none}get decorations(){return this.view.state.doc.length?Oe.none:this.placeholder}},{decorations:e=>e.decorations})}const dm=2e3;function Tq(n,e,t){let i=Math.min(e.line,t.line),r=Math.max(e.line,t.line),s=[];if(e.off>dm||t.off>dm||e.col<0||t.col<0){let a=Math.min(e.off,t.off),o=Math.max(e.off,t.off);for(let l=i;l<=r;l++){let c=n.doc.line(l);c.length<=o&&s.push(ee.range(c.from+a,c.to+o))}}else{let a=Math.min(e.col,t.col),o=Math.max(e.col,t.col);for(let l=i;l<=r;l++){let c=n.doc.line(l),u=Hf(c.text,a,n.tabSize,!0);if(u<0)s.push(ee.cursor(c.to));else{let d=Hf(c.text,o,n.tabSize);s.push(ee.range(c.from+u,c.from+d))}}}return s}function Iq(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function l0(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),i=n.state.doc.lineAt(t),r=t-i.from,s=r>dm?-1:r==i.length?Iq(n,e.clientX):to(i.text,n.state.tabSize,t-i.from);return{line:i.number,col:s,off:r}}function Oq(n,e){let t=l0(n,e),i=n.state.selection;return t?{update(r){if(r.docChanged){let s=r.changes.mapPos(r.startState.doc.line(t.line).from),a=r.state.doc.lineAt(s);t={line:a.number,col:t.col,off:Math.min(t.off,a.length)},i=i.map(r.changes)}},get(r,s,a){let o=l0(n,r);if(!o)return i;let l=Tq(n.state,t,o);return l.length?a?ee.create(l.concat(i.ranges)):ee.create(l):i}}:null}function Nq(n){let e=(n==null?void 0:n.eventFilter)||(t=>t.altKey&&t.button==0);return we.mouseSelectionStyle.of((t,i)=>e(i)?Oq(t,i):null)}const Fq={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},Lq={style:"cursor: crosshair"};function Bq(n={}){let[e,t]=Fq[n.key||"Alt"],i=Xt.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventObservers:{keydown(r){this.set(r.keyCode==e||t(r))},keyup(r){(r.keyCode==e||!t(r))&&this.set(!1)},mousemove(r){this.set(t(r))}}});return[i,we.contentAttributes.of(r=>{var s;return!((s=r.plugin(i))===null||s===void 0)&&s.isDown?Lq:null})]}const mo="-10000px";class VC{constructor(e,t,i,r){this.facet=t,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(a=>a);let s=null;this.tooltipViews=this.tooltips.map(a=>s=i(a,s))}update(e,t){var i;let r=e.state.facet(this.facet),s=r.filter(l=>l);if(r===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let a=[],o=t?[]:null;for(let l=0;l<s.length;l++){let c=s[l],u=-1;if(c){for(let d=0;d<this.tooltips.length;d++){let h=this.tooltips[d];h&&h.create==c.create&&(u=d)}if(u<0)a[l]=this.createTooltipView(c,l?a[l-1]:null),o&&(o[l]=!!c.above);else{let d=a[l]=this.tooltipViews[u];o&&(o[l]=t[u]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)a.indexOf(l)<0&&(this.removeTooltipView(l),(i=l.destroy)===null||i===void 0||i.call(l));return t&&(o.forEach((l,c)=>t[c]=l),t.length=o.length),this.input=r,this.tooltips=s,this.tooltipViews=a,!0}}function $q(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const Rh=Se.define({combine:n=>{var e,t,i;return{position:Ee.ios?"absolute":((e=n.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(r=>r.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=n.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||$q}}}),c0=new WeakMap,Np=Xt.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(Rh);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new VC(n,Fp,(t,i)=>this.createTooltip(t,i),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,i=n.state.facet(Rh);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),i=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",t.dom.appendChild(r)}return t.dom.style.position=this.position,t.dom.style.top=mo,t.dom.style.left="0px",this.container.insertBefore(t.dom,i),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(n=i.destroy)===null||n===void 0||n.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(Ee.gecko)t=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==mo&&s.style.left=="0px"){let a=s.getBoundingClientRect();t=Math.abs(a.top+1e4)>1||Math.abs(a.left)>1}}if(t||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(n=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=Pp(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,a)=>{let o=this.manager.tooltipViews[a];return o.getCoords?o.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(Rh).tooltipSpace(this.view),scaleX:n,scaleY:e,makeAbsolute:t}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let o of this.manager.tooltipViews)o.dom.style.position="absolute"}let{visible:t,space:i,scaleX:r,scaleY:s}=n,a=[];for(let o=0;o<this.manager.tooltips.length;o++){let l=this.manager.tooltips[o],c=this.manager.tooltipViews[o],{dom:u}=c,d=n.pos[o],h=n.size[o];if(!d||l.clip!==!1&&(d.bottom<=Math.max(t.top,i.top)||d.top>=Math.min(t.bottom,i.bottom)||d.right<Math.max(t.left,i.left)-.1||d.left>Math.min(t.right,i.right)+.1)){u.style.top=mo;continue}let f=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,m=f?7:0,p=h.right-h.left,g=(e=c0.get(c))!==null&&e!==void 0?e:h.bottom-h.top,v=c.offset||Uq,C=this.view.textDirection==It.LTR,y=h.width>i.right-i.left?C?i.left:i.right-h.width:C?Math.max(i.left,Math.min(d.left-(f?14:0)+v.x,i.right-p)):Math.min(Math.max(i.left,d.left-p+(f?14:0)-v.x),i.right-p),E=this.above[o];!l.strictSide&&(E?d.top-g-m-v.y<i.top:d.bottom+g+m+v.y>i.bottom)&&E==i.bottom-d.bottom>d.top-i.top&&(E=this.above[o]=!E);let _=(E?d.top-i.top:i.bottom-d.bottom)-m;if(_<g&&c.resize!==!1){if(_<this.view.defaultLineHeight){u.style.top=mo;continue}c0.set(c,g),u.style.height=(g=_)/s+"px"}else u.style.height&&(u.style.height="");let w=E?d.top-g-m-v.y:d.bottom+m+v.y,k=y+p;if(c.overlap!==!0)for(let I of a)I.left<k&&I.right>y&&I.top<w+g&&I.bottom>w&&(w=E?I.top-g-2-m:I.bottom+m+2);if(this.position=="absolute"?(u.style.top=(w-n.parent.top)/s+"px",u0(u,(y-n.parent.left)/r)):(u.style.top=w/s+"px",u0(u,y/r)),f){let I=d.left+(C?v.x:-v.x)-(y+14-7);f.style.left=I/r+"px"}c.overlap!==!0&&a.push({left:y,top:w,right:k,bottom:w+g}),u.classList.toggle("cm-tooltip-above",E),u.classList.toggle("cm-tooltip-below",!E),c.positioned&&c.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=mo}},{eventObservers:{scroll(){this.maybeMeasure()}}});function u0(n,e){let t=parseInt(n.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(n.style.left=e+"px")}const qq=we.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Uq={x:0,y:0},Fp=Se.define({enables:[Np,qq]}),Ru=Se.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class xd{static create(e){return new xd(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new VC(e,Ru,(t,i)=>this.createHostedView(t,i),t=>t.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(t===void 0)t=r;else if(t!==r)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const Hq=Fp.compute([Ru],n=>{let e=n.facet(Ru);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var i;return(i=t.end)!==null&&i!==void 0?i:t.pos})),create:xd.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class Vq{constructor(e,t,i,r,s){this.view=e,this.source=t,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.nearest(t.target);if(!i)return;let r,s=1;if(i instanceof Qi)r=i.posAtStart;else{if(r=e.posAtCoords(t),r==null)return;let o=e.coordsAtPos(r);if(!o||t.y<o.top||t.y>o.bottom||t.x<o.left-e.defaultCharacterWidth||t.x>o.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(r)).find(u=>u.from<=r&&u.to>=r),c=l&&l.dir==It.RTL?-1:1;s=t.x<o.left?-c:c}let a=this.source(e,r,s);if(a!=null&&a.then){let o=this.pending={pos:r};a.then(l=>{this.pending==o&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>Zn(e.state,l,"hover tooltip"))}else a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])})}get tooltip(){let e=this.view.plugin(Np),t=e?e.manager.tooltips.findIndex(i=>i.create==xd.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:s}=this;if(r.length&&s&&!jq(s.dom,e)||this.pending){let{pos:a}=r[0]||this.pending,o=(i=(t=r[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:a;(a==o?this.view.posAtCoords(this.lastMove)!=a:!Wq(this.view,a,o,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const mc=4;function jq(n,e){let{left:t,right:i,top:r,bottom:s}=n.getBoundingClientRect(),a;if(a=n.querySelector(".cm-tooltip-arrow")){let o=a.getBoundingClientRect();r=Math.min(o.top,r),s=Math.max(o.bottom,s)}return e.clientX>=t-mc&&e.clientX<=i+mc&&e.clientY>=r-mc&&e.clientY<=s+mc}function Wq(n,e,t,i,r,s){let a=n.scrollDOM.getBoundingClientRect(),o=n.documentTop+n.documentPadding.top+n.contentHeight;if(a.left>i||a.right<i||a.top>r||Math.min(a.bottom,o)<r)return!1;let l=n.posAtCoords({x:i,y:r},!1);return l>=e&&l<=t}function zq(n,e={}){let t=Ye.define(),i=Sn.define({create(){return[]},update(r,s){if(r.length&&(e.hideOnChange&&(s.docChanged||s.selection)?r=[]:e.hideOn&&(r=r.filter(a=>!e.hideOn(s,a))),s.docChanged)){let a=[];for(let o of r){let l=s.changes.mapPos(o.pos,-1,$n.TrackDel);if(l!=null){let c=Object.assign(Object.create(null),o);c.pos=l,c.end!=null&&(c.end=s.changes.mapPos(c.end)),a.push(c)}}r=a}for(let a of s.effects)a.is(t)&&(r=a.value),a.is(Gq)&&(r=[]);return r},provide:r=>Ru.from(r)});return{active:i,extension:[i,Xt.define(r=>new Vq(r,n,i,t,e.hoverTime||300)),Hq]}}function jC(n,e){let t=n.plugin(Np);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const Gq=Ye.define(),d0=Se.define({combine(n){let e,t;for(let i of n)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function hl(n,e){let t=n.plugin(WC),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const WC=Xt.fromClass(class{constructor(n){this.input=n.state.facet(fl),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(d0);this.top=new pc(n,!0,e.topContainer),this.bottom=new pc(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(d0);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new pc(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new pc(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(fl);if(t!=this.input){let i=t.filter(l=>l),r=[],s=[],a=[],o=[];for(let l of i){let c=this.specs.indexOf(l),u;c<0?(u=l(n.view),o.push(u)):(u=this.panels[c],u.update&&u.update(n)),r.push(u),(u.top?s:a).push(u)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(a);for(let l of o)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>we.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class pc{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=h0(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=h0(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function h0(n){let e=n.nextSibling;return n.remove(),e}const fl=Se.define({enables:WC});class Di extends zs{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Di.prototype.elementClass="";Di.prototype.toDOM=void 0;Di.prototype.mapMode=$n.TrackBefore;Di.prototype.startSide=Di.prototype.endSide=-1;Di.prototype.point=!0;const Gc=Se.define(),Kq=Se.define(),Yq={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>ct.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},zo=Se.define();function Qq(n){return[zC(),zo.of(Object.assign(Object.assign({},Yq),n))]}const hm=Se.define({combine:n=>n.some(e=>e)});function zC(n){let e=[Xq];return n&&n.fixed===!1&&e.push(hm.of(!0)),e}const Xq=Xt.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(zo).map(e=>new m0(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(hm),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(hm)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=ct.iter(this.view.state.facet(Gc),this.view.viewport.from),i=[],r=this.gutters.map(s=>new Jq(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let a=!0;for(let o of s.type)if(o.type==Hn.Text&&a){fm(t,i,o.from);for(let l of r)l.line(this.view,o,i);a=!1}else if(o.widget)for(let l of r)l.widget(this.view,o)}else if(s.type==Hn.Text){fm(t,i,s.from);for(let a of r)a.line(this.view,s,i)}else if(s.widget)for(let a of r)a.widget(this.view,s);for(let s of r)s.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(zo),t=n.state.facet(zo),i=n.docChanged||n.heightChanged||n.viewportChanged||!ct.eq(n.startState.facet(Gc),n.state.facet(Gc),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let r of this.gutters)r.update(n)&&(i=!0);else{i=!0;let r=[];for(let s of t){let a=e.indexOf(s);a<0?r.push(new m0(this.view,s)):(this.gutters[a].update(n),r.push(this.gutters[a]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>we.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==It.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function f0(n){return Array.isArray(n)?n:[n]}function fm(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class Jq{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=ct.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:r}=this,s=(t.top-this.height)/e.scaleY,a=t.height/e.scaleY;if(this.i==r.elements.length){let o=new GC(e,a,s,i);r.elements.push(o),r.dom.appendChild(o.dom)}else r.elements[this.i].update(e,a,s,i);this.height=t.bottom,this.i++}line(e,t,i){let r=[];fm(this.cursor,r,t.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,t,r);s&&r.unshift(s);let a=this.gutter;r.length==0&&!a.config.renderEmptyElements||this.addElement(e,t,r)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),r=i?[i]:null;for(let s of e.state.facet(Kq)){let a=s(e,t.widget,t);a&&(r||(r=[])).push(a)}r&&this.addElement(e,t,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class m0{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,a;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();a=(l.top+l.bottom)/2}else a=r.clientY;let o=e.lineBlockAtHeight(a-e.documentTop);t.domEventHandlers[i](e,o,r)&&r.preventDefault()});this.markers=f0(t.markers(e)),t.initialSpacer&&(this.spacer=new GC(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=f0(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!ct.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class GC{constructor(e,t,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,r)}update(e,t,i,r){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),Zq(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,a=0;;){let o=a,l=s<t.length?t[s++]:null,c=!1;if(l){let u=l.elementClass;u&&(i+=" "+u);for(let d=a;d<this.markers.length;d++)if(this.markers[d].compare(l)){o=d,c=!0;break}}else o=this.markers.length;for(;a<o;){let u=this.markers[a++];if(u.toDOM){u.destroy(r);let d=r.nextSibling;r.remove(),r=d}}if(!l)break;l.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),c&&a++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function Zq(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const eU=Se.define(),tU=Se.define(),pa=Se.define({combine(n){return ui(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let r in t){let s=i[r],a=t[r];i[r]=s?(o,l,c)=>s(o,l,c)||a(o,l,c):a}return i}})}});class Ah extends Di{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function kh(n,e){return n.state.facet(pa).formatNumber(e,n.state)}const nU=zo.compute([pa],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(eU)},lineMarker(e,t,i){return i.some(r=>r.toDOM)?null:new Ah(kh(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,i)=>{for(let r of e.state.facet(tU)){let s=r(e,t,i);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(pa)!=e.state.facet(pa),initialSpacer(e){return new Ah(kh(e,p0(e.state.doc.lines)))},updateSpacer(e,t){let i=kh(t.view,p0(t.view.state.doc.lines));return i==e.number?e:new Ah(i)},domEventHandlers:n.facet(pa).domEventHandlers}));function rU(n={}){return[pa.of(n),zC(),nU]}function p0(n){let e=9;for(;e<n;)e=e*10+9;return e}const iU=new class extends Di{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},sU=Gc.compute(["selection"],n=>{let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.head).from;r>t&&(t=r,e.push(iU.range(r)))}return ct.of(e)});function aU(){return sU}const KC=1024;let oU=0;class Dh{constructor(e,t){this.from=e,this.to=t}}class tt{constructor(e={}){this.id=oU++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=nr.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}tt.closedBy=new tt({deserialize:n=>n.split(" ")});tt.openedBy=new tt({deserialize:n=>n.split(" ")});tt.group=new tt({deserialize:n=>n.split(" ")});tt.isolate=new tt({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});tt.contextHash=new tt({perNode:!0});tt.lookAhead=new tt({perNode:!0});tt.mounted=new tt({perNode:!0});class Au{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[tt.mounted.id]}}const lU=Object.create(null);class nr{constructor(e,t,i,r=0){this.name=e,this.props=t,this.id=i,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):lU,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new nr(e.name||"",t,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(tt.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let r of i.split(" "))t[r]=e[i];return i=>{for(let r=i.prop(tt.group),s=-1;s<(r?r.length:0);s++){let a=t[s<0?i.name:r[s]];if(a)return a}}}}nr.none=new nr("",Object.create(null),0,8);class Lp{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let r=null;for(let s of e){let a=s(i);a&&(r||(r=Object.assign({},i.props)),r[a[0].id]=a[1])}t.push(r?new nr(i.name,r,i.id,i.flags):i)}return new Lp(t)}}const gc=new WeakMap,g0=new WeakMap;var dn;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(dn||(dn={}));class nn{constructor(e,t,i,r,s){if(this.type=e,this.children=t,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[a,o]of s)this.props[typeof a=="number"?a:a.id]=o}}toString(){let e=Au.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let r=i.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new pm(this.topNode,e)}cursorAt(e,t=0,i=0){let r=gc.get(this)||this.topNode,s=new pm(r);return s.moveTo(e,t),gc.set(this,s._tree),s}get topNode(){return new Sr(this,0,0,null)}resolve(e,t=0){let i=ml(gc.get(this)||this.topNode,e,t,!1);return gc.set(this,i),i}resolveInner(e,t=0){let i=ml(g0.get(this)||this.topNode,e,t,!0);return g0.set(this,i),i}resolveStack(e,t=0){return dU(this,e,t)}iterate(e){let{enter:t,leave:i,from:r=0,to:s=this.length}=e,a=e.mode||0,o=(a&dn.IncludeAnonymous)>0;for(let l=this.cursor(a|dn.IncludeAnonymous);;){let c=!1;if(l.from<=s&&l.to>=r&&(!o&&l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&i&&(o||!l.type.isAnonymous)&&i(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:qp(nr.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,r)=>new nn(this.type,t,i,r,this.propValues),e.makeTree||((t,i,r)=>new nn(nr.none,t,i,r)))}static build(e){return hU(e)}}nn.empty=new nn(nr.none,[],[],0);class Bp{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Bp(this.buffer,this.index)}}class cs{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return nr.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],r=this.set.types[t],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let a=[];for(;e<i;)a.push(this.childString(e)),e=this.buffer[e+3];return s+"("+a.join(",")+")"}findChild(e,t,i,r,s){let{buffer:a}=this,o=-1;for(let l=e;l!=t&&!(YC(s,r,a[l+1],a[l+2])&&(o=l,i>0));l=a[l+3]);return o}slice(e,t,i){let r=this.buffer,s=new Uint16Array(t-e),a=0;for(let o=e,l=0;o<t;){s[l++]=r[o++],s[l++]=r[o++]-i;let c=s[l++]=r[o++]-i;s[l++]=r[o++]-e,a=Math.max(a,c)}return new cs(s,a,this.set)}}function YC(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function ml(n,e,t,i){for(var r;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let a=!i&&n instanceof Sr&&n.index<0?null:n.parent;if(!a)return n;n=a}let s=i?0:dn.IgnoreOverlays;if(i)for(let a=n,o=a.parent;o;a=o,o=a.parent)a instanceof Sr&&a.index<0&&((r=o.enter(e,t,s))===null||r===void 0?void 0:r.from)!=a.from&&(n=o);for(;;){let a=n.enter(e,t,s);if(!a)return n;n=a}}class QC{cursor(e=0){return new pm(this,e)}getChild(e,t=null,i=null){let r=v0(this,e,t,i);return r.length?r[0]:null}getChildren(e,t=null,i=null){return v0(this,e,t,i)}resolve(e,t=0){return ml(this,e,t,!1)}resolveInner(e,t=0){return ml(this,e,t,!0)}matchContext(e){return mm(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(i=t,t=r.prevSibling):t=r}return i}get node(){return this}get next(){return this.parent}}class Sr extends QC{constructor(e,t,i,r){super(),this._tree=e,this.from=t,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,r,s=0){for(let a=this;;){for(let{children:o,positions:l}=a._tree,c=t>0?o.length:-1;e!=c;e+=t){let u=o[e],d=l[e]+a.from;if(YC(r,i,d,d+u.length)){if(u instanceof cs){if(s&dn.ExcludeBuffers)continue;let h=u.findChild(0,u.buffer.length,t,i-d,r);if(h>-1)return new Ji(new cU(a,u,e,d),null,h)}else if(s&dn.IncludeAnonymous||!u.type.isAnonymous||$p(u)){let h;if(!(s&dn.IgnoreMounts)&&(h=Au.get(u))&&!h.overlay)return new Sr(h.tree,d,e,a);let f=new Sr(u,d,e,a);return s&dn.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(t<0?u.children.length-1:0,t,i,r)}}}if(s&dn.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+t:e=t<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let r;if(!(i&dn.IgnoreOverlays)&&(r=Au.get(this._tree))&&r.overlay){let s=e-this.from;for(let{from:a,to:o}of r.overlay)if((t>0?a<=s:a<s)&&(t<0?o>=s:o>s))return new Sr(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function v0(n,e,t,i){let r=n.cursor(),s=[];if(!r.firstChild())return s;if(t!=null){for(let a=!1;!a;)if(a=r.type.is(t),!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function mm(n,e,t=e.length-1){for(let i=n;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class cU{constructor(e,t,i,r){this.parent=e,this.buffer=t,this.index=i,this.start=r}}class Ji extends QC{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,i);return s<0?null:new Ji(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&dn.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new Ji(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Ji(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Ji(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let a=i.buffer[this.index+1];e.push(i.slice(r,s,a)),t.push(0)}return new nn(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function XC(n){if(!n.length)return null;let e=0,t=n[0];for(let s=1;s<n.length;s++){let a=n[s];(a.from>t.from||a.to<t.to)&&(t=a,e=s)}let i=t instanceof Sr&&t.index<0?null:t.parent,r=n.slice();return i?r[e]=i:r.splice(e,1),new uU(r,t)}class uU{constructor(e,t){this.heads=e,this.node=t}get next(){return XC(this.heads)}}function dU(n,e,t){let i=n.resolveInner(e,t),r=null;for(let s=i instanceof Sr?i:i.context.parent;s;s=s.parent)if(s.index<0){let a=s.parent;(r||(r=[i])).push(a.resolve(e,t)),s=a}else{let a=Au.get(s.tree);if(a&&a.overlay&&a.overlay[0].from<=e&&a.overlay[a.overlay.length-1].to>=e){let o=new Sr(a.tree,a.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(ml(o,e,t,!1))}}return r?XC(r):i}class pm{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Sr)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof Sr?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&dn.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&dn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&dn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:i}=r)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let s=t+e,a=e<0?-1:i._tree.children.length;s!=a;s+=e){let o=i._tree.children[s];if(this.mode&dn.IncludeAnonymous||o instanceof cs||!o.type.isAnonymous||$p(o))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let a=e;a;a=a._parent)if(a.index==r){if(r==this.index)return a;t=a,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)t=new Ji(this.buffer,t,this.stack[r]);return this.bufferNode=new Ji(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&t&&t(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return mm(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return mm(this._tree,e,r);let a=i[t.buffer[this.stack[s]]];if(!a.isAnonymous){if(e[r]&&e[r]!=a.name)return!1;r--}}return!0}}function $p(n){return n.children.some(e=>e instanceof cs||!e.type.isAnonymous||$p(e))}function hU(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:r=KC,reused:s=[],minRepeatType:a=i.types.length}=n,o=Array.isArray(t)?new Bp(t,t.length):t,l=i.types,c=0,u=0;function d(_,w,k,I,P,Z){let{id:X,start:B,end:$,size:U}=o,re=u,le=c;for(;U<0;)if(o.next(),U==-1){let ke=s[X];k.push(ke),I.push(B-_);return}else if(U==-3){c=X;return}else if(U==-4){u=X;return}else throw new RangeError(`Unrecognized record size: ${U}`);let ae=l[X],ue,ve,me=B-_;if($-B<=r&&(ve=g(o.pos-w,P))){let ke=new Uint16Array(ve.size-ve.skip),Me=o.pos-ve.size,Xe=ke.length;for(;o.pos>Me;)Xe=v(ve.start,ke,Xe);ue=new cs(ke,$-ve.start,i),me=ve.start-_}else{let ke=o.pos-U;o.next();let Me=[],Xe=[],Fe=X>=a?X:-1,wt=0,Ze=$;for(;o.pos>ke;)Fe>=0&&o.id==Fe&&o.size>=0?(o.end<=Ze-r&&(m(Me,Xe,B,wt,o.end,Ze,Fe,re,le),wt=Me.length,Ze=o.end),o.next()):Z>2500?h(B,ke,Me,Xe):d(B,ke,Me,Xe,Fe,Z+1);if(Fe>=0&&wt>0&&wt<Me.length&&m(Me,Xe,B,wt,B,Ze,Fe,re,le),Me.reverse(),Xe.reverse(),Fe>-1&&wt>0){let W=f(ae,le);ue=qp(ae,Me,Xe,0,Me.length,0,$-B,W,W)}else ue=p(ae,Me,Xe,$-B,re-$,le)}k.push(ue),I.push(me)}function h(_,w,k,I){let P=[],Z=0,X=-1;for(;o.pos>w;){let{id:B,start:$,end:U,size:re}=o;if(re>4)o.next();else{if(X>-1&&$<X)break;X<0&&(X=U-r),P.push(B,$,U),Z++,o.next()}}if(Z){let B=new Uint16Array(Z*4),$=P[P.length-2];for(let U=P.length-3,re=0;U>=0;U-=3)B[re++]=P[U],B[re++]=P[U+1]-$,B[re++]=P[U+2]-$,B[re++]=re;k.push(new cs(B,P[2]-$,i)),I.push($-_)}}function f(_,w){return(k,I,P)=>{let Z=0,X=k.length-1,B,$;if(X>=0&&(B=k[X])instanceof nn){if(!X&&B.type==_&&B.length==P)return B;($=B.prop(tt.lookAhead))&&(Z=I[X]+B.length+$)}return p(_,k,I,P,Z,w)}}function m(_,w,k,I,P,Z,X,B,$){let U=[],re=[];for(;_.length>I;)U.push(_.pop()),re.push(w.pop()+k-P);_.push(p(i.types[X],U,re,Z-P,B-Z,$)),w.push(P-k)}function p(_,w,k,I,P,Z,X){if(Z){let B=[tt.contextHash,Z];X=X?[B].concat(X):[B]}if(P>25){let B=[tt.lookAhead,P];X=X?[B].concat(X):[B]}return new nn(_,w,k,I,X)}function g(_,w){let k=o.fork(),I=0,P=0,Z=0,X=k.end-r,B={size:0,start:0,skip:0};e:for(let $=k.pos-_;k.pos>$;){let U=k.size;if(k.id==w&&U>=0){B.size=I,B.start=P,B.skip=Z,Z+=4,I+=4,k.next();continue}let re=k.pos-U;if(U<0||re<$||k.start<X)break;let le=k.id>=a?4:0,ae=k.start;for(k.next();k.pos>re;){if(k.size<0)if(k.size==-3)le+=4;else break e;else k.id>=a&&(le+=4);k.next()}P=ae,I+=U,Z+=le}return(w<0||I==_)&&(B.size=I,B.start=P,B.skip=Z),B.size>4?B:void 0}function v(_,w,k){let{id:I,start:P,end:Z,size:X}=o;if(o.next(),X>=0&&I<a){let B=k;if(X>4){let $=o.pos-(X-4);for(;o.pos>$;)k=v(_,w,k)}w[--k]=B,w[--k]=Z-_,w[--k]=P-_,w[--k]=I}else X==-3?c=I:X==-4&&(u=I);return k}let C=[],y=[];for(;o.pos>0;)d(n.start||0,n.bufferStart||0,C,y,-1,0);let E=(e=n.length)!==null&&e!==void 0?e:C.length?y[0]+C[0].length:0;return new nn(l[n.topID],C.reverse(),y.reverse(),E)}const y0=new WeakMap;function Kc(n,e){if(!n.isAnonymous||e instanceof cs||e.type!=n)return 1;let t=y0.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof nn)){t=1;break}t+=Kc(n,i)}y0.set(e,t)}return t}function qp(n,e,t,i,r,s,a,o,l){let c=0;for(let m=i;m<r;m++)c+=Kc(n,e[m]);let u=Math.ceil(c*1.5/8),d=[],h=[];function f(m,p,g,v,C){for(let y=g;y<v;){let E=y,_=p[y],w=Kc(n,m[y]);for(y++;y<v;y++){let k=Kc(n,m[y]);if(w+k>=u)break;w+=k}if(y==E+1){if(w>u){let k=m[E];f(k.children,k.positions,0,k.children.length,p[E]+C);continue}d.push(m[E])}else{let k=p[y-1]+m[y-1].length-_;d.push(qp(n,m,p,E,y,_,k,null,l))}h.push(_+C-s)}}return f(e,t,i,r,0),(o||l)(d,h,a)}class Us{constructor(e,t,i,r,s=!1,a=!1){this.from=e,this.to=t,this.tree=i,this.offset=r,this.open=(s?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let r=[new Us(0,e.length,e,0,!1,i)];for(let s of t)s.to>e.length&&r.push(s);return r}static applyChanges(e,t,i=128){if(!t.length)return e;let r=[],s=1,a=e.length?e[0]:null;for(let o=0,l=0,c=0;;o++){let u=o<t.length?t[o]:null,d=u?u.fromA:1e9;if(d-l>=i)for(;a&&a.from<d;){let h=a;if(l>=h.from||d<=h.to||c){let f=Math.max(h.from,l)-c,m=Math.min(h.to,d)-c;h=f>=m?null:new Us(f,m,h.tree,h.offset+c,o>0,!!u)}if(h&&r.push(h),a.to>d)break;a=s<e.length?e[s++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return r}}class JC{startParse(e,t,i){return typeof e=="string"&&(e=new fU(e)),i=i?i.length?i.map(r=>new Dh(r.from,r.to)):[new Dh(0,0)]:[new Dh(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let r=this.startParse(e,t,i);for(;;){let s=r.advance();if(s)return s}}}class fU{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new tt({perNode:!0});let mU=0;class vr{constructor(e,t,i,r){this.name=e,this.set=t,this.base=i,this.modified=r,this.id=mU++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i=typeof e=="string"?e:"?";if(e instanceof vr&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let r=new vr(i,[],null,[]);if(r.set.push(r),t)for(let s of t.set)r.set.push(s);return r}static defineModifier(e){let t=new ku(e);return i=>i.modified.indexOf(t)>-1?i:ku.get(i.base||i,i.modified.concat(t).sort((r,s)=>r.id-s.id))}}let pU=0;class ku{constructor(e){this.name=e,this.instances=[],this.id=pU++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(o=>o.base==e&&gU(t,o.modified));if(i)return i;let r=[],s=new vr(e.name,r,e,t);for(let o of t)o.instances.push(s);let a=vU(t);for(let o of e.set)if(!o.modified.length)for(let l of a)r.push(ku.get(o,l));return s}}function gU(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}function vU(n){let e=[[]];for(let t=0;t<n.length;t++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(n[t]));return e.sort((t,i)=>i.length-t.length)}function ZC(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let r of t.split(" "))if(r){let s=[],a=2,o=r;for(let d=0;;){if(o=="..."&&d>0&&d+3==r.length){a=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!h)throw new RangeError("Invalid path: "+r);if(s.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),d+=h[0].length,d==r.length)break;let f=r[d++];if(d==r.length&&f=="!"){a=0;break}if(f!="/")throw new RangeError("Invalid path: "+r);o=r.slice(d)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+r);let u=new Du(i,a,l>0?s.slice(0,l):null);e[c]=u.sort(e[c])}}return eS.add(e)}const eS=new tt;class Du{constructor(e,t,i,r){this.tags=e,this.mode=t,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Du.empty=new Du([],2,null);function tS(n,e){let t=Object.create(null);for(let s of n)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let a of s.tag)t[a.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let a=r;for(let o of s)for(let l of o.set){let c=t[l.id];if(c){a=a?a+" "+c:c;break}}return a},scope:i}}function yU(n,e){let t=null;for(let i of n){let r=i.style(e);r&&(t=t?t+" "+r:r)}return t}function bU(n,e,t,i=0,r=n.length){let s=new EU(i,Array.isArray(e)?e:[e],t);s.highlightRange(n.cursor(),i,r,"",s.highlighters),s.flush(r)}class EU{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,r,s){let{type:a,from:o,to:l}=e;if(o>=i||l<=t)return;a.isTop&&(s=this.highlighters.filter(f=>!f.scope||f.scope(a)));let c=r,u=wU(e)||Du.empty,d=yU(s,u.tags);if(d&&(c&&(c+=" "),c+=d,u.mode==1&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(t,o),c),u.opaque)return;let h=e.tree&&e.tree.prop(tt.mounted);if(h&&h.overlay){let f=e.node.enter(h.overlay[0].from+o,1),m=this.highlighters.filter(g=>!g.scope||g.scope(h.tree.type)),p=e.firstChild();for(let g=0,v=o;;g++){let C=g<h.overlay.length?h.overlay[g]:null,y=C?C.from+o:l,E=Math.max(t,v),_=Math.min(i,y);if(E<_&&p)for(;e.from<_&&(this.highlightRange(e,E,_,r,s),this.startSpan(Math.min(_,e.to),c),!(e.to>=y||!e.nextSibling())););if(!C||y>i)break;v=C.to+o,v>t&&(this.highlightRange(f.cursor(),Math.max(t,C.from+o),Math.min(i,v),"",m),this.startSpan(Math.min(i,v),c))}p&&e.parent()}else if(e.firstChild()){h&&(r="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,r,s),this.startSpan(Math.min(i,e.to),c)}while(e.nextSibling());e.parent()}}}function wU(n){let e=n.type.prop(eS);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const ge=vr.define,vc=ge(),Hi=ge(),b0=ge(Hi),E0=ge(Hi),Vi=ge(),yc=ge(Vi),Mh=ge(Vi),Yr=ge(),Ds=ge(Yr),Gr=ge(),Kr=ge(),gm=ge(),po=ge(gm),bc=ge(),Y={comment:vc,lineComment:ge(vc),blockComment:ge(vc),docComment:ge(vc),name:Hi,variableName:ge(Hi),typeName:b0,tagName:ge(b0),propertyName:E0,attributeName:ge(E0),className:ge(Hi),labelName:ge(Hi),namespace:ge(Hi),macroName:ge(Hi),literal:Vi,string:yc,docString:ge(yc),character:ge(yc),attributeValue:ge(yc),number:Mh,integer:ge(Mh),float:ge(Mh),bool:ge(Vi),regexp:ge(Vi),escape:ge(Vi),color:ge(Vi),url:ge(Vi),keyword:Gr,self:ge(Gr),null:ge(Gr),atom:ge(Gr),unit:ge(Gr),modifier:ge(Gr),operatorKeyword:ge(Gr),controlKeyword:ge(Gr),definitionKeyword:ge(Gr),moduleKeyword:ge(Gr),operator:Kr,derefOperator:ge(Kr),arithmeticOperator:ge(Kr),logicOperator:ge(Kr),bitwiseOperator:ge(Kr),compareOperator:ge(Kr),updateOperator:ge(Kr),definitionOperator:ge(Kr),typeOperator:ge(Kr),controlOperator:ge(Kr),punctuation:gm,separator:ge(gm),bracket:po,angleBracket:ge(po),squareBracket:ge(po),paren:ge(po),brace:ge(po),content:Yr,heading:Ds,heading1:ge(Ds),heading2:ge(Ds),heading3:ge(Ds),heading4:ge(Ds),heading5:ge(Ds),heading6:ge(Ds),contentSeparator:ge(Yr),list:ge(Yr),quote:ge(Yr),emphasis:ge(Yr),strong:ge(Yr),link:ge(Yr),monospace:ge(Yr),strikethrough:ge(Yr),inserted:ge(),deleted:ge(),changed:ge(),invalid:ge(),meta:bc,documentMeta:ge(bc),annotation:ge(bc),processingInstruction:ge(bc),definition:vr.defineModifier("definition"),constant:vr.defineModifier("constant"),function:vr.defineModifier("function"),standard:vr.defineModifier("standard"),local:vr.defineModifier("local"),special:vr.defineModifier("special")};for(let n in Y){let e=Y[n];e instanceof vr&&(e.name=n)}tS([{tag:Y.link,class:"tok-link"},{tag:Y.heading,class:"tok-heading"},{tag:Y.emphasis,class:"tok-emphasis"},{tag:Y.strong,class:"tok-strong"},{tag:Y.keyword,class:"tok-keyword"},{tag:Y.atom,class:"tok-atom"},{tag:Y.bool,class:"tok-bool"},{tag:Y.url,class:"tok-url"},{tag:Y.labelName,class:"tok-labelName"},{tag:Y.inserted,class:"tok-inserted"},{tag:Y.deleted,class:"tok-deleted"},{tag:Y.literal,class:"tok-literal"},{tag:Y.string,class:"tok-string"},{tag:Y.number,class:"tok-number"},{tag:[Y.regexp,Y.escape,Y.special(Y.string)],class:"tok-string2"},{tag:Y.variableName,class:"tok-variableName"},{tag:Y.local(Y.variableName),class:"tok-variableName tok-local"},{tag:Y.definition(Y.variableName),class:"tok-variableName tok-definition"},{tag:Y.special(Y.variableName),class:"tok-variableName2"},{tag:Y.definition(Y.propertyName),class:"tok-propertyName tok-definition"},{tag:Y.typeName,class:"tok-typeName"},{tag:Y.namespace,class:"tok-namespace"},{tag:Y.className,class:"tok-className"},{tag:Y.macroName,class:"tok-macroName"},{tag:Y.propertyName,class:"tok-propertyName"},{tag:Y.operator,class:"tok-operator"},{tag:Y.comment,class:"tok-comment"},{tag:Y.meta,class:"tok-meta"},{tag:Y.invalid,class:"tok-invalid"},{tag:Y.punctuation,class:"tok-punctuation"}]);var Ph;const ga=new tt;function CU(n){return Se.define({combine:n?e=>e.concat(n):void 0})}const SU=new tt;class Ir{constructor(e,t,i=[],r=""){this.data=e,this.name=r,rt.prototype.hasOwnProperty("tree")||Object.defineProperty(rt.prototype,"tree",{get(){return Tn(this)}}),this.parser=t,this.extension=[us.of(this),rt.languageData.of((s,a,o)=>{let l=w0(s,a,o),c=l.type.prop(ga);if(!c)return[];let u=s.facet(c),d=l.type.prop(SU);if(d){let h=l.resolve(a-l.from,o);for(let f of d)if(f.test(h,s)){let m=s.facet(f.facet);return f.type=="replace"?m:m.concat(u)}}return u})].concat(i)}isActiveAt(e,t,i=-1){return w0(e,t,i).type.prop(ga)==this.data}findRegions(e){let t=e.facet(us);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],r=(s,a)=>{if(s.prop(ga)==this.data){i.push({from:a,to:a+s.length});return}let o=s.prop(tt.mounted);if(o){if(o.tree.prop(ga)==this.data){if(o.overlay)for(let l of o.overlay)i.push({from:l.from+a,to:l.to+a});else i.push({from:a,to:a+s.length});return}else if(o.overlay){let l=i.length;if(r(o.tree,o.overlay[0].from+a),i.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof nn&&r(c,s.positions[l]+a)}};return r(Tn(e),0),i}get allowsNesting(){return!0}}Ir.setState=Ye.define();function w0(n,e,t){let i=n.facet(us),r=Tn(n).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,t,dn.ExcludeBuffers))s.type.isTop&&(r=s);return r}class Mu extends Ir{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=CU(e.languageData);return new Mu(t,e.parser.configure({props:[ga.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new Mu(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Tn(n){let e=n.field(Ir.state,!1);return e?e.tree:nn.empty}class _U{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let go=null;class Pu{constructor(e,t,i=[],r,s,a,o,l){this.parser=e,this.state=t,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=a,this.skipped=o,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new Pu(e,t,[],nn.empty,0,i,[],null)}startParse(){return this.parser.startParse(new _U(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=nn.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(Us.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Us.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=go;go=this;try{return e()}finally{go=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=C0(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:r,treeLen:s,viewport:a,skipped:o}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,d,h)=>l.push({fromA:c,toA:u,fromB:d,toB:h})),i=Us.applyChanges(i,l),r=nn.empty,s=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){o=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),d=e.mapPos(c.to,-1);u<d&&o.push({from:u,to:d})}}}return new Pu(this.parser,t,i,r,s,a,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=C0(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends JC{createParse(t,i,r){let s=r[0].from,a=r[r.length-1].to;return{parsedPos:s,advance(){let l=go;if(l){for(let c of r)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=a,new nn(nr.none,[],[],a-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return go}}function C0(n,e,t){return Us.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class Ga{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new Ga(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=Pu.create(e.facet(us).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new Ga(i)}}Ir.state=Sn.define({create:Ga.init,update(n,e){for(let t of e.effects)if(t.is(Ir.setState))return t.value;return e.startState.facet(us)!=e.state.facet(us)?Ga.init(e.state):n.apply(e)}});let nS=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(nS=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Th=typeof navigator<"u"&&(!((Ph=navigator.scheduling)===null||Ph===void 0)&&Ph.isInputPending)?()=>navigator.scheduling.isInputPending():null,xU=Xt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Ir.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Ir.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=nS(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(Ir.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!Th?Math.max(25,e.timeRemaining()-5):1e9),o=s.context.treeLen<r&&i.doc.length>r+1e3,l=s.context.work(()=>Th&&Th()||Date.now()>a,r+(o?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Ir.setState.of(new Ga(s.context))})),this.chunkBudget>0&&!(l&&!o)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Zn(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),us=Se.define({combine(n){return n.length?n[0]:null},enables:n=>[Ir.state,xU,we.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class RU{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const AU=Se.define(),Rd=Se.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function Tu(n){let e=n.facet(Rd);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function pl(n,e){let t="",i=n.tabSize,r=n.facet(Rd)[0];if(r=="	"){for(;e>=i;)t+="	",e-=i;r=" "}for(let s=0;s<e;s++)t+=r;return t}function Up(n,e){n instanceof rt&&(n=new Ad(n));for(let i of n.state.facet(AU)){let r=i(n,e);if(r!==void 0)return r}let t=Tn(n.state);return t.length>=e?kU(n,t,e):null}class Ad{constructor(e,t={}){this.state=e,this.options=t,this.unit=Tu(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,t);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,t=1){let{text:i,from:r}=this.lineAt(e,t),s=this.countColumn(i,e-r),a=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return a>-1&&(s+=a-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,t=e.length){return to(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:r}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let a=s(r);if(a>-1)return a}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const rS=new tt;function kU(n,e,t){let i=e.resolveStack(t),r=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(r!=i.node){let s=[];for(let a=r;a&&!(a.from==i.node.from&&a.type==i.node.type);a=a.parent)s.push(a);for(let a=s.length-1;a>=0;a--)i={node:s[a],next:i}}return iS(i,n,t)}function iS(n,e,t){for(let i=n;i;i=i.next){let r=MU(i.node);if(r)return r(Hp.create(e,t,i))}return 0}function DU(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function MU(n){let e=n.type.prop(rS);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(tt.closedBy))){let r=n.lastChild,s=r&&i.indexOf(r.name)>-1;return a=>OU(a,!0,1,void 0,s&&!DU(a)?r.from:void 0)}return n.parent==null?PU:null}function PU(){return 0}class Hp extends Ad{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new Hp(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(TU(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return iS(this.context.next,this.base,this.pos)}}function TU(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function IU(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let r=n.options.simulateBreak,s=n.state.doc.lineAt(t.from),a=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let o=t.to;;){let l=e.childAfter(o);if(!l||l==i)return null;if(!l.type.isSkipped){if(l.from>=a)return null;let c=/^ */.exec(s.text.slice(t.to-s.from))[0].length;return{from:t.from,to:t.to+c}}o=l.to}}function OU(n,e,t,i,r){let s=n.textAfter,a=s.match(/^\s*/)[0].length,o=i&&s.slice(a,a+i.length)==i||r==n.pos+a,l=e?IU(n):null;return l?o?n.column(l.from):n.column(l.to):n.baseIndent+(o?0:n.unit*t)}function S0({except:n,units:e=1}={}){return t=>{let i=n&&n.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const NU=200;function FU(){return rt.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,r=t.lineAt(i);if(i>r.from+NU)return n;let s=t.sliceString(r.from,i);if(!e.some(c=>c.test(s)))return n;let{state:a}=n,o=-1,l=[];for(let{head:c}of a.selection.ranges){let u=a.doc.lineAt(c);if(u.from==o)continue;o=u.from;let d=Up(a,u.from);if(d==null)continue;let h=/^\s*/.exec(u.text)[0],f=pl(a,d);h!=f&&l.push({from:u.from,to:u.from+h.length,insert:f})}return l.length?[n,{changes:l,sequential:!0}]:n})}const LU=Se.define(),sS=new tt;function BU(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function $U(n,e,t){let i=Tn(n);if(i.length<t)return null;let r=i.resolveStack(t,1),s=null;for(let a=r;a;a=a.next){let o=a.node;if(o.to<=t||o.from>t)continue;if(s&&o.from<e)break;let l=o.type.prop(sS);if(l&&(o.to<i.length-50||i.length==n.doc.length||!qU(o))){let c=l(o,n);c&&c.from<=t&&c.from>=e&&c.to>t&&(s=c)}}return s}function qU(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function Iu(n,e,t){for(let i of n.facet(LU)){let r=i(n,e,t);if(r)return r}return $U(n,e,t)}function aS(n,e){let t=e.mapPos(n.from,1),i=e.mapPos(n.to,-1);return t>=i?void 0:{from:t,to:i}}const kd=Ye.define({map:aS}),Tl=Ye.define({map:aS});function oS(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(n.lineBlockAt(t));return e}const Qs=Sn.define({create(){return Oe.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)if(t.is(kd)&&!UU(n,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet(Vp),r=i?Oe.replace({widget:new KU(i(e.state,t.value))}):_0;n=n.update({add:[r.range(t.value.from,t.value.to)]})}else t.is(Tl)&&(n=n.update({filter:(i,r)=>t.value.from!=i||t.value.to!=r,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:i}=e.selection.main;n.between(i,i,(r,s)=>{r<i&&s>i&&(t=!0)}),t&&(n=n.update({filterFrom:i,filterTo:i,filter:(r,s)=>s<=i||r>=i}))}return n},provide:n=>we.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(i,r)=>{t.push(i,r)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let i=n[t++],r=n[t++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(_0.range(i,r))}return Oe.set(e,!0)}});function Ou(n,e,t){var i;let r=null;return(i=n.field(Qs,!1))===null||i===void 0||i.between(e,t,(s,a)=>{(!r||r.from>s)&&(r={from:s,to:a})}),r}function UU(n,e,t){let i=!1;return n.between(e,e,(r,s)=>{r==e&&s==t&&(i=!0)}),i}function lS(n,e){return n.field(Qs,!1)?e:e.concat(Ye.appendConfig.of(uS()))}const HU=n=>{for(let e of oS(n)){let t=Iu(n.state,e.from,e.to);if(t)return n.dispatch({effects:lS(n.state,[kd.of(t),cS(n,t)])}),!0}return!1},VU=n=>{if(!n.state.field(Qs,!1))return!1;let e=[];for(let t of oS(n)){let i=Ou(n.state,t.from,t.to);i&&e.push(Tl.of(i),cS(n,i,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function cS(n,e,t=!0){let i=n.state.doc.lineAt(e.from).number,r=n.state.doc.lineAt(e.to).number;return we.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${r}.`)}const jU=n=>{let{state:e}=n,t=[];for(let i=0;i<e.doc.length;){let r=n.lineBlockAt(i),s=Iu(e,r.from,r.to);s&&t.push(kd.of(s)),i=(s?n.lineBlockAt(s.to):r).to+1}return t.length&&n.dispatch({effects:lS(n.state,t)}),!!t.length},WU=n=>{let e=n.state.field(Qs,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(i,r)=>{t.push(Tl.of({from:i,to:r}))}),n.dispatch({effects:t}),!0},zU=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:HU},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:VU},{key:"Ctrl-Alt-[",run:jU},{key:"Ctrl-Alt-]",run:WU}],GU={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},Vp=Se.define({combine(n){return ui(n,GU)}});function uS(n){let e=[Qs,XU];return n&&e.push(Vp.of(n)),e}function dS(n,e){let{state:t}=n,i=t.facet(Vp),r=a=>{let o=n.lineBlockAt(n.posAtDOM(a.target)),l=Ou(n.state,o.from,o.to);l&&n.dispatch({effects:Tl.of(l)}),a.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(n,r,e);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",t.phrase("folded code")),s.title=t.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const _0=Oe.replace({widget:new class extends Ii{toDOM(n){return dS(n,null)}}});class KU extends Ii{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return dS(e,this.value)}}const YU={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Ih extends Di{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function QU(n={}){let e=Object.assign(Object.assign({},YU),n),t=new Ih(e,!0),i=new Ih(e,!1),r=Xt.fromClass(class{constructor(a){this.from=a.viewport.from,this.markers=this.buildMarkers(a)}update(a){(a.docChanged||a.viewportChanged||a.startState.facet(us)!=a.state.facet(us)||a.startState.field(Qs,!1)!=a.state.field(Qs,!1)||Tn(a.startState)!=Tn(a.state)||e.foldingChanged(a))&&(this.markers=this.buildMarkers(a.view))}buildMarkers(a){let o=new Ai;for(let l of a.viewportLineBlocks){let c=Ou(a.state,l.from,l.to)?i:Iu(a.state,l.from,l.to)?t:null;c&&o.add(l.from,l.from,c)}return o.finish()}}),{domEventHandlers:s}=e;return[r,Qq({class:"cm-foldGutter",markers(a){var o;return((o=a.plugin(r))===null||o===void 0?void 0:o.markers)||ct.empty},initialSpacer(){return new Ih(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(a,o,l)=>{if(s.click&&s.click(a,o,l))return!0;let c=Ou(a.state,o.from,o.to);if(c)return a.dispatch({effects:Tl.of(c)}),!0;let u=Iu(a.state,o.from,o.to);return u?(a.dispatch({effects:kd.of(u)}),!0):!1}})}),uS()]}const XU=we.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Il{constructor(e,t){this.specs=e;let i;function r(o){let l=as.newName();return(i||(i=Object.create(null)))["."+l]=o,l}const s=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,a=t.scope;this.scope=a instanceof Ir?o=>o.prop(ga)==a.data:a?o=>o==a:void 0,this.style=tS(e.map(o=>({tag:o.tag,class:o.class||r(Object.assign({},o,{tag:null}))})),{all:s}).style,this.module=i?new as(i):null,this.themeType=t.themeType}static define(e,t){return new Il(e,t||{})}}const vm=Se.define(),hS=Se.define({combine(n){return n.length?[n[0]]:null}});function Oh(n){let e=n.facet(vm);return e.length?e:n.facet(hS)}function fS(n,e){let t=[ZU],i;return n instanceof Il&&(n.module&&t.push(we.styleModule.of(n.module)),i=n.themeType),e!=null&&e.fallback?t.push(hS.of(n)):i?t.push(vm.computeN([we.darkTheme],r=>r.facet(we.darkTheme)==(i=="dark")?[n]:[])):t.push(vm.of(n)),t}class JU{constructor(e){this.markCache=Object.create(null),this.tree=Tn(e.state),this.decorations=this.buildDeco(e,Oh(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=Tn(e.state),i=Oh(e.state),r=i!=Oh(e.startState),{viewport:s}=e.view,a=e.changes.mapPos(this.decoratedTo,1);t.length<s.to&&!r&&t.type==this.tree.type&&a>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=a):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=s.to)}buildDeco(e,t){if(!t||!this.tree.length)return Oe.none;let i=new Ai;for(let{from:r,to:s}of e.visibleRanges)bU(this.tree,t,(a,o,l)=>{i.add(a,o,this.markCache[l]||(this.markCache[l]=Oe.mark({class:l})))},r,s);return i.finish()}}const ZU=Zs.high(Xt.fromClass(JU,{decorations:n=>n.decorations})),eH=Il.define([{tag:Y.meta,color:"#404740"},{tag:Y.link,textDecoration:"underline"},{tag:Y.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Y.emphasis,fontStyle:"italic"},{tag:Y.strong,fontWeight:"bold"},{tag:Y.strikethrough,textDecoration:"line-through"},{tag:Y.keyword,color:"#708"},{tag:[Y.atom,Y.bool,Y.url,Y.contentSeparator,Y.labelName],color:"#219"},{tag:[Y.literal,Y.inserted],color:"#164"},{tag:[Y.string,Y.deleted],color:"#a11"},{tag:[Y.regexp,Y.escape,Y.special(Y.string)],color:"#e40"},{tag:Y.definition(Y.variableName),color:"#00f"},{tag:Y.local(Y.variableName),color:"#30a"},{tag:[Y.typeName,Y.namespace],color:"#085"},{tag:Y.className,color:"#167"},{tag:[Y.special(Y.variableName),Y.macroName],color:"#256"},{tag:Y.definition(Y.propertyName),color:"#00c"},{tag:Y.comment,color:"#940"},{tag:Y.invalid,color:"#f00"}]),tH=we.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),mS=1e4,pS="()[]{}",gS=Se.define({combine(n){return ui(n,{afterCursor:!0,brackets:pS,maxScanDistance:mS,renderMatch:iH})}}),nH=Oe.mark({class:"cm-matchingBracket"}),rH=Oe.mark({class:"cm-nonmatchingBracket"});function iH(n){let e=[],t=n.matched?nH:rH;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const sH=Sn.define({create(){return Oe.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(gS);for(let r of e.state.selection.ranges){if(!r.empty)continue;let s=ri(e.state,r.head,-1,i)||r.head>0&&ri(e.state,r.head-1,1,i)||i.afterCursor&&(ri(e.state,r.head,1,i)||r.head<e.state.doc.length&&ri(e.state,r.head+1,-1,i));s&&(t=t.concat(i.renderMatch(s,e.state)))}return Oe.set(t,!0)},provide:n=>we.decorations.from(n)}),aH=[sH,tH];function oH(n={}){return[gS.of(n),aH]}const lH=new tt;function ym(n,e,t){let i=n.prop(e<0?tt.openedBy:tt.closedBy);if(i)return i;if(n.name.length==1){let r=t.indexOf(n.name);if(r>-1&&r%2==(e<0?1:0))return[t[r+e]]}return null}function bm(n){let e=n.type.prop(lH);return e?e(n.node):n}function ri(n,e,t,i={}){let r=i.maxScanDistance||mS,s=i.brackets||pS,a=Tn(n),o=a.resolveInner(e,t);for(let l=o;l;l=l.parent){let c=ym(l.type,t,s);if(c&&l.from<l.to){let u=bm(l);if(u&&(t>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return cH(n,e,t,l,u,c,s)}}return uH(n,e,t,a,o.type,r,s)}function cH(n,e,t,i,r,s,a){let o=i.parent,l={from:r.from,to:r.to},c=0,u=o==null?void 0:o.cursor();if(u&&(t<0?u.childBefore(i.from):u.childAfter(i.to)))do if(t<0?u.to<=i.from:u.from>=i.to){if(c==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let d=bm(u);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(ym(u.type,t,a))c++;else if(ym(u.type,-t,a)){if(c==0){let d=bm(u);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}c--}}while(t<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function uH(n,e,t,i,r,s,a){let o=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),l=a.indexOf(o);if(l<0||l%2==0!=t>0)return null;let c={from:t<0?e-1:e,to:t>0?e+1:e},u=n.doc.iterRange(e,t>0?n.doc.length:0),d=0;for(let h=0;!u.next().done&&h<=s;){let f=u.value;t<0&&(h+=f.length);let m=e+h*t;for(let p=t>0?0:f.length-1,g=t>0?f.length:-1;p!=g;p+=t){let v=a.indexOf(f[p]);if(!(v<0||i.resolveInner(m+p,1).type!=r))if(v%2==0==t>0)d++;else{if(d==1)return{start:c,end:{from:m+p,to:m+p+1},matched:v>>1==l>>1};d--}}t>0&&(h+=f.length)}return u.done?{start:c,matched:!1}:null}const dH=Object.create(null),x0=[nr.none],R0=[],A0=Object.create(null),hH=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])hH[n]=fH(dH,e);function Nh(n,e){R0.indexOf(n)>-1||(R0.push(n),console.warn(e))}function fH(n,e){let t=[];for(let o of e.split(" ")){let l=[];for(let c of o.split(".")){let u=n[c]||Y[c];u?typeof u=="function"?l.length?l=l.map(u):Nh(c,`Modifier ${c} used at start of tag`):l.length?Nh(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:Nh(c,`Unknown highlighting tag ${c}`)}for(let c of l)t.push(c)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+t.map(o=>o.id),s=A0[r];if(s)return s.id;let a=A0[r]=nr.define({id:x0.length,name:i,props:[ZC({[i]:t})]});return x0.push(a),a.id}It.RTL,It.LTR;const mH=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),i=Wp(n.state,t.from);return i.line?pH(n):i.block?vH(n):!1};function jp(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let r=n(e,t);return r?(i(t.update(r)),!0):!1}}const pH=jp(EH,0),gH=jp(vS,0),vH=jp((n,e)=>vS(n,e,bH(e)),0);function Wp(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const vo=50;function yH(n,{open:e,close:t},i,r){let s=n.sliceDoc(i-vo,i),a=n.sliceDoc(r,r+vo),o=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(a)[0].length,c=s.length-o;if(s.slice(c-e.length,c)==e&&a.slice(l,l+t.length)==t)return{open:{pos:i-o,margin:o&&1},close:{pos:r+l,margin:l&&1}};let u,d;r-i<=2*vo?u=d=n.sliceDoc(i,r):(u=n.sliceDoc(i,i+vo),d=n.sliceDoc(r-vo,r));let h=/^\s*/.exec(u)[0].length,f=/\s*$/.exec(d)[0].length,m=d.length-f-t.length;return u.slice(h,h+e.length)==e&&d.slice(m,m+t.length)==t?{open:{pos:i+h+e.length,margin:/\s/.test(u.charAt(h+e.length))?1:0},close:{pos:r-f-t.length,margin:/\s/.test(d.charAt(m-1))?1:0}}:null}function bH(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),r=t.to<=i.to?i:n.doc.lineAt(t.to);r.from>i.from&&r.from==t.to&&(r=t.to==i.to+1?i:n.doc.lineAt(t.to-1));let s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function vS(n,e,t=e.selection.ranges){let i=t.map(s=>Wp(e,s.from).block);if(!i.every(s=>s))return null;let r=t.map((s,a)=>yH(e,i[a],s.from,s.to));if(n!=2&&!r.every(s=>s))return{changes:e.changes(t.map((s,a)=>r[a]?[]:[{from:s.from,insert:i[a].open+" "},{from:s.to,insert:" "+i[a].close}]))};if(n!=1&&r.some(s=>s)){let s=[];for(let a=0,o;a<r.length;a++)if(o=r[a]){let l=i[a],{open:c,close:u}=o;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:s}}return null}function EH(n,e,t=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:a}of t){let o=i.length,l=1e9,c=Wp(e,s).line;if(c){for(let u=s;u<=a;){let d=e.doc.lineAt(u);if(d.from>r&&(s==a||a>d.from)){r=d.from;let h=/^\s*/.exec(d.text)[0].length,f=h==d.length,m=d.text.slice(h,h+c.length)==c?h:-1;h<d.text.length&&h<l&&(l=h),i.push({line:d,comment:m,token:c,indent:h,empty:f,single:!1})}u=d.to+1}if(l<1e9)for(let u=o;u<i.length;u++)i[u].indent<i[u].line.text.length&&(i[u].indent=l);i.length==o+1&&(i[o].single=!0)}}if(n!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:o,token:l,indent:c,empty:u,single:d}of i)(d||!u)&&s.push({from:o.from+c,insert:l+" "});let a=e.changes(s);return{changes:a,selection:e.selection.map(a,1)}}else if(n!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:a,comment:o,token:l}of i)if(o>=0){let c=a.from+o,u=c+l.length;a.text[u-a.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}const Em=Ti.define(),wH=Ti.define(),CH=Se.define(),yS=Se.define({combine(n){return ui(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,r)=>e(i,r)||t(i,r)})}}),bS=Sn.define({create(){return ii.empty},update(n,e){let t=e.state.facet(yS),i=e.annotation(Em);if(i){let l=er.fromTransaction(e,i.selection),c=i.side,u=c==0?n.undone:n.done;return l?u=Nu(u,u.length,t.minDepth,l):u=CS(u,e.startState.selection),new ii(c==0?i.rest:u,c==0?u:i.rest)}let r=e.annotation(wH);if((r=="full"||r=="before")&&(n=n.isolate()),e.annotation(cn.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let s=er.fromTransaction(e),a=e.annotation(cn.time),o=e.annotation(cn.userEvent);return s?n=n.addChanges(s,a,o,t,e):e.selection&&(n=n.addSelection(e.startState.selection,a,o,t.newGroupDelay)),(r=="full"||r=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new ii(n.done.map(er.fromJSON),n.undone.map(er.fromJSON))}});function SH(n={}){return[bS,yS.of(n),we.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?ES:e.inputType=="historyRedo"?wm:null;return i?(e.preventDefault(),i(t)):!1}})]}function Dd(n,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let r=t.field(bS,!1);if(!r)return!1;let s=r.pop(n,t,e);return s?(i(s),!0):!1}}const ES=Dd(0,!1),wm=Dd(1,!1),_H=Dd(0,!0),xH=Dd(1,!0);class er{constructor(e,t,i,r,s){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new er(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new er(e.changes&&ln.fromJSON(e.changes),[],e.mapped&&ai.fromJSON(e.mapped),e.startSelection&&ee.fromJSON(e.startSelection),e.selectionsAfter.map(ee.fromJSON))}static fromTransaction(e,t){let i=Er;for(let r of e.startState.facet(CH)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new er(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,Er)}static selection(e){return new er(void 0,Er,void 0,void 0,e)}}function Nu(n,e,t,i){let r=e+1>t+20?e-t-1:0,s=n.slice(r,e);return s.push(i),s}function RH(n,e){let t=[],i=!1;return n.iterChangedRanges((r,s)=>t.push(r,s)),e.iterChangedRanges((r,s,a,o)=>{for(let l=0;l<t.length;){let c=t[l++],u=t[l++];o>=c&&a<=u&&(i=!0)}}),i}function AH(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function wS(n,e){return n.length?e.length?n.concat(e):n:e}const Er=[],kH=200;function CS(n,e){if(n.length){let t=n[n.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-kH));return i.length&&i[i.length-1].eq(e)?n:(i.push(e),Nu(n,n.length-1,1e9,t.setSelAfter(i)))}else return[er.selection([e])]}function DH(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function Fh(n,e){if(!n.length)return n;let t=n.length,i=Er;for(;t;){let r=MH(n[t-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=n.slice(0,t);return s[t-1]=r,s}else e=r.mapped,t--,i=r.selectionsAfter}return i.length?[er.selection(i)]:Er}function MH(n,e,t){let i=wS(n.selectionsAfter.length?n.selectionsAfter.map(o=>o.map(e)):Er,t);if(!n.changes)return er.selection(i);let r=n.changes.map(e),s=e.mapDesc(n.changes,!0),a=n.mapped?n.mapped.composeDesc(s):s;return new er(r,Ye.mapEffects(n.effects,e),a,n.startSelection.map(s),i)}const PH=/^(input\.type|delete)($|\.)/;class ii{constructor(e,t,i=0,r=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new ii(this.done,this.undone):this}addChanges(e,t,i,r,s){let a=this.done,o=a[a.length-1];return o&&o.changes&&!o.changes.empty&&e.changes&&(!i||PH.test(i))&&(!o.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,RH(o.changes,e.changes))||i=="input.type.compose")?a=Nu(a,a.length-1,r.minDepth,new er(e.changes.compose(o.changes),wS(Ye.mapEffects(e.effects,o.changes),o.effects),o.mapped,o.startSelection,Er)):a=Nu(a,a.length,r.minDepth,e),new ii(a,Er,t,i)}addSelection(e,t,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Er;return s.length>0&&t-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&AH(s[s.length-1],e)?this:new ii(CS(this.done,e),this.undone,t,i)}addMapping(e){return new ii(Fh(this.done,e),Fh(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1],a=s.selectionsAfter[0]||t.selection;if(i&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:Em.of({side:e,rest:DH(r),selection:a}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let o=r.length==1?Er:r.slice(0,r.length-1);return s.mapped&&(o=Fh(o,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:Em.of({side:e,rest:o,selection:a}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}ii.empty=new ii(Er,Er);const TH=[{key:"Mod-z",run:ES,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:wm,preventDefault:!0},{linux:"Ctrl-Shift-z",run:wm,preventDefault:!0},{key:"Mod-u",run:_H,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:xH,preventDefault:!0}];function no(n,e){return ee.create(n.ranges.map(e),n.mainIndex)}function di(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function qr({state:n,dispatch:e},t){let i=no(n.selection,t);return i.eq(n.selection,!0)?!1:(e(di(n,i)),!0)}function Md(n,e){return ee.cursor(e?n.to:n.from)}function SS(n,e){return qr(n,t=>t.empty?n.moveByChar(t,e):Md(t,e))}function In(n){return n.textDirectionAt(n.state.selection.main.head)==It.LTR}const _S=n=>SS(n,!In(n)),xS=n=>SS(n,In(n));function RS(n,e){return qr(n,t=>t.empty?n.moveByGroup(t,e):Md(t,e))}const IH=n=>RS(n,!In(n)),OH=n=>RS(n,In(n));function NH(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function Pd(n,e,t){let i=Tn(n).resolveInner(e.head),r=t?tt.closedBy:tt.openedBy;for(let l=e.head;;){let c=t?i.childAfter(l):i.childBefore(l);if(!c)break;NH(n,c,r)?i=c:l=t?c.to:c.from}let s=i.type.prop(r),a,o;return s&&(a=t?ri(n,i.from,1):ri(n,i.to,-1))&&a.matched?o=t?a.end.to:a.end.from:o=t?i.to:i.from,ee.cursor(o,t?-1:1)}const FH=n=>qr(n,e=>Pd(n.state,e,!In(n))),LH=n=>qr(n,e=>Pd(n.state,e,In(n)));function AS(n,e){return qr(n,t=>{if(!t.empty)return Md(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}const kS=n=>AS(n,!1),DS=n=>AS(n,!0);function MS(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,i=0,r;if(e){for(let s of n.state.facet(we.scrollMargins)){let a=s(n);a!=null&&a.top&&(t=Math.max(a==null?void 0:a.top,t)),a!=null&&a.bottom&&(i=Math.max(a==null?void 0:a.bottom,i))}r=n.scrollDOM.clientHeight-t-i}else r=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(n.defaultLineHeight,r-5)}}function PS(n,e){let t=MS(n),{state:i}=n,r=no(i.selection,a=>a.empty?n.moveVertically(a,e,t.height):Md(a,e));if(r.eq(i.selection))return!1;let s;if(t.selfScroll){let a=n.coordsAtPos(i.selection.main.head),o=n.scrollDOM.getBoundingClientRect(),l=o.top+t.marginTop,c=o.bottom-t.marginBottom;a&&a.top>l&&a.bottom<c&&(s=we.scrollIntoView(r.main.head,{y:"start",yMargin:a.top-l}))}return n.dispatch(di(i,r),{effects:s}),!0}const k0=n=>PS(n,!1),Cm=n=>PS(n,!0);function Es(n,e,t){let i=n.lineBlockAt(e.head),r=n.moveToLineBoundary(e,t);if(r.head==e.head&&r.head!=(t?i.to:i.from)&&(r=n.moveToLineBoundary(e,t,!1)),!t&&r.head==i.from&&i.length){let s=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=ee.cursor(i.from+s))}return r}const BH=n=>qr(n,e=>Es(n,e,!0)),$H=n=>qr(n,e=>Es(n,e,!1)),qH=n=>qr(n,e=>Es(n,e,!In(n))),UH=n=>qr(n,e=>Es(n,e,In(n))),HH=n=>qr(n,e=>ee.cursor(n.lineBlockAt(e.head).from,1)),VH=n=>qr(n,e=>ee.cursor(n.lineBlockAt(e.head).to,-1));function jH(n,e,t){let i=!1,r=no(n.selection,s=>{let a=ri(n,s.head,-1)||ri(n,s.head,1)||s.head>0&&ri(n,s.head-1,1)||s.head<n.doc.length&&ri(n,s.head+1,-1);if(!a||!a.end)return s;i=!0;let o=a.start.from==s.head?a.end.to:a.end.from;return t?ee.range(s.anchor,o):ee.cursor(o)});return i?(e(di(n,r)),!0):!1}const WH=({state:n,dispatch:e})=>jH(n,e,!1);function Rr(n,e){let t=no(n.state.selection,i=>{let r=e(i);return ee.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(di(n.state,t)),!0)}function TS(n,e){return Rr(n,t=>n.moveByChar(t,e))}const IS=n=>TS(n,!In(n)),OS=n=>TS(n,In(n));function NS(n,e){return Rr(n,t=>n.moveByGroup(t,e))}const zH=n=>NS(n,!In(n)),GH=n=>NS(n,In(n)),KH=n=>Rr(n,e=>Pd(n.state,e,!In(n))),YH=n=>Rr(n,e=>Pd(n.state,e,In(n)));function FS(n,e){return Rr(n,t=>n.moveVertically(t,e))}const LS=n=>FS(n,!1),BS=n=>FS(n,!0);function $S(n,e){return Rr(n,t=>n.moveVertically(t,e,MS(n).height))}const D0=n=>$S(n,!1),M0=n=>$S(n,!0),QH=n=>Rr(n,e=>Es(n,e,!0)),XH=n=>Rr(n,e=>Es(n,e,!1)),JH=n=>Rr(n,e=>Es(n,e,!In(n))),ZH=n=>Rr(n,e=>Es(n,e,In(n))),e3=n=>Rr(n,e=>ee.cursor(n.lineBlockAt(e.head).from)),t3=n=>Rr(n,e=>ee.cursor(n.lineBlockAt(e.head).to)),P0=({state:n,dispatch:e})=>(e(di(n,{anchor:0})),!0),T0=({state:n,dispatch:e})=>(e(di(n,{anchor:n.doc.length})),!0),I0=({state:n,dispatch:e})=>(e(di(n,{anchor:n.selection.main.anchor,head:0})),!0),O0=({state:n,dispatch:e})=>(e(di(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),n3=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),r3=({state:n,dispatch:e})=>{let t=Td(n).map(({from:i,to:r})=>ee.range(i,Math.min(r+1,n.doc.length)));return e(n.update({selection:ee.create(t),userEvent:"select"})),!0},i3=({state:n,dispatch:e})=>{let t=no(n.selection,i=>{let r=Tn(n),s=r.resolveStack(i.from,1);if(i.empty){let a=r.resolveStack(i.from,-1);a.node.from>=s.node.from&&a.node.to<=s.node.to&&(s=a)}for(let a=s;a;a=a.next){let{node:o}=a;if((o.from<i.from&&o.to>=i.to||o.to>i.to&&o.from<=i.from)&&a.next)return ee.range(o.to,o.from)}return i});return t.eq(n.selection)?!1:(e(di(n,t)),!0)},s3=({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=ee.create([t.main]):t.main.empty||(i=ee.create([ee.cursor(t.main.head)])),i?(e(di(n,i)),!0):!1};function Ol(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:i}=n,r=i.changeByRange(s=>{let{from:a,to:o}=s;if(a==o){let l=e(s);l<a?(t="delete.backward",l=Ec(n,l,!1)):l>a&&(t="delete.forward",l=Ec(n,l,!0)),a=Math.min(a,l),o=Math.max(o,l)}else a=Ec(n,a,!1),o=Ec(n,o,!0);return a==o?{range:s}:{changes:{from:a,to:o},range:ee.cursor(a,a<s.head?-1:1)}});return r.changes.empty?!1:(n.dispatch(i.update(r,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?we.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Ec(n,e,t){if(n instanceof we)for(let i of n.state.facet(we.atomicRanges).map(r=>r(n)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=t?s:r)});return e}const qS=(n,e,t)=>Ol(n,i=>{let r=i.from,{state:s}=n,a=s.doc.lineAt(r),o,l;if(t&&!e&&r>a.from&&r<a.from+200&&!/[^ \t]/.test(o=a.text.slice(0,r-a.from))){if(o[o.length-1]=="	")return r-1;let c=to(o,s.tabSize),u=c%Tu(s)||Tu(s);for(let d=0;d<u&&o[o.length-1-d]==" ";d++)r--;l=r}else l=En(a.text,r-a.from,e,e)+a.from,l==r&&a.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(l-a.from,r-a.from))&&(l=En(a.text,l-a.from,!1,!1)+a.from);return l}),Sm=n=>qS(n,!1,!0),US=n=>qS(n,!0,!1),HS=(n,e)=>Ol(n,t=>{let i=t.head,{state:r}=n,s=r.doc.lineAt(i),a=r.charCategorizer(i);for(let o=null;;){if(i==(e?s.to:s.from)){i==t.head&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let l=En(s.text,i-s.from,e)+s.from,c=s.text.slice(Math.min(i,l)-s.from,Math.max(i,l)-s.from),u=a(c);if(o!=null&&u!=o)break;(c!=" "||i!=t.head)&&(o=u),i=l}return i}),VS=n=>HS(n,!1),a3=n=>HS(n,!0),o3=n=>Ol(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),l3=n=>Ol(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),c3=n=>Ol(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),u3=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:dt.of(["",""])},range:ee.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},d3=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let r=i.from,s=n.doc.lineAt(r),a=r==s.from?r-1:En(s.text,r-s.from,!1)+s.from,o=r==s.to?r+1:En(s.text,r-s.from,!0)+s.from;return{changes:{from:a,to:o,insert:n.doc.slice(r,o).append(n.doc.slice(a,r))},range:ee.cursor(o)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Td(n){let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.from),s=n.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=n.doc.lineAt(i.to-1)),t>=r.number){let a=e[e.length-1];a.to=s.to,a.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});t=s.number+1}return e}function jS(n,e,t){if(n.readOnly)return!1;let i=[],r=[];for(let s of Td(n)){if(t?s.to==n.doc.length:s.from==0)continue;let a=n.doc.lineAt(t?s.to+1:s.from-1),o=a.length+1;if(t){i.push({from:s.to,to:a.to},{from:s.from,insert:a.text+n.lineBreak});for(let l of s.ranges)r.push(ee.range(Math.min(n.doc.length,l.anchor+o),Math.min(n.doc.length,l.head+o)))}else{i.push({from:a.from,to:s.from},{from:s.to,insert:n.lineBreak+a.text});for(let l of s.ranges)r.push(ee.range(l.anchor-o,l.head-o))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:ee.create(r,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const h3=({state:n,dispatch:e})=>jS(n,e,!1),f3=({state:n,dispatch:e})=>jS(n,e,!0);function WS(n,e,t){if(n.readOnly)return!1;let i=[];for(let r of Td(n))t?i.push({from:r.from,insert:n.doc.slice(r.from,r.to)+n.lineBreak}):i.push({from:r.to,insert:n.lineBreak+n.doc.slice(r.from,r.to)});return e(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const m3=({state:n,dispatch:e})=>WS(n,e,!1),p3=({state:n,dispatch:e})=>WS(n,e,!0),g3=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(Td(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=no(e.selection,r=>{let s;if(n.lineWrapping){let a=n.lineBlockAt(r.head),o=n.coordsAtPos(r.head,r.assoc||1);o&&(s=a.bottom+n.documentTop-o.bottom+n.defaultLineHeight/2)}return n.moveVertically(r,!0,s)}).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function v3(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=Tn(n).resolveInner(e),i=t.childBefore(e),r=t.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(tt.closedBy))&&s.indexOf(r.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(r.from).from&&!/\S/.test(n.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const N0=zS(!1),y3=zS(!0);function zS(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:a}=r,o=e.doc.lineAt(s),l=!n&&s==a&&v3(e,s);n&&(s=a=(a<=o.to?o:e.doc.lineAt(a)).to);let c=new Ad(e,{simulateBreak:s,simulateDoubleBreak:!!l}),u=Up(c,s);for(u==null&&(u=to(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));a<o.to&&/\s/.test(o.text[a-o.from]);)a++;l?{from:s,to:a}=l:s>o.from&&s<o.from+100&&!/\S/.test(o.text.slice(0,s))&&(s=o.from);let d=["",pl(e,u)];return l&&d.push(pl(e,c.lineIndent(o.from,-1))),{changes:{from:s,to:a,insert:dt.of(d)},range:ee.cursor(s+1+d[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function zp(n,e){let t=-1;return n.changeByRange(i=>{let r=[];for(let a=i.from;a<=i.to;){let o=n.doc.lineAt(a);o.number>t&&(i.empty||i.to>o.from)&&(e(o,r,i),t=o.number),a=o.to+1}let s=n.changes(r);return{changes:r,range:ee.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const b3=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new Ad(n,{overrideIndentation:s=>{let a=t[s];return a??-1}}),r=zp(n,(s,a,o)=>{let l=Up(i,s.from);if(l==null)return;/\S/.test(s.text)||(l=0);let c=/^\s*/.exec(s.text)[0],u=pl(n,l);(c!=u||o.from<s.from+c.length)&&(t[s.from]=l,a.push({from:s.from,to:s.from+c.length,insert:u}))});return r.changes.empty||e(n.update(r,{userEvent:"indent"})),!0},GS=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(zp(n,(t,i)=>{i.push({from:t.from,insert:n.facet(Rd)})}),{userEvent:"input.indent"})),!0),KS=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(zp(n,(t,i)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let s=to(r,n.tabSize),a=0,o=pl(n,Math.max(0,s-Tu(n)));for(;a<r.length&&a<o.length&&r.charCodeAt(a)==o.charCodeAt(a);)a++;i.push({from:t.from+a,to:t.from+r.length,insert:o.slice(a)})}),{userEvent:"delete.dedent"})),!0),E3=n=>(n.setTabFocusMode(),!0),w3=[{key:"Ctrl-b",run:_S,shift:IS,preventDefault:!0},{key:"Ctrl-f",run:xS,shift:OS},{key:"Ctrl-p",run:kS,shift:LS},{key:"Ctrl-n",run:DS,shift:BS},{key:"Ctrl-a",run:HH,shift:e3},{key:"Ctrl-e",run:VH,shift:t3},{key:"Ctrl-d",run:US},{key:"Ctrl-h",run:Sm},{key:"Ctrl-k",run:o3},{key:"Ctrl-Alt-h",run:VS},{key:"Ctrl-o",run:u3},{key:"Ctrl-t",run:d3},{key:"Ctrl-v",run:Cm}],C3=[{key:"ArrowLeft",run:_S,shift:IS,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:IH,shift:zH,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:qH,shift:JH,preventDefault:!0},{key:"ArrowRight",run:xS,shift:OS,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:OH,shift:GH,preventDefault:!0},{mac:"Cmd-ArrowRight",run:UH,shift:ZH,preventDefault:!0},{key:"ArrowUp",run:kS,shift:LS,preventDefault:!0},{mac:"Cmd-ArrowUp",run:P0,shift:I0},{mac:"Ctrl-ArrowUp",run:k0,shift:D0},{key:"ArrowDown",run:DS,shift:BS,preventDefault:!0},{mac:"Cmd-ArrowDown",run:T0,shift:O0},{mac:"Ctrl-ArrowDown",run:Cm,shift:M0},{key:"PageUp",run:k0,shift:D0},{key:"PageDown",run:Cm,shift:M0},{key:"Home",run:$H,shift:XH,preventDefault:!0},{key:"Mod-Home",run:P0,shift:I0},{key:"End",run:BH,shift:QH,preventDefault:!0},{key:"Mod-End",run:T0,shift:O0},{key:"Enter",run:N0,shift:N0},{key:"Mod-a",run:n3},{key:"Backspace",run:Sm,shift:Sm},{key:"Delete",run:US},{key:"Mod-Backspace",mac:"Alt-Backspace",run:VS},{key:"Mod-Delete",mac:"Alt-Delete",run:a3},{mac:"Mod-Backspace",run:l3},{mac:"Mod-Delete",run:c3}].concat(w3.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),S3=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:FH,shift:KH},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:LH,shift:YH},{key:"Alt-ArrowUp",run:h3},{key:"Shift-Alt-ArrowUp",run:m3},{key:"Alt-ArrowDown",run:f3},{key:"Shift-Alt-ArrowDown",run:p3},{key:"Escape",run:s3},{key:"Mod-Enter",run:y3},{key:"Alt-l",mac:"Ctrl-l",run:r3},{key:"Mod-i",run:i3,preventDefault:!0},{key:"Mod-[",run:KS},{key:"Mod-]",run:GS},{key:"Mod-Alt-\\",run:b3},{key:"Shift-Mod-k",run:g3},{key:"Shift-Mod-\\",run:WH},{key:"Mod-/",run:mH},{key:"Alt-A",run:gH},{key:"Ctrl-m",mac:"Shift-Alt-m",run:E3}].concat(C3),_3={key:"Tab",run:GS,shift:KS};function Rt(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var r=t[i];typeof r=="string"?n.setAttribute(i,r):r!=null&&(n[i]=r)}e++}for(;e<arguments.length;e++)YS(n,arguments[e]);return n}function YS(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)YS(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}const F0=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class Ka{constructor(e,t,i=0,r=e.length,s,a){this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?o=>s(F0(o)):F0,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Qn(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=wp(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=ei(e);let r=this.normalize(t);if(r.length)for(let s=0,a=i;;s++){let o=r.charCodeAt(s),l=this.match(o,a,this.bufferPos+this.bufferStart);if(s==r.length-1){if(l)return this.value=l,this;break}a==i&&s<t.length&&t.charCodeAt(s)==o&&a++}}}match(e,t,i){let r=null;for(let s=0;s<this.matches.length;s+=2){let a=this.matches[s],o=!1;this.query.charCodeAt(a)==e&&(a==this.query.length-1?r={from:this.matches[s+1],to:i}:(this.matches[s]++,o=!0)),o||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:t,to:i}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(Ka.prototype[Symbol.iterator]=function(){return this});const QS={from:-1,to:-1,match:/.*/.exec("")},Gp="gm"+(/x/.unicode==null?"":"u");class XS{constructor(e,t,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=QS,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new JS(e,t,i,r,s);this.re=new RegExp(t,Gp+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let a=e.lineAt(r);this.curLineStart=a.from,this.matchPos=Fu(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,r=i+t[0].length;if(this.matchPos=Fu(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Lh=new WeakMap;class ka{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let r=Lh.get(e);if(!r||r.from>=i||r.to<=t){let o=new ka(t,e.sliceString(t,i));return Lh.set(e,o),o}if(r.from==t&&r.to==i)return r;let{text:s,from:a}=r;return a>t&&(s=e.sliceString(t,a)+s,a=t),r.to<i&&(s+=e.sliceString(r.to,i)),Lh.set(e,new ka(a,s)),new ka(t,s.slice(t-a,i-a))}}class JS{constructor(e,t,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=QS,this.matchPos=Fu(e,r),this.re=new RegExp(t,Gp+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=ka.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,r=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this.matchPos=Fu(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=ka.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(XS.prototype[Symbol.iterator]=JS.prototype[Symbol.iterator]=function(){return this});function x3(n){try{return new RegExp(n,Gp),!0}catch{return!1}}function Fu(n,e){if(e>=n.length)return e;let t=n.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function _m(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=Rt("input",{class:"cm-textfield",name:"line",value:e}),i=Rt("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),n.dispatch({effects:Lu.of(!1)}),n.focus()):s.keyCode==13&&(s.preventDefault(),r())},onsubmit:s=>{s.preventDefault(),r()}},Rt("label",n.state.phrase("Go to line"),": ",t)," ",Rt("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function r(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!s)return;let{state:a}=n,o=a.doc.lineAt(a.selection.main.head),[,l,c,u,d]=s,h=u?+u.slice(1):0,f=c?+c:o.number;if(c&&d){let g=f/100;l&&(g=g*(l=="-"?-1:1)+o.number/a.doc.lines),f=Math.round(a.doc.lines*g)}else c&&l&&(f=f*(l=="-"?-1:1)+o.number);let m=a.doc.line(Math.max(1,Math.min(a.doc.lines,f))),p=ee.cursor(m.from+Math.max(0,Math.min(h,m.length)));n.dispatch({effects:[Lu.of(!1),we.scrollIntoView(p.from,{y:"center"})],selection:p}),n.focus()}return{dom:i}}const Lu=Ye.define(),L0=Sn.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(Lu)&&(n=t.value);return n},provide:n=>fl.from(n,e=>e?_m:null)}),R3=n=>{let e=hl(n,_m);if(!e){let t=[Lu.of(!0)];n.state.field(L0,!1)==null&&t.push(Ye.appendConfig.of([L0,A3])),n.dispatch({effects:t}),e=hl(n,_m)}return e&&e.dom.querySelector("input").select(),!0},A3=we.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),k3={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},ZS=Se.define({combine(n){return ui(n,k3,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function D3(n){let e=[O3,I3];return n&&e.push(ZS.of(n)),e}const M3=Oe.mark({class:"cm-selectionMatch"}),P3=Oe.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function B0(n,e,t,i){return(t==0||n(e.sliceDoc(t-1,t))!=Bt.Word)&&(i==e.doc.length||n(e.sliceDoc(i,i+1))!=Bt.Word)}function T3(n,e,t,i){return n(e.sliceDoc(t,t+1))==Bt.Word&&n(e.sliceDoc(i-1,i))==Bt.Word}const I3=Xt.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(ZS),{state:t}=n,i=t.selection;if(i.ranges.length>1)return Oe.none;let r=i.main,s,a=null;if(r.empty){if(!e.highlightWordAroundCursor)return Oe.none;let l=t.wordAt(r.head);if(!l)return Oe.none;a=t.charCategorizer(r.head),s=t.sliceDoc(l.from,l.to)}else{let l=r.to-r.from;if(l<e.minSelectionLength||l>200)return Oe.none;if(e.wholeWords){if(s=t.sliceDoc(r.from,r.to),a=t.charCategorizer(r.head),!(B0(a,t,r.from,r.to)&&T3(a,t,r.from,r.to)))return Oe.none}else if(s=t.sliceDoc(r.from,r.to),!s)return Oe.none}let o=[];for(let l of n.visibleRanges){let c=new Ka(t.doc,s,l.from,l.to);for(;!c.next().done;){let{from:u,to:d}=c.value;if((!a||B0(a,t,u,d))&&(r.empty&&u<=r.from&&d>=r.to?o.push(P3.range(u,d)):(u>=r.to||d<=r.from)&&o.push(M3.range(u,d)),o.length>e.maxMatches))return Oe.none}}return Oe.set(o)}},{decorations:n=>n.decorations}),O3=we.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),N3=({state:n,dispatch:e})=>{let{selection:t}=n,i=ee.create(t.ranges.map(r=>n.wordAt(r.head)||ee.cursor(r.head)),t.mainIndex);return i.eq(t)?!1:(e(n.update({selection:i})),!0)};function F3(n,e){let{main:t,ranges:i}=n.selection,r=n.wordAt(t.head),s=r&&r.from==t.from&&r.to==t.to;for(let a=!1,o=new Ka(n.doc,e,i[i.length-1].to);;)if(o.next(),o.done){if(a)return null;o=new Ka(n.doc,e,0,Math.max(0,i[i.length-1].from-1)),a=!0}else{if(a&&i.some(l=>l.from==o.value.from))continue;if(s){let l=n.wordAt(o.value.from);if(!l||l.from!=o.value.from||l.to!=o.value.to)continue}return o.value}}const L3=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(s=>s.from===s.to))return N3({state:n,dispatch:e});let i=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(s=>n.sliceDoc(s.from,s.to)!=i))return!1;let r=F3(n,i);return r?(e(n.update({selection:n.selection.addRange(ee.range(r.from,r.to),!1),effects:we.scrollIntoView(r.to)})),!0):!1},ro=Se.define({combine(n){return ui(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Y3(e),scrollToMatch:e=>we.scrollIntoView(e)})}});class e_{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||x3(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new U3(this):new $3(this)}getCursor(e,t=0,i){let r=e.doc?e:rt.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?ua(this,r,t,i):ca(this,r,t,i)}}class t_{constructor(e){this.spec=e}}function ca(n,e,t,i){return new Ka(e.doc,n.unquoted,t,i,n.caseSensitive?void 0:r=>r.toLowerCase(),n.wholeWord?B3(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function B3(n,e){return(t,i,r,s)=>((s>t||s+r.length<i)&&(s=Math.max(0,t-2),r=n.sliceString(s,Math.min(n.length,i+2))),(e(Bu(r,t-s))!=Bt.Word||e($u(r,t-s))!=Bt.Word)&&(e($u(r,i-s))!=Bt.Word||e(Bu(r,i-s))!=Bt.Word))}class $3 extends t_{constructor(e){super(e)}nextMatch(e,t,i){let r=ca(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let s=Math.min(e.doc.length,t+this.spec.unquoted.length);r=ca(this.spec,e,0,s).nextOverlapping()}return r.done||r.value.from==t&&r.value.to==i?null:r.value}prevMatchInRange(e,t,i){for(let r=i;;){let s=Math.max(t,r-1e4-this.spec.unquoted.length),a=ca(this.spec,e,s,r),o=null;for(;!a.nextOverlapping().done;)o=a.value;if(o)return o;if(s==t)return null;r-=1e4}}prevMatch(e,t,i){let r=this.prevMatchInRange(e,0,t);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=t||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=ca(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let s=ca(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function ua(n,e,t,i){return new XS(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?q3(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function Bu(n,e){return n.slice(En(n,e,!1),e)}function $u(n,e){return n.slice(e,En(n,e))}function q3(n){return(e,t,i)=>!i[0].length||(n(Bu(i.input,i.index))!=Bt.Word||n($u(i.input,i.index))!=Bt.Word)&&(n($u(i.input,i.index+i[0].length))!=Bt.Word||n(Bu(i.input,i.index+i[0].length))!=Bt.Word)}class U3 extends t_{nextMatch(e,t,i){let r=ua(this.spec,e,i,e.doc.length).next();return r.done&&(r=ua(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,i){for(let r=1;;r++){let s=Math.max(t,i-r*1e4),a=ua(this.spec,e,s,i),o=null;for(;!a.next().done;)o=a.value;if(o&&(s==t||o.from>s+10))return o;if(s==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let r=i.length;r>0;r--){let s=+i.slice(0,r);if(s>0&&s<e.match.length)return e.match[s]+i.slice(r)}return t})}matchAll(e,t){let i=ua(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let s=ua(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const gl=Ye.define(),Kp=Ye.define(),rs=Sn.define({create(n){return new Bh(xm(n).create(),null)},update(n,e){for(let t of e.effects)t.is(gl)?n=new Bh(t.value.create(),n.panel):t.is(Kp)&&(n=new Bh(n.query,t.value?Yp:null));return n},provide:n=>fl.from(n,e=>e.panel)});class Bh{constructor(e,t){this.query=e,this.panel=t}}const H3=Oe.mark({class:"cm-searchMatch"}),V3=Oe.mark({class:"cm-searchMatch cm-searchMatch-selected"}),j3=Xt.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(rs))}update(n){let e=n.state.field(rs);(e!=n.startState.field(rs)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return Oe.none;let{view:t}=this,i=new Ai;for(let r=0,s=t.visibleRanges,a=s.length;r<a;r++){let{from:o,to:l}=s[r];for(;r<a-1&&l>s[r+1].from-2*250;)l=s[++r].to;n.highlight(t.state,o,l,(c,u)=>{let d=t.state.selection.ranges.some(h=>h.from==c&&h.to==u);i.add(c,u,d?V3:H3)})}return i.finish()}},{decorations:n=>n.decorations});function Nl(n){return e=>{let t=e.state.field(rs,!1);return t&&t.query.spec.valid?n(e,t):i_(e)}}const qu=Nl((n,{query:e})=>{let{to:t}=n.state.selection.main,i=e.nextMatch(n.state,t,t);if(!i)return!1;let r=ee.single(i.from,i.to),s=n.state.facet(ro);return n.dispatch({selection:r,effects:[Qp(n,i),s.scrollToMatch(r.main,n)],userEvent:"select.search"}),r_(n),!0}),Uu=Nl((n,{query:e})=>{let{state:t}=n,{from:i}=t.selection.main,r=e.prevMatch(t,i,i);if(!r)return!1;let s=ee.single(r.from,r.to),a=n.state.facet(ro);return n.dispatch({selection:s,effects:[Qp(n,r),a.scrollToMatch(s.main,n)],userEvent:"select.search"}),r_(n),!0}),W3=Nl((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:ee.create(t.map(i=>ee.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),z3=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:r}=t.main,s=[],a=0;for(let o=new Ka(n.doc,n.sliceDoc(i,r));!o.next().done;){if(s.length>1e3)return!1;o.value.from==i&&(a=s.length),s.push(ee.range(o.value.from,o.value.to))}return e(n.update({selection:ee.create(s,a),userEvent:"select.search.matches"})),!0},$0=Nl((n,{query:e})=>{let{state:t}=n,{from:i,to:r}=t.selection.main;if(t.readOnly)return!1;let s=e.nextMatch(t,i,i);if(!s)return!1;let a=s,o=[],l,c,u=[];if(a.from==i&&a.to==r&&(c=t.toText(e.getReplacement(a)),o.push({from:a.from,to:a.to,insert:c}),a=e.nextMatch(t,a.from,a.to),u.push(we.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+"."))),a){let d=o.length==0||o[0].from>=s.to?0:s.to-s.from-c.length;l=ee.single(a.from-d,a.to-d),u.push(Qp(n,a)),u.push(t.facet(ro).scrollToMatch(l.main,n))}return n.dispatch({changes:o,selection:l,effects:u,userEvent:"input.replace"}),!0}),G3=Nl((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(r=>{let{from:s,to:a}=r;return{from:s,to:a,insert:e.getReplacement(r)}});if(!t.length)return!1;let i=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:we.announce.of(i),userEvent:"input.replace.all"}),!0});function Yp(n){return n.state.facet(ro).createPanel(n)}function xm(n,e){var t,i,r,s,a;let o=n.selection.main,l=o.empty||o.to>o.from+100?"":n.sliceDoc(o.from,o.to);if(e&&!l)return e;let c=n.facet(ro);return new e_({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:c.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:c.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(a=e==null?void 0:e.wholeWord)!==null&&a!==void 0?a:c.wholeWord})}function n_(n){let e=hl(n,Yp);return e&&e.dom.querySelector("[main-field]")}function r_(n){let e=n_(n);e&&e==n.root.activeElement&&e.select()}const i_=n=>{let e=n.state.field(rs,!1);if(e&&e.panel){let t=n_(n);if(t&&t!=n.root.activeElement){let i=xm(n.state,e.query.spec);i.valid&&n.dispatch({effects:gl.of(i)}),t.focus(),t.select()}}else n.dispatch({effects:[Kp.of(!0),e?gl.of(xm(n.state,e.query.spec)):Ye.appendConfig.of(X3)]});return!0},s_=n=>{let e=n.state.field(rs,!1);if(!e||!e.panel)return!1;let t=hl(n,Yp);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:Kp.of(!1)}),!0},K3=[{key:"Mod-f",run:i_,scope:"editor search-panel"},{key:"F3",run:qu,shift:Uu,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:qu,shift:Uu,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:s_,scope:"editor search-panel"},{key:"Mod-Shift-l",run:z3},{key:"Mod-Alt-g",run:R3},{key:"Mod-d",run:L3,preventDefault:!0}];class Y3{constructor(e){this.view=e;let t=this.query=e.state.field(rs).query.spec;this.commit=this.commit.bind(this),this.searchField=Rt("input",{value:t.search,placeholder:rr(e,"Find"),"aria-label":rr(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Rt("input",{value:t.replace,placeholder:rr(e,"Replace"),"aria-label":rr(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Rt("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=Rt("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=Rt("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(r,s,a){return Rt("button",{class:"cm-button",name:r,onclick:s,type:"button"},a)}this.dom=Rt("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>qu(e),[rr(e,"next")]),i("prev",()=>Uu(e),[rr(e,"previous")]),i("select",()=>W3(e),[rr(e,"all")]),Rt("label",null,[this.caseField,rr(e,"match case")]),Rt("label",null,[this.reField,rr(e,"regexp")]),Rt("label",null,[this.wordField,rr(e,"by word")]),...e.state.readOnly?[]:[Rt("br"),this.replaceField,i("replace",()=>$0(e),[rr(e,"replace")]),i("replaceAll",()=>G3(e),[rr(e,"replace all")])],Rt("button",{name:"close",onclick:()=>s_(e),"aria-label":rr(e,"close"),type:"button"},["×"])])}commit(){let e=new e_({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:gl.of(e)}))}keydown(e){iq(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Uu:qu)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),$0(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(gl)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(ro).top}}function rr(n,e){return n.state.phrase(e)}const wc=30,Cc=/[\s\.,:;?!]/;function Qp(n,{from:e,to:t}){let i=n.state.doc.lineAt(e),r=n.state.doc.lineAt(t).to,s=Math.max(i.from,e-wc),a=Math.min(r,t+wc),o=n.state.sliceDoc(s,a);if(s!=i.from){for(let l=0;l<wc;l++)if(!Cc.test(o[l+1])&&Cc.test(o[l])){o=o.slice(l);break}}if(a!=r){for(let l=o.length-1;l>o.length-wc;l--)if(!Cc.test(o[l-1])&&Cc.test(o[l])){o=o.slice(0,l);break}}return we.announce.of(`${n.state.phrase("current match")}. ${o} ${n.state.phrase("on line")} ${i.number}.`)}const Q3=we.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),X3=[rs,Zs.low(j3),Q3];class a_{constructor(e,t,i,r){this.state=e,this.pos=t,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=Tn(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),r=t.text.slice(i-t.from,this.pos-t.from),s=r.search(o_(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function q0(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function J3(n){let e=Object.create(null),t=Object.create(null);for(let{label:r}of n){e[r[0]]=!0;for(let s=1;s<r.length;s++)t[r[s]]=!0}let i=q0(e)+q0(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function Z3(n){let e=n.map(r=>typeof r=="string"?{label:r}:r),[t,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:J3(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:t}:null}}class U0{constructor(e,t,i,r){this.completion=e,this.source=t,this.match=i,this.score=r}}function Hs(n){return n.selection.main.from}function o_(n,e){var t;let{source:i}=n,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?n:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const l_=Ti.define();function e4(n,e,t,i){let{main:r}=n.selection,s=t-r.from,a=i-r.from;return Object.assign(Object.assign({},n.changeByRange(o=>{if(o!=r&&t!=i&&n.sliceDoc(o.from+s,o.from+a)!=n.sliceDoc(t,i))return{range:o};let l=n.toText(e);return{changes:{from:o.from+s,to:i==r.from?o.to:o.from+a,insert:l},range:ee.cursor(o.from+s+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const H0=new WeakMap;function t4(n){if(!Array.isArray(n))return n;let e=H0.get(n);return e||H0.set(n,e=Z3(n)),e}const Hu=Ye.define(),vl=Ye.define();class n4{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=Qn(e,t),r=ei(i);this.chars.push(i);let s=e.slice(t,t+r),a=s.toUpperCase();this.folded.push(Qn(a==s?s.toLowerCase():a,0)),t+=r}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:r,precise:s,byWord:a}=this;if(t.length==1){let C=Qn(e,0),y=ei(C),E=y==e.length?0:-100;if(C!=t[0])if(C==i[0])E+=-200;else return null;return this.ret(E,[0,y])}let o=e.indexOf(this.pattern);if(o==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=t.length,c=0;if(o<0){for(let C=0,y=Math.min(e.length,200);C<y&&c<l;){let E=Qn(e,C);(E==t[c]||E==i[c])&&(r[c++]=C),C+=ei(E)}if(c<l)return null}let u=0,d=0,h=!1,f=0,m=-1,p=-1,g=/[a-z]/.test(e),v=!0;for(let C=0,y=Math.min(e.length,200),E=0;C<y&&d<l;){let _=Qn(e,C);o<0&&(u<l&&_==t[u]&&(s[u++]=C),f<l&&(_==t[f]||_==i[f]?(f==0&&(m=C),p=C+1,f++):f=0));let w,k=_<255?_>=48&&_<=57||_>=97&&_<=122?2:_>=65&&_<=90?1:0:(w=wp(_))!=w.toLowerCase()?1:w!=w.toUpperCase()?2:0;(!C||k==1&&g||E==0&&k!=0)&&(t[d]==_||i[d]==_&&(h=!0)?a[d++]=C:a.length&&(v=!1)),E=k,C+=ei(_)}return d==l&&a[0]==0&&v?this.result(-100+(h?-200:0),a,e):f==l&&m==0?this.ret(-200-e.length+(p==e.length?0:-100),[0,p]):o>-1?this.ret(-700-e.length,[o,o+this.pattern.length]):f==l?this.ret(-200+-700-e.length,[m,p]):d==l?this.result(-100+(h?-200:0)+-700+(v?0:-1100),a,e):t.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,t,i){let r=[],s=0;for(let a of t){let o=a+(this.astral?ei(Qn(i,a)):1);s&&r[s-1]==a?r[s-1]=o:(r[s++]=a,r[s++]=o)}return this.ret(e-i.length,r)}}class r4{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const hn=Se.define({combine(n){return ui(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:i4,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>V0(e(i),t(i)),optionClass:(e,t)=>i=>V0(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function V0(n,e){return n?e?n+" "+e:n:e}function i4(n,e,t,i,r,s){let a=n.textDirection==It.RTL,o=a,l=!1,c="top",u,d,h=e.left-r.left,f=r.right-e.right,m=i.right-i.left,p=i.bottom-i.top;if(o&&h<Math.min(m,f)?o=!1:!o&&f<Math.min(m,h)&&(o=!0),m<=(o?h:f))u=Math.max(r.top,Math.min(t.top,r.bottom-p))-e.top,d=Math.min(400,o?h:f);else{l=!0,d=Math.min(400,(a?e.right:r.right-e.left)-30);let C=r.bottom-e.bottom;C>=p||C>e.top?u=t.bottom-e.top:(c="bottom",u=e.bottom-t.top)}let g=(e.bottom-e.top)/s.offsetHeight,v=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${u/g}px; max-width: ${d/v}px`,class:"cm-completionInfo-"+(l?a?"left-narrow":"right-narrow":o?"left":"right")}}function s4(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,r,s){let a=document.createElement("span");a.className="cm-completionLabel";let o=t.displayLabel||t.label,l=0;for(let c=0;c<s.length;){let u=s[c++],d=s[c++];u>l&&a.appendChild(document.createTextNode(o.slice(l,u)));let h=a.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(o.slice(u,d))),h.className="cm-completionMatchedText",l=d}return l<o.length&&a.appendChild(document.createTextNode(o.slice(l))),a},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function $h(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let r=Math.floor(e/t);return{from:r*t,to:(r+1)*t}}let i=Math.floor((n-e)/t);return{from:n-(i+1)*t,to:n-i*t}}class a4{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:s,selected:a}=r.open,o=e.state.facet(hn);this.optionContent=s4(o),this.optionClass=o.optionClass,this.tooltipClass=o.tooltipClass,this.range=$h(s.length,a,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(t).open;for(let u=l.target,d;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(d=/-(\d+)$/.exec(u.id))&&+d[1]<c.length){this.applyCompletion(e,c[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(hn).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:vl.of(null)})}),this.showOptions(s,r.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:s,selected:a,disabled:o}=i.open;(!r.open||r.open.options!=s)&&(this.range=$h(s.length,a,e.state.facet(hn).maxRenderedOptions),this.showOptions(s,i.id)),this.updateSel(),o!=((t=r.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!o)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=$h(t.options.length,t.selected,this.view.state.facet(hn).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:i}=t.options[t.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a,i)}).catch(a=>Zn(this.view.state,a,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&l4(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let a=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:a.clientWidth,bottom:a.clientHeight}}return r.top>Math.min(s.bottom,t.bottom)-10||r.bottom<Math.max(s.top,t.top)+10?null:this.view.state.facet(hn).positionInfo(this.view,t,r,i,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",a=>{a.target==r&&a.preventDefault()});let s=null;for(let a=i.from;a<i.to;a++){let{completion:o,match:l}=e[a],{section:c}=o;if(c){let h=typeof c=="string"?c:c.name;if(h!=s&&(a>i.from||i.from==0))if(s=h,typeof c!="string"&&c.header)r.appendChild(c.header(c));else{let f=r.appendChild(document.createElement("completion-section"));f.textContent=h}}const u=r.appendChild(document.createElement("li"));u.id=t+"-"+a,u.setAttribute("role","option");let d=this.optionClass(o);d&&(u.className=d);for(let h of this.optionContent){let f=h(o,this.view.state,this.view,l);f&&u.appendChild(f)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function o4(n,e){return t=>new a4(t,n,e)}function l4(n,e){let t=n.getBoundingClientRect(),i=e.getBoundingClientRect(),r=t.height/n.offsetHeight;i.top<t.top?n.scrollTop-=(t.top-i.top)/r:i.bottom>t.bottom&&(n.scrollTop+=(i.bottom-t.bottom)/r)}function j0(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function c4(n,e){let t=[],i=null,r=c=>{t.push(c);let{section:u}=c.completion;if(u){i||(i=[]);let d=typeof u=="string"?u:u.name;i.some(h=>h.name==d)||i.push(typeof u=="string"?{name:d}:u)}},s=e.facet(hn);for(let c of n)if(c.hasResult()){let u=c.result.getMatch;if(c.result.filter===!1)for(let d of c.result.options)r(new U0(d,c.source,u?u(d):[],1e9-t.length));else{let d=e.sliceDoc(c.from,c.to),h,f=s.filterStrict?new r4(d):new n4(d);for(let m of c.result.options)if(h=f.match(m.label)){let p=m.displayLabel?u?u(m,h.matched):[]:h.matched;r(new U0(m,c.source,p,h.score+(m.boost||0)))}}}if(i){let c=Object.create(null),u=0,d=(h,f)=>{var m,p;return((m=h.rank)!==null&&m!==void 0?m:1e9)-((p=f.rank)!==null&&p!==void 0?p:1e9)||(h.name<f.name?-1:1)};for(let h of i.sort(d))u-=1e5,c[h.name]=u;for(let h of t){let{section:f}=h.completion;f&&(h.score+=c[typeof f=="string"?f:f.name])}}let a=[],o=null,l=s.compareCompletions;for(let c of t.sort((u,d)=>d.score-u.score||l(u.completion,d.completion))){let u=c.completion;!o||o.label!=u.label||o.detail!=u.detail||o.type!=null&&u.type!=null&&o.type!=u.type||o.apply!=u.apply||o.boost!=u.boost?a.push(c):j0(c.completion)>j0(o)&&(a[a.length-1]=c),o=c.completion}return a}class va{constructor(e,t,i,r,s,a){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=a}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new va(this.options,W0(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,r,s,a){if(r&&!a&&e.some(c=>c.isPending))return r.setDisabled();let o=c4(e,t);if(!o.length)return r&&e.some(c=>c.isPending)?r.setDisabled():null;let l=t.facet(hn).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let c=r.options[r.selected].completion;for(let u=0;u<o.length;u++)if(o[u].completion==c){l=u;break}}return new va(o,W0(i,l),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:p4,above:s.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new va(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new va(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Vu{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new Vu(f4,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(hn),s=(i.override||t.languageDataAt("autocomplete",Hs(t)).map(t4)).map(l=>(this.active.find(u=>u.source==l)||new wr(l,this.active.some(u=>u.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((l,c)=>l==this.active[c])&&(s=this.active);let a=this.open,o=e.effects.some(l=>l.is(Xp));a&&e.docChanged&&(a=a.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!u4(s,this.active)||o?a=va.build(s,t,this.id,a,i,o):a&&a.disabled&&!s.some(l=>l.isPending)&&(a=null),!a&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new wr(l.source,0):l));for(let l of e.effects)l.is(u_)&&(a=a&&a.setSelected(l.value,this.id));return s==this.active&&a==this.open?this:new Vu(s,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?d4:h4}}function u4(n,e){if(n==e)return!0;for(let t=0,i=0;;){for(;t<n.length&&!n[t].hasResult();)t++;for(;i<e.length&&!e[i].hasResult();)i++;let r=t==n.length,s=i==e.length;if(r||s)return r==s;if(n[t++].result!=e[i++].result)return!1}}const d4={"aria-autocomplete":"list"},h4={};function W0(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const f4=[];function c_(n,e){if(n.isUserEvent("input.complete")){let i=n.annotation(l_);if(i&&e.activateOnCompletion(i))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class wr{constructor(e,t,i=!1){this.source=e,this.state=t,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let i=c_(e,t),r=this;(i&8||i&16&&this.touches(e))&&(r=new wr(r.source,0)),i&4&&r.state==0&&(r=new wr(this.source,1)),r=r.updateFor(e,i);for(let s of e.effects)if(s.is(Hu))r=new wr(r.source,1,s.value);else if(s.is(vl))r=new wr(r.source,0);else if(s.is(Xp))for(let a of s.value)a.source==r.source&&(r=a);return r}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Hs(e.state))}}class Da extends wr{constructor(e,t,i,r,s,a){super(e,3,t),this.limit=i,this.result=r,this.from=s,this.to=a}hasResult(){return!0}updateFor(e,t){var i;if(!(t&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let s=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),o=Hs(e.state);if(o>a||!r||t&2&&(Hs(e.startState)==this.from||o<this.limit))return new wr(this.source,t&4?1:0);let l=e.changes.mapPos(this.limit);return m4(r.validFor,e.state,s,a)?new Da(this.source,this.explicit,l,r,s,a):r.update&&(r=r.update(r,s,a,new a_(e.state,o,!1)))?new Da(this.source,this.explicit,l,r,r.from,(i=r.to)!==null&&i!==void 0?i:Hs(e.state)):new wr(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Da(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new wr(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function m4(n,e,t,i){if(!n)return!1;let r=e.sliceDoc(t,i);return typeof n=="function"?n(r,t,i,e):o_(n,!0).test(r)}const Xp=Ye.define({map(n,e){return n.map(t=>t.map(e))}}),u_=Ye.define(),Jn=Sn.define({create(){return Vu.start()},update(n,e){return n.update(e)},provide:n=>[Fp.from(n,e=>e.tooltip),we.contentAttributes.from(n,e=>e.attrs)]});function Jp(n,e){const t=e.completion.apply||e.completion.label;let i=n.state.field(Jn).active.find(r=>r.source==e.source);return i instanceof Da?(typeof t=="string"?n.dispatch(Object.assign(Object.assign({},e4(n.state,t,i.from,i.to)),{annotations:l_.of(e.completion)})):t(n,e.completion,i.from,i.to),!0):!1}const p4=o4(Jn,Jp);function Sc(n,e="option"){return t=>{let i=t.state.field(Jn,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(hn).interactionDelay)return!1;let r=1,s;e=="page"&&(s=jC(t,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:a}=i.open.options,o=i.open.selected>-1?i.open.selected+r*(n?1:-1):n?0:a-1;return o<0?o=e=="page"?0:a-1:o>=a&&(o=e=="page"?a-1:0),t.dispatch({effects:u_.of(o)}),!0}}const g4=n=>{let e=n.state.field(Jn,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(hn).interactionDelay?!1:Jp(n,e.open.options[e.open.selected])},z0=n=>n.state.field(Jn,!1)?(n.dispatch({effects:Hu.of(!0)}),!0):!1,v4=n=>{let e=n.state.field(Jn,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:vl.of(null)}),!0)};class y4{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const b4=50,E4=1e3,w4=Xt.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(Jn).active)e.isPending&&this.startQuery(e)}update(n){let e=n.state.field(Jn),t=n.state.facet(hn);if(!n.selectionSet&&!n.docChanged&&n.startState.field(Jn)==e)return;let i=n.transactions.some(s=>{let a=c_(s,t);return a&8||(s.selection||s.docChanged)&&!(a&3)});for(let s=0;s<this.running.length;s++){let a=this.running[s];if(i||a.context.abortOnDocChange&&n.docChanged||a.updates.length+n.transactions.length>b4&&Date.now()-a.time>E4){for(let o of a.context.abortListeners)try{o()}catch(l){Zn(this.view.state,l)}a.context.abortListeners=null,this.running.splice(s--,1)}else a.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(s=>s.effects.some(a=>a.is(Hu)))&&(this.pendingStart=!0);let r=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.isPending&&!this.running.some(a=>a.active.source==s.source))?setTimeout(()=>this.startUpdate(),r):-1,this.composing!=0)for(let s of n.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(Jn);for(let t of e.active)t.isPending&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(hn).updateSyncTime))}startQuery(n){let{state:e}=this.view,t=Hs(e),i=new a_(e,t,n.explicit,this.view),r=new y4(n,i);this.running.push(r),Promise.resolve(n.source(i)).then(s=>{r.context.aborted||(r.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:vl.of(null)}),Zn(this.view.state,s)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(hn).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(hn),i=this.view.state.field(Jn);for(let r=0;r<this.running.length;r++){let s=this.running[r];if(s.done===void 0)continue;if(this.running.splice(r--,1),s.done){let o=Hs(s.updates.length?s.updates[0].startState:this.view.state),l=Math.min(o,s.done.from+(s.active.explicit?0:1)),c=new Da(s.active.source,s.active.explicit,l,s.done,s.done.from,(n=s.done.to)!==null&&n!==void 0?n:o);for(let u of s.updates)c=c.update(u,t);if(c.hasResult()){e.push(c);continue}}let a=i.active.find(o=>o.source==s.active.source);if(a&&a.isPending)if(s.done==null){let o=new wr(s.active.source,0);for(let l of s.updates)o=o.update(l,t);o.isPending||e.push(o)}else this.startQuery(a)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:Xp.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(Jn,!1);if(e&&e.tooltip&&this.view.state.facet(hn).closeOnBlur){let t=e.open&&jC(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:vl.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Hu.of(!1)}),20),this.composing=0}}}),C4=typeof navigator=="object"&&/Win/.test(navigator.platform),S4=Zs.highest(we.domEventHandlers({keydown(n,e){let t=e.state.field(Jn,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(C4&&n.altKey)||n.metaKey)return!1;let i=t.open.options[t.open.selected],r=t.active.find(a=>a.source==i.source),s=i.completion.commitCharacters||r.result.commitCharacters;return s&&s.indexOf(n.key)>-1&&Jp(e,i),!1}})),_4=we.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),yl={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Fs=Ye.define({map(n,e){let t=e.mapPos(n,-1,$n.TrackAfter);return t??void 0}}),Zp=new class extends zs{};Zp.startSide=1;Zp.endSide=-1;const d_=Sn.define({create(){return ct.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:i=>i>=t.from&&i<=t.to})}for(let t of e.effects)t.is(Fs)&&(n=n.update({add:[Zp.range(t.value,t.value+1)]}));return n}});function x4(){return[A4,d_]}const qh="()[]{}<>«»»«［］｛｝";function h_(n){for(let e=0;e<qh.length;e+=2)if(qh.charCodeAt(e)==n)return qh.charAt(e+1);return wp(n<128?n:n+1)}function f_(n,e){return n.languageDataAt("closeBrackets",e)[0]||yl}const R4=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),A4=we.inputHandler.of((n,e,t,i)=>{if((R4?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let r=n.state.selection.main;if(i.length>2||i.length==2&&ei(Qn(i,0))==1||e!=r.from||t!=r.to)return!1;let s=M4(n.state,i);return s?(n.dispatch(s),!0):!1}),k4=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=f_(n,n.selection.main.head).brackets||yl.brackets,r=null,s=n.changeByRange(a=>{if(a.empty){let o=P4(n.doc,a.head);for(let l of i)if(l==o&&Id(n.doc,a.head)==h_(Qn(l,0)))return{changes:{from:a.head-l.length,to:a.head+l.length},range:ee.cursor(a.head-l.length)}}return{range:r=a}});return r||e(n.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},D4=[{key:"Backspace",run:k4}];function M4(n,e){let t=f_(n,n.selection.main.head),i=t.brackets||yl.brackets;for(let r of i){let s=h_(Qn(r,0));if(e==r)return s==r?O4(n,r,i.indexOf(r+r+r)>-1,t):T4(n,r,s,t.before||yl.before);if(e==s&&m_(n,n.selection.main.from))return I4(n,r,s)}return null}function m_(n,e){let t=!1;return n.field(d_).between(0,n.doc.length,i=>{i==e&&(t=!0)}),t}function Id(n,e){let t=n.sliceString(e,e+2);return t.slice(0,ei(Qn(t,0)))}function P4(n,e){let t=n.sliceString(e-2,e);return ei(Qn(t,0))==t.length?t:t.slice(1)}function T4(n,e,t,i){let r=null,s=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:t,from:a.to}],effects:Fs.of(a.to+e.length),range:ee.range(a.anchor+e.length,a.head+e.length)};let o=Id(n.doc,a.head);return!o||/\s/.test(o)||i.indexOf(o)>-1?{changes:{insert:e+t,from:a.head},effects:Fs.of(a.head+e.length),range:ee.cursor(a.head+e.length)}:{range:r=a}});return r?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function I4(n,e,t){let i=null,r=n.changeByRange(s=>s.empty&&Id(n.doc,s.head)==t?{changes:{from:s.head,to:s.head+t.length,insert:t},range:ee.cursor(s.head+t.length)}:i={range:s});return i?null:n.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function O4(n,e,t,i){let r=i.stringPrefixes||yl.stringPrefixes,s=null,a=n.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:e,from:o.to}],effects:Fs.of(o.to+e.length),range:ee.range(o.anchor+e.length,o.head+e.length)};let l=o.head,c=Id(n.doc,l),u;if(c==e){if(G0(n,l))return{changes:{insert:e+e,from:l},effects:Fs.of(l+e.length),range:ee.cursor(l+e.length)};if(m_(n,l)){let h=t&&n.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+h.length,insert:h},range:ee.cursor(l+h.length)}}}else{if(t&&n.sliceDoc(l-2*e.length,l)==e+e&&(u=K0(n,l-2*e.length,r))>-1&&G0(n,u))return{changes:{insert:e+e+e+e,from:l},effects:Fs.of(l+e.length),range:ee.cursor(l+e.length)};if(n.charCategorizer(l)(c)!=Bt.Word&&K0(n,l,r)>-1&&!N4(n,l,e,r))return{changes:{insert:e+e,from:l},effects:Fs.of(l+e.length),range:ee.cursor(l+e.length)}}return{range:s=o}});return s?null:n.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function G0(n,e){let t=Tn(n).resolveInner(e+1);return t.parent&&t.from==e}function N4(n,e,t,i){let r=Tn(n).resolveInner(e,-1),s=i.reduce((a,o)=>Math.max(a,o.length),0);for(let a=0;a<5;a++){let o=n.sliceDoc(r.from,Math.min(r.to,r.from+t.length+s)),l=o.indexOf(t);if(!l||l>-1&&i.indexOf(o.slice(0,l))>-1){let u=r.firstChild;for(;u&&u.from==r.from&&u.to-u.from>t.length+l;){if(n.sliceDoc(u.to-t.length,u.to)==t)return!1;u=u.firstChild}return!0}let c=r.to==e&&r.parent;if(!c)break;r=c}return!1}function K0(n,e,t){let i=n.charCategorizer(e);if(i(n.sliceDoc(e-1,e))!=Bt.Word)return e;for(let r of t){let s=e-r.length;if(n.sliceDoc(s,e)==r&&i(n.sliceDoc(s-1,s))!=Bt.Word)return s}return-1}function F4(n={}){return[S4,Jn,hn.of(n),w4,L4,_4]}const p_=[{key:"Ctrl-Space",run:z0},{mac:"Alt-`",run:z0},{key:"Escape",run:v4},{key:"ArrowDown",run:Sc(!0)},{key:"ArrowUp",run:Sc(!1)},{key:"PageDown",run:Sc(!0,"page")},{key:"PageUp",run:Sc(!1,"page")},{key:"Enter",run:g4}],L4=Zs.highest(_d.computeN([hn],n=>n.facet(hn).defaultKeymap?[p_]:[]));class Y0{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class Is{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let r=e,s=i.facet(bl).markerFilter;s&&(r=s(r,i));let a=e.slice().sort((d,h)=>d.from-h.from||d.to-h.to),o=new Ai,l=[],c=0;for(let d=0;;){let h=d==a.length?null:a[d];if(!h&&!l.length)break;let f,m;for(l.length?(f=c,m=l.reduce((g,v)=>Math.min(g,v.to),h&&h.from>f?h.from:1e8)):(f=h.from,m=h.to,l.push(h),d++);d<a.length;){let g=a[d];if(g.from==f&&(g.to>g.from||g.to==f))l.push(g),d++,m=Math.min(g.to,m);else{m=Math.min(g.from,m);break}}let p=Q4(l);if(l.some(g=>g.from==g.to||g.from==g.to-1&&i.doc.lineAt(g.from).to==g.from))o.add(f,f,Oe.widget({widget:new z4(p),diagnostics:l.slice()}));else{let g=l.reduce((v,C)=>C.markClass?v+" "+C.markClass:v,"");o.add(f,m,Oe.mark({class:"cm-lintRange cm-lintRange-"+p+g,diagnostics:l.slice(),inclusiveEnd:l.some(v=>v.to>m)}))}c=m;for(let g=0;g<l.length;g++)l[g].to<=c&&l.splice(g--,1)}let u=o.finish();return new Is(u,t,Ya(u))}}function Ya(n,e=null,t=0){let i=null;return n.between(t,1e9,(r,s,{spec:a})=>{if(!(e&&a.diagnostics.indexOf(e)<0))if(!i)i=new Y0(r,s,e||a.diagnostics[0]);else{if(a.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new Y0(i.from,s,i.diagnostic)}}),i}function B4(n,e){let t=e.pos,i=e.end||t,r=n.state.facet(bl).hideOn(n,t,i);if(r!=null)return r;let s=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(a=>a.is(g_))||n.changes.touchesRange(s.from,Math.max(s.to,i)))}function $4(n,e){return n.field(hr,!1)?e:e.concat(Ye.appendConfig.of(X4))}const g_=Ye.define(),eg=Ye.define(),v_=Ye.define(),hr=Sn.define({create(){return new Is(Oe.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),i=null,r=n.panel;if(n.selected){let s=e.changes.mapPos(n.selected.from,1);i=Ya(t,n.selected.diagnostic,s)||Ya(t,null,s)}!t.size&&r&&e.state.facet(bl).autoPanel&&(r=null),n=new Is(t,r,i)}for(let t of e.effects)if(t.is(g_)){let i=e.state.facet(bl).autoPanel?t.value.length?El.open:null:n.panel;n=Is.init(t.value,i,e.state)}else t.is(eg)?n=new Is(n.diagnostics,t.value?El.open:null,n.selected):t.is(v_)&&(n=new Is(n.diagnostics,n.panel,t.value));return n},provide:n=>[fl.from(n,e=>e.panel),we.decorations.from(n,e=>e.diagnostics)]}),q4=Oe.mark({class:"cm-lintRange cm-lintRange-active"});function U4(n,e,t){let{diagnostics:i}=n.state.field(hr),r,s=-1,a=-1;i.between(e-(t<0?1:0),e+(t>0?1:0),(l,c,{spec:u})=>{if(e>=l&&e<=c&&(l==c||(e>l||t>0)&&(e<c||t<0)))return r=u.diagnostics,s=l,a=c,!1});let o=n.state.facet(bl).tooltipFilter;return r&&o&&(r=o(r,n.state)),r?{pos:s,end:a,above:n.state.doc.lineAt(s).to<a,create(){return{dom:H4(n,r)}}}:null}function H4(n,e){return Rt("ul",{class:"cm-tooltip-lint"},e.map(t=>b_(n,t,!1)))}const V4=n=>{let e=n.state.field(hr,!1);(!e||!e.panel)&&n.dispatch({effects:$4(n.state,[eg.of(!0)])});let t=hl(n,El.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},Q0=n=>{let e=n.state.field(hr,!1);return!e||!e.panel?!1:(n.dispatch({effects:eg.of(!1)}),!0)},j4=n=>{let e=n.state.field(hr,!1);if(!e)return!1;let t=n.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},W4=[{key:"Mod-Shift-m",run:V4,preventDefault:!0},{key:"F8",run:j4}],bl=Se.define({combine(n){return Object.assign({sources:n.map(e=>e.source).filter(e=>e!=null)},ui(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t}))}});function y_(n){let e=[];if(n)e:for(let{name:t}of n){for(let i=0;i<t.length;i++){let r=t[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function b_(n,e,t){var i;let r=t?y_(e.actions):[];return Rt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Rt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,a)=>{let o=!1,l=h=>{if(h.preventDefault(),o)return;o=!0;let f=Ya(n.state.field(hr).diagnostics,e);f&&s.apply(n,f.from,f.to)},{name:c}=s,u=r[a]?c.indexOf(r[a]):-1,d=u<0?c:[c.slice(0,u),Rt("u",c.slice(u,u+1)),c.slice(u+1)];return Rt("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${c}${u<0?"":` (access key "${r[a]})"`}.`},d)}),e.source&&Rt("div",{class:"cm-diagnosticSource"},e.source))}class z4 extends Ii{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return Rt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class X0{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=b_(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class El{constructor(e){this.view=e,this.items=[];let t=r=>{if(r.keyCode==27)Q0(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],a=y_(s.actions);for(let o=0;o<a.length;o++)if(a[o].toUpperCase().charCodeAt(0)==r.keyCode){let l=Ya(this.view.state.field(hr).diagnostics,s);l&&s.actions[o].apply(e,l.from,l.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=Rt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=Rt("div",{class:"cm-panel-lint"},this.list,Rt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Q0(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(hr).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(hr),i=0,r=!1,s=null,a=new Set;for(e.between(0,this.view.state.doc.length,(o,l,{spec:c})=>{for(let u of c.diagnostics){if(a.has(u))continue;a.add(u);let d=-1,h;for(let f=i;f<this.items.length;f++)if(this.items[f].diagnostic==u){d=f;break}d<0?(h=new X0(this.view,u),this.items.splice(i,0,h),r=!0):(h=this.items[d],d>i&&(this.items.splice(i,d-i),r=!0)),t&&h.diagnostic==t.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),s=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new X0(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:l})=>{let c=l.height/this.list.offsetHeight;o.top<l.top?this.list.scrollTop-=(l.top-o.top)/c:o.bottom>l.bottom&&(this.list.scrollTop+=(o.bottom-l.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(hr),i=Ya(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:v_.of(i)})}static open(e){return new El(e)}}function G4(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function _c(n){return G4(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const K4=we.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:_c("#d11")},".cm-lintRange-warning":{backgroundImage:_c("orange")},".cm-lintRange-info":{backgroundImage:_c("#999")},".cm-lintRange-hint":{backgroundImage:_c("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function Y4(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}function Q4(n){let e="hint",t=1;for(let i of n){let r=Y4(i.severity);r>t&&(t=r,e=i.severity)}return e}const X4=[hr,we.decorations.compute([hr],n=>{let{selected:e,panel:t}=n.field(hr);return!e||!t||e.from==e.to?Oe.none:Oe.set([q4.range(e.from,e.to)])}),zq(U4,{hideOn:B4}),K4],J4=(()=>[rU(),aU(),wq(),SH(),QU(),uq(),pq(),rt.allowMultipleSelections.of(!0),FU(),fS(eH,{fallback:!0}),oH(),x4(),F4(),Nq(),Bq(),Aq(),D3(),_d.of([...D4,...S3,...K3,...TH,...zU,...p_,...W4])])();/*!
* VueCodemirror v6.1.1
* Copyright (c) Surmon. All rights reserved.
* Released under the MIT License.
* Surmon
*/var Z4=Object.freeze({autofocus:!1,disabled:!1,indentWithTab:!0,tabSize:2,placeholder:"",autoDestroy:!0,extensions:[J4]}),e5=Symbol("vue-codemirror-global-config"),Bn,t5=function(n){var e=n.onUpdate,t=n.onChange,i=n.onFocus,r=n.onBlur,s=function(a,o){var l={};for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&o.indexOf(c)<0&&(l[c]=a[c]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var u=0;for(c=Object.getOwnPropertySymbols(a);u<c.length;u++)o.indexOf(c[u])<0&&Object.prototype.propertyIsEnumerable.call(a,c[u])&&(l[c[u]]=a[c[u]])}return l}(n,["onUpdate","onChange","onFocus","onBlur"]);return rt.create({doc:s.doc,selection:s.selection,extensions:(Array.isArray(s.extensions)?s.extensions:[s.extensions]).concat([we.updateListener.of(function(a){e(a),a.docChanged&&t(a.state.doc.toString(),a),a.focusChanged&&(a.view.hasFocus?i(a):r(a))})])})},da=function(n){var e=new Al;return{compartment:e,run:function(t){e.get(n.state)?n.dispatch({effects:e.reconfigure(t)}):n.dispatch({effects:Ye.appendConfig.of(e.of(t))})}}},J0=function(n,e){var t=da(n),i=t.compartment,r=t.run;return function(s){var a=i.get(n.state);r(s??a!==e?e:[])}},xc={type:Boolean,default:void 0},n5={autofocus:xc,disabled:xc,indentWithTab:xc,tabSize:Number,placeholder:String,style:Object,autoDestroy:xc,phrases:Object,root:Object,extensions:Array,selection:Object},r5={modelValue:{type:String,default:""}},i5=Object.assign(Object.assign({},n5),r5);(function(n){n.Change="change",n.Update="update",n.Focus="focus",n.Blur="blur",n.Ready="ready",n.ModelUpdate="update:modelValue"})(Bn||(Bn={}));var Os={};Os[Bn.Change]=function(n,e){return!0},Os[Bn.Update]=function(n){return!0},Os[Bn.Focus]=function(n){return!0},Os[Bn.Blur]=function(n){return!0},Os[Bn.Ready]=function(n){return!0};var E_={};E_[Bn.ModelUpdate]=Os[Bn.Change];var s5=Object.assign(Object.assign({},Os),E_),a5=pn({name:"VueCodemirror",props:Object.assign({},i5),emits:Object.assign({},s5),setup:function(n,e){var t=Ea(),i=Ea(),r=Ea(),s=Object.assign(Object.assign({},Z4),fr(e5,{})),a=Qe(function(){var o={};return Object.keys(gt(n)).forEach(function(l){var c;l!=="modelValue"&&(o[l]=(c=n[l])!==null&&c!==void 0?c:s[l])}),o});return $r(function(){var o;i.value=t5({doc:n.modelValue,selection:a.value.selection,extensions:(o=s.extensions)!==null&&o!==void 0?o:[],onFocus:function(c){return e.emit(Bn.Focus,c)},onBlur:function(c){return e.emit(Bn.Blur,c)},onUpdate:function(c){return e.emit(Bn.Update,c)},onChange:function(c,u){c!==n.modelValue&&(e.emit(Bn.Change,c,u),e.emit(Bn.ModelUpdate,c,u))}}),r.value=function(c){return new we(Object.assign({},c))}({state:i.value,parent:t.value,root:a.value.root});var l=function(c){var u=function(){return c.state.doc.toString()},d=da(c).run,h=J0(c,[we.editable.of(!1),rt.readOnly.of(!0)]),f=J0(c,_d.of([_3])),m=da(c).run,p=da(c).run,g=da(c).run,v=da(c).run;return{focus:function(){return c.focus()},getDoc:u,setDoc:function(C){C!==u()&&c.dispatch({changes:{from:0,to:c.state.doc.length,insert:C}})},reExtensions:d,toggleDisabled:h,toggleIndentWithTab:f,setTabSize:function(C){m([rt.tabSize.of(C),Rd.of(" ".repeat(C))])},setPhrases:function(C){p([rt.phrases.of(C)])},setPlaceholder:function(C){g(Pq(C))},setStyle:function(C){C===void 0&&(C={}),v(we.theme({"&":Object.assign({},C)}))}}}(r.value);At(function(){return n.modelValue},function(c){c!==l.getDoc()&&l.setDoc(c)}),At(function(){return n.extensions},function(c){return l.reExtensions(c||[])},{immediate:!0}),At(function(){return a.value.disabled},function(c){return l.toggleDisabled(c)},{immediate:!0}),At(function(){return a.value.indentWithTab},function(c){return l.toggleIndentWithTab(c)},{immediate:!0}),At(function(){return a.value.tabSize},function(c){return l.setTabSize(c)},{immediate:!0}),At(function(){return a.value.phrases},function(c){return l.setPhrases(c||{})},{immediate:!0}),At(function(){return a.value.placeholder},function(c){return l.setPlaceholder(c)},{immediate:!0}),At(function(){return a.value.style},function(c){return l.setStyle(c)},{immediate:!0}),a.value.autofocus&&l.focus(),e.emit(Bn.Ready,{state:i.value,view:r.value,container:t.value})}),Wb(function(){a.value.autoDestroy&&r.value&&function(o){o.destroy()}(r.value)}),function(){return js("div",{class:"v-codemirror",style:{display:"contents"},ref:t})}}}),o5=a5;class ju{constructor(e,t,i,r,s,a,o,l,c,u=0,d){this.p=e,this.stack=t,this.state=i,this.reducePos=r,this.pos=s,this.score=a,this.buffer=o,this.bufferBase=l,this.curContext=c,this.lookAhead=u,this.parent=d}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let r=e.parser.context;return new ju(e,[],t,i,i,0,[],0,r?new Z0(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,r=e&65535,{parser:s}=this.p,a=this.reducePos<this.pos-25;a&&this.setLookAhead(this.pos);let o=s.dynamicPrecedence(r);if(o&&(this.score+=o),i==0){this.pushState(s.getGoto(this.state,r,!0),this.reducePos),r<s.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,a?8:4,!0),this.reduceContext(r,this.reducePos);return}let l=this.stack.length-(i-1)*3-(e&262144?6:0),c=l?this.stack[l-2]:this.p.ranges[0].from,u=this.reducePos-c;u>=2e3&&!(!((t=this.p.parser.nodeSet.types[r])===null||t===void 0)&&t.isAnonymous)&&(c==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=u):this.p.lastBigReductionSize<u&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=c,this.p.lastBigReductionSize=u));let d=l?this.stack[l-1]:0,h=this.bufferBase+this.buffer.length-d;if(r<s.minRepeatTerm||e&131072){let f=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,c,f,h+4,!0)}if(e&262144)this.state=this.stack[l];else{let f=this.stack[l-3];this.state=s.getGoto(f,r,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(r,c)}storeNode(e,t,i,r=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,o=this.buffer.length;if(o==0&&a.parent&&(o=a.bufferBase-a.parent.bufferBase,a=a.parent),o>0&&a.buffer[o-4]==0&&a.buffer[o-1]>-1){if(t==i)return;if(a.buffer[o-2]>=t){a.buffer[o-2]=i;return}}}if(!s||this.pos==i)this.buffer.push(e,t,i,r);else{let a=this.buffer.length;if(a>0&&this.buffer[a-4]!=0){let o=!1;for(let l=a;l>0&&this.buffer[l-2]>i;l-=4)if(this.buffer[l-1]>=0){o=!0;break}if(o)for(;a>0&&this.buffer[a-2]>i;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,r>4&&(r-=4)}this.buffer[a]=e,this.buffer[a+1]=t,this.buffer[a+2]=i,this.buffer[a+3]=r}}shift(e,t,i,r){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=r,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,r,4);else{let s=e,{parser:a}=this.p;(r>this.pos||t<=a.maxNode)&&(this.pos=r,a.stateFlag(s,1)||(this.reducePos=r)),this.pushState(s,i),this.shiftContext(t,i),t<=a.maxNode&&this.buffer.push(t,i,r,4)}}apply(e,t,i,r){e&65536?this.reduce(e):this.shift(e,t,i,r)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(i,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new ju(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new l5(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if(!(i&65536))return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let r=[];for(let s=0,a;s<t.length;s+=2)(a=t[s+1])!=this.state&&this.p.parser.hasAction(a,e)&&r.push(t[s],a);if(this.stack.length<120)for(let s=0;r.length<8&&s<t.length;s+=2){let a=t[s+1];r.some((o,l)=>l&1&&o==a)||r.push(t[s],a)}t=r}let i=[];for(let r=0;r<t.length&&i.length<4;r+=2){let s=t[r+1];if(s==this.state)continue;let a=this.split();a.pushState(s,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(t[r],this.pos),a.reducePos=this.pos,a.score-=200,i.push(a)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(t&65536))return!1;if(!e.validAction(this.state,t)){let i=t>>19,r=t&65535,s=this.stack.length-i*3;if(s<0||e.getGoto(this.stack[s],r,!1)<0){let a=this.findForcedReduction();if(a==null)return!1;t=a}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(r,s)=>{if(!t.includes(r))return t.push(r),e.allActions(r,a=>{if(!(a&393216))if(a&65536){let o=(a>>19)-s;if(o>1){let l=a&65535,c=this.stack.length-o*3;if(c>=0&&e.getGoto(this.stack[c],l,!1)>=0)return o<<19|65536|l}}else{let o=i(a,s+1);if(o!=null)return o}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new Z0(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Z0{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class l5{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class Wu{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Wu(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Wu(this.stack,this.pos,this.index)}}function Rc(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let i=0,r=0;i<n.length;){let s=0;for(;;){let a=n.charCodeAt(i++),o=!1;if(a==126){s=65535;break}a>=92&&a--,a>=34&&a--;let l=a-32;if(l>=46&&(l-=46,o=!0),s+=l,o)break;s*=46}t?t[r++]=s:t=new e(s)}return t}class Yc{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const eb=new Yc;class c5{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=eb,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,r=this.rangeIndex,s=this.pos+e;for(;s<i.from;){if(!r)return null;let a=this.ranges[--r];s-=i.from-a.to,i=a}for(;t<0?s>i.to:s>=i.to;){if(r==this.ranges.length-1)return null;let a=this.ranges[++r];s+=a.from-i.to,i=a}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,r;if(t>=0&&t<this.chunk.length)i=this.pos+e,r=this.chunk.charCodeAt(t);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(i=s,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let a=this.rangeIndex,o=this.range;for(;o.to<=i;)o=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>o.to&&(this.chunk2=this.chunk2.slice(0,o.to-i)),r=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),r}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=eb,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(i+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return i}}class Ma{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;u5(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}Ma.prototype.contextual=Ma.prototype.fallback=Ma.prototype.extend=!1;Ma.prototype.fallback=Ma.prototype.extend=!1;function u5(n,e,t,i,r,s){let a=0,o=1<<i,{dialect:l}=t.p.parser;e:for(;o&n[a];){let c=n[a+1];for(let f=a+3;f<c;f+=2)if((n[f+1]&o)>0){let m=n[f];if(l.allows(m)&&(e.token.value==-1||e.token.value==m||d5(m,e.token.value,r,s))){e.acceptToken(m);break}}let u=e.next,d=0,h=n[a+2];if(e.next<0&&h>d&&n[c+h*3-3]==65535){a=n[c+h*3-1];continue e}for(;d<h;){let f=d+h>>1,m=c+f+(f<<1),p=n[m],g=n[m+1]||65536;if(u<p)h=f;else if(u>=g)d=f+1;else{a=n[m+2],e.advance();continue e}}break}}function tb(n,e,t){for(let i=e,r;(r=n[i])!=65535;i++)if(r==t)return i-e;return-1}function d5(n,e,t,i){let r=tb(t,i,e);return r<0||tb(t,i,n)<r}const ir=typeof process<"u"&&process.env&&/\bparse\b/.test({}.LOG);let Uh=null;function nb(n,e,t){let i=n.cursor(dn.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(n.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:n.length}}class h5{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?nb(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?nb(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],r=this.index[t];if(r==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=i.children[r],a=this.start[t]+i.positions[r];if(a>e)return this.nextStart=a,null;if(s instanceof nn){if(a==e){if(a<this.safeFrom)return null;let o=a+s.length;if(o<=this.safeTo){let l=s.prop(tt.lookAhead);if(!l||o+l<this.fragment.to)return s}}this.index[t]++,a+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(a),this.index.push(0))}else this.index[t]++,this.nextStart=a+s.length}}}class f5{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new Yc)}getActions(e){let t=0,i=null,{parser:r}=e.p,{tokenizers:s}=r,a=r.stateSlot(e.state,3),o=e.curContext?e.curContext.hash:0,l=0;for(let c=0;c<s.length;c++){if(!(1<<c&a))continue;let u=s[c],d=this.tokens[c];if(!(i&&!u.fallback)&&((u.contextual||d.start!=e.pos||d.mask!=a||d.context!=o)&&(this.updateCachedToken(d,u,e),d.mask=a,d.context=o),d.lookAhead>d.end+25&&(l=Math.max(d.lookAhead,l)),d.value!=0)){let h=t;if(d.extended>-1&&(t=this.addActions(e,d.extended,d.end,t)),t=this.addActions(e,d.value,d.end,t),!u.extend&&(i=d,t>h))break}}for(;this.actions.length>t;)this.actions.pop();return l&&e.setLookAhead(l),!i&&e.pos==this.stream.end&&(i=new Yc,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Yc,{pos:i,p:r}=e;return t.start=i,t.end=Math.min(i+1,r.stream.end),t.value=i==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,i){let r=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(r,e),i),e.value>-1){let{parser:s}=i.p;for(let a=0;a<s.specialized.length;a++)if(s.specialized[a]==e.value){let o=s.specializers[a](this.stream.read(e.start,e.end),i);if(o>=0&&i.p.parser.dialect.allows(o>>1)){o&1?e.extended=o>>1:e.value=o>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,t,i,r){for(let s=0;s<r;s+=3)if(this.actions[s]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=i,r}addActions(e,t,i,r){let{state:s}=e,{parser:a}=e.p,{data:o}=a;for(let l=0;l<2;l++)for(let c=a.stateSlot(s,l?2:1);;c+=3){if(o[c]==65535)if(o[c+1]==1)c=yi(o,c+2);else{r==0&&o[c+1]==2&&(r=this.putAction(yi(o,c+2),t,i,r));break}o[c]==t&&(r=this.putAction(yi(o,c+1),t,i,r))}return r}}class m5{constructor(e,t,i,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new c5(t,r),this.tokens=new f5(e,this.stream),this.topTerm=e.top[1];let{from:s}=r[0];this.stacks=[ju.start(this,e.top[0],s)],this.fragments=i.length&&this.stream.end-s>e.bufferLength*4?new h5(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],r,s;if(this.bigReductionCount>300&&e.length==1){let[a]=e;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<e.length;a++){let o=e[a];for(;;){if(this.tokens.mainToken=null,o.pos>t)i.push(o);else{if(this.advanceStack(o,i,e))continue;{r||(r=[],s=[]),r.push(o);let l=this.tokens.getMainToken(o);s.push(l.value,l.end)}}break}}if(!i.length){let a=r&&g5(r);if(a)return ir&&console.log("Finish with "+this.stackID(a)),this.stackToTree(a);if(this.parser.strict)throw ir&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&r){let a=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,s,i);if(a)return ir&&console.log("Force-finish "+this.stackID(a)),this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(i.length>a)for(i.sort((o,l)=>l.score-o.score);i.length>a;)i.pop();i.some(o=>o.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let a=0;a<i.length-1;a++){let o=i[a];for(let l=a+1;l<i.length;l++){let c=i[l];if(o.sameState(c)||o.buffer.length>500&&c.buffer.length>500)if((o.score-c.score||o.buffer.length-c.buffer.length)>0)i.splice(l--,1);else{i.splice(a--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let a=1;a<i.length;a++)i[a].pos<this.minStackPos&&(this.minStackPos=i[a].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let r=e.pos,{parser:s}=this,a=ir?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let c=e.curContext&&e.curContext.tracker.strict,u=c?e.curContext.hash:0;for(let d=this.fragments.nodeAt(r);d;){let h=this.parser.nodeSet.types[d.type.id]==d.type?s.getGoto(e.state,d.type.id):-1;if(h>-1&&d.length&&(!c||(d.prop(tt.contextHash)||0)==u))return e.useNode(d,h),ir&&console.log(a+this.stackID(e)+` (via reuse of ${s.getName(d.type.id)})`),!0;if(!(d instanceof nn)||d.children.length==0||d.positions[0]>0)break;let f=d.children[0];if(f instanceof nn&&d.positions[0]==0)d=f;else break}}let o=s.stateSlot(e.state,4);if(o>0)return e.reduce(o),ir&&console.log(a+this.stackID(e)+` (via always-reduce ${s.getName(o&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let c=0;c<l.length;){let u=l[c++],d=l[c++],h=l[c++],f=c==l.length||!i,m=f?e:e.split(),p=this.tokens.mainToken;if(m.apply(u,d,p?p.start:m.pos,h),ir&&console.log(a+this.stackID(m)+` (via ${u&65536?`reduce of ${s.getName(u&65535)}`:"shift"} for ${s.getName(d)} @ ${r}${m==e?"":", split"})`),f)return!0;m.pos>r?t.push(m):i.push(m)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return rb(e,t),!0}}runRecovery(e,t,i){let r=null,s=!1;for(let a=0;a<e.length;a++){let o=e[a],l=t[a<<1],c=t[(a<<1)+1],u=ir?this.stackID(o)+" -> ":"";if(o.deadEnd&&(s||(s=!0,o.restart(),ir&&console.log(u+this.stackID(o)+" (restarted)"),this.advanceFully(o,i))))continue;let d=o.split(),h=u;for(let f=0;d.forceReduce()&&f<10&&(ir&&console.log(h+this.stackID(d)+" (via force-reduce)"),!this.advanceFully(d,i));f++)ir&&(h=this.stackID(d)+" -> ");for(let f of o.recoverByInsert(l))ir&&console.log(u+this.stackID(f)+" (via recover-insert)"),this.advanceFully(f,i);this.stream.end>o.pos?(c==o.pos&&(c++,l=0),o.recoverByDelete(l,c),ir&&console.log(u+this.stackID(o)+` (via recover-delete ${this.parser.getName(l)})`),rb(o,i)):(!r||r.score<o.score)&&(r=o)}return r}stackToTree(e){return e.close(),nn.build({buffer:Wu.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Uh||(Uh=new WeakMap)).get(e);return t||Uh.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function rb(n,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==n.pos&&i.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class p5{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class zu extends JC{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let o=0;o<e.repeatNodeCount;o++)t.push("");let i=Object.keys(e.topRules).map(o=>e.topRules[o][1]),r=[];for(let o=0;o<t.length;o++)r.push([]);function s(o,l,c){r[o].push([l,l.deserialize(String(c))])}if(e.nodeProps)for(let o of e.nodeProps){let l=o[0];typeof l=="string"&&(l=tt[l]);for(let c=1;c<o.length;){let u=o[c++];if(u>=0)s(u,l,o[c++]);else{let d=o[c+-u];for(let h=-u;h>0;h--)s(o[c++],l,d);c++}}}this.nodeSet=new Lp(t.map((o,l)=>nr.define({name:l>=this.minRepeatTerm?void 0:o,id:l,props:r[l],top:i.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=KC;let a=Rc(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let o=0;o<this.specializerSpecs.length;o++)this.specialized[o]=this.specializerSpecs[o].term;this.specializers=this.specializerSpecs.map(ib),this.states=Rc(e.states,Uint32Array),this.data=Rc(e.stateData),this.goto=Rc(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(o=>typeof o=="number"?new Ma(a,o):o),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let r=new m5(this,e,t,i);for(let s of this.wrappers)r=s(r,e,t,i);return r}getGoto(e,t,i=!1){let r=this.goto;if(t>=r[0])return-1;for(let s=r[t+1];;){let a=r[s++],o=a&1,l=r[s++];if(o&&i)return l;for(let c=s+(a>>1);s<c;s++)if(r[s]==e)return l;if(o)return-1}}hasAction(e,t){let i=this.data;for(let r=0;r<2;r++)for(let s=this.stateSlot(e,r?2:1),a;;s+=3){if((a=i[s])==65535)if(i[s+1]==1)a=i[s=yi(i,s+2)];else{if(i[s+1]==2)return yi(i,s+2);break}if(a==t||a==0)return yi(i,s+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,i=>i==t?!0:null)}allActions(e,t){let i=this.stateSlot(e,4),r=i?t(i):void 0;for(let s=this.stateSlot(e,1);r==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=yi(this.data,s+2);else break;r=t(yi(this.data,s+1))}return r}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=yi(this.data,i+2);else break;if(!(this.data[i+2]&1)){let r=this.data[i+1];t.some((s,a)=>a&1&&s==r)||t.push(this.data[i],r)}}return t}configure(e){let t=Object.assign(Object.create(zu.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let r=e.tokenizers.find(s=>s.from==i);return r?r.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,r)=>{let s=e.specializers.find(o=>o.from==i.external);if(!s)return i;let a=Object.assign(Object.assign({},i),{external:s.to});return t.specializers[r]=ib(a),a})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let s of e.split(" ")){let a=t.indexOf(s);a>=0&&(i[a]=!0)}let r=null;for(let s=0;s<t.length;s++)if(!i[s])for(let a=this.dialects[t[s]],o;(o=this.data[a++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[o]=1;return new p5(e,i,r)}static deserialize(e){return new zu(e)}}function yi(n,e){return n[e]|n[e+1]<<16}function g5(n){let e=null;for(let t of n){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function ib(n){if(n.external){let e=n.extend?1:0;return(t,i)=>n.external(t,i)<<1|e}return n.get}const v5=ZC({String:Y.string,Number:Y.number,"True False":Y.bool,PropertyName:Y.propertyName,Null:Y.null,", :":Y.separator,"[ ]":Y.squareBracket,"{ }":Y.brace}),y5=zu.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#ClOOQO'#Cr'#CrQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CtOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59W,59WO!iQPO,59WOVQPO,59QOqQPO'#CmO!nQPO,59`OOQO1G.k1G.kOVQPO'#CnO!vQPO,59aOOQO1G.r1G.rOOQO1G.l1G.lOOQO,59X,59XOOQO-E6k-E6kOOQO,59Y,59YOOQO-E6l-E6l",stateData:"#O~OeOS~OQSORSOSSOTSOWQO_ROgPO~OVXOgUO~O^[O~PVO[^O~O]_OVhX~OVaO~O]bO^iX~O^dO~O]_OVha~O]bO^ia~O",goto:"!kjPPPPPPkPPkqwPPPPk{!RPPP!XP!e!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"⚠ JsonText True False Null Number String } { Object Property PropertyName : , ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",14,"["],["closedBy",8,"}",15,"]"]],propSources:[v5],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oe~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Og~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zO]~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yO[~~'OO_~~'TO^~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),b5=Mu.define({name:"json",parser:y5.configure({props:[rS.add({Object:S0({except:/^\s*\}/}),Array:S0({except:/^\s*\]/})}),sS.add({"Object Array":BU})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function E5(){return new RU(b5)}const w5="#e5c07b",sb="#e06c75",C5="#56b6c2",S5="#ffffff",Qc="#abb2bf",Rm="#7d8799",_5="#61afef",x5="#98c379",ab="#d19a66",R5="#c678dd",A5="#21252b",ob="#2c313a",lb="#282c34",Hh="#353a42",k5="#3E4451",cb="#528bff",D5=we.theme({"&":{color:Qc,backgroundColor:lb},".cm-content":{caretColor:cb},".cm-cursor, .cm-dropCursor":{borderLeftColor:cb},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:k5},".cm-panels":{backgroundColor:A5,color:Qc},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:lb,color:Rm,border:"none"},".cm-activeLineGutter":{backgroundColor:ob},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Hh},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Hh,borderBottomColor:Hh},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:ob,color:Qc}}},{dark:!0}),M5=Il.define([{tag:Y.keyword,color:R5},{tag:[Y.name,Y.deleted,Y.character,Y.propertyName,Y.macroName],color:sb},{tag:[Y.function(Y.variableName),Y.labelName],color:_5},{tag:[Y.color,Y.constant(Y.name),Y.standard(Y.name)],color:ab},{tag:[Y.definition(Y.name),Y.separator],color:Qc},{tag:[Y.typeName,Y.className,Y.number,Y.changed,Y.annotation,Y.modifier,Y.self,Y.namespace],color:w5},{tag:[Y.operator,Y.operatorKeyword,Y.url,Y.escape,Y.regexp,Y.link,Y.special(Y.string)],color:C5},{tag:[Y.meta,Y.comment],color:Rm},{tag:Y.strong,fontWeight:"bold"},{tag:Y.emphasis,fontStyle:"italic"},{tag:Y.strikethrough,textDecoration:"line-through"},{tag:Y.link,color:Rm,textDecoration:"underline"},{tag:Y.heading,fontWeight:"bold",color:sb},{tag:[Y.atom,Y.bool,Y.special(Y.variableName)],color:ab},{tag:[Y.processingInstruction,Y.string,Y.inserted],color:x5},{tag:Y.invalid,color:S5}]),P5=[D5,fS(M5)];const T5={key:0,class:"CorruptedDataPage"},I5={class:"CorruptedDataPageErrorContainer"},O5={class:"CorruptedDataPageInfos"},N5=q("br",null,null,-1),F5={class:"CorruptedDataPageFixupList"},L5={class:"CorruptedDataPageActions"},B5=Object.assign({name:"CorruptedDataPage"},{__name:"index",setup(n){const e=gM(),{t}=_t(),i=it({currentErrorIndex:0,currentErrorSourceCode:""}),r=Qe(()=>{const a=G.state.selectedCharacter.corrupted,o=a[i.currentErrorIndex];return{corruptionData:a,currentError:o}}),s={reset(){i.currentErrorIndex=0,r.value.currentError&&(i.currentErrorSourceCode=JSON.stringify(r.value.currentError.item,null,2)),G.state.selectedCharacter.softReload(),r.value.currentError||(e.push({name:"Home"}),Ut.actions.success(t("MCD.DataCorruption.Fixup.success")))}};return At(()=>i.currentErrorIndex,()=>{i.currentErrorSourceCode=JSON.stringify(r.value.currentError.item,null,2)}),wl(()=>{i.currentErrorSourceCode=JSON.stringify(r.value.currentError.item,null,2)}),(a,o)=>r.value.currentError?(O(),H("section",T5,[q("h1",null,pe(F(t)("MCD.DataCorruption.Page.title")),1),q("div",I5,[q("h2",null,pe(F(t)("MCD.DataCorruption.Page.errorCount",[i.currentErrorIndex+1,r.value.corruptionData.length])),1),be(F(o5),{modelValue:i.currentErrorSourceCode,style:{flex:"0 0 calc(50% - 8px)",height:"420px"},tabSize:2,extensions:[F(E5)(),F(P5)],disabled:!0},null,8,["modelValue","extensions"]),q("div",O5,[q("p",null,[Lt(pe(r.value.currentError.error.message),1),N5,Lt(" at line "+pe(r.value.currentError.getLine()),1)]),q("h2",null,pe(F(t)("MCD.DataCorruption.Fixup.title")),1),q("ol",F5,[(O(!0),H(He,null,ht(r.value.currentError.getFixup(),(l,c)=>(O(),H("li",{key:c},[be(Nr,{modifiers:{danger:!0},onClick:()=>{l.apply(),s.reset()}},{default:Ve(()=>[Lt(pe(l.label),1)]),_:2},1032,["onClick"])]))),128))]),q("div",L5,[i.currentErrorIndex>0?(O(),ze(Nr,{key:0,modifiers:{secondary:!0},onClick:o[0]||(o[0]=l=>i.currentErrorIndex-=1)},{default:Ve(()=>[Lt(pe(F(t)("MCD.DataCorruption.Page.prevButtonLabel")),1)]),_:1})):Re("",!0),i.currentErrorIndex<r.value.corruptionData.length-1?(O(),ze(Nr,{key:1,modifiers:{secondary:!0},onClick:o[1]||(o[1]=l=>i.currentErrorIndex+=1)},{default:Ve(()=>[Lt(pe(F(t)("MCD.DataCorruption.Page.nextButtonLabel")),1)]),_:1})):Re("",!0)])])])])):Re("",!0)}}),$5=[{path:"/",name:"Home",component:jB},{path:"/storage-chest",name:"StorageChest",component:KB},{path:"/ancient-hunts",name:"AncientHunts",component:o$},{path:"/corrupted-data",name:"CorruptedData",component:B5}],q5=mM({history:VD(),routes:$5});function U5(n){return n.config.globalProperties.GenerateModifiers=(e,t={})=>Object.entries(t).filter(([,i])=>!!i).reduce((i,[r])=>`${i} ${e}--${r}`,e),n}function H5(n){return n.config.globalProperties.dateFormat=(e,t)=>hE.format(e,t),n}const io=QR(xF);io.directive("icon",{created(n,e){n.classList.add(`icon-${e.arg}`)}});io.use(q5);io.use(Ce);io.use(U5);io.use(H5);io.mount("#app");
